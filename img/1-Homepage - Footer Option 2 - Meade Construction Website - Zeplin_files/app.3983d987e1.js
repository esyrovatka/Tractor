(()=>{var e,t,a,n,i,s,r,o,d=Array(84).concat([(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});class n{constructor(e){var t;const{id:a,label:i,accelerator:s,type:r,enabled:o,checked:d,visible:l,role:c,submenu:u}=e;this.id=a,this.label=i,this.accelerator=s,this.type=r,this.enabled=o,this.checked=d,this.visible=l,this.role=c,this.submenu=null!==(t=null==u?void 0:u.map((e=>new n(e))))&&void 0!==t?t:null}}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.PROJECT_SUBMENU="PROJECT",e.NEW_PROJECT="NEW_PROJECT",e.OPEN_RECENT_PROJECT_SUBMENU="OPEN_RECENT_PROJECT_SUBMENU",e.OPEN_RECENT_PROJECT="OPEN_RECENT_PROJECT",e.STYLEGUIDE_SUBMENU="STYLEGUIDE",e.NEW_STYLEGUIDE="NEW_STYLEGUIDE",e.OPEN_RECENT_STYLEGUIDE_SUBMENU="OPEN_RECENT_STYLEGUIDE_SUBMENU",e.OPEN_RECENT_STYLEGUIDE="OPEN_RECENT_STYLEGUIDE",e.EDIT_SUBMENU="EDIT",e.DELETE_PROJECT="DELETE_PROJECT",e.DELETE_STYLEGUIDE="DELETE_STYLEGUIDE",e.LEAVE_PROJECT="LEAVE_PROJECT",e.LEAVE_STYLEGUIDE="LEAVE_STYLEGUIDE",e.RENAME_SCREEN="RENAME_SCREEN",e.DELETE_SCREEN="DELETE_SCREEN",e.SET_AS_THUMBNAIL="SET_AS_THUMBNAIL",e.ADD_TAG="ADD_TAG",e.MANAGE_TAGS="MANAGE_TAGS",e.VIEW_SUBMENU="VIEW",e.ZOOM_IN="ZOOM_IN",e.ZOOM_OUT="ZOOM_OUT",e.ACTUAL_SIZE="ACTUAL_SIZE",e.RESET_APP_ZOOM_FACTOR="RESET_APP_ZOOM_FACTOR",e.OPEN_POPOUT="OPEN_POPOUT",e.WORKSPACE="WORKSPACE",e.DASHBOARD="DASHBOARD",e.STYLEGUIDE="STYLEGUIDE",e.JUMP_TO_SCREEN="JUMP_TO_SCREEN",e.EXPAND_ALL_SECTIONS="EXPAND_ALL_SECTIONS",e.COLLAPSE_ALL_SECTIONS="COLLAPSE_ALL_SECTIONS",e.SHOW_VERSIONS="SHOW_VERSIONS",e.HIDE_VERSIONS="HIDE_VERSIONS",e.SHOW_BADGE="SHOW_BADGE",e.TOGGLE_FULL_SCREEN="TOGGLE_FULL_SCREEN",e.RELOAD="RELOAD",e.RELOAD_IGNORING_CACHE="RELOAD_IGNORING_CACHE",e.TOGGLE_DEV_TOOLS="TOGGLE_DEV_TOOLS",e.TOGGLE_DEV_TOOLS_HOST="TOGGLE_DEV_TOOLS_HOST",e.WINDOW_SUBMENU="WINDOW",e.MINIMIZE="MINIMIZE",e.CLOSE="CLOSE",e.HELP_SUBMENU="HELP",e.CHECK_FOR_UPDATES="CHECK_FOR_UPDATES",e.CHECK_FOR_PLUGIN_UPDATES="CHECK_FOR_PLUGIN_UPDATES",e.INSTALL_UPDATES_AUTOMATICALLY="INSTALL_UPDATES_AUTOMATICALLY",e.INSTALL_FIGMA_PLUGIN="INSTALL_FIGMA_PLUGIN",e.INSTALL_PHOTOSHOP_PLUGIN="INSTALL_PHOTOSHOP_PLUGIN",e.SHOW_LOGS_IN_EXPLORER="SHOW_LOGS_IN_EXPLORER",e.RESET_SUGGESTED_COLORS="RESET_SUGGESTED_COLORS",e.RESET_SUGGESTED_TEXT_STYLES="RESET_SUGGESTED_TEXT_STYLES",e.CLEAR_CACHE_AND_RESTART="CLEAR_CACHE_AND_RESTART",e.RESET_ZEPLIN="RESET_ZEPLIN",e.OPEN_HELP_CENTER="OPEN_HELP_CENTER",e.ABOUT_ZEPLIN="ABOUT_ZEPLIN"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(85),i=a(84);function s(){return new i.default({id:n.default.WINDOW_SUBMENU,label:"Window",submenu:[{role:"minimize"},{role:"close"}]})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(85),i=a(84),s=a(88);const r="IDLE",o={[r]:"Check for updates",["CHECKING_FOR_UPDATES"]:"Checking for updates",["DOWNLOADING_UPDATES"]:"Downloading updates"},d="DISABLED",l="IDLE",c={[l]:"Check for plugin updates",["CHECKING_FOR_UPDATES"]:"Checking for plugin updates",["DOWNLOADING_UPDATES"]:"Downloading plugin updates"};function u({appUpdaterState:e,pluginUpdaterState:t}){const a={id:n.default.CHECK_FOR_UPDATES,label:o[e],enabled:e===r};return t===d?[a]:[a,{id:n.default.CHECK_FOR_PLUGIN_UPDATES,label:c[t],enabled:t===l}]}function p({installUpdatesAutomatically:e,appUpdaterState:t,pluginUpdaterState:a}){return new i.default({id:n.default.HELP_SUBMENU,label:"Help",submenu:[...u({appUpdaterState:t,pluginUpdaterState:a}),{id:n.default.INSTALL_UPDATES_AUTOMATICALLY,label:"Install updates automatically",type:"checkbox",checked:e},s.default,{id:n.default.INSTALL_FIGMA_PLUGIN,label:"Install Figma plugin"},{id:n.default.INSTALL_PHOTOSHOP_PLUGIN,label:"Install Adobe Photoshop plugin"},s.default,{id:n.default.SHOW_LOGS_IN_EXPLORER,label:"Show logs in Explorer"},{id:n.default.RESET_SUGGESTED_COLORS,label:"Reset suggested colors"},{id:n.default.RESET_SUGGESTED_TEXT_STYLES,label:"Reset suggested text styles"},{id:n.default.CLEAR_CACHE_AND_RESTART,label:"Clear cache and restart"},{id:n.default.RESET_ZEPLIN,label:"Reset Zeplin"},s.default,{id:n.default.OPEN_HELP_CENTER,label:"Open help center"},s.default,{id:n.default.ABOUT_ZEPLIN,label:"About Zeplin"}]})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={type:"separator"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(85),i=a(88);function s(e){return e?[i.default,{id:n.default.RESET_APP_ZOOM_FACTOR,label:"Reset app zoom factor"}]:[]}function r(e,t){return[{id:n.default.SHOW_BADGE,label:"Show badge",type:"checkbox",checked:e},...s(t),i.default,{id:n.default.TOGGLE_FULL_SCREEN,label:"Toggle full screen",role:"toggleFullScreen"},i.default,{id:n.default.RELOAD,label:"Reload",accelerator:"CmdOrCtrl+R"},{id:n.default.RELOAD_IGNORING_CACHE,label:"Reload ignoring cache",accelerator:"CmdOrCtrl+Shift+R"},{id:n.default.TOGGLE_DEV_TOOLS,label:"Toggle dev tools",accelerator:"CmdOrCtrl+Shift+I"},{id:n.default.TOGGLE_DEV_TOOLS_HOST,label:"Toggle dev tools (host)",role:"toggleDevTools"}]}},(e,t,a)=>{"use strict";a.r(t);var n=a(6),i=a(82),s=a(5);n.default&&s.supports.SPA&&(n.default.ipcRenderer.on("close-all-banners",(function(){i.closeBanner("appUpdate"),i.closeBanner("pluginUpdate")})),n.default.ipcRenderer.on("app-update-downloaded",((e,t)=>{i.closeBanner("appUpdate"),i.show({group:"appUpdate",content:"New version of Zeplin, "+t+" is here. <a href='#'>Restart</a> now to start using it!",contentType:"html",type:"info",bodyCallbacks:{a(e){e.preventDefault(),i.closeBanner("appUpdate"),n.default.ipcRenderer.send("restart-app")}},bannerCloseText:"Remind me later",closeCallback(){n.default.ipcRenderer.send("remind-update-later",t)}})})),n.default.ipcRenderer.on("plugin-update-downloaded",((e,t)=>{var a;t.plugin&&t.panel?a="plugin ("+t.plugin.remote+") and panel ("+t.panel.remote+")":t.plugin?a="plugin ("+t.plugin.remote+")":t.panel&&(a="panel ("+t.panel.remote+")"),i.closeBanner("pluginUpdate"),i.show({group:"pluginUpdate",content:"New version of Photoshop "+a+" is here. <a href='#'>Install</a> now to start using it!",contentType:"html",type:"info",bodyCallbacks:{a(e){e.preventDefault(),i.closeBanner("pluginUpdate"),n.default.ipcRenderer.send("install-plugin-update",t)}},bannerCloseText:"Remind me later",closeCallback(){n.default.ipcRenderer.send("remind-plugin-install-later",t)}})})))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,()=>{},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t);var n=a(93),i=a(104),s=a(262),r=a(13),o=a(9),d=a(76),l=a(434),c=a(435),u=a(5),p=a(11),f=a(1046),S=(a(652),a(1047)),h=a(1079),E=a(264),g=a(1084),O=a(1200),T=a(1201),m=a(1202),_=a(1249),b=a(1250),C=a(1251);a(1252),a(1253),a(1255),a(90),a(1257),a(1258),a(1266),a(1267);const A=["projects","styleguides","focusedBarrels","oid","organizations","organizationProfiles","barrel","project","linkedStyleguides","ancestors","versions","dots"];function y(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}async function I(){const e=await(u.isWindowsApp&&r.userPrefs.get("lastAppLocation")),t=function(){const e=new URLSearchParams(location.search).get("uri");if(!e)return null;try{const t=new URL(e);if(u.isWindowsApp&&t.pathname.startsWith("//export-xd")&&!u.supports.xdPlugin)return d.create({title:"Update Zeplin to export with XD plugin",message:"XD plugin requires the latest version of the Zeplin app, please try checking for an update.",done:{name:"UPDATE",cb(){location.assign(`${p.ZPL_PROTOCOL}//update`)}},cancel:{name:"CANCEL"}}),null;return(0,i.convertURItoWebURL)(t)||null}catch(t){return null}}()||e;t?history.replaceState(null,null,t):await(0,h.goToLastOrganizationWorkspace)()}o.default.get("userToken")?(E.default.initializeStores(),(0,g.default)(),(0,S.registerProjectRouteHandlers)(),(0,h.registerWorkspaceRouteHandlers)(),(0,m.registerWorkspaceSocketBindings)(),(0,T.default)(),(0,_.registerSSOTokenExpiration)(),(0,b.registerInvitePopupHandlers)(),(0,C.registerSentryToDispatcherAndStores)(),(0,f.setMixpanelGroupProperties)(),n.render(n.h(c.default),document.body),function(){if("apiData"in Zeplin){const e=Zeplin.apiData,{projects:t,styleguides:a,focusedBarrels:n,oid:i,organizations:r,organizationProfiles:o,barrel:d,project:l,linkedStyleguides:c=[],ancestors:u,versions:p,dots:f}=e,S=y(e,A);s.default.hydrateEmbeddedData({config:Zeplin.apiConfig,projects:t,styleguides:a,focusedBarrels:n,oid:i,organizations:r,organizationProfiles:o,project:l,linkedStyleguides:c,versions:p,dots:f,styleguide:d,ancestors:u,user:Zeplin.user}),Zeplin.apiData=S}else s.default.hydrateEmbeddedData({config:Zeplin.apiConfig,user:Zeplin.user})}(),(0,O.default)(),async function(){await I(),function(){if(!/\/project\/([\da-f]{24})\/screen\/([\da-f]{24})\/stage/.test(location.pathname))return;const{"open-in-browser":[e]=[]}=(0,i.parseUrlParams)(location.search);if("true"===e){const e=location.href.replace(location.search,"");history.replaceState(null,"",e)}else mixpanel.master.track("Opened screen in stage mode")}(),window.addEventListener("online",(()=>{o.default.get("userToken")&&(s.default.reset(),setTimeout((async()=>{try{await l.default.reload()}catch(e){location.reload()}}),1e3))})),l.default.onSetBackButton=s.default.setBackButton,l.default.onResetBackButton=s.default.resetBackButton,l.default.start(document.body)}()):Zeplin.requireLogin(),l.default.route(/.*/,(e=>(0,f.trackVisitiedAppEvent)(e.url.pathname)))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(263),i=a(264),s=a(433);const r={loadWorkspaceData({organizations:e,organizationProfiles:t,organization:a,focusedBarrels:s,projects:r,styleguides:o,dialogDismissParams:d,oid:l,workspaceMainDataLoading:c,allProjectsLoaded:u,archivedProjectIds:p,restrictedMemberProjectIds:f}){i.default.dispatcher.dispatch({type:n.default.LOAD_WORKSPACE_DATA,organizations:e,organizationProfiles:t,organization:a,focusedBarrels:s,projects:r,styleguides:o,dialogDismissParams:d,oid:l,workspaceMainDataLoading:c,allProjectsLoaded:u,archivedProjectIds:p,restrictedMemberProjectIds:f})},reset(){i.default.dispatcher.dispatch({type:n.default.RESET})},hydrateEmbeddedData({projects:e,styleguides:t,focusedBarrels:a,oid:s,organizations:r,organizationProfiles:o,styleguide:d,project:l,linkedStyleguides:c,ancestors:u,organization:p,user:f,config:S,accounts:h,accountId:E,accountDetail:g}){i.default.dispatcher.dispatch({type:n.default.HYDRATE_EMBEDDED_DATA,projects:e,styleguides:t,focusedBarrels:a,oid:s,organizations:r,organizationProfiles:o,styleguide:d,project:l,linkedStyleguides:c,ancestors:u,organization:p,user:f,config:S,accounts:h,accountId:E,accountDetail:g})},initRecentlyLoadedBarrels({projects:e,styleguides:t}){i.default.dispatcher.dispatch({type:n.default.INIT_RECENTLY_LOADED_BARRELS,projects:e,styleguides:t})},resetBackButton(){i.default.dispatcher.dispatch({type:n.default.RESET_BACK_BUTTON})},setBackButton(e,t){i.default.dispatcher.dispatch({type:n.default.SET_BACK_BUTTON,label:e,link:t})},setPage(e,t){i.default.dispatcher.dispatch({type:n.default.SET_PAGE,page:e,nextViewHint:t})},ssoTokenExpired(e){const{organizations:t}=i.default.OrganizationStore.getState();if(!t)return void Zeplin.logout();const a=t.find((t=>t.sso&&t.sso.provider.identifier===e)),{sessionDuration:r}=a.sso;i.default.dispatcher.dispatch({type:n.default.SSO_TOKEN_EXPIRED,frequency:(0,s.turnMinutesIntoHumanReadableInterval)(r)})},unsetSSOTokenExpired(){i.default.dispatcher.dispatch({type:n.default.UNSET_SSO_TOKEN_EXPIRED})},loginSSO(){i.default.dispatcher.dispatch({type:n.default.LOGIN_SSO})},setNotificationSettingsDialogVisibility(e){i.default.dispatcher.dispatch({type:n.default.SET_NOTIFICATION_SETTINGS_DIALOG_VISIBILITY,visible:e})}}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.LOAD_WORKSPACE_DATA="app/loadWorkspaceData",e.RESET="app/reset",e.HYDRATE_EMBEDDED_DATA="app/hydrateEmbeddedData",e.INIT_RECENTLY_LOADED_BARRELS="app/initRecentlyLoadedBarrels",e.RESET_BACK_BUTTON="app/resetBackButton",e.SET_BACK_BUTTON="app/setBackButton",e.SET_SHORTLINK="app/setShortlink",e.SET_PAGE="app/setPage",e.SSO_TOKEN_EXPIRED="app/ssoTokenExpired",e.UNSET_SSO_TOKEN_EXPIRED="app/unsetSSOTokenExpired",e.LOGIN_SSO="app/loginSSO",e.SET_NOTIFICATION_SETTINGS_DIALOG_VISIBILITY="app/setNotificationSettingsDialogVisibility"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var n=a(265),i=a(268),s=a(269),r=a(283),o=a(288),d=a(292),l=a(294),c=a(296),u=a(320),p=a(322),f=a(323),S=a(333),h=a(335),E=a(355),g=a(356),O=a(358),T=a(360),m=a(362),_=a(366),b=a(368),C=a(371),A=a(372),y=a(373),I=a(374),N=a(376),P=a(377),D=a(379),R=a(381),v=a(382),L=a(385),j=a(388),U=a(389),w=a(391),k=a(394),M=a(412),V=a(414),F=a(419),G=a(421),B=a(422),x=a(423),W=a(424),z=a(426),H=a(428),Y=a(430),q=a(431);const K=new class{constructor(){this.dispatcher=new n.Dispatcher,this.stores={},this.getCombinedState=()=>Object.keys(this.stores).reduce(((e,t)=>{const a=this.stores[t],n=a.getState();return Object.assign(Object.assign({},e),{[a.constructor.name]:n})}),{})}createStore(e){const t=new e(this.dispatcher),a=t.getDispatchToken();return this.stores[a]=t,t}shadowFluxStore(e,t){const a=this[e].getDispatchToken();this.stores[a]&&(this.dispatcher.unregister(a),delete this.stores[a],delete this[e],this[e]={getState:()=>t.getState()[e],getDispatchToken:()=>"Shadowed_ID"})}initializeStores(e){e?e(this):(this.ActivitiesViewStore=this.createStore(s.default),this.AppStore=this.createStore(r.default),this.AppsStore=this.createStore(o.default),this.BarrelStore=this.createStore(d.default),this.DashboardStore=this.createStore(l.default),this.DotStatesStore=this.createStore(U.default),this.EmojisStore=this.createStore(w.default),this.ExtensionsStore=this.createStore(c.default),this.MoveResourcesStore=this.createStore(u.default),this.NotificationsStore=this.createStore(p.default),this.OrganizationStore=this.createStore(f.default),this.OrganizationBillingStore=this.createStore(S.default),this.ProjectsDataStore=this.createStore(h.default),this.RecentlyLoadedBarrelsStore=this.createStore(E.default),this.ComponentVariantStore=this.createStore(g.default),this.DotsDataStore=this.createStore(T.default),this.DotsStore=this.createStore(O.default),this.AnnotationsStore=this.createStore(G.default),this.ScreenStore=this.createStore(m.default),this.ScreenComponentsDataStore=this.createStore(_.default),this.SlackPreferencesStore=this.createStore(b.default),this.StyleguideStore=this.createStore(I.default),this.StyleguidesDataStore=this.createStore(N.default),this.SpaceStore=this.createStore(C.default),this.WorkspaceScrollStore=this.createStore(A.default),this.ProjectSelectionStore=this.createStore(y.default),this.SupportButtonStore=this.createStore(P.default),this.TeamsIntegrationStore=this.createStore(D.default),this.UserStore=this.createStore(L.default),this.VersionImportsStore=this.createStore(R.default),this.WebhooksDataStore=this.createStore(v.default),this.AssetsStore=this.createStore(j.default),this.StorybookIntegrationStore=this.createStore(k.default),this.WorkspaceSettingsStore=this.createStore(M.default),this.FlowStore=this.createStore(V.default),this.FlowDotsStore=this.createStore(F.default),this.AnnotationsDataStore=this.createStore(B.default),this.ScreenSelectionStore=this.createStore(x.default),this.NPSSurveyStore=this.createStore(W.default),this.AccountAdminStore=this.createStore(H.default),this.GlobalSearchStore=this.createStore(q.default),this.DragDropStore=this.createStore(z.default),this.ComponentSelectionStore=this.createStore(Y.default),i.default&&i.default.init(this.getCombinedState()))}}},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(11),i=a(7);let s;(function(e){return"__REDUX_DEVTOOLS_EXTENSION__"in e})(window)&&n.ENV===i.EXEC_ENV.local&&(s=window.__REDUX_DEVTOOLS_EXTENSION__.connect());const r=s},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(270),i=a.n(n),s=a(279),r=a(280),o=a(263),d=a(281),l=a(282);class c extends(i()){constructor(e){super(e)}getInitialState(){return{initialized:!1,loading:!0,selectedOrganizationId:"user",category:r.default.All,termsUpdateSelected:!1,barrelSelection:{type:"all"},projectsWithUpdatesOnly:!0,dotsLoaded:!1,selectedEventIds:[],autoSelect:!1}}setLoading(e){return Object.assign(Object.assign({},e),{loading:!0})}resetSelection(e){return Object.assign(Object.assign({},e),{selectedId:void 0,selectedEventIds:[],dotsLoaded:!1})}resetSelectionAndNoteFilters(e){return this.resetSelection(Object.assign(Object.assign({},e),{noteStatusFilter:void 0,color:void 0,memberId:void 0,sectionId:void 0}))}load(e,{data:t}){return Object.assign(Object.assign(Object.assign({},t.selectedOrganizationId===e.selectedOrganizationId?e:this.getInitialState()),t),{loading:!1,initialized:!0})}select(e,{activity:t,eventIds:a,options:{reselect:n,autoSelect:i}}){return n?Object.assign(Object.assign({},e),{autoSelect:i}):Object.assign(Object.assign({},e),{selectedId:t._id,selectedEventIds:a,dotsLoaded:!1,autoSelect:i,termsUpdateSelected:!1})}setDotsLoaded(e,{activity:t}){return e.selectedId===t._id?Object.assign(Object.assign({},e),{dotsLoaded:!0}):e}selectCategory(e,{category:t}){return this.resetSelectionAndNoteFilters(Object.assign(Object.assign({},e),{termsUpdateSelected:t===r.default.All&&e.termsUpdateSelected,category:t}))}selectAllBarrels(e){return this.resetSelectionAndNoteFilters(Object.assign(Object.assign({},e),{barrelSelection:{type:"all"}}))}selectBarrel(e,{id:t,isPinned:a,barrelType:n}){return this.resetSelectionAndNoteFilters(Object.assign(Object.assign({},e),{barrelSelection:{id:t,isPinned:a,type:n},termsUpdateSelected:!1}))}setProjectsWithUpdatesOnly(e,{projectsWithUpdatesOnly:t}){return Object.assign(Object.assign({},e),{projectsWithUpdatesOnly:t})}selectNoteStatusFilter(e,{noteStatusFilter:t}){return this.resetSelection(Object.assign(Object.assign({},e),{noteStatusFilter:t}))}selectColor(e,{color:t}){return this.resetSelection(Object.assign(Object.assign({},e),{color:t}))}selectMember(e,{memberId:t}){return this.resetSelection(Object.assign(Object.assign({},e),{memberId:t}))}selectSection(e,{sectionId:t}){return this.resetSelection(Object.assign(Object.assign({},e),{sectionId:t}))}setSidebarWidth(e,{sidebarWidth:t}){return Object.assign(Object.assign({},e),{sidebarWidth:t})}saveListScrollData(e,{listScrollData:t}){return Object.assign(Object.assign({},e),{listScrollData:t})}checkSelectionOnEventDeleted(e,{nid:t,eventId:a}){const{selectedId:n,selectedEventIds:i}=e;return n===t&&i.includes(a)?this.resetSelection(e):e}selectTermsUpdate(e){return this.resetSelection(Object.assign(Object.assign({},e),{termsUpdateSelected:!0}))}deselectTermsUpdate(e){return this.resetSelection(Object.assign(Object.assign({},e),{termsUpdateSelected:!1}))}reduce(e,t){switch(t.type){case o.default.SET_PAGE:return this.setLoading(e);case s.default.Load:return this.load(e,t);case s.default.Select:return this.select(e,t);case s.default.SetDotsLoaded:return this.setDotsLoaded(e,t);case s.default.SelectCategory:return this.selectCategory(e,t);case s.default.SelectAllBarrels:return this.selectAllBarrels(e);case s.default.SelectBarrel:return this.selectBarrel(e,t);case s.default.SetProjectsWithUpdatesOnly:return this.setProjectsWithUpdatesOnly(e,t);case s.default.SelectNoteStatusFilter:return this.selectNoteStatusFilter(e,t);case s.default.SelectColor:return this.selectColor(e,t);case s.default.SelectMember:return this.selectMember(e,t);case s.default.SelectSection:return this.selectSection(e,t);case s.default.SetSidebarWidth:return this.setSidebarWidth(e,t);case s.default.SaveListScrollData:return this.saveListScrollData(e,t);case d.default.GetNotificationsSuccess:case l.default.MUTE_PROJECT_NOTIFICATIONS:case l.default.MUTE_STYLEGUIDE_NOTIFICATIONS:case l.default.UNMUTE_PROJECT_NOTIFICATIONS:case l.default.UNMUTE_STYLEGUIDE_NOTIFICATIONS:return this.resetSelection(e);case d.default.DeleteEvent:return this.checkSelectionOnEventDeleted(e,t);case s.default.SelectTermsUpdate:return this.selectTermsUpdate(e);case l.default.ACCEPT_TERMS:return this.deselectTermsUpdate(e);default:return e}}}const u=c},,,,,,,,,,(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.Select="activities/select",e.SetDotsLoaded="activities/setDotsLoaded",e.SelectCategory="activities/selectCategory",e.SelectAllBarrels="activities/selectAllBarrels",e.SelectBarrel="activities/selectBarrel",e.SetProjectsWithUpdatesOnly="activities/setProjectsWithUpdatesOnly",e.Load="activities/load",e.SelectNoteStatusFilter="activities/selectNoteStatusFilter",e.SelectColor="activities/selectColor",e.SelectMember="activities/selectMember",e.SelectSection="activities/selectSection",e.RequestRelatedUsers="activities/requestRelatedUsers",e.SetSidebarWidth="activities/setSidebarWidth",e.SaveListScrollData="activities/saveListScrollData",e.SelectTermsUpdate="activities/selectTermsUpdate"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.All="All",e.Note="Note",e.Screen="Screen",e.Styleguide="Styleguide",e.Other="Other"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.AddNotification="notifications/addNotification",e.GetNotificationsRequested="notifications/getNotificationsRequested",e.GetNotificationsSuccess="notifications/getNotificationsSuccess",e.GetNotificationsFailed="notifications/getNotificationsFailed",e.MarkAllAsRead="notifications/markAllAsRead",e.RestoreReadStatus="notifications/restoreNotificationReadStatus",e.SetReadStatusOffline="notifications/setReadStatusOffline",e.SetReadStatusOfflineByNotifications="notifications/setReadStatusOfflineByNotifications",e.SetEventReadStatus="notifications/setEventReadStatus",e.SetEventReadStatusOffline="notifications/setEventReadStatusOffline",e.DeleteEvent="notifications/deleteEvent"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.LOAD_USER="user/loadUser",e.UPDATE_USER="user/updateUser",e.SET_SELECTED_VIEW="user/setSelectedView",e.SET_EMAIL_NOTIFICATION_PREFERENCES="user/setEmailNotificationPreferences",e.MUTE_PROJECT_NOTIFICATIONS="user/muteProjectNotifications",e.MUTE_STYLEGUIDE_NOTIFICATIONS="user/muteStyleguideNotifications",e.UNMUTE_PROJECT_NOTIFICATIONS="user/unmuteProjectNotifications",e.UNMUTE_STYLEGUIDE_NOTIFICATIONS="user/unmuteStyleguideNotifications",e.UPDATE_FOLLOWED_PROJECT_NOTIFICATIONS="user/updateFollowedProjectNotifications",e.SET_FOLLOWED_PROJECT_NOTIFICATIONS="user/setFollowedProjectNotifications",e.MARK_ZEPLIN_THREE_ZERO_WHATS_NEW_AS_SEEN="user/markZeplinThreeZeroWhatsNewAsSeen",e.STOP_PROMOTING_SPACING_SECTION_DESCRIPTION_EDIT_BUTTON="user/stopPromotingSpacingSectionDescriptionEditButton",e.HIDE_STYLEGUIDE_TUTORIAL="user/hideStyleguideTutorial",e.HIDE_INVITED_USER_HINTBOX="user/hideInvitedUserHintbox",e.HIDE_PERSONAL_WORKSPACE_HINTBOX="user/hidePersonalWorkspaceHintbox",e.HIDE_DASHBOARD_ONBOARDING_HINTBOX="user/hideDashboardOnboardingHintbox",e.HIDE_ADD_TO_FLOW_ONBOARDING="user/hideAddToFlowOnboarding",e.HIDE_ADD_TO_FLOW_TOOLTIP="user/hideAddToFlowTooltip",e.STOP_PROMOTING_EXPORT_DESIGN_TOKENS="user/stopPromotingExportDesignTokens",e.ACQUAINTANCES_REQUESTED="user/acquaintancesRequested",e.SET_ACQUAINTANCES="user/setAcquaintances",e.GET_ACQUAINTANCES_FAILED="user/getAcquaintancesFailed",e.SET_USER_ATTRIBUTE="user/setUserAttribute",e.TERMINATE_SESSION="user/terminateSession",e.MARK_STORYBOOK_INTEGRATION_PROMOTION_AS_SEEN="user/markStorybookIntegrationPromotionAsSeen",e.MARK_HIGHLIGHT_COMPONENTS_PROMOTION_AS_SEEN="user/markHighlightComponentsPromotionAsSeen",e.MARK_LINK_TO_STYLEGUIDE_PROMOTION_AS_SEEN="user/markLinkToStyleguidePromotionAsSeen",e.SET_TERMS_FOR_APPROVAL="user/setTermsForApproval",e.ACCEPT_TERMS="user/acceptTerms",e.MARK_GLOBAL_SEARCH_NEW_BADGE_MENU_SEEN="user/markGlobalSearchNewBadgeMenuSeen"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(270),i=a.n(n),s=a(7),r=a(104),o=a(284),d=a(285),l=a(286),c=a(287),u=a(263);function p(){const e=(0,r.getAppRouteFromPathname)(window.location.pathname);return e===s.AppRoutes.Workspace?"workspace":e===s.AppRoutes.Notifications?"activities":"barrel"}class f extends(i()){getInitialState(){return{config:null,backButtonLabel:null,backButtonLink:null,page:p(),ssoTokenExpired:"",showNotificationSettingsDialog:!1}}reset(e){return Object.assign(Object.assign({},this.getInitialState()),{config:e.config})}resetBackButton(e){return Object.assign(Object.assign({},e),{backButtonLabel:null,backButtonLink:null})}setBackButton(e,{label:t,link:a}){return Object.assign(Object.assign({},e),{backButtonLabel:t,backButtonLink:a})}updateForUpdateComponent(e,{coid:t,componentData:a}){if(!("name"in a))return e;const{backButtonLink:n}=e;if(!n)return e;return t!==new URL(n).searchParams.get("coid")?e:Object.assign(Object.assign({},e),{backButtonLabel:a.name})}updateForRemoveComponent(e,{coid:t}){const{backButtonLink:a}=e;if(!a)return e;return t!==new URL(e.backButtonLink).searchParams.get("coid")?e:this.resetBackButton(e)}updateForRemoveComponents(e,{sectionComponents:t}){const{backButtonLink:a}=e;if(!a)return e;let n=e;return t.forEach((({coids:e})=>{e.forEach((e=>{n=this.updateForRemoveComponent(n,{coid:e})}))})),n}updateForUpdateScreenName(e,{sid:t,name:a}){const{backButtonLink:n}=e;return n&&n.endsWith(t)?Object.assign(Object.assign({},e),{backButtonLabel:a}):e}updateForRemoveScreen(e,{sid:t}){const{backButtonLink:a}=e;return a&&a.endsWith(t)?this.resetBackButton(e):e}updateForRemoveScreens(e,{items:t}){const{backButtonLink:a}=e;return t.some((e=>"screen"===e.type&&(null==a?void 0:a.includes(e._id))))?this.resetBackButton(e):e}updateForFlowToScreenNavigation(e,{flowUrl:t}){return Object.assign(Object.assign({},e),{backButtonLabel:"Flows",backButtonLink:t})}setPage(e,{page:t}){return Object.assign(Object.assign({},e),{page:t})}setConfig(e,{config:t}){return Object.assign(Object.assign({},e),{config:t})}ssoTokenExpired(e,{frequency:t}){return Object.assign(Object.assign({},e),{ssoTokenExpired:t})}unsetSSOTokenExpired(e){return Object.assign(Object.assign({},e),{ssoTokenExpired:""})}loadBarrel(e,t){const{app:a}=t;return a&&a.showNotificationSettingsDialog?Object.assign(Object.assign({},e),{showNotificationSettingsDialog:!0}):e}setNotificationSettingsDialogVisibility(e,{visible:t}){return Object.assign(Object.assign({},e),{showNotificationSettingsDialog:t})}reduce(e,t){switch(t.type){case u.default.HYDRATE_EMBEDDED_DATA:return this.setConfig(e,t);case u.default.RESET:return this.reset(e);case u.default.RESET_BACK_BUTTON:return this.resetBackButton(e);case u.default.SET_BACK_BUTTON:return this.setBackButton(e,t);case u.default.SET_PAGE:return this.setPage(e,t);case u.default.SSO_TOKEN_EXPIRED:return this.ssoTokenExpired(e,t);case u.default.UNSET_SSO_TOKEN_EXPIRED:return this.unsetSSOTokenExpired(e);case u.default.SET_NOTIFICATION_SETTINGS_DIALOG_VISIBILITY:return this.setNotificationSettingsDialogVisibility(e,t);case o.default.UPDATE_COMPONENT:return this.updateForUpdateComponent(e,t);case o.default.REMOVE_COMPONENT:return this.updateForRemoveComponent(e,t);case o.default.LOAD:return this.loadBarrel(e,t);case o.default.REMOVE_COMPONENTS:return this.updateForRemoveComponents(e,t);case c.default.DELETE_SCREENS:return this.updateForRemoveScreens(e,t);case l.default.UPDATE_NAME:return this.updateForUpdateScreenName(e,t);case l.default.REMOVE_SCREEN:return this.updateForRemoveScreen(e,t);case d.default.NAVIGATE_TO_SCREEN:return this.updateForFlowToScreenNavigation(e,t);default:return e}}}const S=f},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.RESET="barrel/reset",e.LOAD="barrel/load",e.LOAD_INTERMEDIATE="barrel/loadIntermediate",e.SET_ORGANIZATION_ID="barrel/setOrganizationId",e.CHANGE_SELECTED_VIEW="barrel/changeSelectedView",e.ADD_TO_SLACK="barrel/addToSlack",e.AUTHENTICATE_SLACK_INTEGRATION="barrel/authSlack",e.AUTHENTICATE_SLACK_INTEGRATION_FAILED="barrel/authSlackFailed",e.AUTHENTICATED_SLACK_INTEGRATION="barrel/authenticatedSlackIntegration",e.ADD="barrel/add",e.ACTIVATE="barrel/activate",e.ARCHIVE="barrel/archive",e.REMOVE="barrel/remove",e.COPY="barrel/copy",e.UPDATE_NAME="barrel/updateName",e.UPDATE_DESCRIPTION="barrel/updateDescription",e.UPDATE_DENSITY_SCALE="barrel/updateDensityScale",e.UPDATE_THUMBNAIL="barrel/updateThumbnail",e.ADD_INTEGRATION="barrel/addIntegration",e.REMOVE_INTEGRATION="barrel/removeIntegration",e.ADD_MEMBERS="barrel/addMembers",e.UPDATE_USER_ROLE="barrel/updateUserRole",e.UPDATE_USER_DATA="barrel/updateUserData",e.TRANSFER_OWNERSHIP="barrel/transferOwnership",e.OWNERSHIP_TRANSFERRED="barrel/ownershipTransferred",e.REMOVE_MEMBER="barrel/removeMember",e.ADD_COLOR="barrel/addColor",e.ADD_MULTIPLE_COLORS="barrel/addMultipleColors",e.UPDATE_COLOR="barrel/updateColor",e.REMOVE_COLOR="barrel/removeColor",e.REMOVE_ALL_COLORS="barrel/removeAllColors",e.MIGRATE_COLORS="barrel/migrateColors",e.UPDATE_COLOR_ORDER="barrel/updateColorOrder",e.ADD_TEXT_STYLE="barrel/addTextStyle",e.ADD_MULTIPLE_TEXT_STYLES="barrel/addMultipleTextStyles",e.UPDATE_TEXT_STYLE="barrel/updateTextStyle",e.REMOVE_TEXT_STYLE="barrel/removeTextStyle",e.REMOVE_ALL_TEXT_STYLES="barrel/removeAllTextStyles",e.ADD_SPACING_SECTION="barrel/addSpacingSection",e.UPDATE_SPACING_SECTION="barrel/updateSpacingSection",e.REMOVE_SPACING_SECTION="barrel/removeSpacingSection",e.ADD_SPACING_TOKEN="barrel/addSpacingToken",e.UPDATE_SPACING_TOKEN="barrel/updateSpacingToken",e.REMOVE_SPACING_TOKEN="barrel/removeSpacingToken",e.UPDATE_REM_PREFERENCES="barrel/updateRemPreferences",e.ADD_COMPONENT="barrel/addComponent",e.UPDATE_COMPONENT="barrel/updateComponent",e.REMOVE_COMPONENT="barrel/removeComponent",e.REMOVE_COMPONENTS="barrel/removeComponents",e.SET_COMPONENT_SNAPSHOT="barrel/setComponentSnapshot",e.SET_MULTIPLE_COMPONENT_SNAPSHOTS="barrel/setMultipleComponentSnapshots",e.ADD_COMPONENT_VERSION="barrel/addComponentVersion",e.UPDATE_COMPONENTS_ORDER="barrel/updateComponentsOrder",e.ADD_COMPONENT_SECTION="barrel/addComponentSection",e.UPDATE_COMPONENT_SECTION="barrel/updateComponentSection",e.MERGE_COMPONENT_SECTION="barrel/mergeComponentSection",e.REMOVE_COMPONENT_SECTION="barrel/removeComponentSection",e.REMOVE_COMPONENT_SECTIONS="barrel/removeComponentSections",e.UPDATE_COMPONENT_SECTIONS_ORDER="barrel/updateComponentSectionsOrder",e.COPY_COMPONENT_SECTION_WEB_LINK="barrel/copyComponentSectionWebLink",e.COPY_COMPONENT_SECTION_APP_URI="barrel/copyComponentSectionAppURI",e.FETCH_COMPONENT_SECTION_SHORT_LINK="barrel/fetchComponentSectionShortLink",e.LOAD_VISIBLE_COMPONENTS="barrel/loadVisibleComponents",e.GO_TO_DASHBOARD="barrel/goToDashboard",e.GO_TO_STYLEGUIDE="barrel/goToStyleguide",e.GO_TO_FLOW="barrel/goToFlow",e.SET_ASSET_EXPORT_TARGET="barrel/setAssetExportTarget",e.CHANGE_ASSET_NAME="barrel/changeAssetName",e.CHANGE_ASSET_DENSITY_SCALE_PREF="barrel/changeAssetDensityScalePref",e.CHANGE_ASSET_NAMING_CONVENTION="barrel/changeAssetNamingConvention",e.TOGGLE_SVG_OPTIMIZATION="barrel/toggleSVGOptimization",e.TOGGLE_PNG_OPTIMIZATION="barrel/togglePNGOptimization",e.TOGGLE_JPG_OPTIMIZATION="barrel/toggleJPGOptimization",e.CHANGE_EXPORT_TARGET="barrel/changeExportTarget",e.OPEN_EXPORT_TARGET="barrel/openExportTarget",e.DOWNLOAD_ASSET="barrel/downloadAsset",e.DOWNLOAD_MULTIPLE_ASSET="barrel/downloadMultipleAsset",e.EXPORT_CODE="barrel/exportCode",e.COPY_CODE="barrel/copyCode",e.HIDE_NO_VECTOR_ASSET_INFO="barrel/hideNoVectorAssetInfo",e.HIDE_DENSITY_MISMATCH_WARNING="barrel/hideDensityMismatchWarning",e.HIDE_SOURCE_FILE_INFO="barrel/hideSourceFileInfo",e.DISMISS_FLOW_LINK_INFO="barrel/dismissFlowLinkInfo",e.DISMISS_NO_RESOURCE_INFO="barrel/dismissNoResourceInfo",e.HIDE_SLACK_RECONNECTION_AUNTIE="barrel/hideSlaclReconnectionAuntie",e.OPEN_JUMP_TO_POPUP="barrel/openJumpToPopup",e.CLOSE_JUMP_TO_POPUP="barrel/closeJumpToPopup",e.TOGGLE_SCENE="barrel/toggleScene",e.JOIN="barrel/join",e.STOP_JOIN_LOADING="barrel/stopLoadingJoin",e.MOVE_RESOURCES_REQUEST="barrel/moveResourcesRequest",e.MOVE_RESOURCES_SUCCESS="barrel/moveResourcesSuccess",e.MOVE_RESOURCES_FAIL="barrel/movesResourcesFail",e.ATTACH_JIRA_ISSUE="barrel/attachJiraIssue",e.REMOVE_JIRA_ISSUE_ATTACHMENT="barrel/removeJiraIssueAttachment",e.ENABLE_DEV_MODE="barrel/enableDevMode",e.DISABLE_DEV_MODE="barrel/disableDevMode",e.SET_LOCAL_CONNECTED_COMPONENTS="barrel/setLocalConnectedComponents",e.RELOAD_LOCAL_CONNECTED_COMPONENTS="barrel/reloadLocalConnectedComponents",e.UPDATE_CONNECTED_COMPONENTS="barrel/updateConnectedComponents",e.DELETE_CONNECTED_COMPONENTS="barrel/deleteConnectedComponents",e.CREATE_CONNECTED_COMPONENT_ITEM="barrel/createConnectedComponentItem",e.UPDATE_CONNECTED_COMPONENT_ITEM="barrel/updateConnectedComponentItem",e.DELETE_CONNECTED_COMPONENT_ITEM="barrel/deleteConnectedComponentItem",e.SET_CONNECTED_COMPONENTS_LOCAL_WORKSPACE="barrel/setConnectedComponentsLocalWorkspace",e.GET_CONNECTED_COMPONENTS_EDITOR_INFO="barrel/getConnectedComponentsEditorInfo",e.SET_CONNECTED_COMPONENTS_EDITOR_INFO="barrel/setConnectedComponentsEditorInfo",e.SET_CONNECTED_COMPONENTS_EDITOR_PREFERENCE="barrel/setConnectedComponentsEditorPreference",e.SELECT_CONNECTED_COMPONENTS_WORKSPACE_FOLDER="barrel/selectConnectedComponentsWorkspaceFolder",e.OPEN_COMPONENT_FILE_IN_EDITOR="barrel/openComponentFileInEditor",e.SET_CONNECTED_COMPONENTS_WORKSPACE_PATH="barrel/setConnectedComponentsWorkspacePath",e.UPDATE_WORKFLOW_STATUS="barrel/updateWorkflowStatus",e.UPDATE_WORKFLOW_STATUSES="barrel/updateWorkflowStatuses",e.DELETE_WORKFLOW_STATUS="barrel/deleteWorkflowStatus",e.DELETE_WORKFLOW_STATUSES="barrel/deleteWorkflowStatuses",e.HIDE_FLOW_NEW_BADGE="barrel/hideFlowNewBadge",e.MARK_FLOWS_NEW_BADGE_MENU_AS_SEEN="barrel/markFlowsNewBadgeMenuAsSeen",e.MARK_STAGE_MODE_NEW_BADGE_MENU_AS_SEEN="barrel/markStageModeNewBadgeMenuAsSeen",e.SET_SELECTED_COMPONENTS="barrel/setSelectedComponents",e.CLEAR_COMPONENT_SELECTION="barrel/clearComponentSelection"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.LOAD_FLOW="flow/loadFlow",e.LOAD_FLOWS="flow/loadFlows",e.SET_CURRENT_FLOW="flow/setCurrentFlow",e.CREATE_FLOW_REQUEST="flow/createFlowRequest",e.ADD_TEXT_LABEL_NODE="flow/addTextLabelNode",e.ADD_NODES_TO_FLOW_REQUEST="flow/addNodesToFlowRequest",e.ADD_NODES_TO_FLOW_SUCCESS="flow/addNodesToFlowSuccess",e.CREATE_CONNECTOR="flow/createConnector",e.CREATE_CONNECTORS="flow/createConnectors",e.UPDATE_CONNECTOR="flow/updateConnector",e.UPDATE_CONNECTOR_LINE_TYPE="flow/updateConnectorLineType",e.UPDATE_CONNECTOR_END_STYLE="flow/updateConnectorEndStyle",e.UPDATE_CONNECTOR_COLOR="flow/updateConnectorColor",e.UPDATE_CONNECTOR_POINTS="flow/updateConnectorPoints",e.DELETE_CONNECTORS="flow/deleteConnectors",e.DELETE_FLOW_NODES="flow/deleteFlowNodes",e.UPDATE_FLOW_NODES_POSITION="flow/updateFlowNodesPosition",e.ADD_CONNECTOR_LABEL="flow/addConnectorLabel",e.UPDATE_CONNECTOR_LABEL="flow/updateConnectorLabel",e.UPDATE_CONNECTOR_LABEL_TEXT="flow/updateConnectorLabelText",e.UPDATE_CONNECTOR_LABEL_WIDTH="flow/updateConnectorLabelWidth",e.UPDATE_CONNECTOR_LABEL_POSITION="flow/updateConnectorLabelPosition",e.DELETE_CONNECTOR_LABEL="flow/deleteConnectorLabel",e.UPDATE_FLOW_NODE="flow/updateFlowNode",e.UPDATE_VARIANT_GROUP_NODE="flow/updateVariantGroupNode",e.UPDATE_NODE_TEXT="flow/updateNodeText",e.UPDATE_NODE_WIDTH="flow/updateNodeWidth",e.UPDATE_NODE_HEIGHT="flow/updateNodeHeight",e.SET_DIMENSIONS="flow/setDimensions",e.CHANGE_POSITION="flow/changePosition",e.CHANGE_ZOOM_LEVEL="flow/changeZoomLevel",e.SET_ZOOM_LEVEL="flow/setZoomLevel",e.EXPORT_AS_PDF="flow/exportAsPDF",e.PDF_EXPORT_FINISHED="flow/pdfExportFinished",e.ENABLE_ADD_SHAPE_MODE="flow/enableAddShapeMode",e.DISABLE_ADD_SHAPE_MODE="flow/disableAddShapeMode",e.NAVIGATE_TO_SCREEN="flow/navigateToScreen",e.UPDATE_FLOW_NODE_NAME="flow/updateFlowNodeName",e.UPDATE_FLOW_NODE_SCREEN_VERSION="flow/updateFlowNodeScreenVersion",e.UPDATE_FLOW_NODE_TYPE="flow/updateFlowNodeType",e.UPDATE_LAST_CONNECTOR_END_STYLE_USED="flow/updateLastConnectorEndStyleUsed",e.UPDATE_LAST_CONNECTOR_COLOR_USED="flow/updateLastConnectorColorUsed",e.UPDATE_LAST_SHAPE_COLOR_USED="flow/updateLastShapeColorUsed",e.INPUT_GROUP_NAME="flow/inputGroupName",e.UPDATE_GROUP_NAME="flow/updateGroupName",e.UPDATE_GROUP_COLOR="flow/updateGroupColor",e.REMOVE_NODES_FROM_GROUP="flow/removeNodesFromGroup",e.ADD_NODES_TO_GROUP="flow/addNodesToGroup",e.UPDATE_GROUP_ORDER="flow/updateGroupOrder",e.DELETE_GROUPS="flow/deleteGroups",e.SET_SELECTED_NODES="flow/setSelectedNodes",e.CREATE_GROUPS_START="flow/createGroupsStart",e.CREATE_GROUPS_REQUEST="flow/createGroupsRequest",e.CREATE_GROUPS_SUCCESS="flow/createGroupsSuccess",e.CENTER_GROUP="flow/centerGroup",e.CREATE_BOARD_START="flow/createBoardStart",e.CREATE_BOARD_REQUEST="flow/createBoardRequest",e.CREATE_BOARD_SUCCESS="flow/createBoardSuccess",e.DELETE_BOARD="flow/deleteBoard",e.UPDATE_BOARD_NAME="flow/updateBoardName",e.UPDATE_BOARD_ORDER="flow/updateBoardOrder",e.TRANSFER_GROUPS_TO_ANOTHER_FLOW="flow/transferGroupsToAnotherFlow",e.UPDATE_TRANSFERRED_DATA="flow/updateTransferredData",e.TRANSFER_NODES_TO_ANOTHER_FLOW="flow/transferNodesToAnotherFlow",e.COPY_GROUP_LINK="flow/copyGroupLink",e.COPY_BOARD_LINK="flow/copyBoardLink",e.ADD_SHAPE_NODE="flow/addShapeNode",e.UPDATE_SHAPE_COLOR="flow/updateShapeColor",e.UPDATE_SHAPE_TYPE="flow/updateShapeType",e.UPDATE_FLOW="flow/updateFlow",e.DISABLE_CREATING_FROM_EMPTY_VIEW="flow/disableCreatingFromEmptyView",e.UPDATE_CONNECTOR_LINE_TRAJECTORY="flow/updateConnectorLineTrajectory",e.ENABLE_NOTE_MODE="flow/enableNoteMode",e.DISABLE_NOTE_MODE="flow/disableNoteMode",e.SHOW_NOTES="flow/showNotes",e.HIDE_NOTES="flow/hideNotes",e.CREATE_NOTE="flow/createNote",e.SELECT_DOT="flow/selectDot",e.CREATE_COMMENT="flow/createComment",e.ADD_COMMENT="flow/addComment",e.UPDATE_COMMENT="flow/updateComment",e.REMOVE_COMMENT="flow/removeComment",e.ADD_DOT="flow/addDot",e.REMOVE_DOT="flow/removeDot",e.UPDATE_DOT="flow/updateDot",e.UPDATE_DOT_COLOR="flow/updateDotColor",e.UPDATE_DOT_STATUS="flow/updateDotStatus",e.SET_DOTS="flow/setDots",e.SAVE_NOTE="flow/saveNote",e.CLOSE_DOT_POPUP="flow/closeDotPopup",e.UNHIGHLIGHT_COMMENT="flow/unhighlightComment",e.CHANGE_DOT_FILTER="flow/changeDotFilter",e.OPEN_DOT="flow/openDot"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.OPEN_SCREEN="screen/openScreen",e.SELECT_LAYER="screen/selectLayer",e.DESELECT_LAYER="screen/deselectLayer",e.ENTER_LAYER="screen/enterLayer",e.LEAVE_LAYER="screen/leaveLayer",e.HIGHLIGHT_LAYER="screen/highlightLayer",e.UNHIGHLIGHT_LAYER="screen/unhighlightLayer",e.ENABLE_PERCENTAGE_MODE="screen/enablePercentageMode",e.DISABLE_PERCENTAGE_MODE="screen/disablePercentageMode",e.ADD_SCREEN="screen/addScreen",e.ADD_SCREEN_TILES="screen/addScreenTiles",e.UPDATE_DESCRIPTION="screen/updateDescription",e.UPDATE_NAME="screen/updateName",e.REMOVE_SCREEN="screen/removeScreen",e.OPEN_TAG_MANAGER="screen/openTagManager",e.CLOSE_TAG_MANAGER="screen/closeTagManager",e.UPDATE_TAGS="screen/updateTags",e.OPEN_SOURCE_FILE="screen/openSourceFile",e.OPEN_SOURCE_FOLDER="screen/openSourceFolder",e.OPEN_POPOUT="screen/openPopout",e.HIDE_COMPONENT_VARIANTS_ONBOARDING_HINTBOX="screen/hideComponentVariantsOnboardingHintbox",e.HIDE_IMAGE_PROCESSING_HINTBOX="screen/hideImageProcessingHintbox",e.NOTIFY_ASSETS_TAB_OPENED="screen/notifyAssetsTabOpened",e.SET_ONBOARDING_STEP="screen/setOnboardingStep",e.COMPLETE_ONBOARDING_STEP="screen/completeOnboardingStep",e.SET_ONBOARDING_INFO_VISIBILITY="screen/setOnboardingInfoVisibility",e.HIDE_ONBOARDING_FLOW_HINTBOX="screen/hideFlowHintbox",e.ENTER_STAGE_MODE="screen/enterStageMode",e.LEAVE_STAGE_MODE="screen/leaveStageMode",e.SHOW_STAGE_COMMENTS="screen/showStageComments",e.HIDE_STAGE_COMMENTS="screen/hideStageComments",e.HIDE_STAGE_MODE_FIRST_TIME_LANDING="screen/hideStageModeFirstTimeLanding",e.SHARE_STAGE_MODE_SCREEN_URL="screen/shareStageModeScreenUrl",e.CLOSE_STAGE_MODE_SIDEBAR="screen/closeStageModeSidebar",e.APPLY_STAGE_MODE_HISTORY_OPERATION="screen/applyStageModeHistoryOperation",e.FLASH_STAGE_MODE_HOTSPOTS="screen/flashStageModeHotspots",e.FLASH_STAGE_MODE_HOTSPOTS_DONE="screen/flashStageModeHotspotsDone",e.SET_DOTS="screen/setDots",e.SELECT_DOT="screen/selectDot",e.SAVE_NOTE="screen/saveNote",e.CLOSE_DOT_POPUP="screen/closeDotPopup",e.CHANGE_DOT_FILTER="screen/changeDotFilter",e.DOTS_FLASHED="screen/dotsFlashed",e.UNHIGHLIGHT_COMMENT="screen/unhighlightComment",e.ADD_DOT="screen/addDot",e.UPDATE_DOT="screen/updateDot",e.UPDATE_DOT_COLOR="screen/updateDotColor",e.UPDATE_DOT_POSITION="screen/updateDotPosition",e.UPDATE_DOT_STATUS="screen/updateDotStatus",e.REMOVE_DOT="screen/removeDot",e.CREATE_COMMENT="screen/createComment",e.ADD_COMMENT="screen/addComment",e.UPDATE_COMMENT="screen/updateComment",e.REMOVE_COMMENT="screen/removeComment",e.OPEN_DOT_MENU="screen/openDotMenu",e.CLOSE_DOT_MENU="screen/closeDotMenu",e.SET_ANNOTATIONS="screen/setAnnotations",e.SELECT_ANNOTATION="screen/selectAnnotation",e.UPDATE_ANNOTATION_POSITION="screen/updateAnnotationPosition",e.UPDATE_ANNOTATION_TEXT="screen/updateAnnotationText",e.UPDATE_ANNOTATION_TYPE="screen/updateAnnotationType",e.DELETE_ANNOTATION_TYPE="screen/deleteAnnotationType",e.REMOVE_ANNOTATION="screen/removeAnnotation",e.ADD_ANNOTATION="screen/addAnnotation",e.CREATE_ANNOTATION="screen/createAnnotation",e.UPDATE_ANNOTATION="screen/updateAnnotation",e.CHANGE_ANNOTATION_FILTER="screen/changeAnnotationFilter",e.SAVE_ANNOTATION_TEXT="screen/saveAnnotationText",e.HIDE_ANNOTATION_LANDING="screen/hideAnnotationLanding",e.CHANGE_ANNOTATION_CONFIG_FILTER="screen/changeAnnotationConfigFilter",e.UNLINK_ANNOTATION="screen/unlinkAnnotation",e.CHANGE_ZOOM_LEVEL="screen/changeZoomLevel",e.ZOOM_IN="screen/zoomIn",e.ZOOM_OUT="screen/zoomOut",e.RESET_ZOOM="screen/resetZoom",e.ZOOM_APPLIED="screen/zoomApplied",e.START_GESTURE="screen/startGesture",e.ZOOM_WITH_GESTURE="screen/zoomWithGesture",e.ZOOM_WITH_WHEEL="screen/zoomWithWheel",e.CHANGE_SCROLL_POSITION="screen/changeScrollPosition",e.TOGGLE_GRID_WIDGET="screen/toggleGridWidget",e.TOGGLE_GRID_LAYOUT="screen/toggleGridLayout",e.ENABLE_NOTE_MODE="screen/enableNoteMode",e.DISABLE_NOTE_MODE="screen/disableNoteMode",e.CREATE_NOTE="screen/createNote",e.SHOW_NOTES="screen/showNotes",e.HIDE_NOTES="screen/hideNotes",e.CHANGE_NOTE_STATUS_FILTER="screen/changeNoteStatusFilter",e.CHANGE_NOTE_COLOR_FILTER="screen/changeNoteColorFilter",e.GET_FLOWS="screen/getFlows",e.SHOW_FLOW_LINKS="screen/showFlowLinks",e.HIDE_FLOW_LINKS="screen/hideFlowLinks",e.CHANGE_SIDEBAR_TAB="screen/changeSidebarTab",e.CHANGE_SCREEN_SIDEBAR_WIDTH="screen/changeScreenSidebarWidth",e.GET_VERSIONS="screen/getVersions",e.SET_VERSIONS="screen/setVersions",e.SET_VERSION_ID="screen/setVersionId",e.SET_SNAPSHOT="screen/setSnapshot",e.GET_ASSET_STATS="screen/getAssetStats",e.SHOW_VERSIONS="screen/showVersions",e.HIDE_VERSIONS="screen/hideVersions",e.TOGGLE_VERSIONS="screen/toggleVersions",e.ENABLE_VERSIONS_COMPACT_MODE="screen/enableVersionsCompactMode",e.DISABLE_VERSIONS_COMPACT_MODE="screen/disableVersionsCompactMode",e.CHANGE_VERSIONS_SIDEBAR_WIDTH="screen/changeVersionsSidebarWidth",e.ADD_VERSION="screen/addVersion",e.UPDATE_COMMIT_COLOR="screen/updateCommitColor",e.UPDATE_COMMIT_MESSAGE="screen/updateCommitMessage",e.REMOVE_VERSION="screen/removeVersion",e.SET_SOURCE_FILE="screen/setSourceFile",e.REMOVE_SCREEN_VARIANT="screen/removeScreenVariant",e.ADD_SCREEN_VARIANT="screen/addScreenVariant",e.RENAME_SCREEN_VARIANT="screen/renameScreenVariant",e.REORDER_SCREEN_VARIANT="screen/reorderScreenVariant",e.SELECT_SCREEN_VARIANT="screen/selectScreenVariant",e.CHANGE_COMPONENTS_FILTER="screen/changeComponentsFilter",e.SET_LAST_OPEN_DATES="screen/setLastOpenDates",e.UPDATE_DOTPOPUP_REMARK_TYPE="screen/updateDotPopupRemarkType"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.CHANGE_SORT_TYPE="dashboard/changeSortType",e.CHANGE_TAG_FILTER="dashboard/changeTagFilter",e.TOGGLE_FIXED_THUMBNAIL_SIZE="dashboard/toggleFixedThumbnailSize",e.CHANGE_SIDEBAR_WIDTH="dashboard/changeSidebarWidth",e.EXPAND_SECTIONS="dashboard/expandSections",e.COLLAPSE_SECTIONS="dashboard/collapseSections",e.DOWNLOAD_SCREENS="dashboard/downloadScreens",e.UNHIGHLIGHT_SCREEN="dashboard/unhighlightScreen",e.HIGHLIGHT_SECTION="dashboard/highlightSection",e.UNHIGHLIGHT_SECTION="dashboard/unhighlightSection",e.CREATE_SECTION="dashboard/createSection",e.CONVERT_TAG_TO_SECTION="dashboard/convertTagToSection",e.ADD_SECTION="dashboard/addSection",e.UPDATE_SECTION="dashboard/updateSection",e.RENAME_SECTION="dashboard/renameSection",e.UPDATE_SECTION_DESCRIPTION="dashboard/updateSectionDescription",e.UPDATE_SECTION_ORDER="dashboard/updateSectionOrder",e.REMOVE_SECTION="dashboard/removeSection",e.UPDATE_SCREEN_ORDER="dashboard/updateScreenOrder",e.UPDATE_SCREEN_ORDER_V2="dashboard/updateScreenOrderV2",e.CREATE_VARIANT_GROUP="dashboard/createVariantGroup",e.ADD_SCREENS_TO_VARIANT_GROUP="dashboard/addScreensToVariantGroup",e.UPDATE_VARIANT_GROUP="dashboard/updateVariantGroup",e.DELETE_VARIANT_GROUP="dashboard/deleteVariantGroup",e.RENAME_VARIANT_GROUP="dashboard/renameVariantGroup",e.DELETE_SCREENS="dashboard/deleteScreens",e.HIDE_SCREEN_VARIANTS_ONBOARDING="dashboard/hideScreenVariantsOnboarding",e.HIDE_NESTED_SCREEN_SECTIONS_ONBOARDING="dashboard/hideNestedScreenSectionsOnboarding",e.DETACH_VARIANT_GROUP="dashboard/detachVariantGroup",e.HIDE_ONBOARDING_INSTRUCTION="dashboard/hideOnboardingInstruction",e.HIDE_ONBOARDING_ENDING_HINTBOX="dashboard/hideOnboardingEndingHintbox",e.SET_SELECTED_SCREENS="dashboard/setSelectedScreens",e.CLEAR_SCREEN_SELECTION="dashboard/clearScreenSelection"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(270),i=a.n(n),s=a(289),r=a(290),o=a(291);const d=["ownedApplications"];function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends(i()){getInitialState(){return{loadingConnectedAppsData:!0,loadingDeveloperData:!1,loadingApplication:!1,revokingAuthorizedApplication:!1,deletingPersonalAccessToken:!1,creatingAccessToken:!1,creatingApplication:!1,updatingApplication:!1,deletingApplication:!1,authorizedApplications:[],ownedApplications:[],personalAccessTokens:[],fetchedApplicationIds:[],officialApps:o.OFFICIAL_APPS.reduce(((e,t)=>u(u({},e),{},{[t._id]:u(u({},t),{},{token:null,status:o.appStatus.UNCONNECTED})})),{})}}loadConnectedAppsData(e,{authorizedApplications:t,officialApps:a}){return u(u({},e),{},{authorizedApplications:t.map((e=>new r.default(e))),officialApps:a,loadingConnectedAppsData:!1})}loadDeveloperDataRequest(e){return u(u({},e),{},{loadingDeveloperData:!0})}loadDeveloperData(e,{ownedApplications:t,personalAccessTokens:a}){return u(u({},e),{},{ownedApplications:t.map((e=>new r.default(e))),personalAccessTokens:a,loadingDeveloperData:!1})}getApplicationRequest(e){return u(u({},e),{},{loadingApplication:!0})}loadApplication(e,{application:t}){const{ownedApplications:a,fetchedApplicationIds:n}=e;return u(u({},e),{},{ownedApplications:a.map((e=>t._id===e._id?new r.default(t):e)),fetchedApplicationIds:[...n,t._id],loadingApplication:!1})}revokeAuthorizedApplicationSuccess(e,{authorizedApplication:t}){return u(u({},e),{},{authorizedApplications:e.authorizedApplications.filter((({_id:e})=>t._id!==e)),revokingAuthorizedApplication:!1})}revokeAuthorizedApplicationFailure(e){return u(u({},e),{},{revokingAuthorizedApplication:!1})}deletePersonalAccessTokenRequest(e){return u(u({},e),{},{deletingPersonalAccessToken:!0})}deletePersonalAccessTokenSuccess(e,{personalAccessToken:t}){return u(u({},e),{},{personalAccessTokens:e.personalAccessTokens.filter((({_id:e})=>t._id!==e)),deletingPersonalAccessToken:!1})}deletePersonalAccessTokenFailure(e){return u(u({},e),{},{deletingPersonalAccessToken:!1})}createPersonalAccessTokenRequest(e){return u(u({},e),{},{creatingAccessToken:!0})}createPersonalAccessTokenSuccess(e,{personalAccessToken:t}){return u(u({},e),{},{personalAccessTokens:[t,...e.personalAccessTokens],creatingAccessToken:!1})}createPersonalAccessTokenFailure(e){return u(u({},e),{},{creatingAccessToken:!1})}createApplicationRequest(e){return u(u({},e),{},{creatingApplication:!0})}createApplicationSuccess(e,{application:t}){return u(u({},e),{},{ownedApplications:[t,...e.ownedApplications],creatingApplication:!1})}createApplicationFailure(e){return u(u({},e),{},{creatingApplication:!1})}updateApplicationRequest(e){return u(u({},e),{},{updatingApplication:!0})}updateApplicationSuccess(e,{appId:t,application:a}){return u(u({},e),{},{ownedApplications:e.ownedApplications.map((e=>e._id===t?new r.default(u({_id:t},a)):e)),updatingApplication:!1})}updateApplicationFailure(e){return u(u({},e),{},{updatingApplication:!1})}deleteApplicationRequest(e){return u(u({},e),{},{deletingApplication:!0})}deleteApplicationSuccess(e,{application:{_id:t}}){let{ownedApplications:a}=e;return u(u({},l(e,d)),{},{ownedApplications:a.filter((e=>e._id!==t)),deletingApplication:!1})}deleteApplicationFailure(e){return u(u({},e),{},{deletingApplication:!1})}renamePersonalAccessToken(e,{tokenId:t,name:a}){return u(u({},e),{},{personalAccessTokens:e.personalAccessTokens.map((e=>e._id===t?u(u({},e),{},{name:a}):e))})}setRevokingAuthorizedApplication(e){return u(u({},e),{},{revokingAuthorizedApplication:!0})}setOfficialAppConnecting(e,{appId:t}){return u(u({},e),{},{officialApps:u(u({},e.officialApps),{},{[t]:u(u({},e.officialApps[t]),{},{token:null,status:o.appStatus.CONNECTING})})})}connectOfficalAppSuccess(e,{appId:t,token:a}){return u(u({},e),{},{officialApps:u(u({},e.officialApps),{},{[t]:u(u({},e.officialApps[t]),{},{token:a,status:o.appStatus.CONNECTED})})})}connectOfficialAppFailure(e,{appId:t}){return u(u({},e),{},{officialApps:u(u({},e.officialApps),{},{[t]:u(u({},e.officialApps[t]),{},{token:null,status:o.appStatus.UNCONNECTED})})})}revokeOfficialApp(e,{authorizedApplication:t}){return u(u({},e),{},{officialApps:u(u({},e.officialApps),{},{[t._id]:u(u({},e.officialApps[t._id]),{},{token:null,status:o.appStatus.UNCONNECTED})}),revokingAuthorizedApplication:!1})}reduce(e,t){switch(t.type){case s.default.GET_CONNECTED_APPS_DATA_SUCCESS:return this.loadConnectedAppsData(e,t);case s.default.GET_DEVELOPER_DATA_REQUEST:return this.loadDeveloperDataRequest(e,t);case s.default.GET_DEVELOPER_DATA_SUCCESS:return this.loadDeveloperData(e,t);case s.default.GET_APPLICATION_REQUEST:return this.getApplicationRequest(e,t);case s.default.GET_APPLICATION_SUCCESS:return this.loadApplication(e,t);case s.default.REVOKE_AUTHORIZED_APPLICATION_REQUEST:return this.setRevokingAuthorizedApplication(e);case s.default.REVOKE_AUTHORIZED_APPLICATION_SUCCESS:return o.OFFICIAL_APPS.some((({_id:e})=>t.authorizedApplication._id===e))?this.revokeOfficialApp(e,t):this.revokeAuthorizedApplicationSuccess(e,t);case s.default.REVOKE_AUTHORIZED_APPLICATION_FAILURE:return this.revokeAuthorizedApplicationFailure(e,t);case s.default.DELETE_PERSONAL_ACCESS_TOKEN_REQUEST:return this.deletePersonalAccessTokenRequest(e);case s.default.DELETE_PERSONAL_ACCESS_TOKEN_SUCCESS:return this.deletePersonalAccessTokenSuccess(e,t);case s.default.DELETE_PERSONAL_ACCESS_TOKEN_FAILURE:return this.deletePersonalAccessTokenFailure(e,t);case s.default.CREATE_PERSONAL_ACCESS_TOKEN_REQUEST:return this.createPersonalAccessTokenRequest(e,t);case s.default.CREATE_PERSONAL_ACCESS_TOKEN_SUCCESS:return this.createPersonalAccessTokenSuccess(e,t);case s.default.CREATE_PERSONAL_ACCESS_TOKEN_FAILURE:return this.createPersonalAccessTokenFailure(e,t);case s.default.CREATE_APPLICATION_REQUEST:return this.createApplicationRequest(e,t);case s.default.CREATE_APPLICATION_SUCCESS:return this.createApplicationSuccess(e,t);case s.default.CREATE_APPLICATION_FAILURE:return this.createApplicationFailure(e,t);case s.default.UPDATE_APPLICATION_REQUEST:return this.updateApplicationRequest(e,t);case s.default.UPDATE_APPLICATION_SUCCESS:return this.updateApplicationSuccess(e,t);case s.default.UPDATE_APPLICATION_FAILURE:return this.updateApplicationFailure(e,t);case s.default.DELETE_APPLICATION_REQUEST:return this.deleteApplicationRequest(e,t);case s.default.DELETE_APPLICATION_SUCCESS:return this.deleteApplicationSuccess(e,t);case s.default.DELETE_APPLICATION_FAILURE:return this.deleteApplicationFailure(e,t);case s.default.RENAME_PERSONAL_ACCESS_TOKEN:return this.renamePersonalAccessToken(e,t);case s.default.CONNECT_OFFICIAL_APP_REQUEST:return this.setOfficialAppConnecting(e,t);case s.default.CONNECT_OFFICIAL_APP_SUCCESS:return this.connectOfficalAppSuccess(e,t);case s.default.CONNECT_OFFICIAL_APP_FAILURE:return this.connectOfficialAppFailure(e,t);default:return e}}}const S=f},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_CONNECTED_APPS_DATA_REQUEST="apps/getConnectedAppsDataRequest",e.GET_CONNECTED_APPS_DATA_SUCCESS="apps/getConnectedAppsDataSuccess",e.GET_DEVELOPER_DATA_REQUEST="apps/getDeveloperDataRequest",e.GET_DEVELOPER_DATA_SUCCESS="apps/getDeveloperDataSuccess",e.GET_APPLICATION_REQUEST="apps/getApplicationRequest",e.GET_APPLICATION_SUCCESS="apps/getApplicationSuccess",e.CREATE_PERSONAL_ACCESS_TOKEN_REQUEST="apps/createPersonalAccessTokenRequest",e.CREATE_PERSONAL_ACCESS_TOKEN_SUCCESS="apps/createPersonalAccessTokenSuccess",e.CREATE_PERSONAL_ACCESS_TOKEN_FAILURE="apps/createPersonalAccessTokenFailure",e.CREATE_APPLICATION_REQUEST="apps/createApplicationRequest",e.CREATE_APPLICATION_SUCCESS="apps/createApplicationSuccess",e.CREATE_APPLICATION_FAILURE="apps/createApplicationFailure",e.UPDATE_APPLICATION_REQUEST="apps/updateApplicationRequest",e.UPDATE_APPLICATION_SUCCESS="apps/updateApplicationSuccess",e.UPDATE_APPLICATION_FAILURE="apps/updateApplicationFailure",e.DELETE_APPLICATION_REQUEST="apps/deleteApplicationRequest",e.DELETE_APPLICATION_SUCCESS="apps/deleteApplicationSuccess",e.DELETE_APPLICATION_FAILURE="apps/deleteApplicationFailure",e.DELETE_PERSONAL_ACCESS_TOKEN_REQUEST="apps/deletePersonalAccessTokenRequest",e.DELETE_PERSONAL_ACCESS_TOKEN_SUCCESS="apps/deletePersonalAccessTokenSuccess",e.DELETE_PERSONAL_ACCESS_TOKEN_FAILURE="apps/deletePersonalAccessTokenFailure",e.REVOKE_AUTHORIZED_APPLICATION_REQUEST="apps/revokeAuthorizedApplicationRequest",e.REVOKE_AUTHORIZED_APPLICATION_SUCCESS="apps/revokeAuthorizedApplicationSuccess",e.REVOKE_AUTHORIZED_APPLICATION_FAILURE="apps/revokeAuthorizedApplicationFailure",e.RENAME_PERSONAL_ACCESS_TOKEN="apps/renamePersonalAccessToken",e.CONNECT_OFFICIAL_APP_REQUEST="apps/connectOfficialAppRequest",e.CONNECT_OFFICIAL_APP_SUCCESS="apps/connectOfficialAppSuccess",e.CONNECT_OFFICIAL_APP_FAILURE="apps/connectOfficialAppFailure"}(n||(n={}));const i=n},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{OFFICIAL_APPS:()=>s,appStatus:()=>r});var n=a(11),i=a(105);const s=[{_id:n.CLI_CLIENT_ID,name:"CLI",emoji:"🧩",description:"Connect components in Zeplin to components in code using Zeplin CLI."},{_id:n.ZEM_CLIENT_ID,name:"zem",logo:(0,i.imageUrl)("img/ntf/icExtension.svg"),description:"Create, test and publish Zeplin extensions with no build configuration."}],r=Object.freeze({CONNECTED:"connected",CONNECTING:"connecting",UNCONNECTED:"unconnected"})},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(270),i=a.n(n),s=a(263),r=a(284),o=a(293),d=a(287),l=a(286),c=a(7),u=a(123),p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class f extends(i()){getInitialState(){return{loading:!0,loadingJoin:!1,initingNewlyIntegratedSlackChannel:!1,organizationId:null,barrelType:u.default.PROJECT,barrelId:null,selectedView:void 0,assetExportTarget:null,assetDensityScalePrefs:null,assetNamingConvention:"camelCase",showOptimizedSVG:!0,showOptimizedPNG:!0,showOptimizedJPG:!0,noVectorAssetInfoHidden:!1,densityMismatchWarningHidden:!1,noResourceInfoDismissed:!1,sourceFileInfoHidden:!1,flowLinkInfoDismissed:!1,showSlackReconnectionAuntie:!1,jumpToPopupOpen:!1,linkingProjectToStyleguide:"",movingResourcesToStyleguide:"",connectedComponentsDevModeEnabled:!1,connectedComponentsLocalWorkspace:null,componentVariantsOnboardingHintboxSeen:!1,connectedComponentsEditorInfo:{},screenVersionsLastSeen:null,screenLastOpened:null,shouldDisplayFlowNewBadge:!0,onboardingHighlightScreenOpened:!1,onboardingLayerCompleted:!1,onboardingDotCompleted:!1,onboardingAssetsCompleted:!1,onboardingVersionsCompleted:!1,flowsNewBadgeMenuSeen:!1,intermediateScreenLoading:!1,stageModeNewBadgeMenuSeen:!1}}reset(e){const{barrel:t={}}=e||{};return Object.assign(Object.assign({},this.getInitialState()),t)}resetSelectedViewIfNecessary(e,t){return t.nextViewHint&&t.nextViewHint!==e.selectedView?Object.assign(Object.assign({},e),{selectedView:void 0}):e}load(e,{barrel:t}){return Object.assign(Object.assign(Object.assign({},e),{loading:!1}),t)}loadIntermediate(e,{barrelData:{barrel:t},openScreenData:a}){const n=this.updateScreenDatesOnVersionRelatedActions(e,a),{isOnboardingHighlightScreen:i}=a,s=Object.assign(Object.assign({},n),{jumpToPopupOpen:!1,selectedView:c.ProjectViewTypes.SCREEN,onboardingHighlightScreenOpened:i,intermediateScreenLoading:t.intermediateScreenLoading});return Object.assign(Object.assign(Object.assign({},this.getInitialState()),s),t)}authenticatingSlackIntegration(e,{bid:t}){return e.barrelId!==t?e:Object.assign(Object.assign({},e),{initingNewlyIntegratedSlackChannel:!0})}authenticatedSlackIntegration(e,{bid:t}){return e.barrelId===t&&e.initingNewlyIntegratedSlackChannel?Object.assign(Object.assign({},e),{initingNewlyIntegratedSlackChannel:!1}):e}updateForArchive(e,{bid:t}){return t===e.barrelId?this.reset():e}updateForRemoveMember(e,{bid:t,shouldRemoveBarrel:a}){return t===e.barrelId&&a?this.reset():e}updateForRemove(e,{bid:t}){return t===e.barrelId?this.reset():e}setOrganizationId(e,{oid:t}){return Object.assign(Object.assign({},e),{organizationId:t})}changeSelectedView(e,t){return Object.assign(Object.assign({},e),{selectedView:t})}setAssetExportTarget(e,{assetExportTarget:t}){return Object.assign(Object.assign({},e),{assetExportTarget:t})}changeAssetDensityScalePref(e,{format:t,assetDensityScalePrefsOfFormat:a}){const n=Object.assign(Object.assign({},e.assetDensityScalePrefs),{[t]:a});return Object.assign(Object.assign({},e),{assetDensityScalePrefs:n})}changeAssetNamingConvention(e,{assetNamingConvention:t}){return Object.assign(Object.assign({},e),{assetNamingConvention:t})}toggleSVGOptimization(e,{showOptimizedSVG:t}){return Object.assign(Object.assign({},e),{showOptimizedSVG:t})}togglePNGOptimization(e,{showOptimizedPNG:t}){return Object.assign(Object.assign({},e),{showOptimizedPNG:t})}toggleJPGOptimization(e,{showOptimizedJPG:t}){return Object.assign(Object.assign({},e),{showOptimizedJPG:t})}dismissNoResourceInfo(e){return Object.assign(Object.assign({},e),{noResourceInfoDismissed:!0})}hideNoVectorAssetInfo(e){return Object.assign(Object.assign({},e),{noVectorAssetInfoHidden:!0})}hideDensityMismatchWarning(e){return Object.assign(Object.assign({},e),{densityMismatchWarningHidden:!0})}hideSourceFileInfo(e){return Object.assign(Object.assign({},e),{sourceFileInfoHidden:!0})}dismissFlowLinkInfo(e){return Object.assign(Object.assign({},e),{flowLinkInfoDismissed:!0})}hideSlackReconnectionAuntie(e){return Object.assign(Object.assign({},e),{showSlackReconnectionAuntie:!1})}hideComponentVariantsOnboardingHintbox(e){return Object.assign(Object.assign({},e),{componentVariantsOnboardingHintboxSeen:!0})}openJumpToPopup(e){return Object.assign(Object.assign({},e),{jumpToPopupOpen:!0})}closeJumpToPopup(e){return Object.assign(Object.assign({},e),{jumpToPopupOpen:!1})}join(e){return Object.assign(Object.assign({},e),{loadingJoin:!0})}stopLoadingJoin(e){return Object.assign(Object.assign({},e),{loadingJoin:!1})}moveResourcesRequest(e,{targetStyleguideId:t}){return Object.assign(Object.assign({},e),{movingResourcesToStyleguide:t})}moveResourcesSuccess(e){return Object.assign(Object.assign({},e),{movingResourcesToStyleguide:""})}moveResourcesFail(e){return Object.assign(Object.assign({},e),{movingResourcesToStyleguide:""})}linkProjectToStyleguideRequest(e,{styleguide:t}){return Object.assign(Object.assign({},e),{linkingProjectToStyleguide:t._id})}linkProjectToStyleguideReset(e){return Object.assign(Object.assign({},e),{linkingProjectToStyleguide:""})}updateForOpenScreen(e,t){const a=this.updateScreenDatesOnVersionRelatedActions(e,t),{isOnboardingHighlightScreen:n}=t,i=n||e.onboardingHighlightScreenOpened;return Object.assign(Object.assign({},a),{jumpToPopupOpen:!1,selectedView:c.ProjectViewTypes.SCREEN,onboardingHighlightScreenOpened:i})}updateForDeleteScreens(e,{removingCurrentScreen:t}){const{selectedView:a}=e;return a===c.ProjectViewTypes.SCREEN&&t?this.changeSelectedView(e,c.ProjectViewTypes.DASHBOARD):e}updateForRemoveScreen(e,{removingCurrentScreen:t}){const{selectedView:a}=e;return a===c.ProjectViewTypes.SCREEN&&t?this.changeSelectedView(e,c.ProjectViewTypes.DASHBOARD):e}completeLayerOnboarding(e,{shouldCompleteLayerOnboarding:t}){return t?Object.assign(Object.assign({},e),{onboardingLayerCompleted:!0}):e}completeDotOnboarding(e,{shouldCompleteDotOnboarding:t}){return t?Object.assign(Object.assign({},e),{onboardingDotCompleted:!0}):e}completeVersionsOnboarding(e,{shouldCompleteVersionsOnboarding:t}){return t?Object.assign(Object.assign({},e),{onboardingVersionsCompleted:!0}):e}completeAssetsOnboarding(e,{shouldCompleteAssetsOnboarding:t}){return t?Object.assign(Object.assign({},e),{onboardingAssetsCompleted:!0}):e}completeScreenOnboardingStep(e,{step:t}){switch(t){case"dot":return this.completeDotOnboarding(e,{shouldCompleteDotOnboarding:!0});case"assets":return this.completeAssetsOnboarding(e,{shouldCompleteAssetsOnboarding:!0});case"versions":return this.completeVersionsOnboarding(e,{shouldCompleteVersionsOnboarding:!0});default:return e}}enableDevMode(e){return Object.assign(Object.assign({},e),{connectedComponentsDevModeEnabled:!0})}disableDevMode(e){return Object.assign(Object.assign({},e),{connectedComponentsDevModeEnabled:!1})}setConnectedComponentsLocalWorkspace(e,{workspace:t}){return Object.assign(Object.assign({},e),{connectedComponentsLocalWorkspace:t})}setConnectedComponentsEditorInfo(e,{editorInfo:t}){return Object.assign(Object.assign({},e),{connectedComponentsEditorInfo:t})}setConnectedComponentsEditorPreference(e,{extension:t,editor:a}){const{connectedComponentsEditorInfo:n}=e,{defaultEditorPreferences:i}=n,s=p(n,["defaultEditorPreferences"]),r=i,o=t,d=(r[o],p(r,["symbol"==typeof o?o:o+""]));return a&&(d[t]=a),Object.assign(Object.assign({},e),{connectedComponentsEditorInfo:Object.assign(Object.assign({},s),{defaultEditorPreferences:d})})}setConnectedComponentsWorkspacePath(e,{workspacePath:t}){const{connectedComponentsEditorInfo:a}=e;return Object.assign(Object.assign({},e),{connectedComponentsEditorInfo:Object.assign(Object.assign({},a),{workspacePath:t})})}updateScreenVersionsLastSeen(e,{sid:t,date:a}){return e.screenVersionsLastSeen&&t?Object.assign(Object.assign({},e),{screenVersionsLastSeen:Object.assign(Object.assign({},e.screenVersionsLastSeen),{[t]:a})}):e}setScreenLastOpened(e,{sid:t,date:a}){return e.screenLastOpened&&t?Object.assign(Object.assign({},e),{screenLastOpened:Object.assign(Object.assign({},e.screenLastOpened),{[t]:a})}):e}updateScreenDatesOnVersionRelatedActions(e,t){let a=this.setScreenLastOpened(e,t.screenLastOpened);return a=this.updateScreenVersionsLastSeen(a,t.screenVersionsLastSeen),a}hideFlowNewBadge(e){return Object.assign(Object.assign({},e),{shouldDisplayFlowNewBadge:!1})}markFlowsNewBadgeMenuAsSeen(e){return Object.assign(Object.assign({},e),{flowsNewBadgeMenuSeen:!0})}markStageModeNewBadgeMenuAsSeen(e){return Object.assign(Object.assign({},e),{stageModeNewBadgeMenuSeen:!0})}reduce(e,t){switch(t.type){case s.default.RESET:return this.reset();case s.default.SET_PAGE:return this.resetSelectedViewIfNecessary(e,t);case r.default.RESET:return this.reset(t);case r.default.AUTHENTICATE_SLACK_INTEGRATION:return this.authenticatingSlackIntegration(e,t);case r.default.AUTHENTICATE_SLACK_INTEGRATION_FAILED:case r.default.AUTHENTICATED_SLACK_INTEGRATION:return this.authenticatedSlackIntegration(e,t);case r.default.ARCHIVE:return this.updateForArchive(e,t);case r.default.REMOVE_MEMBER:return this.updateForRemoveMember(e,t);case r.default.REMOVE:return this.updateForRemove(e,t);case r.default.LOAD:return this.load(e,t);case r.default.LOAD_INTERMEDIATE:return this.loadIntermediate(e,t);case r.default.SET_ORGANIZATION_ID:return this.setOrganizationId(e,t);case r.default.CHANGE_SELECTED_VIEW:return this.changeSelectedView(e,t.selectedView);case r.default.SET_ASSET_EXPORT_TARGET:return this.setAssetExportTarget(e,t);case r.default.CHANGE_ASSET_DENSITY_SCALE_PREF:return this.changeAssetDensityScalePref(e,t);case r.default.CHANGE_ASSET_NAMING_CONVENTION:return this.changeAssetNamingConvention(e,t);case r.default.TOGGLE_SVG_OPTIMIZATION:return this.toggleSVGOptimization(e,t);case r.default.TOGGLE_PNG_OPTIMIZATION:return this.togglePNGOptimization(e,t);case r.default.TOGGLE_JPG_OPTIMIZATION:return this.toggleJPGOptimization(e,t);case r.default.HIDE_NO_VECTOR_ASSET_INFO:return this.hideNoVectorAssetInfo(e);case r.default.HIDE_DENSITY_MISMATCH_WARNING:return this.hideDensityMismatchWarning(e);case r.default.HIDE_SOURCE_FILE_INFO:return this.hideSourceFileInfo(e);case r.default.DISMISS_FLOW_LINK_INFO:return this.dismissFlowLinkInfo(e);case r.default.DISMISS_NO_RESOURCE_INFO:return this.dismissNoResourceInfo(e);case r.default.HIDE_SLACK_RECONNECTION_AUNTIE:return this.hideSlackReconnectionAuntie(e);case r.default.OPEN_JUMP_TO_POPUP:return this.openJumpToPopup(e);case r.default.CLOSE_JUMP_TO_POPUP:return this.closeJumpToPopup(e);case r.default.JOIN:return this.join(e);case r.default.STOP_JOIN_LOADING:return this.stopLoadingJoin(e);case r.default.MOVE_RESOURCES_REQUEST:return this.moveResourcesRequest(e,t);case r.default.MOVE_RESOURCES_SUCCESS:return this.moveResourcesSuccess(e);case r.default.MOVE_RESOURCES_FAIL:return this.moveResourcesFail(e);case r.default.ENABLE_DEV_MODE:return this.enableDevMode(e);case r.default.DISABLE_DEV_MODE:return this.disableDevMode(e);case o.default.LINK_PROJECT_REQUEST:return this.linkProjectToStyleguideRequest(e,t);case o.default.LINK_PROJECT_SUCCESS:case o.default.UNLINK_PROJECT:return this.linkProjectToStyleguideReset(e);case d.default.DELETE_SCREENS:return this.updateForDeleteScreens(e,t);case l.default.OPEN_SCREEN:return this.updateForOpenScreen(e,t);case l.default.SET_LAST_OPEN_DATES:case l.default.ADD_VERSION:case l.default.SHOW_VERSIONS:case l.default.HIDE_VERSIONS:case l.default.TOGGLE_VERSIONS:return this.updateScreenDatesOnVersionRelatedActions(e,t);case l.default.REMOVE_SCREEN:return this.updateForRemoveScreen(e,t);case l.default.SELECT_DOT:return this.completeDotOnboarding(e,t);case l.default.SELECT_LAYER:return this.completeLayerOnboarding(e,t);case l.default.SET_VERSION_ID:return this.completeVersionsOnboarding(e,t);case l.default.NOTIFY_ASSETS_TAB_OPENED:return this.completeAssetsOnboarding(e,t);case l.default.COMPLETE_ONBOARDING_STEP:return this.completeScreenOnboardingStep(e,t);case r.default.SET_CONNECTED_COMPONENTS_LOCAL_WORKSPACE:return this.setConnectedComponentsLocalWorkspace(e,t);case r.default.SET_CONNECTED_COMPONENTS_EDITOR_INFO:return this.setConnectedComponentsEditorInfo(e,t);case r.default.SET_CONNECTED_COMPONENTS_EDITOR_PREFERENCE:return this.setConnectedComponentsEditorPreference(e,t);case r.default.SET_CONNECTED_COMPONENTS_WORKSPACE_PATH:return this.setConnectedComponentsWorkspacePath(e,t);case r.default.HIDE_FLOW_NEW_BADGE:return this.hideFlowNewBadge(e);case r.default.MARK_FLOWS_NEW_BADGE_MENU_AS_SEEN:return this.markFlowsNewBadgeMenuAsSeen(e);case r.default.MARK_STAGE_MODE_NEW_BADGE_MENU_AS_SEEN:return this.markStageModeNewBadgeMenuAsSeen(e);default:return e}}}const S=f},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.LINK_PROJECT="project/linkProject",e.LINK_PROJECT_REQUEST="project/linkProjectRequest",e.LINK_PROJECT_SUCCESS="project/linkProjectSuccess",e.UNLINK_PROJECT="project/unlinkProject",e.UPDATE_PROJECT_STYLEGUIDE_LINK="project/updateProjectStyleguideLink"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(270),i=a.n(n),s=a(287),r=a(263),o=a(284),d=a(123),l=a(286),c=a(7),u=a(295);class p extends(i()){getInitialState(){return{sortType:c.SortTypes.SECTIONS,filterValue:"",fixedThumbnailSize:!1,screenVariantsOnboardingSeen:!1,nestedScreenSectionsOnboardingSeen:!1,sidebarWidth:280,tagFilter:{tags:[],untagged:!1},jiraIssueFilter:[],collapsedSections:{},highlightedSection:null,highlightedScreens:[],dashboardOnboardingEndingHintboxHidden:!1}}reset(){return this.getInitialState()}changeSelectedView(e,{viewUpdate:{sids:t,seid:a,filterValue:n,tags:i,jiraIssues:s,untagged:r,sectionsToExpand:o}}){let d=Object.assign(Object.assign({},e),{tagFilter:{tags:[],untagged:!1},jiraIssueFilter:[],highlightedScreens:[],highlightedSection:null});return i&&(d=this.changeTagFilter(d,{tags:i,untagged:!1})),r&&(d=this.changeTagFilter(d,{tags:[],untagged:!0})),s&&(d=Object.assign(Object.assign({},d),{jiraIssueFilter:s})),d.filterValue!==n&&(d=Object.assign(Object.assign({},d),{filterValue:n})),t&&(d=Object.assign(Object.assign({},d),{highlightedScreens:[...t],collapsedSections:this.expandSections(d,o).collapsedSections})),a&&(d=Object.assign(Object.assign({},d),{highlightedSection:a,collapsedSections:this.expandSections(d,o).collapsedSections})),d}changeSortType(e,{sortType:t}){return Object.assign(Object.assign({},e),{sortType:t,highlightedScreens:[]})}changeTagFilter(e,t){return Object.assign(Object.assign({},e),{tagFilter:t,highlightedScreens:[]})}convertTagToSection(e,{section:{name:t}}){const{tags:a,untagged:n}=e.tagFilter,i=a.filter((e=>e!==t));return Object.assign(Object.assign({},e),{tagFilter:{tags:i,untagged:n}})}toggleFixedThumbnailSize(e){return Object.assign(Object.assign({},e),{fixedThumbnailSize:!e.fixedThumbnailSize})}hideScreenVariantsOnboardingSeen(e){return Object.assign(Object.assign({},e),{screenVariantsOnboardingSeen:!0})}hideNestedScreenSectionsOnboarding(e){return Object.assign(Object.assign({},e),{nestedScreenSectionsOnboardingSeen:!0})}changeSidebarWidth(e,{sidebarWidth:t}){return Object.assign(Object.assign({},e),{sidebarWidth:t})}expandSections(e,t){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!1]))))})}collapseSections(e,{seids:t}){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!0]))))})}unhighlightScreen(e,{sid:t}){return Object.assign(Object.assign({},e),{highlightedScreens:e.highlightedScreens.filter((e=>e!==t))})}highlightSection(e,{seid:t,sectionsToExpand:a=[]}){return Object.assign(Object.assign({},e),{highlightedSection:t,collapsedSections:this.expandSections(e,a).collapsedSections})}unhighlightSection(e){return Object.assign(Object.assign({},e),{highlightedSection:null})}highlightUpdatedSection(e,{seid:t,highlight:a,sectionData:n}){if(!a)return e;const i=n._id||t;return Object.assign(Object.assign({},e),{highlightedSection:i})}updateForOpenScreen(e,{screenId:t,shouldResetDashboardFilters:a}){let n={};return a&&(n={tagFilter:{tags:[],untagged:!1},jiraIssueFilter:[]}),Object.assign(Object.assign(Object.assign({},e),n),{highlightedScreens:[t]})}load(e,{barrel:{barrelType:t},dashboard:a={},data:{project:n},user:{userId:i}}){return t!==d.default.STYLEGUIDE&&(0,u.default)(n,i)?Object.assign(Object.assign({},e),a):e}hideOnboardingEndingHintbox(e){return Object.assign(Object.assign({},e),{dashboardOnboardingEndingHintboxHidden:!0})}reduce(e,t){switch(t.type){case o.default.LOAD:return this.load(e,t);case r.default.RESET:case o.default.RESET:return this.reset();case o.default.CHANGE_SELECTED_VIEW:return this.changeSelectedView(e,t);case o.default.LOAD_INTERMEDIATE:return this.updateForOpenScreen(e,t.openScreenData);case s.default.CHANGE_SORT_TYPE:return this.changeSortType(e,t);case s.default.CHANGE_TAG_FILTER:return this.changeTagFilter(e,t.tagFilter);case s.default.CONVERT_TAG_TO_SECTION:return this.convertTagToSection(e,t);case s.default.TOGGLE_FIXED_THUMBNAIL_SIZE:return this.toggleFixedThumbnailSize(e);case s.default.HIDE_SCREEN_VARIANTS_ONBOARDING:return this.hideScreenVariantsOnboardingSeen(e);case s.default.HIDE_NESTED_SCREEN_SECTIONS_ONBOARDING:return this.hideNestedScreenSectionsOnboarding(e);case s.default.CHANGE_SIDEBAR_WIDTH:return this.changeSidebarWidth(e,t);case s.default.EXPAND_SECTIONS:return this.expandSections(e,t.seids);case s.default.COLLAPSE_SECTIONS:return this.collapseSections(e,t);case s.default.UNHIGHLIGHT_SCREEN:return this.unhighlightScreen(e,t);case s.default.HIGHLIGHT_SECTION:return this.highlightSection(e,t);case s.default.UNHIGHLIGHT_SECTION:return this.unhighlightSection(e);case s.default.UPDATE_SECTION:return this.highlightUpdatedSection(e,t);case s.default.HIDE_ONBOARDING_ENDING_HINTBOX:return this.hideOnboardingEndingHintbox(e);case l.default.OPEN_SCREEN:return this.updateForOpenScreen(e,t);default:return e}}}const f=p},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(284),r=a(297),o=a(298);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends(i()){getInitialState(){return{loading:!0,dialogOpen:!1,extensionId:null,extensions:[],enabledExtensions:[]}}reset(e){return e.extensions.forEach((e=>{e.terminate()})),this.getInitialState()}loadExtensions(e,{bid:t,currentBid:a,extensions:n,enabledExtensions:i}){return a!==t?e:(e.extensions.forEach((e=>{e.terminate()})),{loading:!1,enabledExtensions:i,extensions:n})}reload(e){const t=e.extensions.filter((e=>e.local));return t.length?(t.forEach((e=>{console.log(`Local extension "${e.name}" reloaded`),e.reload()})),l({},e)):e}openSettings(e,{extensionId:t}){return l(l({},e),{},{dialogOpen:!0,extensionId:t})}closeSettings(e){return l(l({},e),{},{dialogOpen:!1,extensionId:null})}add(e,{bid:t,extension:a,local:n,openSettings:i,currentBid:s}){const{extensions:r,enabledExtensions:o}=e,d=r.find((e=>a.id===e.id));let c=e;return i&&(c=this.openSettings(c,{extensionId:a.id})),d?(n&&d.reload(),this.enable(c,{eid:d.id})):t!==s?c:l(l({},c),{},{enabledExtensions:o.concat(a.id),extensions:r.concat(a)})}enable(e,{eid:t}){const{enabledExtensions:a}=e;return l(l({},e),{},{enabledExtensions:a.concat(t)})}updateOption(e,{eid:t,name:a,value:n}){const i=e.extensions.map((e=>{if(e.id!==t)return e;const i=new o.WebappExtension(l({},e));return i.setOption(a,n),i}));return l(l({},e),{},{extensions:i})}disable(e,{eid:t}){const{enabledExtensions:a}=e;return l(l({},e),{},{enabledExtensions:a.filter((e=>e!==t))})}remove(e,{eid:t}){const{extensions:a,enabledExtensions:n}=e;return l(l({},e),{},{enabledExtensions:n.filter((e=>e!==t)),extensions:a.filter((e=>e.id!==t))})}reduce(e,t){switch(t.type){case s.default.RESET:return this.reset(e);case r.default.LOAD_EXTENSIONS:return this.loadExtensions(e,t);case r.default.RELOAD:return this.reload(e);case r.default.OPEN_SETTINGS:return this.openSettings(e,t);case r.default.CLOSE_SETTINGS:return this.closeSettings(e);case r.default.ADD:return this.add(e,t);case r.default.ENABLE:return this.enable(e,t);case r.default.UPDATE_OPTION:return this.updateOption(e,t);case r.default.DISABLE:return this.disable(e,t);case r.default.REMOVE:return this.remove(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.INIT="extensions/init",e.LOAD_EXTENSIONS="extensions/loadExtensions",e.LOAD="extensions/load",e.RELOAD="extensions/reload",e.OPEN_SETTINGS="extensions/openSettings",e.CLOSE_SETTINGS="extensions/closeSettings",e.ADD="extensions/add",e.ENABLE="extensions/enable",e.UPDATE_OPTION="extensions/updateOption",e.DISABLE="extensions/disable",e.REMOVE="extensions/remove"}(n||(n={}));const i=n},,,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(270),i=a.n(n),s=a(321);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends(i()){getInitialState(){return{open:!1,targetNode:null,resources:[]}}open(e,{targetNode:t,resources:a}){return o(o({},e),{},{open:!0,targetNode:t,resources:a})}close(e){return o(o({},e),{},{open:!1,targetNode:null,resources:[]})}reduce(e,t){switch(t.type){case s.default.OPEN:return this.open(e,t);case s.default.CLOSE:return this.close(e);default:return e}}}const c=l},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.OPEN="moveResources/open",e.CLOSE="moveResources/close",e.MOVE="moveResources/move"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(270),i=a.n(n),s=a(281),r=a(279);class o extends(i()){constructor(e){super(e)}getInitialState(){return{notifications:[],loading:null,error:null}}getNotificationsRequested(e){return Object.assign({},e,{loading:!0})}getNotificationsSuccess(e,{notifications:t}){return Object.assign({},e,{notifications:t,loading:!1})}getNotificationsFailed(e,{error:t}){return Object.assign({},e,{loading:!1,error:t})}addNotification(e,{notification:t}){var a;const n=e.notifications.find((({_id:e})=>e===t._id)),i=[Object.assign(Object.assign({},t),{events:[...t.events,...null!==(a=null==n?void 0:n.events)&&void 0!==a?a:[]]}),...e.notifications.filter((({_id:e})=>e!==t._id))];return Object.assign(Object.assign({},e),{notifications:i})}setReadStatus(e,t,a){let n=e;for(const{_id:i,events:s}of t)n=this.setEventReadStatus(n,i,s.map((e=>e._id)),a);return n}setReadStatusById(e,{nids:t,markedAsRead:a}){const n=e.notifications.map((e=>t.includes(e._id)?Object.assign(Object.assign({},e),{events:e.events.map((e=>Object.assign(Object.assign({},e),{markedAsRead:a})))}):e));return Object.assign(Object.assign({},e),{notifications:n})}restoreReadStatus(e,{notifications:t}){const a=e.notifications.map((e=>{const a=t.find((({_id:t})=>t===e._id));return a?Object.assign(Object.assign({},e),{events:e.events.map((e=>{const t=a.events.find((({_id:t})=>t===e._id));return t?Object.assign(Object.assign({},e),{markedAsRead:t.markedAsRead}):e}))}):e}));return Object.assign(Object.assign({},e),{notifications:a})}setEventReadStatus(e,t,a,n){const i=e.notifications.map((e=>{if(t!==e._id)return e;const i=e.events.map((e=>a.includes(e._id)?Object.assign(Object.assign({},e),{markedAsRead:n}):e));return Object.assign(Object.assign({},e),{events:i})}));return Object.assign(Object.assign({},e),{notifications:i})}deleteEvent(e,{nid:t,eventId:a}){const n=e.notifications.map((e=>{if(t!==e._id)return e;const n=e.events.filter((({_id:e})=>e!==a));return Object.assign(Object.assign({},e),{events:n})})).filter((({events:{length:e}})=>e));return Object.assign(Object.assign({},e),{notifications:n})}selectNotification(e,{activity:t,eventIds:a,options:{autoSelect:n}}){return n?e:this.setEventReadStatus(e,t._id,a,!0)}reduce(e,t){switch(t.type){case s.default.GetNotificationsRequested:return this.getNotificationsRequested(e);case s.default.GetNotificationsSuccess:return this.getNotificationsSuccess(e,t);case s.default.GetNotificationsFailed:return this.getNotificationsFailed(e,t);case s.default.AddNotification:return this.addNotification(e,t);case s.default.MarkAllAsRead:return this.setReadStatus(e,t.notifications,!0);case s.default.SetReadStatusOfflineByNotifications:return this.setReadStatus(e,t.notifications,t.markedAsRead);case s.default.RestoreReadStatus:return this.restoreReadStatus(e,t);case s.default.SetReadStatusOffline:return this.setReadStatusById(e,t);case s.default.SetEventReadStatus:return this.setEventReadStatus(e,t.notification._id,t.eventIds,t.markedAsRead);case s.default.SetEventReadStatusOffline:return this.setEventReadStatus(e,t.nid,t.eventIds,t.markedAsRead);case s.default.DeleteEvent:return this.deleteEvent(e,t);case r.default.Select:return this.selectNotification(e,t);default:return e}}}const d=o},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(270),i=a.n(n),s=a(324),r=a(325),o=a(326),d=a(327),l=a(263),c=a(284),u=a(328),p=a(329),f=a(123),S=a(331),h=a(330),E=a(332),g=a(100);let O=0;class T extends(i()){getInitialState(){return{loading:!0,loadingProfiles:!0,loadingBarrels:!0,loadingOrganization:!0,error:null,organizations:[],organizationProfiles:{},organizationProjects:{},organizationStyleguides:{},focusedBarrels:{},dialogDismissStates:{},allProjectsLoaded:{},initialArchivedProjects:{},restrictedMemberProjectIds:void 0}}reset(){return this.getInitialState()}load(e,{data:{organization:t,organizations:a,organizationProfiles:n,organizationProjects:i,organizationStyleguides:s},barrel:{organizationId:r}}){let o=Object.assign(Object.assign({},e),{loading:!1});return a&&(o=this.getOrganizationsSuccess(o,a)),t&&(o=this.addOrganization(o,t)),n&&(o=this.getOrganizationMemberProfilesSuccess(o,n)),i&&(o=this.loadOrganizationProjects(o,{projects:i,oid:r})),s&&(o=this.loadOrganizationStyleguides(o,{styleguides:s,oid:r})),o}addOrganization(e,t){const a=e.organizations.find((({_id:e})=>e===t._id)),n=a?new u.default(Object.assign(Object.assign({},a),t)):new u.default(t);return Object.assign(Object.assign({},e),{organizations:e.organizations.filter((({_id:e})=>e!==t._id)).concat(n),loadingOrganization:!1})}addOrganizationWorkflowStatus(e,{oid:t,workflowStatusData:a}){var n;const i=e.organizations.find((({_id:e})=>e===t)),s=null!==(n=i.workflowStatuses.find((({_id:e})=>e===a._id&&e.startsWith("newWorkflowStatusId"))))&&void 0!==n?n:{},r=i.workflowStatuses.map((e=>e._id===s._id?new p.default(a):e));return s._id||r.push(new p.default(a)),Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{workflowStatuses:r})):e))})}updateOrganization(e,t,a){return Object.assign({},e,{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),a)):e)),loadingOrganization:!1})}updateOrganizationProfile(e,{id:t,organizationProfile:a}){const n=e.organizationProfiles[t];if(!n)return e;const i=Object.assign({},n,a);return Object.assign({},e,{organizationProfiles:Object.assign({},e.organizationProfiles,{[t]:i})})}updateOrganizationSubscription(e,{oid:t,plan:a}){const n=e.organizations.find((({_id:e})=>e===t));return n?this.updateOrganization(e,n._id,{paymentPlan:a}):e}updateOrganizationWorkflowStatus(e,{oid:t,workflowStatusId:a,workflowStatusData:n,oldWorkflowStatusData:i}){const s=new p.default(Object.assign(Object.assign({},i),n));return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{workflowStatuses:e.workflowStatuses.map((e=>e._id===a?s:e))})):e))})}updateOrganizationMemberRole(e,{oid:t,mid:a,uid:n,role:i}){var s;const r=e.organizations.find((e=>e._id===t));if(!r)return e;const o=null===(s=r.members)||void 0===s?void 0:s.map((e=>e.user._id!==a?e:Object.assign(Object.assign({},e),{role:i})));let d=this.updateOrganization(e,t,{members:o});return a===n&&(d=this.updateOrganizationProfile(d,{id:t,organizationProfile:{role:i}})),d}removeOrganization(e,{id:t}){return Object.assign({},e,{organizations:e.organizations.filter((e=>e._id!==t))})}deleteOrganizationWorkflowStatus(e,{oid:t,workflowStatusId:a}){return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{workflowStatuses:e.workflowStatuses.filter((({_id:e})=>e!==a))})):e))})}getOrganizationsSuccess(e,t){return Object.assign(Object.assign({},e),{organizations:t.map((e=>new u.default(e))),loading:!1})}getOrganizationSuccess(e,{organization:t}){if(!t)return Object.assign(Object.assign({},e),{loadingOrganization:!1});return e.organizations.find((({_id:e})=>e===t._id))?this.updateOrganization(e,t._id,t):this.addOrganization(e,t)}getOrganizationSectionsSuccess(e,{sections:t,oid:a}){const n=e.organizations.find((({_id:e})=>e===a));return n?this.updateOrganization(e,n._id,{sections:t}):e}organizationMembersRequested(e,{oid:t}){const a=e.organizations.find((({_id:e})=>e===t));return a?this.updateOrganization(e,a._id,{membersLoading:!0,membersError:null,members:null}):e}getOrganizationMembersSuccess(e,{organizationMembers:t}){const{_id:a,members:n}=t||{},i=e.organizations.find((({_id:e})=>e===a));return i?this.updateOrganization(e,i._id,{membersLoading:!1,members:n}):e}getOrganizationMembersFailed(e,{oid:t,error:a}){const n=e.organizations.find((({_id:e})=>e===t));return n?this.updateOrganization(e,n._id,{membersLoading:!1,membersError:a}):e}getOrganizationMemberProfilesSuccess(e,t){return Object.assign({},e,{organizationProfiles:t,loadingProfiles:!1})}addOrganizationMemberProfile(e,{organizationProfile:t,oid:a}){return Object.assign(Object.assign({},e),{organizationProfiles:Object.assign(Object.assign({},e.organizationProfiles),{[a]:t})})}addProjectToOrganizationSection(e,{pid:t,oid:a,oseid:n,index:i}){const s=e.organizations.find((({_id:e})=>e===a));if(!(null==s?void 0:s.sections))return e;const r=n?s.sections.find((e=>e._id===n)):s.sections[0];return!r||r.projects.includes(t)?e:Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===a?new u.default(Object.assign(Object.assign({},e),{sections:e.sections.map((e=>{if(e._id===r._id){const a=[...e.projects];return i?a.splice(i,0,t):a.push(t),new h.default(Object.assign(Object.assign({},e),{projects:a}))}return e}))})):e))})}addBarrel(e,{barrel:{_id:t},oid:a,oseid:n,index:i,barrelType:s}){if(!a)return e;const{organizationProjects:r,organizationStyleguides:o}=e;let d=e;if(s===f.default.PROJECT){d=this.addProjectToOrganizationSection(e,{pid:t,oid:a,oseid:n,index:i});const s=r[a];if(s&&!s.includes(t))return Object.assign(Object.assign({},d),{organizationProjects:Object.assign(Object.assign({},r),{[a]:[...s,t]})})}else{const n=o[a];if(n&&!n.includes(t)){const s=[...n];return i?s.splice(i,0,t):s.push(t),Object.assign(Object.assign({},e),{organizationStyleguides:Object.assign(Object.assign({},o),{[a]:s})})}}return d}removeProjectFromOrganizationSection(e,{pid:t,oid:a,oseid:n}){const i=e.organizations.find((({_id:e})=>e===a)),{sectionIds:s,sections:r}=Object.assign({},i)||{};if(!r)return e;const o=r.find((e=>e._id===n));return o?((0,S.arrayRemove)(o.projects,(e=>e===t)),this.sortAndPurgeEmptySections(e,{oid:a,sections:r,sectionIds:s})):e}removeBarrel(e,{bid:t,oid:a,oseid:n}){if(!a)return e;const{organizationProjects:i,organizationStyleguides:s}=e;let r=e;n&&(r=this.removeProjectFromOrganizationSection(e,{oid:a,pid:t,oseid:n}));const o=i[a];if(null==o?void 0:o.includes(t))return Object.assign(Object.assign({},r),{organizationProjects:Object.assign(Object.assign({},i),{[a]:o.filter((e=>e!==t))})});const d=s[a];return(null==d?void 0:d.includes(t))?Object.assign(Object.assign({},r),{organizationStyleguides:Object.assign(Object.assign({},s),{[a]:d.filter((e=>e!==t))})}):r}loadOrganizationProjects(e,{projects:t,oid:a}){return Object.assign(Object.assign({},e),{organizationProjects:Object.assign(Object.assign({},e.organizationProjects),{[a]:null==t?void 0:t.map((e=>e._id))}),loadingBarrels:!1,allProjectsLoaded:Object.assign(Object.assign({},e.allProjectsLoaded),{[a]:!0})})}transferOrganizationProject(e,{bid:t,targetId:a,toOrganization:n,oid:i,oseid:s}){if(!n&&"user"===i)return e;const r=this.removeBarrel(e,{bid:t,oid:i,oseid:s}),o="user"===i?r:this.removeBarrelFromFocus(r,{bid:t,oid:i});return this.addBarrel(o,{barrel:{_id:t},oid:n?a:"user",barrelType:f.default.PROJECT})}loadOrganizationStyleguides(e,{styleguides:t,oid:a}){return Object.assign(Object.assign({},e),{organizationStyleguides:Object.assign(Object.assign({},e.organizationStyleguides),{[a]:t.map((e=>e._id))}),loadingBarrels:!1})}transferOrganizationStyleguide(e,{affectedIds:t,targetId:a,toOrganization:n,oid:i}){if(!n&&"user"===i)return e;const{organizationStyleguides:s}=e,r=s[i],o=n?a:"user",d=s[o];return Object.assign(Object.assign({},e),{organizationStyleguides:{[i]:r.filter((e=>!t.includes(e))),[o]:d&&[...d,...t]}})}setWorkspaceLoading(e,{updateState:{selectedOrganizationId:t}}){if(!t)return e;const{organizationProjects:a,organizationStyleguides:n}=e,i=!a[t]||!n[t];let s=!1;if("user"!==t){const a=e.organizations.find((({_id:e})=>e===t));s=!a||!a.complete}return Object.assign(Object.assign({},e),{loadingBarrels:i,loadingOrganization:s})}getFocusedBarrelsSuccess(e,{focusedBarrels:t,oid:a}){return t?Object.assign(Object.assign({},e),{focusedBarrels:Object.assign(Object.assign({},e.focusedBarrels),{[a]:t})}):e}addBarrelToFocus(e,{oid:t,bid:a,barrelType:n,shouldPopOldestBarrel:i}){const s=e.focusedBarrels[t];if(!s)return e;const r=s.filter((({unpinned:e})=>!e));return r.some((({barrelId:e})=>e===a))?e:(i&&r.shift(),Object.assign(Object.assign({},e),{focusedBarrels:Object.assign(Object.assign({},e.focusedBarrels),{[t]:[...r,{barrelType:n,barrelId:a}]})}))}removeBarrelFromFocus(e,{oid:t,bid:a,poppedBarrel:n}){const i=e.focusedBarrels[t];if(!i)return e;const s=i.slice();return n&&s.unshift(n),Object.assign(Object.assign({},e),{focusedBarrels:Object.assign(Object.assign({},e.focusedBarrels),{[t]:s.filter((({barrelId:e})=>e!==a))})})}unpinBarrelFromFocus(e,{oid:t,bid:a}){const n=e.focusedBarrels[t];return Object.assign(Object.assign({},e),{focusedBarrels:Object.assign(Object.assign({},e.focusedBarrels),{[t]:n.map((e=>e.barrelId===a?Object.assign(Object.assign({},e),{unpinned:!0}):e))})})}removeArchivedBarrelFromFocus(e,{bid:t}){return Object.keys(e.focusedBarrels).reduce(((e,a)=>this.removeBarrelFromFocus(e,{oid:a,bid:t})),e)}repinBarrelToFocus(e,{oid:t,bid:a}){const n=e.focusedBarrels[t];return Object.assign(Object.assign({},e),{focusedBarrels:{[t]:n.map((e=>e.barrelId===a?Object.assign(Object.assign({},e),{unpinned:!1}):e))}})}removeUnjoinedBarrels(e,{oid:t,remainingProjects:a,remainingStyleguides:n}){const i=this.updateMemberAccessibility(e,{oid:t,restricted:!0});return Object.assign(Object.assign({},i),{organizationProjects:Object.assign(Object.assign({},i.organizationProjects),{[t]:a}),organizationStyleguides:Object.assign(Object.assign({},i.organizationStyleguides),{[t]:n})})}updateMemberAccessibility(e,{oid:t,restricted:a=!1}){return Object.assign(Object.assign({},e),{organizationProfiles:Object.assign(Object.assign({},e.organizationProfiles),{[t]:Object.assign(Object.assign({},e.organizationProfiles[t]),{restricted:a})})})}updateMemberTags(e,{oid:t,mid:a,operation:n,tags:i}){var s;const r=e.organizations.find((({_id:e})=>e===t));if(!r)return e;const o=null===(s=r.members)||void 0===s?void 0:s.find((({user:{_id:e}})=>e===a));if(!o)return e;let d=[];return"add"===n?d=o.tags.concat(i):"remove"===n&&(d=o.tags.filter((e=>!i.includes(e)))),Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>{if(e._id!==t)return e;const n=(e.members||[]).map((e=>e.user._id!==a?e:Object.assign(Object.assign({},e),{tags:d})));return new u.default(Object.assign(Object.assign({},e),{members:n}))}))})}updateMemberData(e,{uid:t,userData:a}){return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>{if(!e.members)return e;const n=e.members.map((e=>e.user._id!==t?e:Object.assign(Object.assign({},e),{user:Object.assign(Object.assign({},e.user),a)})));return new u.default(Object.assign(Object.assign({},e),{members:n}))}))})}sortAndPurgeEmptySections(e,{oid:t,sections:a,sectionIds:n}){const i=e.organizationProjects[t],s=e.organizationProfiles[t],r=n.map(((e,t)=>{const n=a.find((t=>t._id===e));return n&&(null==s?void 0:s.restricted)&&t>0&&!n.projects.some((e=>i.includes(e)))?null:n})).filter(g.exists);return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:r,sectionIds:n})):e))})}addProjectSection(e,{oid:t,index:a,sectionData:n,dialogDismissParams:i}){var s;const r=e.organizations.find((({_id:e})=>e===t)),{sectionIds:o,sections:d}=Object.assign({},r)||{};if(!o)return e;null===(s=n.projects)||void 0===s||s.forEach((e=>{const t=d.find((t=>t.projects.includes(e)));t&&(0,S.arrayRemove)(t.projects,(t=>t===e))}));const l=new h.default(n);l._id||(l._id=E.TEMPORARY_PROJECT_SECTION_ID,l.newSection=!Object.prototype.hasOwnProperty.call(n,"newSection")||n.newSection,l.key="newProjectSection-"+O++),l._id!==E.TEMPORARY_PROJECT_SECTION_ID&&o.includes(l._id)||o.splice(a,0,l._id),d.push(l);const c=this.updateDialogDismissStates(e,{oid:t,dialogDismissParams:i});return this.sortAndPurgeEmptySections(c,{oid:t,sections:d,sectionIds:o})}addProjectSectionId(e,{oid:t,index:a,oseid:n}){const i=e.organizations.find((({_id:e})=>e===t)),{sectionIds:s}=Object.assign({},i)||{};return s.splice(a,0,n),Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sectionIds:s})):e))})}updateProjectSection(e,{oid:t,oseid:a,sectionData:n}){const i=e.organizations.find((({_id:e})=>e===t)),{sections:s,sectionIds:r}=Object.assign({},i)||{};if(!s)return e;return Object.assign({},s.find((e=>e._id===a)))?Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:s.map((e=>e._id===a?new h.default(Object.assign(Object.assign({},e),n)):e)),sectionIds:r.map((e=>e===a&&n._id&&n._id!==e?n._id:e))})):e))}):e}removeProjectSection(e,{oid:t,oseid:a}){const n=e.organizations.find((({_id:e})=>e===t)),{sectionIds:i,sections:s}=Object.assign({},n)||{};if(!i)return e;const r=Object.assign({},s[0]),o=s.find((({_id:e})=>e===a));return o&&r.projects.push(...o.projects),Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:s.map(((e,t)=>0===t?r:e._id===a?null:e)).filter(g.exists),sectionIds:i.filter((e=>e!==a))})):e))})}updateProjectSectionOrder(e,{oid:t,oseid:a,index:n,dialogDismissParams:i}){const s=e.organizations.find((({_id:e})=>e===t)),{sectionIds:r,sections:o}=Object.assign({},s);if(!r)return e;const d=r.indexOf(a);if(d<0)return e;r.splice(d,1),r.splice(n,0,a);const l=this.updateDialogDismissStates(e,{oid:t,dialogDismissParams:i});return this.sortAndPurgeEmptySections(l,{oid:t,sections:o,sectionIds:r})}updateProjectOrder(e,{oid:t,oseid:a,index:n,projects:i,dialogDismissParams:s}){const r=e.organizations.find((({_id:e})=>e===t)),o=e.organizationProjects[t],d=e.organizationProfiles[t],{sections:l,sectionIds:c}=Object.assign({},r);if(!o||!d||!l)return e;i.forEach((e=>{const t=l.find((t=>t.projects.includes(e)));t&&(0,S.arrayRemove)(t.projects,(t=>t===e))}));const u=l.find((e=>e._id===a));if(!u)return e;u.projects.splice(n,0,...i);const p=this.updateDialogDismissStates(e,{oid:t,dialogDismissParams:s});return this.sortAndPurgeEmptySections(p,{oid:t,sections:l,sectionIds:c})}addSectionLink(e,{oid:t,oseid:a,linkData:n}){const i=e.organizations.find((({_id:e})=>e===t));if(!i.sections)return e;const s=i.sections.find((({_id:e})=>e===a));if(!s)return e;const r=new h.default(Object.assign(Object.assign({},s),{links:[...s.links,n]})),o=i.sections.map((e=>e._id===a?r:e));return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:o})):e))})}updateSectionLink(e,{oid:t,oseid:a,oselid:n,linkData:i}){const s=e.organizations.find((({_id:e})=>e===t));if(!s.sections)return e;const r=s.sections.find((({_id:e})=>e===a));if(!r)return e;const o=r.links.map((e=>e._id===n?i:e)),d=new h.default(Object.assign(Object.assign({},r),{links:o})),l=s.sections.map((e=>e._id===a?d:e));return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:l})):e))})}removeSectionLink(e,{oid:t,oseid:a,oselid:n}){const i=e.organizations.find((({_id:e})=>e===t));if(!i.sections)return e;const s=i.sections.find((({_id:e})=>e===a));if(!s)return e;const r=s.links.filter((e=>e._id!==n)),o=new h.default(Object.assign(Object.assign({},s),{links:r})),d=i.sections.map((e=>e._id===a?o:e));return Object.assign(Object.assign({},e),{organizations:e.organizations.map((e=>e._id===t?new u.default(Object.assign(Object.assign({},e),{sections:d})):e))})}updateDialogDismissStates(e,{oid:t,dialogDismissParams:a}){return a?Object.assign(Object.assign({},e),{dialogDismissStates:Object.assign(Object.assign({},e.dialogDismissStates),{[t]:Object.assign(Object.assign({},e.dialogDismissStates[t]),a)})}):e}updateAllProjectsLoadedState(e,{allProjectsLoaded:t}){return Object.assign(Object.assign({},e),{allProjectsLoaded:Object.assign(Object.assign({},e.allProjectsLoaded),t)})}setInitialArchivedProjects(e,{archivedProjectIds:t}){const a=null==t?void 0:t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{});return Object.assign(Object.assign({},e),{initialArchivedProjects:Object.assign({},a||{})})}setRestrictedMemberProjects(e,{restrictedMemberProjectIds:t}){const a=null==t?void 0:t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{});return Object.assign(Object.assign({},e),{restrictedMemberProjectIds:a&&Object.assign({},a)})}loadWorkspaceData(e,t){const a=this.getOrganizationsSuccess(e,t.organizations),n=t.organizationProfiles?this.getOrganizationMemberProfilesSuccess(a,t.organizationProfiles):a,i=this.getOrganizationSuccess(n,t),s=this.getFocusedBarrelsSuccess(i,t),r=this.loadOrganizationProjects(s,t),o=this.updateDialogDismissStates(r,t),d=this.loadOrganizationStyleguides(o,t),l=this.updateAllProjectsLoadedState(d,t),c=this.setInitialArchivedProjects(l,t);return this.setRestrictedMemberProjects(c,t)}hydrateEmbeddedData(e,{organization:t,organizations:a,projects:n,oid:i,styleguides:s,focusedBarrels:r,organizationProfiles:o}){let d=e;return a&&(d=a.reduce(((e,t)=>this.addOrganization(e,t)),d)),t&&(d=this.addOrganization(e,t)),n&&i&&(d=this.loadOrganizationProjects(d,{projects:n,oid:i})),s&&i&&(d=this.loadOrganizationStyleguides(d,{styleguides:s,oid:i})),r&&i&&(d=this.getFocusedBarrelsSuccess(d,{focusedBarrels:r,oid:i})),o&&(d=this.getOrganizationMemberProfilesSuccess(d,o)),d}reduce(e,t){switch(t.type){case d.default.UPDATE_PAGE_STATE:return this.setWorkspaceLoading(e,t);case c.default.LOAD:return this.load(e,t);case c.default.ADD:return this.addBarrel(e,t);case c.default.REMOVE:return this.removeBarrel(e,t);case c.default.REMOVE_MEMBER:return t.shouldRemoveBarrel?this.removeBarrel(e,t):e;case c.default.ARCHIVE:return this.removeArchivedBarrelFromFocus(e,t);case r.default.GET_PROJECTS_SUCCESS:return this.loadOrganizationProjects(e,t);case o.default.GET_STYLEGUIDES_SUCCESS:return this.loadOrganizationStyleguides(e,t);case r.default.TRANSFER_OWNERSHIP:case o.default.TRANSFER_OWNERSHIP:case c.default.OWNERSHIP_TRANSFERRED:return t.affectedIds?this.transferOrganizationStyleguide(e,t):this.transferOrganizationProject(e,t);case s.default.ADD_ORGANIZATION:return this.addOrganization(e,t.organization);case s.default.ADD_ORGANIZATION_WORKFLOW_STATUS:return this.addOrganizationWorkflowStatus(e,t);case s.default.UPDATE_ORGANIZATION:return this.updateOrganization(e,t.id,t.organization);case s.default.UPDATE_ORGANIZATION_SUBSCRIPTION:return this.updateOrganizationSubscription(e,t);case s.default.UPDATE_ORGANIZATION_WORKFLOW_STATUS:return this.updateOrganizationWorkflowStatus(e,t);case s.default.UPDATE_ORGANIZATION_MEMBER_ROLE:return this.updateOrganizationMemberRole(e,t);case s.default.REMOVE_ORGANIZATION:return this.removeOrganization(e,t);case s.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:return this.deleteOrganizationWorkflowStatus(e,t);case s.default.GET_ORGANIZATION_SECTIONS_SUCCESS:return this.getOrganizationSectionsSuccess(e,t);case s.default.ORGANIZATION_MEMBERS_REQUESTED:return this.organizationMembersRequested(e,t);case s.default.GET_ORGANIZATION_MEMBERS_SUCCESS:return this.getOrganizationMembersSuccess(e,t);case s.default.GET_ORGANIZATION_MEMBERS_FAILED:return this.getOrganizationMembersFailed(e,t);case s.default.ADD_ORGANIZATION_MEMBER_PROFILE:return this.addOrganizationMemberProfile(e,t);case s.default.ADD_BARREL_TO_FOCUS:return this.addBarrelToFocus(e,t);case s.default.UNPIN_BARREL_FROM_FOCUS:return this.unpinBarrelFromFocus(e,t);case s.default.REMOVE_BARREL_FROM_FOCUS:return this.removeBarrelFromFocus(e,t);case s.default.REPIN_BARREL_TO_FOCUS:return this.repinBarrelToFocus(e,t);case s.default.REMOVE_UNJOINED_BARRELS:return this.removeUnjoinedBarrels(e,t);case s.default.GET_BARRELS:return this.updateMemberAccessibility(e,t);case s.default.UPDATE_MEMBER_TAGS:return this.updateMemberTags(e,t);case c.default.UPDATE_USER_DATA:return this.updateMemberData(e,t);case s.default.ADD_PROJECT_SECTION:return this.addProjectSection(e,t);case s.default.UPDATE_PROJECT_SECTION:return this.updateProjectSection(e,t);case s.default.REMOVE_PROJECT_SECTION:return this.removeProjectSection(e,t);case s.default.UPDATE_PROJECT_SECTION_ORDER:return this.updateProjectSectionOrder(e,t);case s.default.UPDATE_PROJECT_ORDER:return this.updateProjectOrder(e,t);case s.default.ADD_SECTION_LINK:return this.addSectionLink(e,t);case s.default.UPDATE_SECTION_LINK:return this.updateSectionLink(e,t);case s.default.REMOVE_SECTION_LINK:return this.removeSectionLink(e,t);case l.default.LOAD_WORKSPACE_DATA:return this.loadWorkspaceData(e,t);case l.default.RESET:return this.reset();case l.default.HYDRATE_EMBEDDED_DATA:return this.hydrateEmbeddedData(e,t);default:return e}}}const m=T},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_BARRELS="organizaton/getBarrels",e.REQUEST_INVITE="organization/requestInvite",e.ADD_ORGANIZATION="organization/addOrganization",e.ADD_ORGANIZATION_WORKFLOW_STATUS="organization/addOrganizationWorkflowStatus",e.UPDATE_ORGANIZATION="organization/updateOrganization",e.UPDATE_ORGANIZATION_SUBSCRIPTION="organization/updateOrganizationSubscription",e.UPDATE_ORGANIZATION_WORKFLOW_STATUS="organization/updateOrganizationWorkflowStatus",e.UPDATE_ORGANIZATION_MEMBER_ROLE="organization/updateOrganizationMemberRole",e.REMOVE_ORGANIZATION="organization/removeOrganization",e.DELETE_ORGANIZATION_WORKFLOW_STATUS="organization/deleteOrganizationWorkflowStatus",e.GET_ORGANIZATION_SECTIONS_SUCCESS="organization/getOrganizationSectionsSuccess",e.ORGANIZATION_MEMBERS_REQUESTED="organization/organizationMembersRequested",e.GET_ORGANIZATION_MEMBERS_SUCCESS="organization/getOrganizationMembersSuccess",e.GET_ORGANIZATION_MEMBERS_FAILED="organization/getOrganizationMembersFailed",e.ADD_ORGANIZATION_MEMBER_PROFILE="organization/addOrganizationMemberProfile",e.ADD_BARREL_TO_FOCUS="organization/addBarrelToFocus",e.ADD_BARREL_TO_FOCUS_SUCCESS="organization/addBarrelToFocusSuccess",e.REMOVE_BARREL_FROM_FOCUS="organization/removeBarrelFromFocus",e.UNPIN_BARREL_FROM_FOCUS="organization/unpinBarrelFromFocus",e.UNPIN_BARREL_FROM_FOCUS_SUCCESS="organization/unpinBarrelFromFocusSuccess",e.REPIN_BARREL_TO_FOCUS="organization/repinBarrelToFocus",e.HIT_PIN_LIMIT="organization/hitPinLimit",e.REMOVE_UNJOINED_BARRELS="organization/removeUnjoinedBarrels",e.UPDATE_MEMBER_TAGS="organization/updateMemberTags",e.ADD_PROJECT_SECTION="organization/addProjectSection",e.ADD_PROJECT_SECTION_ID="organization/addProjectSectionId",e.UPDATE_PROJECT_SECTION="organization/updateProjectSection",e.REMOVE_PROJECT_SECTION="organization/removeProjectSection",e.UPDATE_PROJECT_SECTION_ORDER="organization/updateProjectSectionOrder",e.UPDATE_PROJECT_ORDER="organization/updateProjectOrder",e.ADD_SECTION_LINK="organization/createSectionLink",e.UPDATE_SECTION_LINK="organization/updateSectionLink",e.REMOVE_SECTION_LINK="organization/removeSectionLink"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_PROJECTS_SUCCESS="projects/getProjectsSuccess",e.REQUEST_PROJECT="projects/requestProject",e.GET_PROJECT_REQUESTED="projects/getProjectRequested",e.GET_PROJECT_SUCCESS="projects/getProjectSuccess",e.GET_PROJECT_FAILED="projects/getProjectFailed",e.UPDATE_PROJECT="projects/updateProject",e.TRANSFER_OWNERSHIP="projects/transferOwnerShip",e.CREATE_PROJECT_REQUEST="projects/createProjectRequest",e.CREATE_PROJECT_FINALIZE="projects/createProjectFinalize",e.INIT_TRANSFER_OWNERSHIP="projects/initTransferOwnerShip",e.INVITE_USER="projects/inviteUser",e.CREATE_SAMPLE_PROJECT_REQUEST="projects/createSampleProjectRequest",e.CREATE_SAMPLE_PROJECT_FINALIZE="projects/createSampleProjectFinalize"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_STYLEGUIDES_SUCCESS="styleguides/getStyleguidesSuccess",e.GET_STYLEGUIDE_REQUESTED="styleguides/getStyleguideRequested",e.GET_STYLEGUIDE_SUCCESS="styleguides/getStyleguideSuccess",e.GET_STYLEGUIDE_FAILED="styleguides/getStyleguideFailed",e.UPDATE_STYLEGUIDE="styleguides/updateStyleguide",e.TRANSFER_OWNERSHIP="styleguides/transferOwnership",e.SELECT_PARENT="styleguides/selectParent",e.REMOVE_PARENT="styleguides/removeParent",e.SELECT_PARENT_REQUEST="styleguides/selectParentRequest",e.SELECT_PARENT_SUCCESS="styleguides/selectParentSuccess",e.SELECT_PARENT_FAILED="styleguides/selectParentFailed",e.CREATE_STYLEGUIDE_REQUEST="styleguides/createStyleguideRequest",e.CREATE_STYLEGUIDE_FINALIZE="styleguides/createStyleguideFinalize",e.INIT_TRANSFER_OWNERSHIP="styleguides/initTransferOwnership",e.INVITE_USER="styleguides/inviteUser"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.UPDATE_PAGE_STATE="space/updatePageState",e.CHANGE_SELECTED_TAB="space/changeSelectedTab",e.CHANGE_SELECTED_ORGANIZATION="space/changeSelectedOrganization",e.CHANGE_FILTER_VALUE="space/changeFilterValue",e.CHANGE_PROJECT_SELECTED_SORT_TYPE="space/changeProjectSelectedSortType",e.TOGGLE_ARCHIVED_PROJECTS="space/toggleArchivedProjects",e.CHANGE_WORKFLOW_STATUS_FILTER="space/changeWorkflowStatusFilter",e.UNHIGHLIGHT_BARREL="space/unhighlightBarrel",e.HIGHLIGHT_SECTION="space/highlightSection",e.UNHIGHLIGHT_SECTION="space/unhighlightSection",e.EXPAND_SECTIONS="space/expandSections",e.COLLAPSE_SECTIONS="space/collapseSections",e.SET_STYLEGUIDES_TAB_VISITED="space/setStyleguidesTabVisited",e.OPEN_DIALOG="space/openDialog",e.CLOSE_DIALOG="space/closeDialog",e.HIDE_LOADING="space/hideLoading",e.TRACK_BARREL_CLICK="space/trackBarrelClick",e.SET_SELECTED_PROJECTS="space/setSelectedProjects",e.CLEAR_PROJECT_SELECTION="space/clearProjectSelection",e.POSTPONE_OFFER_REMINDER="space/postponeOfferReminder",e.SCROLLED_TO_PROJECT="space/scrolledToProject"}(n||(n={}));const i=n},,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(270),i=a.n(n),s=a(334);class r extends(i()){constructor(e){super(e)}getInitialState(){return{newReservedSeatCount:0,scheduledSeatsUpdate:null,isUpdateSeatsPending:!1,isCancelScheduledSeatsUpdatePending:!1}}reset(){return this.getInitialState()}updateSeatsRequest(e){return Object.assign(Object.assign({},e),{isUpdateSeatsPending:!0})}updateSeatsSuccess(e,{reservedSeatCount:t}){return Object.assign(Object.assign({},e),{newReservedSeatCount:t,scheduledSeatsUpdate:null,isUpdateSeatsPending:!1})}updateSeatsFailure(e){return Object.assign(Object.assign({},e),{isUpdateSeatsPending:!1})}getScheduledSeatsUpdateSuccess(e,{scheduledSeatsUpdate:t}){return Object.assign(Object.assign({},e),{scheduledSeatsUpdate:t})}cancelScheduledSeatsUpdateRequest(e){return Object.assign(Object.assign({},e),{scheduledSeatsUpdate:null,isCancelScheduledSeatsUpdatePending:!0})}cancelScheduledSeatsUpdateSuccess(e){return Object.assign(Object.assign({},e),{isCancelScheduledSeatsUpdatePending:!1})}cancelScheduledSeatsUpdateFailure(e,{cancelledScheduledSeatsUpdate:t}){return Object.assign(Object.assign({},e),{scheduledSeatsUpdate:t,isCancelScheduledSeatsUpdatePending:!1})}reduce(e,t){switch(t.type){case s.default.RESET:return this.reset();case s.default.UPDATE_SEATS_REQUEST:return this.updateSeatsRequest(e);case s.default.UPDATE_SEATS_SUCCESS:return this.updateSeatsSuccess(e,t);case s.default.UPDATE_SEATS_FAILURE:return this.updateSeatsFailure(e);case s.default.GET_SCHEDULED_SEATS_UPDATE_SUCCESS:return this.getScheduledSeatsUpdateSuccess(e,t);case s.default.CANCEL_SCHEDULED_SEATS_UPDATE_REQUEST:return this.cancelScheduledSeatsUpdateRequest(e);case s.default.CANCEL_SCHEDULED_SEATS_UPDATE_SUCCESS:return this.cancelScheduledSeatsUpdateSuccess(e);case s.default.CANCEL_SCHEDULED_SEATS_UPDATE_FAILURE:return this.cancelScheduledSeatsUpdateFailure(e,t);default:return e}}}const o=r},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.RESET="organizationBilling/reset",e.UPDATE_SEATS_REQUEST="organizationBilling/updateSeatsRequest",e.UPDATE_SEATS_SUCCESS="organizationBilling/updateSeatsSuccess",e.UPDATE_SEATS_FAILURE="organizationBilling/updateSeatsFailure",e.GET_SCHEDULED_SEATS_UPDATE_REQUEST="organizationBilling/getScheduledSeatsUpdateRequest",e.GET_SCHEDULED_SEATS_UPDATE_SUCCESS="organizationBilling/getScheduledSeatsUpdateSuccess",e.CANCEL_SCHEDULED_SEATS_UPDATE_REQUEST="organizationBilling/cancelScheduledSeatsUpdateRequest",e.CANCEL_SCHEDULED_SEATS_UPDATE_SUCCESS="organizationBilling/cancelScheduledSeatsUpdateSuccess",e.CANCEL_SCHEDULED_SEATS_UPDATE_FAILURE="organizationBilling/cancelScheduledSeatsUpdateFailure"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(270),i=a.n(n),s=a(336),r=a(123),o=a(345),d=a(325),l=a(293),c=a(284),u=a(350),p=a(287),f=a(286),S=a(351),h=a(324),E=a(263),g=a(352),O=a(331),T=a(353),m=a(354),_=a(124),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class C extends(i()){constructor(e){super(e),this.reducer=new u.default({barrelsPropertyName:"projects",loadingBarrelPropertyName:"loadingProject",loadingBarrelsPropertyName:"loadingProjects"},{deleteBarrel:this.remove})}getInitialState(){return{createProjectInProgress:!1,joinProjectInProgress:!1,loadingProject:!0,loadingProjects:!0,projects:{}}}reset(){return this.getInitialState()}add(e,{barrel:t,barrelType:a}){return a!==r.default.PROJECT?e:this.reducer.addBarrel(e,{barrel:t})}activate(e,{bid:t}){return this.reducer.updateBarrelValue(e,{bid:t,key:"status",value:"active"})}archive(e,{bid:t}){return this.reducer.updateBarrelValue(e,{bid:t,key:"status",value:"archived"})}remove(e,{bid:t,barrelType:a},n=!1){if(a===r.default.STYLEGUIDE){if(n)return e;let a=e;const i=Object.values(e.projects).filter((e=>{var a,n;return(null===(n=null===(a=e.styleguideLink)||void 0===a?void 0:a.styleguide)||void 0===n?void 0:n._id)===t}));return i.forEach((({_id:e})=>{a=this.unlinkProjectFromStyleguide(a,{pid:e})})),a}const i=e.projects,s=t,o=(i[s],b(i,["symbol"==typeof s?s:s+""]));return Object.assign(Object.assign({},e),{projects:Object.assign({},o)})}linkProjectToStyleguide(e,{project:{_id:t,remPreferences:a},styleguide:n}){return this.reducer.updateBarrel(e,{bid:t,data:{styleguideLink:{styleguide:n,status:"active"},remPreferences:new o.default(Object.assign(Object.assign({},a),{status:"linked"}))}})}unlinkProjectFromStyleguide(e,{pid:t}){return this.reducer.updateBarrelValue(e,{bid:t,key:"styleguideLink",value:null})}updateUserData(e,{bid:t,uid:a,userData:n}){const i=e.projects[t];if(!i)return e;const r=i.users.map((({role:e,user:t})=>t._id!==a?{role:e,user:t}:{role:e,user:Object.assign(Object.assign({},t),n)}));let{screens:o}=i;return o&&(o=i.screens.map((e=>{const t=e.versions.map((e=>{var{creator:t,commit:i}=e,s=b(e,["creator","commit"]);const r=t&&t._id===a?Object.assign(Object.assign({},t),n):t,o=i.author&&i.author._id===a?Object.assign(Object.assign({},i),{author:Object.assign(Object.assign({},i.author),n)}):i;return Object.assign(Object.assign({},s),{creator:r,commit:o})}));return Object.assign(Object.assign({},e),{versions:t})}))),this.reducer.updateBarrel(e,{bid:t,data:new s.default(Object.assign(Object.assign({},i),{screens:o,users:r}))})}transferOwnership(e,{bid:t,fromUserId:a,targetId:n,toOrganization:i,users:s,oid:r}){const o=e.projects[t];if(!o)return e;if(i||"user"!==r){const i=o.dataStage===_.default.Complete?this.markProjectAsBare(e,{pid:t}):e,r=this.reducer.deleteWorkflowStatus(i,{bid:t});return s?this.reducer.updateBarrelValue(r,{bid:t,key:"users",value:e=>e.users.map((e=>{if(e.user._id===a||e.user._id===n){const t=s.find((t=>e.user._id===t.user._id));e.role=t.role,e.user.paymentPlan=t.user.paymentPlan}return e}))}):r}return this.reducer.updateBarrelValue(e,{bid:t,key:"users",value:e=>e.users.map((e=>{if(s){if(e.user._id===a||e.user._id===n){const t=s.find((t=>e.user._id===t.user._id));e.role=t.role,e.user.paymentPlan=t.user.paymentPlan}return e}return e.user._id===n&&(e.role="owner"),e.user._id===a&&(e.role="admin"),e}))})}load(e,{data:{project:t,organizationProjects:a},user:{userId:n}}){let i=e;return a&&(i=this.reducer.getBarrelsSuccess(i,{projects:a})),t&&(i=this.reducer.getBarrelSuccess(i,{barrel:t,userId:n})),i}loadIntermediate(e,{barrelData:{data:{project:t},user:{userId:a}}}){let n=e;return t&&(n=this.reducer.getBarrelSuccess(n,{barrel:t,userId:a})),n}moveResourcesSuccess(e,{resourceType:t,resources:a,bid:n,barrelType:i}){if(i!==r.default.PROJECT)return e;const s=(0,T.default)(t);return this.reducer.updateBarrelValue(e,{bid:n,key:s,value:e=>e[s].filter((e=>!a.includes(e)))})}changeAssetName(e,t){const{component:a}=t;if(a)return this.reducer.changeComponentAssetName(e,t);const n=t.screen,{bid:i,versionId:s,assetId:r,name:o}=t;return this.reducer.updateBarrelValue(e,{bid:i,key:"screens",value:({screens:e})=>e?e.map((e=>{var t;return e._id!==n._id?e:Object.assign(Object.assign({},e),{versions:null===(t=e.versions)||void 0===t?void 0:t.map((e=>{if(e._id!==s)return e;const{snapshot:{assets:t},snapshot:a}=e;return Object.assign(Object.assign({},e),{snapshot:Object.assign(Object.assign({},a),{assets:null==t?void 0:t.map((e=>e._id!==r?e:Object.assign(Object.assign({},e),{localName:o})))})})}))})})):e})}joinProjectRequest(e,{barrelType:t}){return t!==r.default.PROJECT?e:Object.assign(Object.assign({},e),{joinProjectInProgress:!0})}joinProjectFinalize(e,{barrelType:t}){return t!==r.default.PROJECT?e:Object.assign(Object.assign({},e),{joinProjectInProgress:!1})}addSection(e,{pid:t,section:a,index:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value:({sections:e})=>e&&0!==n?(e.forEach((e=>{e.screens=e.screens.filter((e=>!a.screens.includes(e)))})),e.splice(n,0,a),e):e})}createSection(e,{pid:t,section:a}){const{_id:n,name:i}=a;return this.renameSection(e,{pid:t,seid:n,name:i})}updateSection(e,{pid:t,seid:a,sectionData:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value:({sections:e})=>e?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),n))):e})}renameSection(e,{pid:t,seid:a,name:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value:({sections:e})=>e?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{name:n}))):e})}updateSectionDescription(e,{pid:t,seid:a,description:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value:({sections:e})=>e?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{description:n}))):e})}updateSectionOrder(e,{pid:t,seid:a,index:n,parent:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value({sections:e}){if(!e)return e;const t=e.findIndex((({_id:e})=>e===a)),s=e.filter((({path:e})=>null==e?void 0:e.includes(a))),r=e.splice(t,s.length+1);if(i){const t=e.find((({_id:e})=>e===i));r[0].parent=i,r[0].path=[...t.path||[],i]}else delete r[0].parent,delete r[0].path;for(let a=1;a<r.length;a++){const e=r[a].parent,t=r.find((({_id:t})=>t===e));r[a].path=[...t.path||[],e]}return e.splice(n-(n>t?s.length:0),0,...r),e}})}removeSection(e,{pid:t,seid:a}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value({sections:e}){if(!e)return e;const t=e.findIndex((e=>e._id===a));if(t<1)return e;const n=e[t],i=e[t-1],s=[n,...e.filter((({path:e})=>null==e?void 0:e.includes(a)))],r=s.map((({_id:e})=>e)),o=s.flatMap((({screens:e})=>e));return i.screens.push(...o),e.filter((e=>!r.includes(e._id)))}})}updateScreenOrder(e,{pid:t,screens:a,targetSectionId:n,targetIndex:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"sections",value({sections:e}){if(!e)return e;a.forEach((t=>{const a=e.find((e=>e.screens.includes(t)));a&&(0,O.arrayRemove)(a.screens,(e=>e===t))}));const t=e.find((e=>e._id===n));return t?(t.screens.splice(i,0,...a),e):void 0}})}updateScreenOrderV2(e,{pid:t,items:a,targetSectionId:n,targetIndex:i}){const s=e.projects[t];if(!s)return e;const{variantGroups:r}=s,o=[];return a.forEach((({_id:e,type:t})=>{if("screen"===t)o.push(e);else if("variantGroup"===t){const t=r.find((({_id:t})=>t===e));o.push(...t.screens.map((({id:e})=>e)))}})),this.updateScreenOrder(e,{pid:t,screens:o,targetSectionId:n,targetIndex:i})}createVariantGroup(e,{pid:t,vgid:a,screens:n,variantGroupName:i,shouldOrder:s}){if(!e.projects[t])return e;const r=this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){const t={_id:a,name:i,screens:n};return e?[...e,t]:[t]}});return s?this.orderVariantGroupScreens(r,{pid:t,vgid:a}):r}addScreensToVariantGroup(e,{pid:t,vgid:a,screens:n,shouldOrder:i}){if(!e.projects[t])return e;const s=this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){if(!e)return e;let t=e.map((e=>{const{_id:t,screens:i}=e;return t!==a?e:Object.assign(Object.assign({},e),{screens:i.concat(n)})}));return t=t.map((e=>{const{_id:t,screens:i}=e;if(t!==a)return e;const[{requestId:s}]=n,r=i.filter((e=>s&&e.requestId===s)),o=i.filter((e=>!r.includes(e)));return r.sort(((e,t)=>e.index-t.index)),e.screens=o.concat(r),e})),t}});return i?this.orderVariantGroupScreens(s,{pid:t,vgid:a}):s}orderVariantGroupScreens(e,{pid:t,vgid:a}){const n=e.projects[t];if(!n||!n.sections||!n.variantGroups)return e;const i=n.variantGroups.find((({_id:e})=>e===a));if(!i)return e;const s=i.screens.map((({id:e})=>e)),[r]=s,o=n.sections.find((e=>e.screens.includes(r)));if(!o)return e;let d,l=0;for(let c=0;c<o.screens.length;c++){const e=o.screens[c];if(r===e){d=c;break}s.includes(e)&&(l+=1)}return d?this.updateScreenOrderV2(e,{pid:t,items:[{_id:a,type:"variantGroup"}],targetSectionId:o._id,targetIndex:d-l}):e}updateVariantGroup(e,{pid:t,vgid:a,variantGroupData:n}){if(!e.projects[t])return e;const i=this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value:({variantGroups:e})=>e?e.map((e=>{const{_id:t}=e;return t!==a?e:Object.assign(Object.assign({},e),n)})):e});return this.orderVariantGroupScreens(i,{pid:t,vgid:n._id})}renameVariantGroup(e,{pid:t,vgid:a,name:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value:({variantGroups:e})=>e?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{name:n}))):e})}deleteVariantGroup(e,{pid:t,vgid:a,screens:n,syncWithApi:i}){const s=e.projects[t];if(!s||!s.variantGroups)return e;const r=s.variantGroups.find((({_id:e})=>e===a));if(!r)return e;let o;n?o=n.map((({id:e})=>e)):i&&(o=r.screens.map((({id:e})=>e)));const d=this.detachVariantGroup(e,{pid:t,vgid:a});return o?this.removeScreens(d,{pid:t,screenIds:o}):d}detachVariantGroup(e,{pid:t,vgid:a}){return e.projects[t]?this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value:({variantGroups:e})=>e?e.filter((e=>e._id!==a)):e}):e}addScreen(e,{pid:t,seid:a,index:n,screen:i}){const s=e.projects[t];if(!s||!s.screens)return e;if(s.screens.find((e=>e._id===i._id)))return e;let r=this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>[...e,i]});if(i.variantGroup){const e=s.variantGroups.find((({_id:e})=>e===i.variantGroup._id));r=e?this.addScreensToVariantGroup(r,{pid:t,vgid:e._id,screens:i.variantGroup.screens,shouldOrder:!1}):this.createVariantGroup(r,{pid:t,vgid:i.variantGroup._id,screens:i.variantGroup.screens,variantGroupName:i.variantGroup.name,shouldOrder:!1})}return this.reducer.updateBarrelValue(r,{bid:t,key:"sections",value({sections:e,screens:t}){if(!e)return e;const s=a?e.find((e=>e._id===a)):e[0],r=void 0===n?s.screens.length:n;if(s.screens.splice(r,0,i._id),i.requestId){const e=t.filter((e=>e.requestId===i.requestId&&s.screens.includes(e._id)));e.forEach((e=>{const t=s.screens.indexOf(e._id);s.screens.splice(t,1)})),e.sort(((e,t)=>e.index-t.index)),s.screens=s.screens.concat(e.map((e=>e._id)))}return[...e]}})}addScreenTiles(e,{pid:t,sid:a,vid:n,tileInfo:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>{if(e._id===a){const t=e.versions.map((e=>e._id===n?Object.assign(Object.assign({},e),{snapshot:Object.assign(Object.assign({},e.snapshot),{tileInfo:i})}):e));return Object.assign(Object.assign({},e),{versions:t})}return e})):e})}handleDeleteScreens(e,{pid:t,items:a,syncWithApi:n}){const i=e.projects[t],s=a.filter((e=>"screen"===e.type)).map((e=>e._id)),r=a.filter((e=>"variantGroup"===e.type)).map((e=>e._id));let o=e;return s.forEach((e=>{var a,n;const s=(null===(n=null===(a=null==i?void 0:i.variantGroups)||void 0===a?void 0:a.find((({screens:t})=>t.some((({id:t})=>t===e)))))||void 0===n?void 0:n._id)||null;o=this.removeScreen(o,{pid:t,sid:e,vgid:s})})),r.forEach((e=>{o=this.deleteVariantGroup(o,{pid:t,vgid:e,screens:null,syncWithApi:n})})),o}removeScreen(e,{pid:t,sid:a,vgid:n}){let i=this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.filter((e=>e._id!==a)):e});return i=this.reducer.updateBarrelValue(i,{bid:t,key:"sections",value:({sections:e})=>e?e.map((e=>(e.screens.includes(a)&&(e.screens=e.screens.filter((e=>e!==a))),e))):e}),n&&(i=this.removeScreenVariant(i,{pid:t,vgid:n,svid:a})),i}removeScreens(e,{pid:t,screenIds:a}){const n=this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.filter((e=>!a.includes(e._id))):e});return this.reducer.updateBarrelValue(n,{bid:t,key:"sections",value:({sections:e})=>e?e.map((e=>(a.forEach((t=>{e.screens.includes(t)&&(e.screens=e.screens.filter((e=>e!==t)))})),e))):e})}updateScreenDescription(e,{pid:t,sid:a,description:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>e._id===a?Object.assign(Object.assign({},e),{description:n}):e)):e})}updateScreenName(e,{pid:t,sid:a,name:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>e._id===a?Object.assign(Object.assign({},e),{name:n}):e)):e})}updateTags(e,{pid:t,updates:a}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?(a.forEach((({_id:t,operation:a,tags:n})=>{const i=e.find((e=>e._id===t));i&&a===m.default.Add?i.tags=(i.tags||[]).concat(n):i&&(i.tags=i.tags.filter((e=>!n.includes(e))))})),e):e})}setVersions(e,{pid:t,sid:a,versions:n,totalVersionCount:i,allowedVersionCount:s}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>(e._id===a&&(e.versions=n,e.totalVersionCount=i,e.allowedVersionCount=s),e))):e})}setSnapshot(e,{pid:t,sid:a,vid:n,snapshot:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value({screens:e}){if(!e)return e;const t=e.find((e=>e._id===a));if(!t)return e;const s=t.versions.find((e=>e._id===n));return s&&Object.assign(s.snapshot,i),e}})}addVersion(e,{pid:t,sid:a,version:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value({screens:e}){if(!e)return e;const t=e.find((e=>e._id===a));if(!t)return e;return t.versions.some((e=>e._id===n._id))||(t.updated=(new Date).toISOString(),t.versions.unshift(n),t.totalVersionCount&&t.totalVersionCount++,t.versions.length>t.allowedVersionCount&&t.versions.pop()),e}})}updateCommitColor(e,{pid:t,sid:a,vid:n,color:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>(e._id!==a||(e.versions=e.versions.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{commit:Object.assign(Object.assign({},e.commit),{color:i})})))),e))):e})}updateCommitMessage(e,{pid:t,sid:a,vid:n,message:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>(e._id!==a||(e.versions=e.versions.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{commit:Object.assign(Object.assign({},e.commit),{message:i})})))),e))):e})}removeVersion(e,{pid:t,sid:a,vid:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"screens",value:({screens:e})=>e?e.map((e=>(e._id!==a||(e.versions=e.versions.filter((({_id:e})=>e!==n))),e))):e})}removeScreenVariant(e,{pid:t,vgid:a,svid:n}){const i=e.projects[t];if(!i||!i.sections)return e;let s,r;const o=this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){if(!e)return e;const t=e.find((({_id:e})=>a===e));return t?2===t.screens.length?e.filter((e=>e._id!==a)):(s=t.screens[0].id,r=t.screens.length-1,t.screens=t.screens.filter((({id:e})=>n!==e)),e):e}});if(!s)return o;const d=i.sections.find((e=>e.screens.includes(s)));if(!d)return o;const l=d.screens.findIndex((e=>e===s));return this.updateScreenOrder(o,{pid:t,screens:[n],targetSectionId:d._id,targetIndex:l+r})}addScreenVariant(e,{pid:t,vgid:a,screenVariant:n,index:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){if(!e)return e;const t=e.find((({_id:e})=>a===e));return t?(t.screens.splice(i,0,n),e):e}})}renameScreenVariant(e,{pid:t,vgid:a,svid:n,name:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){if(!e)return e;const t=e.find((({_id:e})=>e===a));return t?(t.screens=t.screens.map((e=>(e.id===n&&(e.variantName=i),e))),e):e}})}reorderScreenVariant(e,{pid:t,vgid:a,svid:n,index:i}){const s=this.reducer.updateBarrelValue(e,{bid:t,key:"variantGroups",value({variantGroups:e}){if(!e)return e;const t=e.find((({_id:e})=>e===a));if(!t)return e;const s=(0,O.arrayRemove)(t.screens,(e=>e.id===n));return s?(t.screens.splice(i,0,s),e):e}});return this.orderVariantGroupScreens(s,{pid:t,vgid:a})}addComponentLinkedAnnotation(e,{pid:t,annotation:a}){const{componentSourceId:n}=a;return n?this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e&&e.length?[...e,a]:[a]}):e}updateComponentLinkedAnnotation(e,{pid:t,atid:a,annotationData:n}){const{componentSourceId:i}=n;return i?this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),n))):null}):e}updateComponentLinkedAnnotationType(e,{pid:t,atid:a,newType:n,componentSourceId:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e&&i?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{type:n}))):e})}deleteComponentLinkedAnnotationType(e,{pid:t,atid:a,componentSourceId:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e&&n?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{type:void 0}))):e})}updateComponentLinkedAnnotationText(e,{pid:t,atid:a,componentSourceId:n,annotationData:i}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e&&n?e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),i))):e})}updateComponentLinkedAnnotationPosition(e,{pid:t,atid:a,x:n,y:i,originalX:s,originalY:r}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e?e.map((e=>{if(e._id!==a)return e;if("originalCoordinates"in e&&e.originalCoordinates){const{originalCoordinates:t}=e,a=b(e,["originalCoordinates"]);return"number"==typeof s?Object.assign(Object.assign({},e),{originalCoordinates:Object.assign(Object.assign({},e.originalCoordinates),{x:s,y:r}),x:n,y:i}):Object.assign(Object.assign({},a),{x:n,y:i})}return Object.assign(Object.assign({},e),{x:n,y:i})})):e})}removeComponentLinkedAnnotation(e,{pid:t,atid:a,componentSourceId:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e&&n?e.filter((({_id:e})=>e!==a)):e})}unlinkComponentLinkedAnnotation(e,{pid:t,atid:a}){return this.reducer.updateBarrelValue(e,{bid:t,key:"componentAnnotations",value:({componentAnnotations:e})=>e?e.filter((({_id:e})=>e!==a)):e})}hydrateEmbeddedData(e,{project:t,projects:a,user:n}){let i=e;return a&&(i=this.reducer.getBarrelsSuccess(i,{projects:a})),t&&(i=this.reducer.getBarrelSuccess(i,{barrel:t,userId:n._id})),i}deleteWorkflowStatuses(e,{statusDeletedBarrels:t}){const a=Object.assign({},e);return t.reduce(((e,{bid:t})=>this.reducer.deleteWorkflowStatus(e,{bid:t})),a)}updateWorkflowStatuses(e,{statusUpdatedBarrels:t,workflowStatus:a}){const n=Object.assign({},e);return t.reduce(((e,{bid:t})=>this.reducer.updateWorkflowStatus(e,{bid:t,workflowStatus:a})),n)}createProjectRequest(e){return Object.assign(Object.assign({},e),{createProjectInProgress:!0})}createProjectFinalize(e){return Object.assign(Object.assign({},e),{createProjectInProgress:!1})}updateProjectStyleguideLink(e,{pid:t,data:a}){const{styleguideLink:n}=a;return this.reducer.updateBarrelValue(e,{bid:t,key:"styleguideLink",value:({styleguideLink:e})=>e?Object.assign(Object.assign({},e),n):n})}markProjectAsBare(e,{pid:t}){return this.reducer.updateBarrelValue(e,{bid:t,key:"dataStage",value:_.default.Bare})}reduce(e,t){switch(t.type){case d.default.GET_PROJECTS_SUCCESS:return this.reducer.getBarrelsSuccess(e,t);case d.default.GET_PROJECT_REQUESTED:return this.reducer.getBarrelRequested(e);case d.default.GET_PROJECT_SUCCESS:return this.reducer.getBarrelSuccess(e,{barrel:t.project,userId:t.userId});case d.default.GET_PROJECT_FAILED:return this.reducer.getBarrelFailed(e,t);case d.default.UPDATE_PROJECT:return this.reducer.updateBarrel(e,{bid:t.pid,data:t.data});case l.default.UPDATE_PROJECT_STYLEGUIDE_LINK:return this.updateProjectStyleguideLink(e,{pid:t.pid,data:t.data});case c.default.UPDATE_NAME:return this.reducer.updateName(e,t);case c.default.UPDATE_DESCRIPTION:return this.reducer.updateDescription(e,t);case c.default.UPDATE_DENSITY_SCALE:return this.reducer.updateDensityScale(e,t);case c.default.UPDATE_THUMBNAIL:return this.reducer.updateThumbnail(e,t);case c.default.ADD_INTEGRATION:return this.reducer.addIntegration(e,t);case c.default.AUTHENTICATED_SLACK_INTEGRATION:return this.reducer.addIntegration(e,Object.assign(Object.assign({},t),{intype:"slacks"}));case c.default.TOGGLE_SCENE:return this.reducer.toggleScene(e,t);case c.default.ADD_MEMBERS:return this.reducer.addMembers(e,t);case c.default.ADD_COLOR:return this.reducer.addColor(e,t);case c.default.ADD_MULTIPLE_COLORS:return this.reducer.addMultipleColors(e,t);case c.default.UPDATE_COLOR:return this.reducer.updateColor(e,t);case c.default.REMOVE_COLOR:return this.reducer.removeColor(e,t);case c.default.REMOVE_ALL_COLORS:return this.reducer.removeAllColors(e,t);case c.default.MIGRATE_COLORS:return this.reducer.migrateColors(e,t);case c.default.UPDATE_COLOR_ORDER:return this.reducer.updateColorOrder(e,t);case c.default.ADD_TEXT_STYLE:return this.reducer.addTextStyle(e,t);case c.default.ADD_MULTIPLE_TEXT_STYLES:return this.reducer.addMultipleTextStyles(e,t);case c.default.UPDATE_TEXT_STYLE:return this.reducer.updateTextStyle(e,t);case c.default.REMOVE_TEXT_STYLE:return this.reducer.removeTextStyle(e,t);case c.default.REMOVE_ALL_TEXT_STYLES:return this.reducer.removeAllTextStyles(e,t);case c.default.ADD_SPACING_SECTION:return this.reducer.addSpacingSection(e,t);case c.default.UPDATE_SPACING_SECTION:return this.reducer.updateSpacingSection(e,t);case c.default.REMOVE_SPACING_SECTION:return this.reducer.removeSpacingSection(e,t);case c.default.ADD_SPACING_TOKEN:return this.reducer.addSpacingToken(e,t);case c.default.UPDATE_SPACING_TOKEN:return this.reducer.updateSpacingToken(e,t);case c.default.REMOVE_SPACING_TOKEN:return this.reducer.removeSpacingToken(e,t);case c.default.UPDATE_REM_PREFERENCES:return this.reducer.updateRemPreferences(e,t);case c.default.ADD_COMPONENT:return this.reducer.addComponent(e,t);case c.default.UPDATE_COMPONENT:return this.reducer.updateComponent(e,t);case c.default.SET_COMPONENT_SNAPSHOT:return this.reducer.setComponentSnapshot(e,t);case c.default.SET_MULTIPLE_COMPONENT_SNAPSHOTS:return this.reducer.setMultipleComponentSnapshots(e,t);case c.default.REMOVE_COMPONENT:return this.reducer.removeComponent(e,t);case c.default.REMOVE_COMPONENTS:return this.reducer.removeComponents(e,t);case c.default.ADD_COMPONENT_VERSION:return this.reducer.addComponentVersion(e,t);case c.default.ADD_COMPONENT_SECTION:return this.reducer.addComponentSection(e,t);case c.default.UPDATE_COMPONENT_SECTION:return this.reducer.updateComponentSection(e,t);case c.default.MERGE_COMPONENT_SECTION:return this.reducer.mergeComponentSection(e,t);case c.default.REMOVE_COMPONENT_SECTION:return this.reducer.removeComponentSection(e,t);case c.default.REMOVE_COMPONENT_SECTIONS:return this.reducer.removeComponentSections(e,t);case c.default.UPDATE_COMPONENTS_ORDER:return this.reducer.updateComponentsOrder(e,t);case c.default.UPDATE_COMPONENT_SECTIONS_ORDER:return this.reducer.updateComponentSectionsOrder(e,t);case c.default.ATTACH_JIRA_ISSUE:return this.reducer.attachJiraIssue(e,t);case c.default.REMOVE_JIRA_ISSUE_ATTACHMENT:return this.reducer.removeJiraIssueAttachment(e,t);case c.default.SET_LOCAL_CONNECTED_COMPONENTS:return this.reducer.setLocalConnectedComponents(e,t);case c.default.UPDATE_CONNECTED_COMPONENTS:return this.reducer.updateConnectedComponents(e,t);case c.default.CREATE_CONNECTED_COMPONENT_ITEM:return this.reducer.createConnectedComponentItem(e,t);case c.default.UPDATE_CONNECTED_COMPONENT_ITEM:return this.reducer.updateConnectedComponentItem(e,t);case c.default.DELETE_CONNECTED_COMPONENT_ITEM:return this.reducer.deleteConnectedComponentItem(e,t);case c.default.UPDATE_WORKFLOW_STATUS:return this.reducer.updateWorkflowStatus(e,t);case c.default.UPDATE_WORKFLOW_STATUSES:return this.updateWorkflowStatuses(e,t);case c.default.DELETE_WORKFLOW_STATUS:return this.reducer.deleteWorkflowStatus(e,t);case c.default.DELETE_WORKFLOW_STATUSES:return this.deleteWorkflowStatuses(e,t);case c.default.UPDATE_USER_ROLE:return this.reducer.updateUserRole(e,t);case c.default.REMOVE_MEMBER:return this.reducer.removeMember(e,t);case c.default.REMOVE_INTEGRATION:return this.reducer.removeIntegration(e,t);case c.default.ADD:return this.add(e,t);case c.default.ACTIVATE:return this.activate(e,t);case c.default.ARCHIVE:return this.archive(e,t);case c.default.REMOVE:return this.remove(e,t);case l.default.LINK_PROJECT_SUCCESS:case l.default.LINK_PROJECT:return this.linkProjectToStyleguide(e,t);case l.default.UNLINK_PROJECT:return this.unlinkProjectFromStyleguide(e,t);case c.default.UPDATE_USER_DATA:return this.updateUserData(e,t);case d.default.TRANSFER_OWNERSHIP:case c.default.OWNERSHIP_TRANSFERRED:return this.transferOwnership(e,t);case c.default.LOAD:return this.load(e,t);case c.default.LOAD_INTERMEDIATE:return this.loadIntermediate(e,t);case c.default.MOVE_RESOURCES_SUCCESS:return this.moveResourcesSuccess(e,t);case c.default.CHANGE_ASSET_NAME:return this.changeAssetName(e,t);case c.default.JOIN:return this.joinProjectRequest(e,t);case c.default.STOP_JOIN_LOADING:return this.joinProjectFinalize(e,t);case h.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:return this.reducer.onOrganizationWorkflowStatusDelete(e,t);case h.default.REMOVE_UNJOINED_BARRELS:return this.reducer.removeUnjoinedBarrels(e,t);case d.default.CREATE_PROJECT_REQUEST:return this.createProjectRequest(e);case d.default.CREATE_PROJECT_FINALIZE:return this.createProjectFinalize(e);case p.default.ADD_SECTION:case p.default.CONVERT_TAG_TO_SECTION:return this.addSection(e,t);case p.default.UPDATE_SECTION:return this.updateSection(e,t);case p.default.CREATE_SECTION:return this.createSection(e,t);case p.default.RENAME_SECTION:return this.renameSection(e,t);case p.default.UPDATE_SECTION_DESCRIPTION:return this.updateSectionDescription(e,t);case p.default.UPDATE_SECTION_ORDER:return this.updateSectionOrder(e,t);case p.default.REMOVE_SECTION:return this.removeSection(e,t);case p.default.UPDATE_SCREEN_ORDER:return this.updateScreenOrder(e,t);case p.default.UPDATE_SCREEN_ORDER_V2:return this.updateScreenOrderV2(e,t);case p.default.CREATE_VARIANT_GROUP:return this.createVariantGroup(e,t);case p.default.ADD_SCREENS_TO_VARIANT_GROUP:return this.addScreensToVariantGroup(e,t);case p.default.UPDATE_VARIANT_GROUP:return this.updateVariantGroup(e,t);case p.default.RENAME_VARIANT_GROUP:return this.renameVariantGroup(e,t);case p.default.DELETE_VARIANT_GROUP:return this.deleteVariantGroup(e,t);case p.default.DETACH_VARIANT_GROUP:return this.detachVariantGroup(e,t);case p.default.DELETE_SCREENS:return this.handleDeleteScreens(e,t);case f.default.ADD_SCREEN:return this.addScreen(e,t);case f.default.ADD_SCREEN_TILES:return this.addScreenTiles(e,t);case f.default.UPDATE_DESCRIPTION:return this.updateScreenDescription(e,t);case f.default.UPDATE_NAME:return this.updateScreenName(e,t);case f.default.REMOVE_SCREEN:return this.removeScreen(e,t);case f.default.UPDATE_TAGS:return this.updateTags(e,t);case f.default.SET_VERSIONS:return this.setVersions(e,t);case f.default.SET_SNAPSHOT:return this.setSnapshot(e,t);case f.default.ADD_VERSION:return this.addVersion(e,t);case f.default.UPDATE_COMMIT_COLOR:return this.updateCommitColor(e,t);case f.default.UPDATE_COMMIT_MESSAGE:return this.updateCommitMessage(e,t);case f.default.REMOVE_VERSION:return this.removeVersion(e,t);case f.default.REMOVE_SCREEN_VARIANT:return this.removeScreenVariant(e,t);case f.default.ADD_SCREEN_VARIANT:return this.addScreenVariant(e,t);case f.default.RENAME_SCREEN_VARIANT:return this.renameScreenVariant(e,t);case f.default.REORDER_SCREEN_VARIANT:return this.reorderScreenVariant(e,t);case f.default.ADD_ANNOTATION:return this.addComponentLinkedAnnotation(e,t);case f.default.UPDATE_ANNOTATION:return this.updateComponentLinkedAnnotation(e,t);case f.default.UPDATE_ANNOTATION_TYPE:return this.updateComponentLinkedAnnotationType(e,t);case f.default.DELETE_ANNOTATION_TYPE:return this.deleteComponentLinkedAnnotationType(e,t);case f.default.UPDATE_ANNOTATION_TEXT:return this.updateComponentLinkedAnnotationText(e,t);case f.default.UPDATE_ANNOTATION_POSITION:return this.updateComponentLinkedAnnotationPosition(e,t);case f.default.REMOVE_ANNOTATION:return this.removeComponentLinkedAnnotation(e,t);case f.default.UNLINK_ANNOTATION:return this.unlinkComponentLinkedAnnotation(e,t);case E.default.LOAD_WORKSPACE_DATA:return this.reducer.getBarrelsSuccess(e,t);case E.default.RESET:return this.reset();case E.default.HYDRATE_EMBEDDED_DATA:return this.hydrateEmbeddedData(e,t);case S.default.CREATE_COMPONENT_VARIANT_PROPERTY:return this.reducer.addComponentVariantProperty(e,t);case S.default.UPDATE_COMPONENT_VARIANT_PROPERTY:return this.reducer.updateComponentVariantProperty(e,t);case S.default.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME:return this.reducer.updateComponentVariantPropertyName(e,t);case S.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES:return this.reducer.updateComponentVariantPropertyValues(e,t);case S.default.UPDATE_COMPONENT_VARIANT_PROPERTIES_ORDER:return this.reducer.updateComponentVariantPropertiesOrder(e,t);case S.default.SET_COMPONENT_VARIANT_DATA:return this.reducer.setComponentVariantData(e,t);case S.default.REMOVE_COMPONENT_VARIANT_PROPERTY:return this.reducer.removeComponentVariantProperty(e,t);case S.default.REMOVE_COMPONENT_VARIANT_DATA:return this.reducer.removeComponentVariantData(e,t);case S.default.GROUP_COMPONENTS_BY_VARIANT_PROPERTY:return this.reducer.groupComponentsByVariantProperty(e,t);case g.default.SET_VERSION_ASSETS:return this.setSnapshot(e,Object.assign(Object.assign({},t),{snapshot:{assets:t.assets}}));default:return e}}}const A=C},,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(331),i=a(336),s=a(108),r=a(312),o=a(345),d=a(329),l=a(332),c=a(106);let u=0;const p=class{constructor(e,t){this.barrelsPropertyName=e.barrelsPropertyName,this.loadingBarrelPropertyName=e.loadingBarrelPropertyName,this.loadingBarrelsPropertyName=e.loadingBarrelsPropertyName,this.deleteBarrel=t.deleteBarrel}getBarrelsSuccess(e,{[this.barrelsPropertyName]:t}){const a=t.map((e=>new i.default(e)));return Object.assign(Object.assign({},e),{[this.loadingBarrelsPropertyName]:!1,[this.barrelsPropertyName]:Object.assign(Object.assign({},e[this.barrelsPropertyName]),(0,n.normalizeArray)(a,"_id"))})}getBarrelRequested(e){return Object.assign(Object.assign({},e),{[this.loadingBarrelPropertyName]:!0})}getBarrelSuccess(e,{barrel:t}){const a=this.updateBarrel(e,{bid:t._id,data:t,upsert:!0});return Object.assign(Object.assign({},a),{[this.loadingBarrelPropertyName]:!1})}getBarrelFailed(e,{error:t}){return Object.assign(Object.assign({},e),{[this.loadingBarrelPropertyName]:!1,error:t})}addBarrel(e,{barrel:t}){return Object.assign(Object.assign({},e),{[this.barrelsPropertyName]:Object.assign(Object.assign({},e[this.barrelsPropertyName]),{[t._id]:new i.default(t)})})}updateBarrel(e,{bid:t,data:a,upsert:n}){const{[this.barrelsPropertyName]:s}=e,r=s[t];return r||n?Object.assign(Object.assign({},e),{[this.barrelsPropertyName]:Object.assign(Object.assign({},s),{[t]:new i.default(Object.assign(Object.assign({},r),"function"==typeof a?a(r):a))})}):e}updateName(e,{bid:t,name:a}){return this.updateBarrel(e,{bid:t,data:{name:a}})}updateDescription(e,{bid:t,description:a}){return this.updateBarrel(e,{bid:t,data:{description:a}})}updateDensityScale(e,{bid:t,densityScale:a}){return this.updateBarrel(e,{bid:t,data:{densityScale:a}})}updateThumbnail(e,{bid:t,thumbnail:a}){return this.updateBarrel(e,{bid:t,data:{thumbnail:a}})}addIntegration(e,{bid:t,intype:a,integration:n}){return this.updateBarrelValue(e,{bid:t,key:"integration",value:({integration:e})=>{if(e)return e[a].find((e=>e._id===n._id))?Object.assign({},e):Object.assign(Object.assign({},e),{[a]:[...e[a],n]})}})}removeIntegration(e,{bid:t,intype:a,inid:n}){return this.updateBarrelValue(e,{bid:t,key:"integration",value:({integration:e})=>{if(e)return Object.assign(Object.assign({},e),{[a]:e[a].filter((({_id:e})=>e!==n))})}})}toggleScene(e,{bid:t,accessibility:a}){return this.updateBarrel(e,{bid:t,data:{public:a}})}addMembers(e,{bid:t,members:a}){return this.updateBarrelValue(e,{bid:t,key:"users",value:e=>{const t=a.filter((t=>!e.users.some((e=>e.user._id===t.user._id))));return[...e.users,...t]}})}updateUserRole(e,{bid:t,uid:a,role:n}){return this.updateBarrelValue(e,{bid:t,key:"users",value:({users:e})=>e.map((e=>e.user._id!==a?e:Object.assign(Object.assign({},e),{role:n})))})}removeMember(e,{bid:t,mid:a,shouldRemoveBarrel:n,barrelType:i}){return n?this.deleteBarrel(e,{bid:t,barrelType:i},!0):this.updateBarrel(e,{bid:t,data:e=>Object.assign(Object.assign({},e),{users:e.users.filter((({user:e})=>e._id!==a))})})}addColor(e,{bid:t,color:a}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:({colors:e})=>[...e,new s.default(a)]})}addMultipleColors(e,{bid:t,colors:a}){return a.reduce(((e,a)=>this.addColor(e,{bid:t,color:a})),e)}updateColor(e,{bid:t,cid:a,colorData:n}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:({colors:e})=>e.map((e=>e.id!==a?e:new s.default(Object.assign(Object.assign({},e),n))))})}removeColor(e,{bid:t,cid:a}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:({colors:e})=>e.filter((({id:e})=>e!==a))})}removeAllColors(e,{bid:t}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:[]})}migrateColors(e,{bid:t,colorsToUpdate:a,colorsToAdd:n}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:({colors:e})=>[...e.map((e=>{const t=a[e.id];return t?new s.default(Object.assign(Object.assign({},e),t)):e})),...n.map((e=>new s.default(e)))]})}updateColorOrder(e,{bid:t,cid:a,to:i}){return this.updateBarrelValue(e,{bid:t,key:"colors",value:({colors:e})=>{const t=(0,n.arrayRemove)(e,(e=>e.id===a));return t?(e.splice(i,0,t),e):e}})}addTextStyle(e,{bid:t,textStyle:a}){return this.updateBarrelValue(e,{bid:t,key:"textStyles",value:({textStyles:e})=>[...e,new r.default(a)]})}addMultipleTextStyles(e,{bid:t,textStyles:a}){return a.reduce(((e,a)=>this.addTextStyle(e,{bid:t,textStyle:a})),e)}updateTextStyle(e,{bid:t,tsid:a,textStyleData:n}){return this.updateBarrelValue(e,{bid:t,key:"textStyles",value:({textStyles:e})=>e.map((e=>e.id!==a?e:new r.default(Object.assign(Object.assign({},e),n))))})}removeTextStyle(e,{bid:t,tsid:a}){return this.updateBarrelValue(e,{bid:t,key:"textStyles",value:({textStyles:e})=>e.filter((({id:e})=>e!==a))})}removeAllTextStyles(e,{bid:t}){return this.updateBarrelValue(e,{bid:t,key:"textStyles",value:[]})}addSpacingSection(e,{bid:t,spacingSection:a}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>{var t;return[...e,Object.assign(Object.assign({},a),{spacingTokens:null!==(t=a.spacingTokens)&&void 0!==t?t:[]})]}})}updateSpacingSection(e,{bid:t,ssid:a,updatedSpacingSection:n}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),n)))})}removeSpacingSection(e,{bid:t,ssid:a}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>e.filter((({_id:e})=>e!==a))})}addSpacingToken(e,{bid:t,ssid:a,isBaseToken:i,spacingToken:s}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>e.map((e=>{if(e._id!==a)return e;const{baseTokenId:t,spacingTokens:r}=e,o=(0,n.sortArrayOfObjectsByPropertyName)([...r,s],"value");let d=1===o.length?o[0]._id:t;return i&&(d=s._id),Object.assign(Object.assign({},e),{baseTokenId:d,spacingTokens:o})}))})}updateSpacingToken(e,{bid:t,ssid:a,sptid:i,updatedSpacingToken:s,oldSpacingToken:r}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>e.map((e=>{if(e._id!==a)return e;const{baseTokenId:t,spacingTokens:o}=e,d=o.filter((({_id:e})=>e!==i)),l=Object.assign(Object.assign({},r),s),c=t===i?l._id:t;return Object.assign(Object.assign({},e),{baseTokenId:c,spacingTokens:(0,n.sortArrayOfObjectsByPropertyName)([...d,l],"value")})}))})}removeSpacingToken(e,{bid:t,ssid:a,isBaseToken:n,sptid:i}){return this.updateBarrelValue(e,{bid:t,key:"spacingSections",value:({spacingSections:e})=>e.map((e=>{if(e._id!==a)return e;const{baseTokenId:t,spacingTokens:s}=e,r=s.filter((({_id:e})=>e!==i));let o=t;return n&&(o=r.length&&r[0]._id||null),Object.assign(Object.assign({},e),{baseTokenId:o,spacingTokens:r})}))})}updateRemPreferences(e,{bid:t,updatedRemPreferences:a}){return this.updateBarrelValue(e,{bid:t,key:"remPreferences",value:({remPreferences:e})=>new o.default(Object.assign(Object.assign({},e),a))})}addComponent(e,{bid:t,csids:a,component:n}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;if(e.findComponentById(n._id))return e.componentSections;const t=e.findComponentSection(a);if(!t)return e.componentSections;const{index:i}=n;if(void 0===i?t.components.push(n):t.components.splice(i,0,n),n.requestId){const e=t.components.filter((e=>e.requestId===n.requestId)),a=t.components.filter((t=>!e.includes(t)));e.sort(((e,t)=>e.index-t.index)),t.components=a.concat(e)}return[...e.componentSections]}})}updateComponent(e,{bid:t,csids:a,coid:n,componentData:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);if(!t)return e.componentSections;const s=t.components.find((e=>e._id===n));return s?(Object.assign(s,i),[...e.componentSections]):e.componentSections}})}setComponentSnapshot(e,{bid:t,csids:a,coid:n,vid:i,snapshot:s}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);if(!t)return e.componentSections;const r=t.components.find((e=>e._id===n));return r&&r.latestVersion._id===i?(Object.assign(r.latestVersion.snapshot,s),[...e.componentSections]):e.componentSections}})}setMultipleComponentSnapshots(e,{bid:t,componentSnapshotPayloads:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(e.componentSections)return a.forEach((t=>{const{coid:a,snapshot:n,csids:i,vid:s}=t,r=e.findComponentSection(i);if(!r)return e.componentSections;const o=r.components.find((e=>e._id===a));if(!o||o.latestVersion._id!==s)return e.componentSections;Object.assign(o.latestVersion.snapshot,n)})),[...e.componentSections]}})}removeComponent(e,{bid:t,csids:a,coid:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);return t?((0,n.arrayRemove)(t.components,i),[...e.componentSections]):e.componentSections}})}removeComponents(e,{bid:t,sectionComponents:a}){let n=e;return a.forEach((({coids:e,csid:a})=>{e.forEach((e=>{n=this.removeComponent(n,{bid:t,coid:e,csids:a.split(",")})}))})),n}addComponentVersion(e,{bid:t,csids:a,coid:n,componentVersion:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);if(!t)return e.componentSections;const s=t.components.find((({_id:e})=>e===n));return s&&s.latestVersion._id!==i._id?(s.latestVersion=i,[...e.componentSections]):e.componentSections}})}addComponentSection(e,{bid:t,csids:a,componentSection:s,isCreateGroup:r}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);if(!t)return e.componentSections;if(e.componentSections.find((e=>e._id===s._id)))return e.componentSections;const o=Object.assign({},s);return o._id||(o._id=l.TEMPORARY_COMPONENT_SECTION_ID,o.newSection=!0,o.key="newComponentSection-"+u++),s.components?o.components=s.components.map((t=>{const a=e.findComponentSection(t.csid);if(!a||a instanceof i.default)return null;const s=(0,n.arrayRemove)(a.components,t.coid);return!r&&s.variant&&delete s.variant,s})).filter(Boolean):o.components=[],s.componentSections||(o.componentSections=[]),void 0===s.index?t.componentSections.push(o):t.componentSections.splice(s.index,0,o),[...e.componentSections]}})}updateComponentSection(e,{bid:t,csids:a,componentSectionData:n}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection(a);return t?(Object.assign(t,n),[...e.componentSections]):e.componentSections}})}mergeComponentSection(e,{bid:t,csids:a,tcsids:i,flatten:s}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=[...a],r=t.pop(),o=e.findComponentSection(t);if(!o)return e.componentSections;const d=e.findComponentSection(i);if(!d)return e.componentSections;const l=(0,n.arrayRemove)(o.componentSections,r);if(!l)return e.componentSections;const[c]=a,[u]=i;return c!==u&&this.removeVariantFromComponents(l),s?d.components.push(...this.flattenComponents(l)):(d.components.push(...l.components),d.componentSections.push(...l.componentSections)),[...e.componentSections]}})}removeComponentSection(e,{bid:t,csids:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=a.pop(),i=e.findComponentSection(a);return i?((0,n.arrayRemove)(i.componentSections,t),[...e.componentSections]):e.componentSections}})}removeComponentSections(e,{bid:t,componentSections:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(e.componentSections)return a.forEach((t=>(0,n.arrayRemove)(e.componentSections,t))),[...e.componentSections]}})}updateComponentsOrder(e,{bid:t,components:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(e.componentSections)return a.forEach((t=>{const{coid:a,csid:i,tcsid:s,to:r}=t,o=e.findComponentSection(i),d=e.findComponentSection(s);if(!o||!d)return e.componentSections;const l=(0,n.arrayRemove)(o.components,a);if(!l)return e.componentSections;const c=void 0===r?d.components.length:r,[u]=i,[p]=s;l.variant&&u!==p&&delete l.variant,d.components.splice(c,0,l)})),[...e.componentSections]}})}updateComponentSectionsOrder(e,{bid:t,componentSections:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(e.componentSections)return a.forEach((t=>{const{csid:a,tcsid:i,to:s}=t,r=e.findComponentSection(a.slice(0,-1)),o=i?e.findComponentSection(i):e,d=(0,n.arrayRemove)(r.componentSections,a[a.length-1]);o.componentSections.splice(s,0,d)})),[...e.componentSections]}})}attachJiraIssue(e,{bid:t,jira:a}){return this.updateBarrelValue(e,{bid:t,key:"integration",value:({integration:e})=>(null==e?void 0:e.jira)?Object.assign(Object.assign({},e),{jira:Object.assign(Object.assign({},e.jira),{attachments:[...e.jira.attachments,...a.attachments.filter((t=>!e.jira.attachments.find((e=>e.id===t.id))))]})}):Object.assign(Object.assign({},e),{jira:a})})}removeJiraIssueAttachment(e,{bid:t,aid:a}){return this.updateBarrelValue(e,{bid:t,key:"integration",value:({integration:e})=>{var t;return(null===(t=null==e?void 0:e.jira)||void 0===t?void 0:t.attachments)?Object.assign(Object.assign({},e),{jira:Object.assign(Object.assign({},e.jira),{attachments:e.jira.attachments.filter((e=>e.id!==a))})}):e}})}setLocalConnectedComponents(e,{bid:t,localConnectedComponents:a}){return this.updateBarrelValue(e,{bid:t,key:"localConnectedComponents",value:()=>a})}updateConnectedComponents(e,{bid:t,connectedComponents:a}){return this.updateBarrelValue(e,{bid:t,key:"connectedComponents",value:()=>a})}createConnectedComponentItem(e,{bid:t,connectedComponentItem:a}){return this.updateBarrelValue(e,{bid:t,key:"connectedComponents",value:e=>[...e.connectedComponents||[],a]})}updateConnectedComponentItem(e,{bid:t,itemId:a,payload:n}){return this.updateBarrelValue(e,{bid:t,key:"connectedComponents",value:({connectedComponents:e})=>e.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),n)))})}deleteConnectedComponentItem(e,{bid:t,itemId:a}){return this.updateBarrelValue(e,{bid:t,key:"connectedComponents",value:({connectedComponents:e})=>e.filter((({_id:e})=>e!==a))})}updateWorkflowStatus(e,{bid:t,workflowStatus:a}){return this.updateBarrelValue(e,{bid:t,key:"workflowStatus",value:a})}deleteWorkflowStatus(e,{bid:t}){return this.updateBarrelValue(e,{bid:t,key:"workflowStatus",value:d.default.NoStatus})}onOrganizationWorkflowStatusDelete(e,{workflowStatusId:t}){const a=e[this.barrelsPropertyName];return Object.values(a).filter((e=>e.workflowStatus._id===t)).reduce(((e,t)=>this.deleteWorkflowStatus(e,{bid:t.id})),e)}removeUnjoinedBarrels(e,t){const a=e[this.barrelsPropertyName],n=t[`remaining${(0,c.uppercaseFirst)(this.barrelsPropertyName)}`];return Object.assign(Object.assign({},e),{[this.barrelsPropertyName]:Object.fromEntries(Object.entries(a).filter((([e])=>n.includes(e))))})}flattenComponents(e){return e.components.concat(...e.componentSections.map((e=>this.flattenComponents(e))))}updateBarrelValue(e,{bid:t,key:a,value:n}){return this.updateBarrel(e,{bid:t,data:e=>new i.default(Object.assign(Object.assign({},e),{[a]:"function"==typeof n?n(e):n}))})}addComponentVariantProperty(e,{bid:t,csid:a,componentVariantProperty:n}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{var t;if(!e.componentSections)return;const i=e.findComponentSection([a]);return(null===(t=null==i?void 0:i.variant)||void 0===t?void 0:t.properties)?(i.variant.properties.push(n),[...e.componentSections]):e.componentSections}})}updateComponentVariantProperty(e,{bid:t,csid:a,vpid:n,data:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{var t;if(!e.componentSections)return;const s=e.findComponentSection([a]);if(!(null===(t=null==s?void 0:s.variant)||void 0===t?void 0:t.properties))return e.componentSections;const r=s.variant.properties.find((({_id:e})=>e===n));return r?(Object.assign(r,i),[...e.componentSections]):e.componentSections}})}updateComponentVariantPropertyName(e,{bid:t,csid:a,vpid:n,name:i}){return this.updateComponentVariantProperty(e,{bid:t,csid:a,vpid:n,data:{name:i}})}updateComponentVariantPropertyValues(e,{bid:t,csid:a,vpid:n,values:i}){return this.updateComponentVariantProperty(e,{bid:t,csid:a,vpid:n,data:{values:i}})}updateComponentVariantPropertiesOrder(e,{bid:t,csid:a,properties:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection([a]);if(!(null==t?void 0:t.variant))return e.componentSections;for(let a=0;a<i.length;a++){const{_id:e,to:s}=i[a],r=(0,n.arrayRemove)(t.variant.properties,(t=>t._id===e));t.variant.properties.splice(s,0,r)}return[...e.componentSections]}})}setComponentVariantData(e,{bid:t,csid:a,name:n,sectionVariant:i,components:s}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection([a]);return t?(n&&(t.name=n),i&&(t.variant=i),s&&s.forEach((({_id:t,variant:a})=>{const n=e.findComponentById(t);n&&(n.variant=a)})),[...e.componentSections]):e.componentSections}})}removeVariantPropertyFromComponents(e,t){e.components.forEach((e=>{e.variant&&(e.variant.values=e.variant.values.filter((e=>e.propertyId!==t)))})),e.componentSections.forEach((e=>this.removeVariantPropertyFromComponents(e,t)))}removeComponentVariantProperty(e,{bid:t,csid:a,vpid:n}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection([a]);return t&&t.variant&&t.variant.properties?(t.variant.properties=t.variant.properties.filter((({_id:e})=>e!==n)),this.removeVariantPropertyFromComponents(t,n),[...e.componentSections]):e.componentSections}})}removeVariantFromComponents(e){e.components.forEach((e=>{delete e.variant})),e.componentSections.forEach((e=>this.removeVariantFromComponents(e)))}removeComponentVariantData(e,{bid:t,csid:a}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection([a]);return t?(delete t.variant,this.removeVariantFromComponents(t),[...e.componentSections]):e.componentSections}})}groupComponentsByVariantProperty(e,{bid:t,csid:a,components:n,componentSections:i}){return this.updateBarrelValue(e,{bid:t,key:"componentSections",value:e=>{if(!e.componentSections)return;const t=e.findComponentSection([a]);if(!t)return e.componentSections;const s=this.flattenComponents(t);return i.forEach((e=>{e.components=e.components.map((({_id:e})=>s.find((({_id:t})=>t===e))))})),t.componentSections=i,t.components=n.map((({_id:e})=>s.find((({_id:t})=>t===e)))),[...e.componentSections]}})}changeComponentAssetName(e,{bid:t,component:a,assetId:n,name:i}){if(!a)return e;const{latestVersion:{snapshot:{assets:s},snapshot:r},latestVersion:o}=a,d=a.idPath.slice(0,-1),l=a._id;return this.updateComponent(e,{bid:t,csids:d,coid:l,componentData:{latestVersion:Object.assign(Object.assign({},o),{snapshot:Object.assign(Object.assign({},r),{assets:null==s?void 0:s.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{localName:i})))})})}})}}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.UPDATE_STATE="styleguide/updateState",e.CHANGE_LEFT_SIDEBAR_WIDTH="styleguide/changeLeftSidebarWidth",e.CHANGE_RIGHT_SIDEBAR_WIDTH="styleguide/changeRightSidebarWidth",e.CHANGE_SORT_TYPE="styleguide/changeSortType",e.CHANGE_COMPONENT_FILTER_VALUE="styleguide/changeComponentFilterValue",e.CHANGE_SELECTED_NAVIGATOR_ID="styleguide/changeSelectedNavigatorId",e.HIGHLIGHT_COLORS="styleguide/highlightColors",e.UNHIGHLIGHT_COLOR="styleguide/unhighlightColor",e.HIGHLIGHT_TEXT_STYLES="styleguide/highlightTextStyles",e.UNHIGHLIGHT_TEXT_STYLE="styleguide/unhighlightTextStyle",e.HIGHLIGHT_SPACING_TOKENS="styleguide/highlightSpacingTokens",e.UNHIGHLIGHT_SPACING_TOKEN="styleguide/unhighlightSpacingToken",e.SECTION_SCROLLED="styleguide/sectionScrolled",e.CHANGE_SELECTION="styleguide/changeSelection",e.EXPAND_SECTIONS="styleguide/expandSections",e.COLLAPSE_SECTIONS="styleguide/collapseSections",e.COLLAPSE_ALL_SECTIONS="styleguide/collapseAllSections",e.HIDE_SUGGESTED_COLORS="styleguide/hideSuggestedColors",e.HIDE_SUGGESTED_TEXT_STYLES="stylegudie/hideSuggestedTextStyles",e.OPEN_MOVE_RESOURCES_POPUP="styleguide/openMoveResourcesPopup",e.CLOSE_MOVE_RESOURCES_POPUP="styleguide/closeMoveResourcesPopup",e.SELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE="styleguide/selectMoveResourcesTargetStyleguide",e.DESELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE="styleguide/deselectMoveResourcesTargetStyleguide",e.CONVERT_SECTION_TO_VARIANT_SECTION="styleguide/convertSectionToVariantSection",e.CONVERT_VARIANT_SECTION_TO_SECTION="styleguide/convertVariantSectionToSection",e.CREATE_COMPONENT_VARIANT_PROPERTY="styleguide/createComponentVariantProperty",e.ADD_COMPONENT_VARIANT_PROPERTY="styleguide/addComponentVariantProperty",e.UPDATE_COMPONENT_VARIANT_PROPERTY="styleguide/updateComponentVariantProperty",e.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME="styleguide/updateComponentVariantPropertyName",e.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES="styleguide/updateComponentVariantPropertyValues",e.UPDATE_COMPONENT_VARIANT_PROPERTIES_ORDER="styleguide/updateComponentVariantPropertiesOrder",e.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUE="styleguide/updateComponentVariantPropertyValue",e.SET_COMPONENT_VARIANT_DATA="styleguide/setComponentVariantData",e.REMOVE_COMPONENT_VARIANT_PROPERTY="styleguide/removeComponentVariantProperty",e.REMOVE_COMPONENT_VARIANT_DATA="styleguide/removeComponentVariantData",e.CREATE_COMPONENT_SECTION_VARIANT_GROUPS="styleguide/createComponentSectionVariantGroups",e.GROUP_COMPONENTS_BY_VARIANT_PROPERTY="styleguide/groupComponentsByVariantProperty",e.HIDE_COMPONENT_VARIANTS_ONBOARDING_DIALOG="styleguide/hideComponentVariantsOnboardingDialog"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.SET_VERSION_ASSETS="assets/setVersionAssets",e.SET_COMPONENT_ASSETS="assets/setComponentAssets",e.SET_MULTIPLE_COMPONENT_ASSETS="assets/setMultipleComponentAssets",e.UPDATE_VERSION_ASSET_OPTIMIZED_CONTENTS="assets/updateVersionAssetOptimizedContents",e.PROCESS_VERSION_ASSET_CONTENT_REQUEST="assets/processVersionAssetContentRequest",e.PROCESS_VERSION_ASSET_CONTENT_FAILURE="assets/processVersionAssetContentFailure",e.UPDATE_COMPONENT_VERSION_ASSET_OPTIMIZED_CONTENTS="assets/updateComponentVersionAssetOptimizedContents",e.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_REQUEST="assets/processComponentVersionAssetContentRequest",e.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_FAILURE="assets/processComponentVersionAssetContentFailure"}(n||(n={}));const i=n},,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(263),r=a(284),o=a(123);class d extends(i()){getInitialState(){return{projects:[],styleguides:[]}}init({projects:e,styleguides:t}){return{projects:e,styleguides:t}}update(e,{barrel:{barrelType:t},data:a}){const{_id:n,name:i}=a[t],s=t===o.default.PROJECT?"projects":"styleguides",r=e[s].filter((({_id:e})=>e!==n)),d=[{_id:n,name:i},...r].slice(0,10);return Object.assign(Object.assign({},e),{[s]:d})}reduce(e,t){switch(t.type){case r.default.LOAD:return this.update(e,t);case s.default.INIT_RECENTLY_LOADED_BARRELS:return this.init(t);default:return e}}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(270),i=a.n(n),s=a(357),r=a(284),o=a(263),d=a(286);class l extends(i()){constructor(e){super(e)}getInitialState(){return{componentVariantViewVisible:!1,selectedLayer:null,destinationLayer:null,selectedComponentVariantId:null,sourceLayerId:null}}open(e,{coid:t,sourceLayerId:a}){return Object.assign(Object.assign({},e),{componentVariantViewVisible:!0,selectedComponentVariantId:t,sourceLayerId:a})}close(){return this.getInitialState()}selectLayer(e,{layer:t}){return Object.assign(Object.assign({},e),{selectedLayer:t,destinationLayer:t})}enterLayer(e,{layer:t}){return e.selectedLayer?Object.assign(Object.assign({},e),{destinationLayer:t}):e}leaveLayer(e){return e.selectedLayer?Object.assign(Object.assign({},e),{destinationLayer:null}):e}deselectLayer(e){return e.selectedLayer?Object.assign(Object.assign({},e),{selectedLayer:null,destinationLayer:null}):e}changeComponentVariant(e,{coid:t}){return Object.assign(Object.assign({},e),{selectedComponentVariantId:t,selectedLayer:null,destinationLayer:null})}resetComponentVariant(e,{coid:t}){return e.selectedComponentVariantId!==t?e:Object.assign(Object.assign({},e),{selectedComponentVariantId:null,selectedLayer:null,destinationLayer:null})}resetComponentVariantForMultipleDeletion(e,{sectionComponents:t}){return t.find((({coids:t})=>t.find((t=>t===e.selectedComponentVariantId))))?Object.assign(Object.assign({},e),{selectedComponentVariantId:null,selectedLayer:null,destinationLayer:null}):e}reduce(e,t){switch(t.type){case o.default.RESET:case r.default.RESET:case r.default.LOAD:case r.default.CHANGE_SELECTED_VIEW:return this.getInitialState();case s.default.OPEN:return this.open(e,t);case s.default.CLOSE:return this.close();case s.default.SELECT_LAYER:return this.selectLayer(e,t);case s.default.ENTER_LAYER:return this.enterLayer(e,t);case s.default.LEAVE_LAYER:return this.leaveLayer(e);case s.default.DESELECT_LAYER:return this.deselectLayer(e);case s.default.CHANGE_VARIANT:return this.changeComponentVariant(e,t);case r.default.REMOVE_COMPONENT:return this.resetComponentVariant(e,t);case r.default.REMOVE_COMPONENTS:return this.resetComponentVariantForMultipleDeletion(e,t);case d.default.SELECT_LAYER:return this.deselectLayer(e);default:return e}}}const c=l},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.OPEN="componentVariant/open",e.CLOSE="componentVariant/close",e.SELECT_LAYER="componentVariant/selectLayer",e.ENTER_LAYER="componentVariant/enterLayer",e.LEAVE_LAYER="componentVariant/leaveLayer",e.DESELECT_LAYER="componentVariant/deselectLayer",e.CHANGE_VARIANT="componentVariant/changeVariant"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(270),i=a.n(n),s=a(286),r=a(284),o=a(337),d=a(359),l=a(15);class c extends(i()){getInitialState(){return{loadingDots:!0,statusFilter:d.default.Open,colorFilter:null,lastNoteColorUsed:"yellow",flash:!1,dotId:null,highlightedDots:[],highlightedComments:[],savedNotes:{}}}reset(e){const{savedNotes:t}=e;return Object.assign(Object.assign({},this.getInitialState()),{savedNotes:t})}load(e,{dots:t={}}){const{savedNotes:a}=e;return Object.assign(Object.assign(Object.assign({},e),t),{savedNotes:a})}setDots(e,{dotId:t,statusFilter:a,colorFilter:n}){return Object.assign(Object.assign({},e),{loadingDots:!1,dotId:t,statusFilter:a,colorFilter:n})}setDotsForIntermediateLoading(e,{dotsDetails:{dotId:t},openScreenData:{commentId:a},barrelData:{dots:n}}){if(e.dotId===t)return Object.assign(Object.assign(Object.assign({},e),n),{loadingDots:!1,dotId:t});let i=[];return Array.isArray(a)?i=a:a&&(i=[a]),Object.assign(Object.assign(Object.assign({},e),n),{loadingDots:!1,dotId:t,highlightedComments:i,highlightedDots:e.highlightedDots.filter((e=>e!==t))})}createNote(e,{dot:{_id:t}}){return Object.assign(Object.assign({},e),{dotId:t,statusFilter:d.default.Open,colorFilter:null})}updateDot(e,{did:t,dotData:{_id:a}}){return e.dotId!==t&&t===a?e:Object.assign(Object.assign({},e),{dotId:a})}updateDotStatus(e,{did:t,status:a,statusFilter:n}){const i=n||e.statusFilter;return e.dotId===t&&i!==a?Object.assign(Object.assign({},e),{statusFilter:i,dotId:null}):n?Object.assign(Object.assign({},e),{statusFilter:i}):e}updateLastNoteColorUsed(e,{colorName:t}){return Object.assign(Object.assign({},e),{lastNoteColorUsed:t})}saveNote(e,t,a,n){const{savedNotes:i}=e,s=(0,o.isDraftDot)(a)?"newDot":a;return Object.assign(Object.assign({},e),{savedNotes:Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},i[t]),{[s]:n})})})}removeDot(e,{sid:t,did:a,note:n}){let{savedNotes:i}=e;return(0,o.isDraftDot)(a)&&(i=Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},i[t]),{newDot:n})})),e.dotId!==a?(0,o.isDraftDot)(a)?Object.assign(Object.assign({},e),{savedNotes:i}):e:Object.assign(Object.assign({},e),{savedNotes:i,dotId:null})}changeDotFilter(e,{status:t,color:a,dotId:n}){return Object.assign(Object.assign({},e),{colorFilter:a,statusFilter:t,dotId:n})}flash(e,{flash:t}){return Object.assign(Object.assign({},e),{flash:t})}dotsFlashed(e){return Object.assign(Object.assign({},e),{flash:!1})}selectDot(e,{dotId:t,commentId:a}){if(e.dotId===t)return e;let n=[];return Array.isArray(a)?n=a:a&&(n=[a]),Object.assign(Object.assign({},e),{dotId:t,highlightedComments:n,highlightedDots:e.highlightedDots.filter((e=>e!==t))})}deselectDot(e){return Object.assign(Object.assign({},e),{dotId:null})}unhighlightComment(e,{cmid:t}){return Object.assign(Object.assign({},e),{highlightedComments:e.highlightedComments.filter((e=>e!==t))})}updateDotPopupRemarkType(e,{remark:t,did:a,remarkType:n,sid:i,textContent:s}){if(n===l.default.Dot){const{savedNotes:a}=e;return Object.assign(Object.assign({},e),{dotId:t._id,savedNotes:Object.assign(Object.assign({},a),{[i]:Object.assign(Object.assign({},a[i]),{[t._id]:null!=s?s:""})}),statusFilter:d.default.Open,colorFilter:null})}return e.dotId===a?Object.assign(Object.assign({},e),{dotId:null}):e}handleAddAnnotation(e,{sid:t,annotation:{_id:a}}){if(!(0,o.isDraftAnnotation)(a))return e;const{savedNotes:n}=e;return Object.assign(Object.assign({},e),{savedNotes:Object.assign(Object.assign({},n),{[t]:Object.assign(Object.assign({},n[t]),{newDot:""})})})}handleChangeSelectedView(e){const{savedNotes:t,lastNoteColorUsed:a}=e;return Object.assign(Object.assign({},this.getInitialState()),{savedNotes:t,lastNoteColorUsed:a})}reduce(e,t){switch(t.type){case r.default.RESET:return this.reset(e);case r.default.CHANGE_SELECTED_VIEW:return this.handleChangeSelectedView(e);case r.default.LOAD:return this.load(e,t);case r.default.LOAD_INTERMEDIATE:return this.setDotsForIntermediateLoading(e,t);case s.default.SET_DOTS:return this.setDots(e,t);case s.default.CREATE_NOTE:return this.createNote(e,t);case s.default.UPDATE_DOT:return this.updateDot(e,t);case s.default.UPDATE_DOT_STATUS:return this.updateDotStatus(e,t);case s.default.UPDATE_DOT_COLOR:return this.updateLastNoteColorUsed(e,t);case s.default.SAVE_NOTE:return this.saveNote(e,t.sid,t.did,t.note);case s.default.ADD_DOT:return this.saveNote(e,t.sid,t.dot._id,"");case s.default.CREATE_COMMENT:return this.saveNote(e,t.sid,t.did,"");case s.default.REMOVE_DOT:return this.removeDot(e,t);case s.default.CHANGE_DOT_FILTER:return this.changeDotFilter(e,t);case s.default.ENABLE_NOTE_MODE:return this.flash(e,t);case s.default.DOTS_FLASHED:return this.dotsFlashed(e);case s.default.OPEN_SCREEN:case s.default.SELECT_DOT:return this.selectDot(e,t);case s.default.SELECT_LAYER:case s.default.CLOSE_DOT_POPUP:case s.default.OPEN_DOT_MENU:case s.default.DESELECT_LAYER:case s.default.SHOW_FLOW_LINKS:case s.default.SELECT_ANNOTATION:case s.default.CREATE_ANNOTATION:case s.default.ENTER_STAGE_MODE:case s.default.CLOSE_STAGE_MODE_SIDEBAR:return this.deselectDot(e);case s.default.UNHIGHLIGHT_COMMENT:return this.unhighlightComment(e,t);case s.default.UPDATE_DOTPOPUP_REMARK_TYPE:return this.updateDotPopupRemarkType(e,t);case s.default.ADD_ANNOTATION:return this.handleAddAnnotation(e,t);default:return e}}}const u=c},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(270),i=a.n(n),s=a(286),r=a(361),o=a(15),d=a(284);class l extends(i()){constructor(e){super(e),this.reducer=new r.default({propertyName:"dots"})}getInitialState(){return{flash:!1,dots:{}}}dotsFlashed(e){return Object.assign(Object.assign({},e),{flash:!1})}setDots(e,{pid:t,sid:a,dots:n}){return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:a,data:n})}setDotsForIntermediateLoading(e,{dotsDetails:{pid:t,sid:a,dots:n}}){return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:a,data:n})}createNote(e,{pid:t,sid:a,dot:n}){return this.reducer.insertDotAndAnnotation(e,{pid:t,sid:a,data:n})}updateDot(e,{pid:t,sid:a,did:n,dotData:i}){return this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:i})}updateDotPosition(e,{pid:t,sid:a,did:n,x:i,y:s}){return this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{x:i,y:s}})}updateDotStatus(e,{pid:t,sid:a,did:n,status:i}){return this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{status:i}})}updateDotColor(e,{pid:t,sid:a,did:n,color:i}){return this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{color:i}})}addDot(e,{pid:t,sid:a,dot:n}){return this.reducer.insertDotAndAnnotation(e,{pid:t,sid:a,data:n})}createComment(e,{pid:t,sid:a,did:n,comment:i}){return this.reducer.insertDotComment(e,{pid:t,sid:a,daid:n,comment:i})}addComment(e,{pid:t,sid:a,did:n,comment:i}){return this.reducer.insertDotComment(e,{pid:t,sid:a,daid:n,comment:i})}updateComment(e,{pid:t,sid:a,did:n,cmid:i,commentData:s}){return this.reducer.updateDotComment(e,{pid:t,sid:a,daid:n,cmid:i,commentData:s})}removeComment(e,{pid:t,sid:a,did:n,cmid:i}){return this.reducer.removeDotComment(e,{pid:t,sid:a,daid:n,cmid:i})}removeDot(e,{pid:t,sid:a,did:n}){return this.reducer.removeDotAndAnnotation(e,{pid:t,sid:a,daid:n})}updateDotPopupRemarkType(e,{pid:t,sid:a,did:n,remark:i,remarkType:s}){return s===o.default.Dot?this.createNote(e,{pid:t,sid:a,dot:i}):this.reducer.removeDotAndAnnotation(e,{pid:t,sid:a,daid:n})}updateUserData(e,{bid:t,uid:a,userData:n}){const i=e.dots[t];for(const s in i){const r=i[s];if(r&&r.length){const i=r.map((e=>{const t=e.comments.map((e=>e.author&&e.author._id===a?Object.assign(Object.assign({},e),{author:Object.assign(Object.assign({},e.author),n)}):e));return e.creator&&e.creator._id===a?Object.assign(Object.assign({},e),{comments:t,creator:Object.assign(Object.assign({},e.creator),n)}):Object.assign(Object.assign({},e),{comments:t})}));return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:s,data:i})}}return e}reduce(e,t){switch(t.type){case s.default.SET_DOTS:return this.setDots(e,t);case s.default.CREATE_NOTE:return this.createNote(e,t);case s.default.UPDATE_DOT:return this.updateDot(e,t);case s.default.UPDATE_DOT_STATUS:return this.updateDotStatus(e,t);case s.default.UPDATE_DOT_POSITION:return this.updateDotPosition(e,t);case s.default.UPDATE_DOT_COLOR:return this.updateDotColor(e,t);case s.default.ADD_DOT:return this.addDot(e,t);case s.default.CREATE_COMMENT:return this.createComment(e,t);case s.default.ADD_COMMENT:return this.addComment(e,t);case s.default.UPDATE_COMMENT:return this.updateComment(e,t);case s.default.REMOVE_COMMENT:return this.removeComment(e,t);case s.default.REMOVE_DOT:return this.removeDot(e,t);case s.default.DOTS_FLASHED:return this.dotsFlashed(e);case s.default.UPDATE_DOTPOPUP_REMARK_TYPE:return this.updateDotPopupRemarkType(e,t);case d.default.UPDATE_USER_DATA:return this.updateUserData(e,t);case d.default.LOAD_INTERMEDIATE:return this.setDotsForIntermediateLoading(e,t);default:return e}}}const c=l},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=class{constructor(e){this.propertyName=e.propertyName}getDotsAndAnnotations(e,{pid:t,sid:a}){var n,i;if(t&&a)return null===(i=null===(n=e[this.propertyName])||void 0===n?void 0:n[t])||void 0===i?void 0:i[a]}getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:n}){if(!t||!a||!n)return;const i=this.getDotsAndAnnotations(e,{pid:t,sid:a});return null==i?void 0:i.find((({_id:e})=>n===e))}setDotsAndAnnotations(e,{pid:t,sid:a,data:n}){return t&&a?Object.assign(Object.assign({},e),{[this.propertyName]:Object.assign(Object.assign({},e[this.propertyName]),{[t]:Object.assign(Object.assign({},e[this.propertyName][t]),{[a]:n})})}):e}insertDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:i}){if(!t||!a)return e;const s=this.getDotsAndAnnotations(e,{pid:t,sid:a});if(!s)return e;if(this.getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:null!=n?n:i._id}))return e;const r=[...s,i];return this.setDotsAndAnnotations(e,{pid:t,sid:a,data:r})}updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:i}){if(!t||!a)return e;const s=this.getDotsAndAnnotations(e,{pid:t,sid:a});if(!s)return e;if(!this.getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:null!=n?n:i._id}))return e;const r=s.map((e=>e._id===n?Object.assign(Object.assign({},e),i):e));return this.setDotsAndAnnotations(e,{pid:t,sid:a,data:r})}removeDotAndAnnotation(e,{pid:t,sid:a,daid:n}){if(!t||!a)return e;const i=this.getDotsAndAnnotations(e,{pid:t,sid:a});if(!i)return e;const s=i.filter((({_id:e})=>e!==n));return this.setDotsAndAnnotations(e,{pid:t,sid:a,data:s})}insertDotComment(e,{pid:t,sid:a,daid:n,comment:i}){var s,r,o,d;const l=this.getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:n});if(!l)return e;if(null===(r=null===(s=l)||void 0===s?void 0:s.comments)||void 0===r?void 0:r.find((e=>e._id===i._id)))return e;const c={comments:[...null!==(d=null===(o=l)||void 0===o?void 0:o.comments)&&void 0!==d?d:[],i]};return this.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:c})}updateDotComment(e,{pid:t,sid:a,daid:n,cmid:i,commentData:s}){var r,o;const d=this.getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:n});if(!d)return e;const l={comments:null===(o=null===(r=d)||void 0===r?void 0:r.comments)||void 0===o?void 0:o.map((e=>e._id!==i?e:Object.assign(Object.assign({},e),s)))};return this.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:l})}removeDotComment(e,{pid:t,sid:a,daid:n,cmid:i}){var s,r;const o=this.getSingleDotAndAnnotation(e,{pid:t,sid:a,daid:n});if(!o)return e;const d={comments:null===(r=null===(s=o)||void 0===s?void 0:s.comments)||void 0===r?void 0:r.filter((e=>e._id!==i))};return this.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:d})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(270),i=a.n(n),s=a(263),r=a(284),o=a(287),d=a(286),l=a(357),c=a(363),u=a(364),p=a(365),f=a(4),S=a(313),h=a(7),E=a(15),g=a(185),O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class T extends(i()){getInitialState(){return{loadingSnapshot:!0,processingSnapshotTiles:!0,screenId:null,percentageMode:!1,selectedLayer:null,destinationLayer:null,highlightedLayer:null,notesVisible:!0,noteMode:!1,tagManagerScreenIds:[],gridLayoutEnabled:!1,gridWidgetEnabled:!1,scrollTop:0,scrollLeft:0,zoomLevel:p.ZOOM_LEVEL_DEFAULT,zoomLevelAtGestureStart:null,animateZooming:!1,flowLinksVisible:!1,screenSidebarWidth:260,selectedSidebarTab:u.default[0].id,sourceFiles:{},componentVariantsOnboardingHintboxSeen:!1,imageProcessingHintboxSeen:!1,componentVariantViewSeen:!1,numberOfLayerComponentViews:0,componentsFilter:c.default.Hide,screenOnboardingStep:null,screenOnboardingInfoVisible:!0,screenOnboardingFlowHintboxHidden:!1,stageModeFirstTimeLandingHidden:!1,stageMode:!1,stageSidebarOpen:!1,stageModeHistoryCount:0,flashStageModeHotspots:!1,loadingVersions:!0,versionId:null,latestVersionSelected:!1,versionsVisible:!1,versionsCompactMode:(0,f.isMobileViewport)(),versionsSidebarWidth:280,dotPopupRemarkType:E.default.Dot}}reset(e){const{screen:t={}}=e||{};return Object.assign(Object.assign({},this.getInitialState()),t)}load(e,{screen:t={}}){var a;return Object.assign(Object.assign(Object.assign({},e),t),{selectedLayer:e.selectedLayer,dotPopupRemarkType:null!==(a=t.lastRemarkTypeUsed)&&void 0!==a?a:E.default.Dot})}loadIntermediate(e,t){var a,{barrelData:{screen:n}}=t,i=t.openScreenData,{shouldResetDashboardFilters:s,barrelId:r,dotId:o,commentId:d,annotationId:l}=i,c=O(i,["shouldResetDashboardFilters","barrelId","dotId","commentId","annotationId"]);return Object.assign(Object.assign(Object.assign(Object.assign({},e),n),c),{selectedLayer:null,destinationLayer:null,noteMode:!1,dotPopupRemarkType:null!==(a=null==n?void 0:n.lastRemarkTypeUsed)&&void 0!==a?a:E.default.Dot})}openScreen(e,t){var{shouldResetDashboardFilters:a,barrelId:n,dotId:i,commentId:s,annotationId:r}=t,o=O(t,["shouldResetDashboardFilters","barrelId","dotId","commentId","annotationId"]);return Object.assign(Object.assign(Object.assign({},e),o),{selectedLayer:null,destinationLayer:null,highlightedLayer:null,noteMode:!1})}closeScreen(e){return Object.assign(Object.assign({},e),{loadingSnapshot:!0,processingSnapshotTiles:!0,screenId:null,percentageMode:!1,selectedLayer:null,destinationLayer:null,highlightedLayer:null,noteMode:!1,tagManagerScreenIds:[],gridWidgetEnabled:!1,scrollTop:0,scrollLeft:0,zoomLevelAtGestureStart:null,animateZooming:!1,flowLinksVisible:!1,selectedSidebarTab:u.default[0].id,componentsFilter:c.default.Hide,loadingVersions:!0,versionId:null,latestVersionSelected:!1,versionsVisible:!1,versionsCompactMode:!1})}changeZoomLevel(e,t,a=!1){const n=(0,S.clamp)(t,p.ZOOM_LEVEL_MIN,p.ZOOM_LEVEL_MAX);return e.stageMode?e:Object.assign(Object.assign({},e),{zoomLevel:n,animateZooming:a})}zoomIn(e){var t;const a=null!==(t=p.ZOOM_LEVELS.find((t=>t>e.zoomLevel)))&&void 0!==t?t:p.ZOOM_LEVEL_MAX;return this.changeZoomLevel(e,a,!0)}zoomOut(e){var t;const a=null!==(t=[...p.ZOOM_LEVELS].reverse().find((t=>t<e.zoomLevel)))&&void 0!==t?t:p.ZOOM_LEVEL_MIN;return this.changeZoomLevel(e,a,!0)}resetZoom(e){return this.changeZoomLevel(e,p.ZOOM_LEVEL_DEFAULT,!0)}zoomApplied(e){return e.animateZooming?Object.assign(Object.assign({},e),{animateZooming:!1}):e}startGesture(e){return Object.assign(Object.assign({},e),{zoomLevelAtGestureStart:e.zoomLevel})}zoomWithGesture(e,{scale:t}){return this.changeZoomLevel(e,e.zoomLevelAtGestureStart*t)}zoomWithWheel(e,{deltaY:t}){return this.changeZoomLevel(e,e.zoomLevel-t/100)}changeScrollPosition(e,{scrollTop:t,scrollLeft:a}){return Object.assign(Object.assign({},e),{scrollTop:t,scrollLeft:a})}openTagManager(e,{sids:t}){return Object.assign(Object.assign({},e),{tagManagerScreenIds:t})}closeTagManager(e){return Object.assign(Object.assign({},e),{tagManagerScreenIds:[]})}toggleGridLayout(e){return Object.assign(Object.assign({},e),{gridLayoutEnabled:!e.gridLayoutEnabled})}toggleGridWidget(e){return Object.assign(Object.assign({},e),{gridWidgetEnabled:!e.gridWidgetEnabled})}enableNoteMode(e){return Object.assign(Object.assign({},e),{notesVisible:!0,noteMode:!0})}disableNoteMode(e){return Object.assign(Object.assign({},e),{noteMode:!1})}showNotes(e){return Object.assign(Object.assign({},e),{notesVisible:!0,noteMode:!1})}hideNotes(e){return Object.assign(Object.assign({},e),{notesVisible:!1,noteMode:!1})}selectLayer(e,{layer:t,shouldIncrementNumberOfLayerComponentViews:a,shouldCompleteLayerOnboarding:n}){const i=n?this.resetScreenOnboardingStep(e):e,s=i.numberOfLayerComponentViews+(a?1:0);return Object.assign(Object.assign({},i),{selectedLayer:t,destinationLayer:t,numberOfLayerComponentViews:s})}deselectLayer(e){return Object.assign(Object.assign({},e),{selectedLayer:null,destinationLayer:null,highlightedLayer:null})}enterLayer(e,{layer:t}){return e.selectedLayer?Object.assign(Object.assign({},e),{destinationLayer:t}):e}leaveLayer(e){return e.selectedLayer?Object.assign(Object.assign({},e),{destinationLayer:null}):e}highlightLayer(e,{layer:t}){return Object.assign(Object.assign({},e),{highlightedLayer:t})}unhighlightLayer(e){return Object.assign(Object.assign({},e),{highlightedLayer:null})}enablePercentageMode(e){return Object.assign(Object.assign({},e),{percentageMode:!0})}disablePercentageMode(e){return Object.assign(Object.assign({},e),{percentageMode:!1})}showFlowLinks(e){return Object.assign(Object.assign({},e),{flowLinksVisible:!0})}hideFlowLinks(e){return Object.assign(Object.assign({},e),{flowLinksVisible:!1})}changeSidebarTab(e,{selectedSidebarTab:t}){return Object.assign(Object.assign({},e),{selectedSidebarTab:t})}changeScreenSidebarWidth(e,{screenSidebarWidth:t}){return Object.assign(Object.assign({},e),{screenSidebarWidth:t})}setSnapshot(e,{sid:t,snapshot:a}){return t!==e.screenId?e:Object.assign(Object.assign({},e),{loadingSnapshot:!1,processingSnapshotTiles:a.tileInfo&&"processing"===a.tileInfo.status})}addScreenTiles(e,{sid:t}){return t!==e.screenId?e:Object.assign(Object.assign({},e),{processingSnapshotTiles:!1})}setVersionId(e,{versionId:t,latestVersionSelected:a,shouldCompleteVersionsOnboarding:n}){const i=n?this.resetScreenOnboardingStep(e):e;return Object.assign(Object.assign({},i),{versionId:t,latestVersionSelected:a,selectedLayer:null,destinationLayer:null,highlightedLayer:null})}setVersions(e,{sid:t,versionId:a}){return t!==e.screenId?e:Object.assign(Object.assign({},e),{versionId:a,loadingVersions:!1})}addVersion(e,{sid:t,versionId:a,latestVersionSelected:n}){return t!==e.screenId?e:Object.assign(Object.assign({},e),{versionId:a,latestVersionSelected:n,loadingSnapshot:!0,processingSnapshotTiles:!1})}showVersions(e,{loadingVersions:t}){return Object.assign(Object.assign({},e),{loadingVersions:t,versionsVisible:!0})}hideVersions(e){return Object.assign(Object.assign({},e),{versionsVisible:!1,versionsCompactMode:!1})}toggleVersions(e,t){return e.versionsVisible?this.hideVersions(e):this.showVersions(e,t)}enableVersionsCompactMode(e){return Object.assign(Object.assign({},e),{versionsCompactMode:!0})}disableVersionsCompactMode(e){return Object.assign(Object.assign({},e),{versionsCompactMode:!1})}changeVersionsSidebarWidth(e,{versionsSidebarWidth:t}){return Object.assign(Object.assign({},e),{versionsSidebarWidth:t})}removeVersion(e,{sid:t,versionId:a,removingCurrentVersion:n}){return t===e.screenId&&n?Object.assign(Object.assign({},e),{versionId:a,latestVersionSelected:!0}):e}setSourceFile(e,{versionId:t,sourceFile:a}){return Object.assign(Object.assign({},e),{sourceFiles:Object.assign(Object.assign({},e.sourceFiles),{[t]:a})})}updateForDeleteScreens(e,{removingCurrentScreen:t}){return t?this.closeScreen(e):e}updateForRemoveScreen(e,{removingCurrentScreen:t}){return t?this.closeScreen(e):e}hideComponentVariantsOnboardingHintbox(e){return Object.assign(Object.assign({},e),{componentVariantsOnboardingHintboxSeen:!0})}hideImageProcessingHintbox(e){return Object.assign(Object.assign({},e),{imageProcessingHintboxSeen:!0})}setComponentVariantViewAsSeen(e){return Object.assign(Object.assign({},e),{componentVariantViewSeen:!0})}changeComponentsFilter(e,t){return Object.assign(Object.assign({},e),{componentsFilter:t,selectedLayer:null,destinationLayer:null,highlightedLayer:null})}updateDotPopupRemarkType(e,t){return Object.assign(Object.assign({},e),{dotPopupRemarkType:t})}handleCreateNote(e){return Object.assign(Object.assign({},this.showNotes(e)),{dotPopupRemarkType:E.default.Dot})}handleCreateAnnotation(e){return Object.assign(Object.assign({},this.showNotes(e)),{dotPopupRemarkType:E.default.Annotation})}selectDot(e,{shouldCompleteDotOnboarding:t}){let a=e;return t&&(a=(0,g.pipe)(this.resetScreenOnboardingStep,this.deselectLayer)(e)),this.showNotes(a)}notifyAssetsTabOpened(e,{shouldCompleteAssetsOnboarding:t}){return t?this.resetScreenOnboardingStep(e):e}setScreenOnboardingStep(e,{step:t}){return Object.assign(Object.assign({},e),{screenOnboardingStep:t,screenOnboardingInfoVisible:!0})}resetScreenOnboardingStep(e){return Object.assign(Object.assign({},e),{screenOnboardingStep:null})}setScreenOnboardingInfoVisibility(e,{visible:t}){return Object.assign(Object.assign({},e),{screenOnboardingInfoVisible:t})}hideScreenOnboardingFlowHintbox(e){return Object.assign(Object.assign({},e),{screenOnboardingFlowHintboxHidden:!0})}enterStageMode(e){return Object.assign(Object.assign({},e),{stageMode:!0,stageSidebarOpen:!1})}leaveStageMode(e){return Object.assign(Object.assign({},e),{stageMode:!1,stageSidebarOpen:!1,stageModeHistoryCount:0})}showStageComments(e){return Object.assign(Object.assign({},e),{stageSidebarOpen:!0})}hideStageComments(e){return Object.assign(Object.assign({},e),{stageSidebarOpen:!1})}hideStageModeFirstTimeLandingHidden(e){return Object.assign(Object.assign({},e),{stageModeFirstTimeLandingHidden:!0})}applyStageModeHistoryOperation(e,{operation:t}){let a=e.stageModeHistoryCount;switch(t){case"increment":a+=1;break;case"decrement":a-=1}return Object.assign(Object.assign({},e),{stageModeHistoryCount:a,flashStageModeHotspots:!1})}flashStageModeHotspots(e){return Object.assign(Object.assign({},e),{flashStageModeHotspots:!0})}flashStageModeHotspotsDone(e){return Object.assign(Object.assign({},e),{flashStageModeHotspots:!1})}reduce(e,t){switch(t.type){case s.default.RESET:return this.reset();case r.default.LOAD_INTERMEDIATE:return this.loadIntermediate(e,t);case r.default.RESET:return this.reset(t);case r.default.LOAD:return this.load(e,t);case r.default.CHANGE_SELECTED_VIEW:return t.selectedView===h.ProjectViewTypes.SCREEN?e:this.closeScreen(e);case d.default.OPEN_SCREEN:return this.openScreen(e,t);case d.default.CHANGE_ZOOM_LEVEL:return this.changeZoomLevel(e,t.zoomLevel,t.animateZooming);case d.default.ZOOM_IN:return this.zoomIn(e);case d.default.ZOOM_OUT:return this.zoomOut(e);case d.default.RESET_ZOOM:return this.resetZoom(e);case d.default.START_GESTURE:return this.startGesture(e);case d.default.ZOOM_WITH_GESTURE:return this.zoomWithGesture(e,t);case d.default.ZOOM_WITH_WHEEL:return this.zoomWithWheel(e,t);case d.default.ZOOM_APPLIED:return this.zoomApplied(e);case d.default.CHANGE_SCROLL_POSITION:return this.changeScrollPosition(e,t);case d.default.OPEN_TAG_MANAGER:return this.openTagManager(e,t);case d.default.CLOSE_TAG_MANAGER:return this.closeTagManager(e);case d.default.TOGGLE_GRID_LAYOUT:return this.toggleGridLayout(e);case d.default.TOGGLE_GRID_WIDGET:return this.toggleGridWidget(e);case d.default.ENABLE_NOTE_MODE:return this.enableNoteMode(e);case d.default.DISABLE_NOTE_MODE:return this.disableNoteMode(e);case d.default.SHOW_NOTES:case d.default.SELECT_ANNOTATION:return this.showNotes(e);case d.default.SELECT_DOT:return this.selectDot(e,t);case d.default.CREATE_NOTE:return this.handleCreateNote(e);case d.default.CREATE_ANNOTATION:return this.handleCreateAnnotation(e);case d.default.HIDE_NOTES:return this.hideNotes(e);case d.default.SELECT_LAYER:return this.selectLayer(e,t);case d.default.DESELECT_LAYER:return this.deselectLayer(e);case d.default.ENTER_LAYER:return this.enterLayer(e,t);case d.default.HIGHLIGHT_LAYER:return this.highlightLayer(e,t);case d.default.UNHIGHLIGHT_LAYER:return this.unhighlightLayer(e);case d.default.LEAVE_LAYER:return this.leaveLayer(e);case d.default.ENABLE_PERCENTAGE_MODE:return this.enablePercentageMode(e);case d.default.DISABLE_PERCENTAGE_MODE:return this.disablePercentageMode(e);case d.default.SHOW_FLOW_LINKS:return this.showFlowLinks(e);case d.default.HIDE_FLOW_LINKS:return this.hideFlowLinks(e);case d.default.CHANGE_SIDEBAR_TAB:return this.changeSidebarTab(e,t);case d.default.CHANGE_SCREEN_SIDEBAR_WIDTH:return this.changeScreenSidebarWidth(e,t);case d.default.SET_SNAPSHOT:return this.setSnapshot(e,t);case d.default.SET_VERSION_ID:return this.setVersionId(e,t);case d.default.SET_VERSIONS:return this.setVersions(e,t);case d.default.ADD_VERSION:return this.addVersion(e,t);case d.default.ADD_SCREEN_TILES:return this.addScreenTiles(e,t);case d.default.SHOW_VERSIONS:return this.showVersions(e,t);case d.default.HIDE_VERSIONS:return this.hideVersions(e);case d.default.TOGGLE_VERSIONS:return this.toggleVersions(e,t);case d.default.ENABLE_VERSIONS_COMPACT_MODE:return this.enableVersionsCompactMode(e);case d.default.DISABLE_VERSIONS_COMPACT_MODE:return this.disableVersionsCompactMode(e);case d.default.CHANGE_VERSIONS_SIDEBAR_WIDTH:return this.changeVersionsSidebarWidth(e,t);case d.default.REMOVE_VERSION:return this.removeVersion(e,t);case d.default.SET_SOURCE_FILE:return this.setSourceFile(e,t);case d.default.REMOVE_SCREEN:return this.updateForRemoveScreen(e,t);case o.default.DELETE_SCREENS:return this.updateForDeleteScreens(e,t);case d.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_HINTBOX:return this.hideComponentVariantsOnboardingHintbox(e);case d.default.HIDE_IMAGE_PROCESSING_HINTBOX:return this.hideImageProcessingHintbox(e);case l.default.OPEN:return this.setComponentVariantViewAsSeen(e);case l.default.SELECT_LAYER:return this.deselectLayer(e);case d.default.CHANGE_COMPONENTS_FILTER:return this.changeComponentsFilter(e,t.filter);case d.default.UPDATE_DOTPOPUP_REMARK_TYPE:return this.updateDotPopupRemarkType(e,t.remarkType);case d.default.NOTIFY_ASSETS_TAB_OPENED:return this.notifyAssetsTabOpened(e,t);case d.default.SET_ONBOARDING_STEP:return this.setScreenOnboardingStep(e,t);case d.default.COMPLETE_ONBOARDING_STEP:return this.resetScreenOnboardingStep(e);case d.default.SET_ONBOARDING_INFO_VISIBILITY:return this.setScreenOnboardingInfoVisibility(e,t);case d.default.HIDE_ONBOARDING_FLOW_HINTBOX:return this.hideScreenOnboardingFlowHintbox(e);case d.default.ENTER_STAGE_MODE:return this.enterStageMode(e);case d.default.LEAVE_STAGE_MODE:return this.leaveStageMode(e);case d.default.SHOW_STAGE_COMMENTS:return this.showStageComments(e);case d.default.HIDE_STAGE_COMMENTS:case d.default.CLOSE_STAGE_MODE_SIDEBAR:return this.hideStageComments(e);case d.default.HIDE_STAGE_MODE_FIRST_TIME_LANDING:return this.hideStageModeFirstTimeLandingHidden(e);case d.default.APPLY_STAGE_MODE_HISTORY_OPERATION:return this.applyStageModeHistoryOperation(e,t);case d.default.FLASH_STAGE_MODE_HOTSPOTS:return this.flashStageModeHotspots(e);case d.default.FLASH_STAGE_MODE_HOTSPOTS_DONE:return this.flashStageModeHotspotsDone(e);default:return e}}}const m=T},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=[{id:"default",title:""},{id:"reusableComponents",title:"Reusable Components"},{id:"assets",title:"Assets"}]},(e,t,a)=>{"use strict";a.r(t),a.d(t,{ZOOM_LEVELS:()=>n,ZOOM_LEVEL_DEFAULT:()=>i,ZOOM_LEVEL_MIN:()=>s,ZOOM_LEVEL_MAX:()=>r});const n=[.25,.5,.75,1,1.5,2,2.5,3,4,5],i=1,s=n[0],r=n[n.length-1]},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(367),r=a(284),o=a(263);class d extends(i()){getInitialState(){return{fetchingComponentsStats:!1,fetchingVirtualComponentsStats:!1,componentsStats:{},virtualComponentsStats:{},virtualComponents:{},fetchingComponentDetail:!1,componentsDetails:{},virtualComponentsDetails:{},fetchedScreens:new Set}}reset(){return this.getInitialState()}getComponentsStats(e,{screenId:t}){return Object.assign(Object.assign({},e),{fetchingComponentsStats:!0,fetchedScreens:new Set([...e.fetchedScreens,t])})}getComponentsStatsComplete(e){return Object.assign(Object.assign({},e),{fetchingComponentsStats:!1})}setComponentsStats(e,{componentsStats:t}){const a=Object.assign({},e.componentsStats);for(const n of t)n.usedIn.screenCount&&(a[n._id]=Object.assign({},n));return Object.assign(Object.assign({},e),{componentsStats:a})}getVirtualComponentsStats(e){return Object.assign(Object.assign({},e),{fetchingVirtualComponentsStats:!0})}getVirtualComponentsStatsComplete(e){return Object.assign(Object.assign({},e),{fetchingVirtualComponentsStats:!1})}setVirtualComponentsStats(e,{virtualComponentsStats:t}){const a=Object.assign({},e.virtualComponentsStats);for(const n of t)n.usedIn.screenCount&&(a[n.sourceId]=Object.assign({},n));return Object.assign(Object.assign({},e),{virtualComponentsStats:a})}setVirtualComponents(e,{virtualComponents:t}){const a=Object.assign({},e.virtualComponents);for(const n of t)a[n.sourceId]=Object.assign({},n);return Object.assign(Object.assign({},e),{virtualComponents:a})}getComponentDetail(e){return Object.assign(Object.assign({},e),{fetchingComponentDetail:!0})}getComponentDetailComplete(e){return Object.assign(Object.assign({},e),{fetchingComponentDetail:!1})}setStyleguideComponentDetail(e,{componentDetail:t}){const a=Object.assign({},e.componentsDetails),{sourceId:n}=t;return a[n]=Object.assign({},t),Object.assign(Object.assign({},e),{componentsDetails:a})}setVirtualComponentDetail(e,{virtualComponentDetail:t}){const a=Object.assign({},e.virtualComponentsDetails),{sourceId:n}=t;return a[n]=Object.assign({},t),Object.assign(Object.assign({},e),{virtualComponentsDetails:a})}upsertVirtualComponents(e,{virtualComponents:t}){const a=Object.assign({},e.virtualComponentsDetails);return t.forEach((e=>{const{sourceId:t,variant:n}=e;delete a[t],n&&Object.values(a).forEach((e=>{if(e.variant){const{components:a}=e.variant;for(const e of a)e.sourceId===t&&(e.variant.values=n.values)}}))})),Object.assign(Object.assign({},e),{virtualComponentDetails:a})}reduce(e,t){switch(t.type){case o.default.RESET:case r.default.RESET:return this.reset();case s.default.GET_COMPONENTS_STATS:return this.getComponentsStats(e,t);case s.default.GET_COMPONENTS_STATS_COMPLETE:return this.getComponentsStatsComplete(e);case s.default.SET_COMPONENTS_STATS:return this.setComponentsStats(e,t);case s.default.GET_VIRTUAL_COMPONENTS_STATS:return this.getVirtualComponentsStats(e);case s.default.GET_VIRTUAL_COMPONENTS_STATS_COMPLETE:return this.getVirtualComponentsStatsComplete(e);case s.default.SET_VIRTUAL_COMPONENTS_STATS:return this.setVirtualComponentsStats(e,t);case s.default.SET_VIRTUAL_COMPONENTS:return this.setVirtualComponents(e,t);case s.default.GET_STYLEGUIDE_COMPONENT_DETAIL:case s.default.GET_VIRTUAL_COMPONENT_DETAIL:return this.getComponentDetail(e);case s.default.GET_COMPONENT_DETAIL_COMPLETE:return this.getComponentDetailComplete(e);case s.default.SET_STYLEGUIDE_COMPONENT_DETAIL:return this.setStyleguideComponentDetail(e,t);case s.default.SET_VIRTUAL_COMPONENT_DETAIL:return this.setVirtualComponentDetail(e,t);case s.default.UPSERT_VIRTUAL_COMPONENTS:return this.upsertVirtualComponents(e,t);default:return e}}}const l=d},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_COMPONENTS_STATS="screenComponents/getComponentsStats",e.GET_COMPONENTS_STATS_COMPLETE="screenComponents/getComponentsStatsComplete",e.SET_COMPONENTS_STATS="screenComponents/setComponentsStats",e.GET_VIRTUAL_COMPONENTS_STATS="screenComponents/getVirtualComponentsStats",e.GET_VIRTUAL_COMPONENTS_STATS_COMPLETE="screenComponents/getVirtualComponentsStatsComplete",e.SET_VIRTUAL_COMPONENTS_STATS="screenComponents/setVirtualComponentsStats",e.SET_VIRTUAL_COMPONENTS="screenComponents/setVirtualComponents",e.GET_STYLEGUIDE_COMPONENT_DETAIL="screenComponents/getStyleguideComponentDetail",e.GET_VIRTUAL_COMPONENT_DETAIL="screenComponents/getVirtualComponentDetail",e.GET_COMPONENT_DETAIL_COMPLETE="screenComponents/getComponentDetailComplete",e.SET_STYLEGUIDE_COMPONENT_DETAIL="screenComponents/setStyleguideComponentDetail",e.SET_VIRTUAL_COMPONENT_DETAIL="screenComponents/setVirtualComponentDetail",e.UPSERT_VIRTUAL_COMPONENTS="screenComponents/upsertVirtualComponents"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(369),r=a(284),o=a(370),d=a(185);function l(e,t,a,n){return a?Object.assign(Object.assign({},e),{[t]:o.getEventsOfGroup(n,t)}):(0,d.filterOut)(e,t)}function c(e,t,a,n){var i;const s=o.getGroupOfEvent(n,t);let r=null!==(i=e[s])&&void 0!==i?i:[];return a&&!r.includes(t)?Object.assign(Object.assign({},e),{[s]:r.concat(t)}):!a&&r.includes(t)?(r=r.filter((e=>e!==t)),0===r.length?(0,d.filterOut)(e,s):Object.assign(Object.assign({},e),{[s]:r})):e}class u extends(i()){getInitialState(){return{open:!1,inid:null,channelName:null,eventGroupsByInid:{},loading:[],barrelType:null}}load(e,t,a,n){return Object.assign(Object.assign({},e),{barrelType:n,eventGroupsByInid:Object.assign(Object.assign({},e.eventGroupsByInid),{[t]:o.groupEvents(n,a)})})}open(e,t,a){return t in e.eventGroupsByInid?Object.assign(Object.assign({},e),{open:!0,inid:t,channelName:a}):e}authenticatedSlackIntegration(e,{integration:t,events:a,barrelType:n,openPreferences:i}){const s=this.load(e,t._id,a,n);return i?this.open(s,t._id,t.incomingWebHook.channel):s}close(e){return Object.assign(Object.assign({},e),{open:!1,inid:null,channelName:null,loading:[]})}updateEventGroup(e,{eventGroup:t,checked:a}){return Object.assign(Object.assign({},e),{eventGroupsByInid:Object.assign(Object.assign({},e.eventGroupsByInid),{[e.inid]:l(e.eventGroupsByInid[e.inid],t,a,e.barrelType)}),loading:e.loading.concat(t)})}eventGroupUpdated(e,{inid:t,eventGroup:a}){return e.inid===t?Object.assign(Object.assign({},e),{loading:e.loading.filter((e=>e!==a))}):e}eventGroupUpdateFailed(e,{inid:t,eventGroup:a}){return Object.assign(Object.assign({},e),{eventGroupsByInid:Object.assign(Object.assign({},e.eventGroupsByInid),{[t]:l(e.eventGroupsByInid[t],a,!e.eventGroupsByInid[t][a],e.barrelType)}),loading:e.inid===t?e.loading.filter((e=>e!==a)):e.loading})}eventUpdated(e,{inid:t,event:a,enabled:n}){return e.eventGroupsByInid[t]?Object.assign(Object.assign({},e),{eventGroupsByInid:Object.assign(Object.assign({},e.eventGroupsByInid),{[t]:c(e.eventGroupsByInid[t],a,n,e.barrelType)})}):e}reduce(e,t){switch(t.type){case s.default.LOAD:return this.load(e,t.inid,t.events,t.barrelType);case s.default.OPEN:return this.open(e,t.inid,t.channelName);case s.default.CLOSE:return this.close(e);case s.default.UPDATE_EVENT_GROUP:return this.updateEventGroup(e,t);case s.default.EVENT_GROUP_UPDATED:return this.eventGroupUpdated(e,t);case s.default.EVENT_GROUP_UPDATE_FAILED:return this.eventGroupUpdateFailed(e,t);case s.default.EVENT_UPDATED:return this.eventUpdated(e,t);case r.default.AUTHENTICATED_SLACK_INTEGRATION:return this.authenticatedSlackIntegration(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.INIT="slackPreferences/init",e.LOAD="slackPreferences/load",e.OPEN="slackPreferences/open",e.CLOSE="slackPreferences/close",e.UPDATE_EVENT_GROUP="slackPreferences/updateEventGroup",e.EVENT_GROUP_UPDATED="slackPreferences/eventGroupUpdated",e.EVENT_GROUP_UPDATE_FAILED="slackPreferences/eventGroupUpdateFailed",e.EVENT_UPDATED="slackPreferences/eventUpdated"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{getEventsOfGroup:()=>d,getGroupOfEvent:()=>l,groupEvents:()=>o,eventGroupsByBarrelType:()=>i});var n=a(123);const i={[n.default.PROJECT]:{screens:{name:"Screens",info:"Screen added",events:["project.screen.created"]},versions:{name:"Screen versions",info:"Version added to screen",events:["project.screen.version.created"]},components:{name:"Components",info:"Component added, removed or updated on Styleguide",events:["project.component.created","project.component.version.created","project.component.deleted"]},colors:{name:"Colors",info:"Color added, removed or updated on Styleguide",events:["project.color.created","project.color.updated","project.color.deleted"]},textStyles:{name:"Text styles",info:"Text style added, removed or updated on Styleguide",events:["project.textstyle.created","project.textstyle.updated","project.textstyle.deleted"]},spacingTokens:{name:"Spacing tokens",info:"Spacing token added, removed or updated on Styleguide",events:["project.spacingtoken.created","project.spacingtoken.updated","project.spacingtoken.deleted"]},notes:{name:"Comments",info:"Comment added",events:["project.dot.created"]},replies:{name:"Replies",info:"Replied to comment",events:["project.dot.comment.created"]},members:{name:"Members",info:"Member invited",events:["project.user.invited"]},extensions:{name:"Extensions",info:"Extension added or removed",events:["project.extension.added","project.extension.removed"]},projectStatus:{name:"Project status",info:"Project archived or activated",events:["project.archived","project.activated"]},annotations:{name:"Annotations",info:"Annotation added",events:["project.annotation.created"]}},[n.default.STYLEGUIDE]:{components:{name:"Components",info:"Component added, removed or updated on Styleguide",events:["styleguide.component.created","styleguide.component.version.created","styleguide.component.deleted"]},colors:{name:"Colors",info:"Color added, removed or updated on Styleguide",events:["styleguide.color.created","styleguide.color.updated","styleguide.color.deleted"]},textStyles:{name:"Text styles",info:"Text style added, removed or updated on Styleguide",events:["styleguide.textstyle.created","styleguide.textstyle.updated","styleguide.textstyle.deleted"]},spacingTokens:{name:"Spacing tokens",info:"Spacing token added, removed or updated on Styleguide",events:["styleguide.spacingtoken.created","styleguide.spacingtoken.updated","styleguide.spacingtoken.deleted"]},members:{name:"Members",info:"Member invited",events:["styleguide.user.invited"]},extensions:{name:"Extensions",info:"Extension added or removed",events:["styleguide.extension.added","styleguide.extension.removed"]},styleguideStatus:{name:"Styleguide status",info:"Styleguide archived or activated",events:["styleguide.archived","styleguide.activated"]}}};function s(e){return Object.keys(i[e]).reduce(((t,a)=>i[e][a].events.reduce(((e,t)=>(e[t]=a,e)),t)),{})}const r={project:s(n.default.PROJECT),styleguide:s(n.default.STYLEGUIDE)};function o(e,t){return t.reduce(((t,a)=>{var n;const i=l(e,a);return i&&(null!==(n=t[i])&&void 0!==n?n:t[i]=[]).push(a),t}),{})}function d(e,t){return i[e][t].events}function l(e,t){return r[e][t]}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(270),i=a.n(n),s=a(327),r=a(263),o=a(324),d=a(284),l=a(325),c=a(329),u=a(7);class p extends(i()){getInitialState(){return{loading:!0,selectedTab:u.WorkspaceTabs.PROJECTS,selectedOrganizationId:"user",selectedProjectSortType:u.SortTypes.CREATED,showArchivedProjects:!1,pinnedBarrelOnce:!1,selectedWorkflowStatusFilter:c.default.All._id,filterValue:"",highlightedBarrels:[],highlightedSection:null,collapsedSections:{},styleguidesTabVisited:!1,visibleDialogType:null,visibleDialogParams:{},offerReminderNextDate:null,workspaceMainDataLoading:!1,createSampleProjectInProgress:!1}}reset(){return this.getInitialState()}updatePageState(e,{updateState:t}){return Object.assign(Object.assign(Object.assign({},e),t),{loading:!1})}changeProjectSelectedSortType(e,t){return Object.assign(Object.assign({},e),{selectedProjectSortType:t})}toggleArchivedProjects(e){return Object.assign(Object.assign({},e),{showArchivedProjects:!e.showArchivedProjects})}setPinnedBarrelOnce(e){return e.pinnedBarrelOnce?e:Object.assign(Object.assign({},e),{pinnedBarrelOnce:!0})}updateForUnpinBarrel(e,{bid:t}){return this.unhighlightBarrel(e,{bid:t})}changeWorkflowStatusFilter(e,{workflowStatusFilter:t}){return Object.assign(Object.assign({},e),{selectedWorkflowStatusFilter:t})}changeWorkflowStatusFilterOnDelete(e,{oldWorkflowStatusData:t}){return e.selectedWorkflowStatusFilter===t._id?this.changeWorkflowStatusFilter(e,{workflowStatusFilter:c.default.All._id}):e}unhighlightBarrel(e,{bid:t}){return Object.assign(Object.assign({},e),{highlightedBarrels:e.highlightedBarrels.filter((e=>e!==t))})}highlightSection(e,{oseid:t}){const{collapsedSections:a}=e;return a[t]&&(a[t]=!1),Object.assign(Object.assign({},e),{collapsedSections:a,highlightedSection:t})}unhighlightSection(e){return Object.assign(Object.assign({},e),{highlightedSection:null})}setWorkspaceElementStates(e,{organization:t,workspaceMainDataLoading:a}){const n=Object.assign(Object.assign({},e),{workspaceMainDataLoading:a});if(!t)return n;const{sections:i}=t,{highlightedBarrels:s,selectedTab:r}=n;if(!i||!s.length||r!==u.WorkspaceTabs.PROJECTS)return n;const o=i.filter((e=>"default"!==e.name&&e.projects.some((e=>s.includes(e))))).map((e=>e._id));return Object.assign(Object.assign({},n),{collapsedSections:Object.assign(Object.assign({},n.collapsedSections),Object.fromEntries(o.map((e=>[e,!1])))),workspaceMainDataLoading:a})}expandSections(e,{oseids:t}){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!1]))))})}collapseSections(e,{oseids:t}){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!0]))))})}setStyleguidesTabVisited(e){return Object.assign(Object.assign({},e),{styleguidesTabVisited:!0})}openDialog(e,{dialogType:t,dialogParams:a}){return Object.assign(Object.assign({},e),{visibleDialogType:t,visibleDialogParams:a})}closeDialog(e){return Object.assign(Object.assign({},e),{visibleDialogType:null,visibleDialogParams:{}})}closePreviewDialog(e,{bid:t}){const{previewBarrelId:a}=e.visibleDialogParams;return a===t?this.closeDialog(e):e}resetSortTypeAndFilters(e,{syncWithApi:t}){let a=e;return t&&(e.selectedProjectSortType!==u.SortTypes.SECTIONS&&(a=this.changeProjectSelectedSortType(a,u.SortTypes.SECTIONS)),e.selectedWorkflowStatusFilter!==c.default.All._id&&(a=this.changeWorkflowStatusFilter(a,{workflowStatusFilter:c.default.All._id}))),a}resetUIInteractions(e,t){return this.resetSortTypeAndFilters(e,t)}highlightCopiedBarrel(e,{barrel:t,addedWithCopy:a}){return a?Object.assign(Object.assign({},this.closeDialog(e)),{highlightedBarrels:[t._id,...e.highlightedBarrels]}):e}postponeOfferReminder(e,{nextDate:t}){return Object.assign(Object.assign({},e),{offerReminderNextDate:t})}changeFilterValue(e,{filterValue:t}){return Object.assign(Object.assign({},e),{filterValue:t})}createSampleProjectRequest(e){return Object.assign(Object.assign({},e),{createSampleProjectInProgress:!0})}createSampleProjectFinalize(e){return Object.assign(Object.assign({},e),{createSampleProjectInProgress:!1})}reduce(e,t){switch(t.type){case s.default.UPDATE_PAGE_STATE:return this.updatePageState(e,t);case s.default.CHANGE_PROJECT_SELECTED_SORT_TYPE:return this.changeProjectSelectedSortType(e,t.sortType);case s.default.CHANGE_FILTER_VALUE:return this.changeFilterValue(e,t);case s.default.TOGGLE_ARCHIVED_PROJECTS:return this.toggleArchivedProjects(e);case s.default.CHANGE_WORKFLOW_STATUS_FILTER:return this.changeWorkflowStatusFilter(e,t);case s.default.UNHIGHLIGHT_BARREL:return this.unhighlightBarrel(e,t);case s.default.EXPAND_SECTIONS:return this.expandSections(e,t);case s.default.COLLAPSE_SECTIONS:return this.collapseSections(e,t);case s.default.SET_STYLEGUIDES_TAB_VISITED:return this.setStyleguidesTabVisited(e);case s.default.OPEN_DIALOG:return this.openDialog(e,t);case s.default.CLOSE_DIALOG:return this.closeDialog(e);case s.default.HIGHLIGHT_SECTION:return this.highlightSection(e,t);case s.default.UNHIGHLIGHT_SECTION:return this.unhighlightSection(e);case s.default.POSTPONE_OFFER_REMINDER:return this.postponeOfferReminder(e,t);case o.default.ADD_BARREL_TO_FOCUS_SUCCESS:return this.setPinnedBarrelOnce(e);case o.default.REMOVE_BARREL_FROM_FOCUS:return this.updateForUnpinBarrel(e,t);case o.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:return this.changeWorkflowStatusFilterOnDelete(e,t);case o.default.ADD_PROJECT_SECTION:case o.default.UPDATE_PROJECT_ORDER:return this.resetUIInteractions(e,t);case l.default.CREATE_SAMPLE_PROJECT_REQUEST:return this.createSampleProjectRequest(e);case l.default.CREATE_SAMPLE_PROJECT_FINALIZE:return this.createSampleProjectFinalize(e);case d.default.ADD:return this.highlightCopiedBarrel(e,t);case d.default.ARCHIVE:case d.default.REMOVE:return this.closePreviewDialog(e,t);case r.default.LOAD_WORKSPACE_DATA:return this.setWorkspaceElementStates(e,t);case r.default.RESET:return this.reset();default:return e}}}const f=p},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(270),i=a.n(n),s=a(327);class r extends(i()){getInitialState(){return{scrollToHighlightedBarrel:!1}}scrolledToProject(){return{scrollToHighlightedBarrel:!1}}scrollToHighlightedBarrel({updateState:{scrollToHighlightedBarrel:e}}){return{scrollToHighlightedBarrel:!!e}}reduce(e,t){switch(t.type){case s.default.SCROLLED_TO_PROJECT:return this.scrolledToProject();case s.default.UPDATE_PAGE_STATE:return this.scrollToHighlightedBarrel(t);default:return e}}}const o=r},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(263),r=a(327),o=a(284);class d extends(i()){getInitialState(){return{selectedProjects:[]}}setSelectedProjects(e,{pids:t}){const a=new Set(t);return Object.assign(Object.assign({},e),{selectedProjects:Array.from(a)})}clearProjectSelection(e){return Object.assign(Object.assign({},e),{selectedProjects:[]})}reduce(e,t){switch(t.type){case r.default.SET_SELECTED_PROJECTS:return this.setSelectedProjects(e,t);case r.default.CLEAR_PROJECT_SELECTION:case o.default.DELETE_WORKFLOW_STATUSES:case o.default.UPDATE_WORKFLOW_STATUSES:case s.default.SET_PAGE:return this.clearProjectSelection(e);default:return e}}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(351),r=a(263),o=a(284),d=a(375),l=a(7),c=a(123);class u extends(i()){getInitialState(){return{sortType:l.SortTypes.SECTIONS,filterValue:"",leftSidebarWidth:200,rightSidebarWidth:280,selectedStyleguideSection:"about",selectedNavigatorId:null,collapsedSections:{},highlightedColors:[],highlightedTextStyles:[],highlightedSpacingTokens:[],scrolledSection:null,highlightScrolledSection:!1,selectionComponentId:null,selection:null,moveResourcesPopup:null,showSuggestedResourcesBadge:{colors:!1,textStyles:!1},componentVariantsOnboardingDialogSeen:!1,convertedAnySectionIntoVariant:!1}}reset(){return this.getInitialState()}load({styleguide:e={}}){return Object.assign(Object.assign({},this.getInitialState()),e)}updateState(e,{update:t}){return Object.assign(Object.assign({},e),t)}changeSortType(e,{sortType:t}){return Object.assign(Object.assign({},e),{sortType:t})}changeComponentFilterValue(e,{filterValue:t}){return Object.assign(Object.assign({},e),{filterValue:t})}changeLeftSidebarWidth(e,{leftSidebarWidth:t}){return Object.assign(Object.assign({},e),{leftSidebarWidth:t})}changeRightSidebarWidth(e,{rightSidebarWidth:t}){return Object.assign(Object.assign({},e),{rightSidebarWidth:t})}changeSelectedNavigatorId(e,{selectedStyleguideSection:t,selectedNavigatorId:a,highlightScrolledSection:n}){return Object.assign(Object.assign({},e),{selectedStyleguideSection:t,selectedNavigatorId:a,scrolledSection:a,highlightScrolledSection:!!n})}highlightColors(e,{cids:t}){return Object.assign(Object.assign({},e),{highlightedColors:[...t]})}unhighlightColor(e,{cid:t}){return Object.assign(Object.assign({},e),{highlightedColors:e.highlightedColors.filter((e=>e!==t))})}highlightTextStyles(e,{tsids:t}){return Object.assign(Object.assign({},e),{highlightedTextStyles:[...t]})}unhighlightTextStyle(e,{tsid:t}){return Object.assign(Object.assign({},e),{highlightedTextStyles:e.highlightedTextStyles.filter((e=>e!==t))})}highlightSpacingTokens(e,{sptids:t}){return Object.assign(Object.assign({},e),{highlightedSpacingTokens:[...t]})}unhighlightSpacingToken(e,{sptid:t}){return Object.assign(Object.assign({},e),{highlightedSpacingTokens:e.highlightedSpacingTokens.filter((e=>e!==t))})}sectionScrolled(e){return Object.assign(Object.assign({},e),{scrolledSection:null,highlightScrolledSection:!1})}changeSelection(e,{selectionComponentId:t,selection:a,collapsedSections:n}){return Object.assign(Object.assign({},e),{selectionComponentId:t,selection:a,collapsedSections:null!=n?n:e.collapsedSections})}updateForChangeSelectedView(e,{selectedView:t,barrelType:a}){return a===c.default.STYLEGUIDE||t===l.ProjectViewTypes.STYLEGUIDE?e:Object.assign(Object.assign({},e),{selectionComponentId:null,selection:null,convertedAnySectionIntoVariant:!1})}removeComponent(e,{coid:t}){return t===e.selectionComponentId?Object.assign(Object.assign({},e),{selectionComponentId:null,selection:null}):e}removeComponents(e,{sectionComponents:t}){return t.find((({coids:t})=>t.find((t=>t===e.selectionComponentId))))?Object.assign(Object.assign({},e),{selectionComponentId:null,selection:null}):e}openMoveResourcesPopup(e,{resources:t,resourceType:a,targetNode:n}){return Object.assign(Object.assign({},e),{moveResourcesPopup:{resources:t,resourceType:a,targetNode:n,targetStyleguide:null}})}closeMoveResourcesPopup(e){return Object.assign(Object.assign({},e),{moveResourcesPopup:null})}selectMoveResourcesTargetStyleguide(e,{targetStyleguide:t}){const{moveResourcesPopup:a}=e;return Object.assign(Object.assign({},e),{moveResourcesPopup:Object.assign(Object.assign({},a),{targetStyleguide:t})})}deselectMoveResourcesTargetStyleguide(e){const{moveResourcesPopup:t}=e;return Object.assign(Object.assign({},e),{moveResourcesPopup:Object.assign(Object.assign({},t),{targetStyleguide:null})})}expandSections(e,{seids:t}){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!1]))))})}collapseSections(e,{seids:t}){return Object.assign(Object.assign({},e),{collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!0]))))})}collapseAllSections(e,{seids:t}){return Object.assign(Object.assign({},e),{selectedNavigatorId:null,selectionComponentId:null,collapsedSections:Object.assign(Object.assign({},e.collapsedSections),Object.fromEntries(t.map((e=>[e,!0]))))})}setSuggestedResources(e){return Object.assign(Object.assign({},e),{showSuggestedResourcesBadge:{colors:"colors"!==e.selectedStyleguideSection,textStyles:"textStyles"!==e.selectedStyleguideSection}})}hideComponentVariantsOnboardingDialog(e){return Object.assign(Object.assign({},e),{componentVariantsOnboardingDialogSeen:!0})}convertedAnySectionIntoVariant(e,{userConvertedSectionIntoVariant:t}){return e.convertedAnySectionIntoVariant||!t?e:Object.assign(Object.assign({},e),{convertedAnySectionIntoVariant:!0})}reduce(e,t){switch(t.type){case r.default.RESET:return this.reset();case o.default.LOAD:return this.load(t);case o.default.CHANGE_SELECTED_VIEW:return this.updateForChangeSelectedView(e,t);case s.default.UPDATE_STATE:return this.updateState(e,t);case s.default.CHANGE_SORT_TYPE:return this.changeSortType(e,t);case s.default.CHANGE_COMPONENT_FILTER_VALUE:return this.changeComponentFilterValue(e,t);case s.default.CHANGE_LEFT_SIDEBAR_WIDTH:return this.changeLeftSidebarWidth(e,t);case s.default.CHANGE_RIGHT_SIDEBAR_WIDTH:return this.changeRightSidebarWidth(e,t);case s.default.CHANGE_SELECTED_NAVIGATOR_ID:return this.changeSelectedNavigatorId(e,t);case s.default.HIGHLIGHT_COLORS:return this.highlightColors(e,t);case s.default.UNHIGHLIGHT_COLOR:return this.unhighlightColor(e,t);case s.default.HIGHLIGHT_TEXT_STYLES:return this.highlightTextStyles(e,t);case s.default.UNHIGHLIGHT_TEXT_STYLE:return this.unhighlightTextStyle(e,t);case s.default.HIGHLIGHT_SPACING_TOKENS:return this.highlightSpacingTokens(e,t);case s.default.UNHIGHLIGHT_SPACING_TOKEN:return this.unhighlightSpacingToken(e,t);case s.default.SECTION_SCROLLED:return this.sectionScrolled(e);case s.default.CHANGE_SELECTION:return this.changeSelection(e,t);case s.default.OPEN_MOVE_RESOURCES_POPUP:return this.openMoveResourcesPopup(e,t);case s.default.CLOSE_MOVE_RESOURCES_POPUP:return this.closeMoveResourcesPopup(e);case s.default.SELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE:return this.selectMoveResourcesTargetStyleguide(e,t);case s.default.DESELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE:return this.deselectMoveResourcesTargetStyleguide(e);case s.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_DIALOG:return this.hideComponentVariantsOnboardingDialog(e);case s.default.EXPAND_SECTIONS:return this.expandSections(e,t);case s.default.COLLAPSE_SECTIONS:return this.collapseSections(e,t);case s.default.COLLAPSE_ALL_SECTIONS:return this.collapseAllSections(e,t);case o.default.REMOVE_COMPONENT:return this.removeComponent(e,t);case o.default.REMOVE_COMPONENTS:return this.removeComponents(e,t);case o.default.MOVE_RESOURCES_SUCCESS:return this.closeMoveResourcesPopup(e);case o.default.MOVE_RESOURCES_FAIL:return this.deselectMoveResourcesTargetStyleguide(e);case d.default.SET_SUGGESTED_LOCAL_RESOURCES:return this.setSuggestedResources(e);case s.default.SET_COMPONENT_VARIANT_DATA:return this.convertedAnySectionIntoVariant(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.SHOW_IMPORTS_LIST="versionImports/showImportsList",e.HIDE_IMPORTS_LIST="versionImports/hideImportsList",e.HIDE_IMPORTS_INDICATOR="versionImports/hideImportsIndicator",e.SET_SUGGESTED_LOCAL_RESOURCES="versionImports/setSuggestedLocalResources",e.SUGGESTED_REMOTE_COLORS_FILE_RECEIVED="versionImports/suggestedRemoteColorsFileReceived",e.SUGGESTED_REMOTE_TEXT_STYLES_FILE_RECEIVED="versionImports/suggestedRemoteTextStylesFileReceived",e.SUGGESTED_REMOTE_COLORS_RECEIVED="versionImports/suggestedRemoteColorsReceived",e.SUGGESTED_REMOTE_TEXT_STYLES_RECEIVED="versionImports/suggestedRemoteTextStylesReceived",e.SET_SUGGESTED_REMOTE_RESOURCES="versionImports/setSuggestedRemoteResources",e.HANDLE_IMPORTS="versionImports/handleImports",e.GO_TO_IMPORTED_VERSION="versionImports/goToImportedVersion",e.RETRY_IMPORT="versionImports/retryImport",e.CANCEL_IMPORT="versionImports/cancelImport",e.RETRY_GET_PROJECT_FOR_IMPORTS="versionImports/retryGetProjectForImports",e.CLEAR_IMPORTS="versionImports/clearImports",e.HIDE_COMPONENT_LIMIT_HINT="versionImports/hideComponentLimitHint",e.SEE_PLANS="versionImports/seePlans",e.HIDE_MULTIPLE_COLORS_SUPPORTED_HINT_BOX="versionImports/hideMultipleColorsSupportedHintBox",e.HIDE_EXPORT_TO_STYLEGUIDE_HINT_BOX="versionImports/hideExportToStyleguideHintBox",e.SHOW_XD_PLUGIN_RELEASED_MESSAGE="versionImports/showXdPluginReleasedMessage",e.HIDE_XD_PLUGIN_RELEASED_MESSAGE="versionImports/hideXdPluginReleasedMessage"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(270),i=a.n(n),s=a(326),r=a(284),o=a(293),d=a(351),l=a(324),c=a(263),u=a(336),p=a(123),f=a(350),S=a(353),h=a(295),E=a(124),g=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class O extends(i()){constructor(e){super(e),this.reducer=new f.default({barrelsPropertyName:"styleguides",loadingBarrelPropertyName:"loadingStyleguide",loadingBarrelsPropertyName:"loadingStyleguides"},{deleteBarrel:this.remove})}getInitialState(){return{createStyleguideInProgress:!1,joinStyleguideInProgress:!1,loadingStyleguide:!1,loadingStyleguides:!0,loadingSelectParent:!1,styleguides:{}}}reset(){return this.getInitialState()}add(e,{barrel:t,barrelType:a}){return a!==p.default.STYLEGUIDE?e:this.reducer.addBarrel(e,{barrel:t})}updateStatus(e,{bid:t,barrelType:a,affectedIds:n,status:i}){if(a!==p.default.STYLEGUIDE)return e;const{styleguides:s}=e,r=s[t],o=Object.fromEntries(n.map((e=>{const a=s[e];return a.status=i,a.parent&&(a.ancestors=a.ancestors.filter((e=>!r.ancestors.includes(e))),t===e&&(a.parent=null)),[e,a]})));return Object.assign(Object.assign({},e),{styleguides:Object.assign(Object.assign({},s),o)})}activateStyleguide(e,{bid:t,barrelType:a,affectedIds:n}){return this.updateStatus(e,{bid:t,barrelType:a,affectedIds:n,status:"active"})}archiveStyleguide(e,{bid:t,barrelType:a,affectedIds:n}){return this.updateStatus(e,{bid:t,barrelType:a,affectedIds:n,status:"archived"})}remove(e,{bid:t,barrelType:a},n=!1){if(a===p.default.PROJECT){if(n)return e;const a=Object.values(e.styleguides).find((e=>{var a;return null===(a=e.linkedProjects)||void 0===a?void 0:a.find((({_id:e})=>e===t))}));return a?this.unlinkProjectToStyleguide(e,{pid:t,styleguide:a}):e}const i=e.styleguides,s=t,r=i[s],o=g(i,["symbol"==typeof s?s:s+""]);return Object.values(o).forEach((e=>{e.parent===t&&(e.parent=r.parent),e.ancestors.includes(t)&&(e.ancestors=e.ancestors.filter((e=>e!==t)))})),Object.assign(Object.assign({},e),{styleguides:Object.assign({},o)})}linkProjectToStyleguideSuccess(e,{project:t,styleguide:a,styleguides:n}){const i=this.reducer.updateBarrelValue(e,{bid:a._id,key:"linkedProjects",value:({linkedProjects:e=[]})=>[...e,t]}),s=n.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t._id]:new u.default(t)})),{});return Object.assign(Object.assign({},i),{loadingSelectParent:!1,styleguides:Object.assign(Object.assign({},i.styleguides),s)})}unlinkProjectToStyleguide(e,{pid:t,styleguide:a}){return this.reducer.updateBarrelValue(e,{bid:a._id,key:"linkedProjects",value:({linkedProjects:e=[]})=>e.filter((e=>e._id!==t))})}updateUserData(e,{bid:t,uid:a,userData:n}){return this.reducer.updateBarrelValue(e,{bid:t,key:"users",value:({users:e})=>e.map((({role:e,user:t})=>t._id!==a?{role:e,user:t}:{role:e,user:Object.assign(Object.assign({},t),n)}))})}transferOwnership(e,{bid:t,affectedIds:a,fromUserId:n,targetId:i,toOrganization:s,users:r,oid:o}){const d=e.styleguides[t];if(!d)return e;const l=a.map((t=>e.styleguides[t]));if(s||"user"!==o){const a=l.reduce(((e,a)=>(a._id===t&&a.parent&&(a.ancestors=a.ancestors.filter((e=>e!==a.parent)),a.parent=null),a.ancestors.includes(t)&&d.parent&&(a.ancestors=a.ancestors.filter((e=>e!==d.parent))),e[a._id]=a,e)),{});return Object.assign(Object.assign({},e),{styleguides:Object.assign(Object.assign({},e.styleguides),a)})}const c=l.reduce(((e,t)=>this.reducer.updateBarrelValue(e,{bid:t._id,key:"ancestors",value:({ancestors:e})=>e.filter((e=>!d.ancestors.includes(e)))})),e),u=this.reducer.updateBarrelValue(c,{bid:d._id,key:"parent",value:null});return l.reduce(((e,t)=>this.reducer.updateBarrelValue(e,{bid:t._id,key:"users",value:e=>e.users.map((e=>{if(r){if(e.user._id===n||e.user._id===i){const t=r.find((t=>e.user._id===t.user._id));e.role=t.role,e.user.paymentPlan=t.user.paymentPlan}return e}return e.user._id===i&&(e.role="owner"),e.user._id===n&&(e.role="admin"),e}))})),u)}load(e,{barrel:{barrelType:t},data:{project:a,styleguide:n,organizationStyleguides:i,linkedStyleguides:s,ancestors:r},user:{userId:o}}){if(t===p.default.STYLEGUIDE){if(!(0,h.default)(n,o))return this.reducer.getBarrelSuccess(e,{barrel:n,userId:o});let t=e;return i&&(t=this.reducer.getBarrelsSuccess(e,{styleguides:i})),r.reduce(((e,t)=>this.reducer.getBarrelSuccess(e,{barrel:t,userId:o})),this.reducer.getBarrelSuccess(t,{barrel:n,userId:o}))}if(!(0,h.default)(a,o))return e;const d=i?this.reducer.getBarrelsSuccess(e,{styleguides:i}):e;return s.reduce(((e,t)=>this.reducer.getBarrelSuccess(e,{barrel:t,userId:o})),d)}moveResourcesSuccess(e,{bid:t,barrelType:a,targetStyleguideId:n,resourceType:i,resources:s}){const r=(0,S.default)(i);let o=e;a===p.default.STYLEGUIDE&&(o=this.reducer.updateBarrelValue(e,{bid:t,key:r,value:e=>e[r].filter((e=>!s.includes(e)))}));const d=e.styleguides[n];return(null==d?void 0:d.dataStage)!==E.default.Complete?o:this.reducer.updateBarrelValue(o,{bid:n,key:r,value:e=>e[r].concat(s)})}changeAssetName(e,t){return this.reducer.changeComponentAssetName(e,t)}joinStyleguideRequest(e,{barrelType:t}){return t!==p.default.STYLEGUIDE?e:Object.assign(Object.assign({},e),{joinStyleguideInProgress:!0})}joinStyleguideFinalize(e,{barrelType:t}){return t!==p.default.STYLEGUIDE?e:Object.assign(Object.assign({},e),{joinStyleguideInProgress:!1})}createStyleguideRequest(e){return Object.assign(Object.assign({},e),{createStyleguideInProgress:!0})}createStyleguideFinalize(e){return Object.assign(Object.assign({},e),{createStyleguideInProgress:!1})}selectParent(e,{stid:t,parent:a}){const n=e.styleguides[t],i=[...e.styleguides[a].ancestors,a];return n.parent=a,n.ancestors=i,Object.values(e.styleguides).forEach((e=>{const a=e.ancestors.indexOf(t);-1!==a&&(e.ancestors=[...i,...e.ancestors.slice(a)])})),Object.assign(Object.assign({},e),{styleguides:Object.assign({},e.styleguides)})}removeParent(e,{stid:t}){const a=e.styleguides[t];return a.ancestors=[],a.parent=null,Object.values(e.styleguides).forEach((e=>{const a=e.ancestors.indexOf(t);-1!==a&&(e.ancestors=e.ancestors.slice(a))})),Object.assign(Object.assign({},e),{styleguides:Object.assign({},e.styleguides)})}selectParentRequest(e){return Object.assign(Object.assign({},e),{loadingSelectParent:!0})}selectParentSuccess(e,{stid:t,parent:a,styleguides:n}){const i=this.selectParent(e,{stid:t,parent:a}),s=n.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t._id]:new u.default(t)})),{});return Object.assign(Object.assign({},i),{loadingSelectParent:!1,styleguides:Object.assign(Object.assign({},i.styleguides),s)})}selectParentFailed(e){return Object.assign(Object.assign({},e),{loadingSelectParent:!1})}hydrateEmbeddedData(e,{styleguides:t,project:a,linkedStyleguides:n,styleguide:i,ancestors:s,user:r}){let o=e;if(t&&(o=this.reducer.getBarrelsSuccess(e,{styleguides:t})),a){return(0,h.default)(a,r._id)?n.reduce(((e,t)=>this.reducer.getBarrelSuccess(e,{barrel:t,userId:r._id})),o):o}if(!i)return o;return(0,h.default)(i,r._id)?s.reduce(((e,t)=>this.reducer.getBarrelSuccess(e,{barrel:t,userId:r._id})),this.reducer.getBarrelSuccess(o,{barrel:i,userId:r._id})):this.reducer.getBarrelSuccess(o,{barrel:i,userId:r._id})}reduce(e,t){switch(t.type){case s.default.GET_STYLEGUIDES_SUCCESS:return this.reducer.getBarrelsSuccess(e,t);case s.default.GET_STYLEGUIDE_REQUESTED:return this.reducer.getBarrelRequested(e);case s.default.GET_STYLEGUIDE_SUCCESS:return this.reducer.getBarrelSuccess(e,{barrel:t.styleguide,userId:t.userId});case s.default.GET_STYLEGUIDE_FAILED:return this.reducer.getBarrelFailed(e,t);case s.default.UPDATE_STYLEGUIDE:return this.reducer.updateBarrel(e,{bid:t.stid,data:t.data});case r.default.UPDATE_NAME:return this.reducer.updateName(e,t);case r.default.UPDATE_DESCRIPTION:return this.reducer.updateDescription(e,t);case r.default.UPDATE_DENSITY_SCALE:return this.reducer.updateDensityScale(e,t);case r.default.UPDATE_THUMBNAIL:return this.reducer.updateThumbnail(e,t);case r.default.ADD_INTEGRATION:return this.reducer.addIntegration(e,t);case r.default.AUTHENTICATED_SLACK_INTEGRATION:return this.reducer.addIntegration(e,Object.assign(Object.assign({},t),{intype:"slacks"}));case r.default.REMOVE_INTEGRATION:return this.reducer.removeIntegration(e,t);case r.default.TOGGLE_SCENE:return this.reducer.toggleScene(e,t);case r.default.ADD_MEMBERS:return this.reducer.addMembers(e,t);case r.default.ADD_COLOR:return this.reducer.addColor(e,t);case r.default.ADD_MULTIPLE_COLORS:return this.reducer.addMultipleColors(e,t);case r.default.UPDATE_COLOR:return this.reducer.updateColor(e,t);case r.default.REMOVE_COLOR:return this.reducer.removeColor(e,t);case r.default.REMOVE_ALL_COLORS:return this.reducer.removeAllColors(e,t);case r.default.MIGRATE_COLORS:return this.reducer.migrateColors(e,t);case r.default.UPDATE_COLOR_ORDER:return this.reducer.updateColorOrder(e,t);case r.default.ADD_TEXT_STYLE:return this.reducer.addTextStyle(e,t);case r.default.ADD_MULTIPLE_TEXT_STYLES:return this.reducer.addMultipleTextStyles(e,t);case r.default.UPDATE_TEXT_STYLE:return this.reducer.updateTextStyle(e,t);case r.default.REMOVE_TEXT_STYLE:return this.reducer.removeTextStyle(e,t);case r.default.REMOVE_ALL_TEXT_STYLES:return this.reducer.removeAllTextStyles(e,t);case r.default.ADD_SPACING_SECTION:return this.reducer.addSpacingSection(e,t);case r.default.UPDATE_SPACING_SECTION:return this.reducer.updateSpacingSection(e,t);case r.default.REMOVE_SPACING_SECTION:return this.reducer.removeSpacingSection(e,t);case r.default.ADD_SPACING_TOKEN:return this.reducer.addSpacingToken(e,t);case r.default.UPDATE_SPACING_TOKEN:return this.reducer.updateSpacingToken(e,t);case r.default.REMOVE_SPACING_TOKEN:return this.reducer.removeSpacingToken(e,t);case r.default.UPDATE_REM_PREFERENCES:return this.reducer.updateRemPreferences(e,t);case r.default.ADD_COMPONENT:return this.reducer.addComponent(e,t);case r.default.UPDATE_COMPONENT:return this.reducer.updateComponent(e,t);case r.default.SET_COMPONENT_SNAPSHOT:return this.reducer.setComponentSnapshot(e,t);case r.default.SET_MULTIPLE_COMPONENT_SNAPSHOTS:return this.reducer.setMultipleComponentSnapshots(e,t);case r.default.REMOVE_COMPONENT:return this.reducer.removeComponent(e,t);case r.default.REMOVE_COMPONENTS:return this.reducer.removeComponents(e,t);case r.default.ADD_COMPONENT_VERSION:return this.reducer.addComponentVersion(e,t);case r.default.ADD_COMPONENT_SECTION:return this.reducer.addComponentSection(e,t);case r.default.UPDATE_COMPONENT_SECTION:return this.reducer.updateComponentSection(e,t);case r.default.MERGE_COMPONENT_SECTION:return this.reducer.mergeComponentSection(e,t);case r.default.REMOVE_COMPONENT_SECTION:return this.reducer.removeComponentSection(e,t);case r.default.REMOVE_COMPONENT_SECTIONS:return this.reducer.removeComponentSections(e,t);case r.default.UPDATE_COMPONENTS_ORDER:return this.reducer.updateComponentsOrder(e,t);case r.default.UPDATE_COMPONENT_SECTIONS_ORDER:return this.reducer.updateComponentSectionsOrder(e,t);case r.default.SET_LOCAL_CONNECTED_COMPONENTS:return this.reducer.setLocalConnectedComponents(e,t);case r.default.UPDATE_CONNECTED_COMPONENTS:return this.reducer.updateConnectedComponents(e,t);case r.default.CREATE_CONNECTED_COMPONENT_ITEM:return this.reducer.createConnectedComponentItem(e,t);case r.default.UPDATE_CONNECTED_COMPONENT_ITEM:return this.reducer.updateConnectedComponentItem(e,t);case r.default.DELETE_CONNECTED_COMPONENT_ITEM:return this.reducer.deleteConnectedComponentItem(e,t);case r.default.UPDATE_WORKFLOW_STATUS:return this.reducer.updateWorkflowStatus(e,t);case r.default.DELETE_WORKFLOW_STATUS:return this.reducer.deleteWorkflowStatus(e,t);case r.default.UPDATE_USER_ROLE:return this.reducer.updateUserRole(e,t);case r.default.REMOVE_MEMBER:return this.reducer.removeMember(e,t);case r.default.ADD:return this.add(e,t);case r.default.ACTIVATE:return this.activateStyleguide(e,t);case r.default.ARCHIVE:return this.archiveStyleguide(e,t);case r.default.REMOVE:return this.remove(e,t);case o.default.LINK_PROJECT_SUCCESS:return this.linkProjectToStyleguideSuccess(e,t);case o.default.UNLINK_PROJECT:return this.unlinkProjectToStyleguide(e,t);case r.default.UPDATE_USER_DATA:return this.updateUserData(e,t);case s.default.TRANSFER_OWNERSHIP:case r.default.OWNERSHIP_TRANSFERRED:return this.transferOwnership(e,t);case r.default.LOAD:return this.load(e,t);case r.default.MOVE_RESOURCES_SUCCESS:return this.moveResourcesSuccess(e,t);case r.default.CHANGE_ASSET_NAME:return this.changeAssetName(e,t);case r.default.JOIN:return this.joinStyleguideRequest(e,t);case r.default.STOP_JOIN_LOADING:return this.joinStyleguideFinalize(e,t);case l.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:return this.reducer.onOrganizationWorkflowStatusDelete(e,t);case l.default.REMOVE_UNJOINED_BARRELS:return this.reducer.removeUnjoinedBarrels(e,t);case s.default.CREATE_STYLEGUIDE_REQUEST:return this.createStyleguideRequest(e);case s.default.CREATE_STYLEGUIDE_FINALIZE:return this.createStyleguideFinalize(e);case s.default.SELECT_PARENT:return this.selectParent(e,t);case s.default.REMOVE_PARENT:return this.removeParent(e,t);case s.default.SELECT_PARENT_REQUEST:return this.selectParentRequest(e);case s.default.SELECT_PARENT_SUCCESS:return this.selectParentSuccess(e,t);case s.default.SELECT_PARENT_FAILED:return this.selectParentFailed(e);case d.default.CREATE_COMPONENT_VARIANT_PROPERTY:return this.reducer.addComponentVariantProperty(e,t);case d.default.UPDATE_COMPONENT_VARIANT_PROPERTY:return this.reducer.updateComponentVariantProperty(e,t);case d.default.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME:return this.reducer.updateComponentVariantPropertyName(e,t);case d.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES:return this.reducer.updateComponentVariantPropertyValues(e,t);case d.default.UPDATE_COMPONENT_VARIANT_PROPERTIES_ORDER:return this.reducer.updateComponentVariantPropertiesOrder(e,t);case d.default.SET_COMPONENT_VARIANT_DATA:return this.reducer.setComponentVariantData(e,t);case d.default.REMOVE_COMPONENT_VARIANT_PROPERTY:return this.reducer.removeComponentVariantProperty(e,t);case d.default.REMOVE_COMPONENT_VARIANT_DATA:return this.reducer.removeComponentVariantData(e,t);case d.default.GROUP_COMPONENTS_BY_VARIANT_PROPERTY:return this.reducer.groupComponentsByVariantProperty(e,t);case c.default.LOAD_WORKSPACE_DATA:return this.reducer.getBarrelsSuccess(e,t);case c.default.RESET:return this.reset();case c.default.HYDRATE_EMBEDDED_DATA:return this.hydrateEmbeddedData(e,t);default:return e}}}const T=O},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(270),i=a.n(n),s=a(378);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends(i()){getInitialState(){return{overridingCategory:null}}setOverridingCategory(e,t){return o(o({},e),{},{overridingCategory:t})}reduce(e,t){return t.type===s.default.SET_OVERRIDING_CATEGORY?this.setOverridingCategory(e,t.overridingCategory):e}}const c=l},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.SET_OVERRIDING_CATEGORY="supportButton/setOverridingCategory"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(270),i=a.n(n),s=a(380),r=a(284);class o extends(i()){constructor(e){super(e)}getInitialState(){return{channels:[],loading:!0}}reset(){return this.getInitialState()}setTeamsIntegration(e,{channels:t}){return Object.assign(Object.assign({},e),{channels:t,loading:!1})}reduce(e,t){switch(t.type){case r.default.RESET:return this.reset();case s.default.SET_TEAMS_INTEGRATION:return this.setTeamsIntegration(e,t);default:return e}}}const d=o},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_TEAMS_INTEGRATION="teamsIntegration/getTeamsIntegration",e.SET_TEAMS_INTEGRATION="teamsIntegration/setTeamsIntegration"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(270),i=a.n(n),s=a(375),r=a(286),o=a(284),d=a(106),l=a(351),c=a(108),u=a(312);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(e){return e.map((e=>new c.default(f({_id:(0,d.getRandomString)()},e))))}function E(e){return e.map((e=>new u.default(f({_id:(0,d.getRandomString)()},e))))}function g(e){return Object.keys(e).reduce(((t,a)=>{const{colors:n=[],textStyles:i=[]}=e[a];return f(f({},t),{},{[a]:{colors:h(n),textStyles:E(i)}})}),{})}class O extends(i()){getInitialState(){return{componentRejections:{},suggestedResourcesByBarrel:{},versionImports:[],indicatorVisible:!1,listVisible:!1,multipleColorsSupportedHintBoxVisible:!1,exportToStyleguideHintBoxVisible:!1,xdPluginReleasedMessageVisible:!1}}hideImportsIndicator(e){return Object.assign({},e,{indicatorVisible:!1})}showImportsList(e){return Object.assign({},e,{indicatorVisible:!0,listVisible:!0})}hideImportsList(e){return Object.assign({},e,{listVisible:!1})}removeColorFromSuggestions(e,t){const{suggestedResourcesByBarrel:a}=e,{color:n,bid:i}=t;if(!a[i])return e;const{[i]:{colors:s,textStyles:r}}=a;if(!s.length)return e;const o=new c.default(n);return f(f({},e),{},{suggestedResourcesByBarrel:f(f({},a),{},{[i]:{textStyles:r,colors:s.filter((e=>!o.equals(e)))}})})}removeColorsFromSuggestions(e,t){const{suggestedResourcesByBarrel:a}=e,{colors:n,bid:i}=t;if(!a[i])return e;const{[i]:{colors:s}}=a;return s.length?n.reduce(((e,t)=>this.removeColorFromSuggestions(e,{color:t,bid:i})),e):e}removeTextStyleFromSuggestions(e,t){const{suggestedResourcesByBarrel:a}=e,{textStyle:n,bid:i}=t;if(!a[i])return e;const{[i]:{colors:s,textStyles:r}}=a;if(!r.length)return e;const o=new u.default(n);return f(f({},e),{},{suggestedResourcesByBarrel:f(f({},a),{},{[i]:{colors:s,textStyles:r.filter((e=>!o.equals(e)))}})})}removeTextStylesFromSuggestions(e,t){const{suggestedResourcesByBarrel:a}=e,{textStyles:n,bid:i}=t;if(!a[i])return e;const{[i]:{textStyles:s}}=a;return s.length?n.reduce(((e,t)=>this.removeTextStyleFromSuggestions(e,{textStyle:t,bid:i})),e):e}changeHintBoxVisibilities(e,t){const{colorsToAdd:a,hasLinkedStyleguideColor:n}=t,i=a.length>0;return f(f({},e),{},{multipleColorsSupportedHintBoxVisible:i,exportToStyleguideHintBoxVisible:n})}hideMultipleColorsSupportedHintBox(e){return f(f({},e),{},{multipleColorsSupportedHintBoxVisible:!1,listVisible:!1})}hideExportToStyleguideHintBox(e){return f(f({},e),{},{exportToStyleguideHintBoxVisible:!1,listVisible:!1})}setSuggestedColors(e,t,a){const{suggestedResourcesByBarrel:n,suggestedResourcesByBarrel:{[t]:i}}=e;return f(f({},e),{},{suggestedResourcesByBarrel:f(f({},n),{},{[t]:f(f({},i),{},{colors:h(a)})})})}setSuggestedTextStyles(e,t,a){const{suggestedResourcesByBarrel:n,suggestedResourcesByBarrel:{[t]:i}}=e;return f(f({},e),{},{suggestedResourcesByBarrel:f(f({},n),{},{[t]:f(f({},i),{},{textStyles:E(a)})})})}showXdPluginReleasedMessage(e){return f(f({},e),{},{xdPluginReleasedMessageVisible:!0})}hideXdPluginReleasedMessage(e){return f(f({},e),{},{xdPluginReleasedMessageVisible:!1})}setSuggestedResources(e,t){const{suggestedResourcesByBarrel:a}=t;return f(f({},e),{},{suggestedResourcesByBarrel:g(a)})}handleImports(e,t){const{componentImportRejections:a,versionCollectionImports:n}=t;return Object.assign({},e,{componentRejections:a,versionImports:n,indicatorVisible:n.length>0,listVisible:0!==n.length&&e.listVisible})}reduce(e,t){switch(t.type){case r.default.OPEN_SCREEN:case o.default.LOAD_INTERMEDIATE:return this.hideImportsList(e);case o.default.ADD_MULTIPLE_COLORS:return this.removeColorsFromSuggestions(e,t);case o.default.ADD_COLOR:return this.removeColorFromSuggestions(e,t);case o.default.ADD_TEXT_STYLE:return this.removeTextStyleFromSuggestions(e,t);case o.default.ADD_MULTIPLE_TEXT_STYLES:return this.removeTextStylesFromSuggestions(e,t);case o.default.MIGRATE_COLORS:return this.changeHintBoxVisibilities(e,t);case l.default.HIDE_SUGGESTED_COLORS:return this.setSuggestedColors(e,t.barrelId,[]);case l.default.HIDE_SUGGESTED_TEXT_STYLES:return this.setSuggestedTextStyles(e,t.barrelId,[]);case s.default.HIDE_IMPORTS_INDICATOR:return this.hideImportsIndicator(e);case s.default.SHOW_IMPORTS_LIST:return this.showImportsList(e);case s.default.HIDE_IMPORTS_LIST:return this.hideImportsList(e);case s.default.SET_SUGGESTED_LOCAL_RESOURCES:return this.setSuggestedResources(e,t);case s.default.SUGGESTED_REMOTE_COLORS_RECEIVED:return this.setSuggestedColors(e,t.bid,t.colors);case s.default.SUGGESTED_REMOTE_TEXT_STYLES_RECEIVED:return this.setSuggestedTextStyles(e,t.bid,t.textStyles);case s.default.HANDLE_IMPORTS:return this.handleImports(e,t.imports);case s.default.GO_TO_IMPORTED_VERSION:return this.hideImportsList(e);case s.default.HIDE_MULTIPLE_COLORS_SUPPORTED_HINT_BOX:return this.hideMultipleColorsSupportedHintBox(e);case s.default.HIDE_EXPORT_TO_STYLEGUIDE_HINT_BOX:return this.hideExportToStyleguideHintBox(e);case s.default.SHOW_XD_PLUGIN_RELEASED_MESSAGE:return this.showXdPluginReleasedMessage(e);case s.default.HIDE_XD_PLUGIN_RELEASED_MESSAGE:return this.hideXdPluginReleasedMessage(e);default:return e}}}const T=O},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(270),i=a.n(n),s=a(383),r=a(384);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends(i()){getInitialState(){return{isGetWebhooksPending:!0,isGetWebhookPending:!1,isCreateWebhookPending:!1,isUpdateWebhookPending:!1,isDeleteWebhookPending:!1,webhooks:[]}}getWebhooksSuccess(e,{webhooks:t}){return d(d({},e),{},{webhooks:t.map((e=>new r.default(e))),isGetWebhooksPending:!1})}getWebhookRequest(e){return d(d({},e),{},{isGetWebhookPending:!0})}getWebhookSuccess(e,{webhook:t}){const{webhooks:a}=e;return d(d({},e),{},{webhooks:a.map((e=>e._id===t._id?new r.default(d(d({},t),{},{complete:!0})):e)),isGetWebhookPending:!1})}getWebhookFailure(e){return d(d({},e),{},{isGetWebhookPending:!1})}createWebhookRequest(e){return d(d({},e),{},{isCreateWebhookPending:!0})}createWebhookSuccess(e,{webhook:t}){return d(d({},e),{},{webhooks:e.webhooks.filter((({_id:e})=>e!==t._id)).concat(new r.default(t)),isCreateWebhookPending:!1})}createWebhookFailure(e){return d(d({},e),{},{isCreateWebhookPending:!1})}updateWebhookRequest(e){return d(d({},e),{},{isUpdateWebhookPending:!0})}updateWebhookSuccess(e,{webhook:t}){return d(d({},e),{},{webhooks:e.webhooks.map((e=>e._id===t._id?new r.default(t):e)),isUpdateWebhookPending:!1})}updateWebhookFailure(e){return d(d({},e),{},{isUpdateWebhookPending:!1})}deleteWebhookRequest(e){return d(d({},e),{},{isDeleteWebhookPending:!0})}deleteWebhookSuccess(e,{webhookId:t}){return d(d({},e),{},{webhooks:e.webhooks.filter((({_id:e})=>e!==t)),isDeleteWebhookPending:!1})}deleteWebhookFailure(e){return d(d({},e),{},{isDeleteWebhookPending:!1})}reduce(e,t){switch(t.type){case s.default.GET_WEBHOOKS_SUCCESS:return this.getWebhooksSuccess(e,t);case s.default.GET_WEBHOOK_REQUEST:return this.getWebhookRequest(e,t);case s.default.GET_WEBHOOK_SUCCESS:return this.getWebhookSuccess(e,t);case s.default.GET_WEBHOOK_FAILURE:return this.getWebhookFailure(e,t);case s.default.CREATE_WEBHOOK_REQUEST:return this.createWebhookRequest(e,t);case s.default.CREATE_WEBHOOK_SUCCESS:return this.createWebhookSuccess(e,t);case s.default.CREATE_WEBHOOK_FAILURE:return this.createWebhookFailure(e,t);case s.default.UPDATE_WEBHOOK_REQUEST:return this.updateWebhookRequest(e,t);case s.default.UPDATE_WEBHOOK_SUCCESS:return this.updateWebhookSuccess(e,t);case s.default.UPDATE_WEBHOOK_FAILURE:return this.updateWebhookFailure(e,t);case s.default.DELETE_WEBHOOK_REQUEST:return this.deleteWebhookRequest(e,t);case s.default.DELETE_WEBHOOK_SUCCESS:return this.deleteWebhookSuccess(e,t);case s.default.DELETE_WEBHOOK_FAILURE:return this.deleteWebhookFailure(e,t);default:return e}}}const u=c},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_WEBHOOKS_REQUEST="webhooks/getWebhooksRequest",e.GET_WEBHOOKS_SUCCESS="webhooks/getWebhooksSuccess",e.GET_WEBHOOK_REQUEST="webhooks/getWebhookRequest",e.GET_WEBHOOK_SUCCESS="webhooks/getWebhookSuccess",e.GET_WEBHOOK_FAILURE="webhooks/getWebhookFailure",e.CREATE_WEBHOOK_REQUEST="webhooks/createWebhookRequest",e.CREATE_WEBHOOK_SUCCESS="webhooks/createWebhookSuccess",e.CREATE_WEBHOOK_FAILURE="webhooks/createWebhookFailure",e.UPDATE_WEBHOOK_REQUEST="webhooks/updateWebhookRequest",e.UPDATE_WEBHOOK_SUCCESS="webhooks/updateWebhookSuccess",e.UPDATE_WEBHOOK_FAILURE="webhooks/updateWebhookFailure",e.DELETE_WEBHOOK_REQUEST="webhooks/deleteWebhookRequest",e.DELETE_WEBHOOK_SUCCESS="webhooks/deleteWebhookSuccess",e.DELETE_WEBHOOK_FAILURE="webhooks/deleteWebhookFailure"}(n||(n={}));const i=n},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(282),r=a(263),o=a(386),d=a(331),l=a(387),c=a(324);class u extends(i()){getInitialState(){return{loading:!0,userId:null,username:null,fullName:null,email:null,avatar:null,emotar:null,verified:null,registeredAt:null,paymentPlan:null,isDesktopNotificationEnabled:null,isEmailNotificationEnabled:null,notificationSettings:null,emailNotificationSettings:null,zeplinThreeZeroWhatsNewSeen:!0,shouldPromoteSpacingSectionDescriptionEditButton:!0,shouldDisplayStyleguideTutorial:!0,shouldPromoteExportDesignTokens:!0,shouldDisplayInvitedUserHintbox:!0,shouldDisplayPersonalWorkspaceHintbox:!0,shouldDisplayDashboardOnboardingHintbox:!0,shouldDisplayAddToFlowOnboarding:!0,shouldDisplayAddToFlowTooltip:!0,selectedView:o.USER_MENU,acquaintancesLoading:!1,acquaintancesError:null,acquaintances:null,offers:[],profession:null,subscriptionStatus:null,storybookIntegrationPromotionSeen:!1,highlightComponentsPromotionSeen:!1,linkToStyleguidePromotionSeen:!1,shouldAcceptNewTerms:!1,termsForApproval:[],accountCaptureInfo:void 0,globalSearchNewTagMenuSeen:!1}}loadUser(e,{user:t}){if(!t)return e;const{_id:a,username:n,fullName:i,email:s,status:r,avatar:o,emotar:d,registeredAt:l,emailNotifications:c,notificationSettings:u,emailNotificationSettings:p,billing:f,paymentPlan:S,offers:h,profession:E,subscriptionStatus:g}=t;return Object.assign(Object.assign({},e),{userId:a,username:n,fullName:i,email:s,verified:"verified"===r,avatar:o,emotar:d,registeredAt:l,isEmailNotificationEnabled:c,notificationSettings:u,emailNotificationSettings:p?Object.assign(Object.assign({},p),{followedProjects:new Set(p.followedProjects)}):void 0,billing:f,paymentPlan:S,offers:h,profession:E,subscriptionStatus:g,loading:!1})}updateUser(e,{user:t}){return Object.assign(Object.assign(Object.assign({},e),t),{loading:!1})}updateUserAttribute(e,{name:t,value:a}){return Object.assign({},e,{[t]:a})}setSelectedView(e,{selectedView:t}){return Object.assign({},e,{selectedView:t})}muteProjectNotifications(e,{pid:t}){const{notificationSettings:a}=e;if(!a)return e;const n=(0,d.union)(a.mutedProjects,[t]);return Object.assign(Object.assign({},e),{notificationSettings:Object.assign(Object.assign({},a),{mutedProjects:n})})}muteStyleguideNotifications(e,{stid:t}){const{notificationSettings:a}=e;if(!a)return e;const n=(0,d.union)(a.mutedStyleguides,[t]);return Object.assign(Object.assign({},e),{notificationSettings:Object.assign(Object.assign({},a),{mutedStyleguides:n})})}unmuteProjectNotifications(e,{pid:t}){const{notificationSettings:a}=e;if(!a)return e;const n=(0,d.difference)(a.mutedProjects,[t]);return Object.assign(Object.assign({},e),{notificationSettings:Object.assign(Object.assign({},a),{mutedProjects:n})})}unmuteStyleguideNotifications(e,{stid:t}){const{notificationSettings:a}=e;if(!a)return e;const n=(0,d.difference)(a.mutedStyleguides,[t]);return Object.assign(Object.assign({},e),{notificationSettings:Object.assign(Object.assign({},a),{mutedStyleguides:n})})}updateFollowedProjectNotifications(e,{followedProjectIds:t,unfollowedProjectIds:a}){const{emailNotificationSettings:n}=e;if(!n)return e;const{followedProjects:i}=n,s=new Set(i);return null==t||t.forEach((e=>{s.add(e)})),null==a||a.forEach((e=>{s.delete(e)})),Object.assign(Object.assign({},e),{emailNotificationSettings:Object.assign(Object.assign({},n),{followedProjects:s})})}setFollowedProjectNotifications(e,{projectIds:t}){const{emailNotificationSettings:a}=e;return a?Object.assign(Object.assign({},e),{emailNotificationSettings:Object.assign(Object.assign({},a),{followedProjects:new Set(t)})}):e}setEmailNotificationPreferences(e,{preferences:t}){const{emailNotificationSettings:a}=e;if(!a)return e;const{emailPreferences:n}=a;return Object.assign(Object.assign({},e),{emailNotificationSettings:Object.assign(Object.assign({},a),{emailPreferences:Object.assign(Object.assign({},n),t)})})}markZeplinThreeZeroWhatsNewAsSeen(e){return Object.assign(Object.assign({},e),{zeplinThreeZeroWhatsNewSeen:!0})}stopPromotingSpacingSectionDescriptionEditButton(e){return Object.assign(Object.assign({},e),{shouldPromoteSpacingSectionDescriptionEditButton:!1})}hideStyleguideTutorial(e){return Object.assign(Object.assign({},e),{shouldDisplayStyleguideTutorial:!1})}stopPromotingExportDesignTokens(e){return Object.assign(Object.assign({},e),{shouldPromoteExportDesignTokens:!1})}hideInvitedUserHintbox(e){return Object.assign(Object.assign({},e),{shouldDisplayInvitedUserHintbox:!1})}hidePersonalWorkspaceHintbox(e){return Object.assign(Object.assign({},e),{shouldDisplayPersonalWorkspaceHintbox:!1})}hideDashboardOnboardingHintbox(e){return Object.assign(Object.assign({},e),{shouldDisplayDashboardOnboardingHintbox:!1})}hideAddToFlowOnboarding(e){return Object.assign(Object.assign({},e),{shouldDisplayAddToFlowOnboarding:!1})}hideAddToFlowTooltip(e){return Object.assign(Object.assign({},e),{shouldDisplayAddToFlowTooltip:!1})}acquaintancesRequested(e){return Object.assign(Object.assign({},e),{acquaintancesLoading:!0,acquaintancesError:null,acquaintances:null})}setAcquaintances(e,{acquaintances:t}){return Object.assign(Object.assign({},e),{acquaintancesLoading:!1,acquaintances:t})}getAcquaintancesFailed(e,{error:t}){return Object.assign(Object.assign({},e),{acquaintancesLoading:!1,acquaintancesError:t})}markStorybookIntegrationPromotionAsSeen(e){return Object.assign(Object.assign({},e),{storybookIntegrationPromotionSeen:!0})}markHighlightComponentsPromotionAsSeen(e){return Object.assign(Object.assign({},e),{highlightComponentsPromotionSeen:!0})}markLinkToStyleguidePromotionAsSeen(e){return Object.assign(Object.assign({},e),{linkToStyleguidePromotionSeen:!0})}setTermsForApproval(e,t){const{termsForApproval:a}=t;return Object.assign(Object.assign({},e),{termsForApproval:a,shouldAcceptNewTerms:!!a.length})}acceptTerms(e,t){const{acceptedTermsId:a}=t,n=e.termsForApproval.filter((e=>e._id!==a));return Object.assign(Object.assign({},e),{shouldAcceptNewTerms:!!n.length,termsForApproval:n})}removeAccountCaptureInfo(e,{id:t}){const{accountCaptureInfo:a}=e;return a&&a.action===l.CaptureSettingsAction.Capture&&a.defaultOrganizationId===t?Object.assign(Object.assign({},e),{accountCaptureInfo:void 0}):e}markGlobalSearchNewTagMenuSeen(e){return Object.assign(Object.assign({},e),{globalSearchNewTagMenuSeen:!0})}reduce(e,t){switch(t.type){case r.default.HYDRATE_EMBEDDED_DATA:case s.default.LOAD_USER:return this.loadUser(e,t);case s.default.UPDATE_USER:return this.updateUser(e,t);case s.default.SET_USER_ATTRIBUTE:return this.updateUserAttribute(e,t);case s.default.SET_SELECTED_VIEW:return this.setSelectedView(e,t);case s.default.SET_EMAIL_NOTIFICATION_PREFERENCES:return this.setEmailNotificationPreferences(e,t);case s.default.MUTE_PROJECT_NOTIFICATIONS:return this.muteProjectNotifications(e,t);case s.default.MUTE_STYLEGUIDE_NOTIFICATIONS:return this.muteStyleguideNotifications(e,t);case s.default.UNMUTE_PROJECT_NOTIFICATIONS:return this.unmuteProjectNotifications(e,t);case s.default.UNMUTE_STYLEGUIDE_NOTIFICATIONS:return this.unmuteStyleguideNotifications(e,t);case s.default.UPDATE_FOLLOWED_PROJECT_NOTIFICATIONS:return this.updateFollowedProjectNotifications(e,t);case s.default.SET_FOLLOWED_PROJECT_NOTIFICATIONS:return this.setFollowedProjectNotifications(e,t);case s.default.MARK_ZEPLIN_THREE_ZERO_WHATS_NEW_AS_SEEN:return this.markZeplinThreeZeroWhatsNewAsSeen(e);case s.default.STOP_PROMOTING_SPACING_SECTION_DESCRIPTION_EDIT_BUTTON:return this.stopPromotingSpacingSectionDescriptionEditButton(e);case s.default.HIDE_STYLEGUIDE_TUTORIAL:return this.hideStyleguideTutorial(e);case s.default.STOP_PROMOTING_EXPORT_DESIGN_TOKENS:return this.stopPromotingExportDesignTokens(e);case s.default.HIDE_INVITED_USER_HINTBOX:return this.hideInvitedUserHintbox(e);case s.default.HIDE_PERSONAL_WORKSPACE_HINTBOX:return this.hidePersonalWorkspaceHintbox(e);case s.default.HIDE_DASHBOARD_ONBOARDING_HINTBOX:return this.hideDashboardOnboardingHintbox(e);case s.default.HIDE_ADD_TO_FLOW_ONBOARDING:return this.hideAddToFlowOnboarding(e);case s.default.HIDE_ADD_TO_FLOW_TOOLTIP:return this.hideAddToFlowTooltip(e);case s.default.ACQUAINTANCES_REQUESTED:return this.acquaintancesRequested(e);case s.default.SET_ACQUAINTANCES:return this.setAcquaintances(e,t);case s.default.GET_ACQUAINTANCES_FAILED:return this.getAcquaintancesFailed(e,t);case s.default.MARK_STORYBOOK_INTEGRATION_PROMOTION_AS_SEEN:return this.markStorybookIntegrationPromotionAsSeen(e);case s.default.MARK_HIGHLIGHT_COMPONENTS_PROMOTION_AS_SEEN:return this.markHighlightComponentsPromotionAsSeen(e);case s.default.MARK_LINK_TO_STYLEGUIDE_PROMOTION_AS_SEEN:return this.markLinkToStyleguidePromotionAsSeen(e);case s.default.SET_TERMS_FOR_APPROVAL:return this.setTermsForApproval(e,t);case s.default.ACCEPT_TERMS:return this.acceptTerms(e,t);case c.default.REMOVE_ORGANIZATION:return this.removeAccountCaptureInfo(e,t);case s.default.MARK_GLOBAL_SEARCH_NEW_BADGE_MENU_SEEN:return this.markGlobalSearchNewTagMenuSeen(e);default:return e}}}const p=u},(e,t,a)=>{"use strict";a.r(t),a.d(t,{EMOTARS:()=>n,USER_MENU:()=>i});const n="emotars",i="userMenu"},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(352),r=a(284),o=a(263);class d extends(i()){constructor(e){super(e)}getInitialState(){return{versionsAssets:{},componentsAssets:{}}}reset(){return this.getInitialState()}setVersionAssets(e,{vid:t,assets:a}){return Object.assign(Object.assign({},e),{versionsAssets:Object.assign(Object.assign({},e.versionsAssets),{[t]:a})})}setComponentAssets(e,{coid:t,assets:a}){return Object.assign(Object.assign({},e),{componentsAssets:Object.assign(Object.assign({},e.componentsAssets),{[t]:a})})}setMultipleComponentAssets(e,{componentAssets:t}){const a=t.reduce(((e,t)=>{const{coid:a,assets:n}=t;return e[a]=n,e}),{});return Object.assign(Object.assign({},e),{componentsAssets:Object.assign(Object.assign({},e.componentsAssets),a)})}updateVersionAssetOptimizedContents(e,{vid:t,assets:a}){const n=e.versionsAssets[t];return n&&n.length?Object.assign(Object.assign({},e),{versionsAssets:Object.assign(Object.assign({},e.versionsAssets),{[t]:n.map((e=>{const t=a.find((({_id:t})=>t===e._id));return t?Object.assign(Object.assign({},e),{contents:e.contents.map((e=>{const a=t.contents.find((({_id:t,originalContentId:a})=>e._id===a||t));return a?Object.assign(Object.assign({},e),{optimized:Object.assign(Object.assign({},e.optimized),a)}):e}))}):e}))})}):e}updateVersionAssetOptimizedContent(e,{vid:t,vaid:a,vacid:n,patch:i}){const s=e.versionsAssets[t];return s&&s.length?Object.assign(Object.assign({},e),{versionsAssets:Object.assign(Object.assign({},e.versionsAssets),{[t]:s.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{contents:e.contents.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{optimized:Object.assign(Object.assign({},e.optimized),i)})))})))})}):e}processVersionAssetContentRequest(e,{vid:t,vaid:a,vacid:n}){return this.updateVersionAssetOptimizedContent(e,{vid:t,vaid:a,vacid:n,patch:{status:"processing"}})}processVersionAssetContentFailure(e,{vid:t,vaid:a,vacid:n}){return this.updateVersionAssetOptimizedContent(e,{vid:t,vaid:a,vacid:n,patch:{status:"error"}})}updateComponentVersionAssetOptimizedContents(e,{coid:t,assets:a}){const n=e.componentsAssets[t];return n&&n.length?Object.assign(Object.assign({},e),{componentsAssets:Object.assign(Object.assign({},e.componentsAssets),{[t]:n.map((e=>{const t=a.find((({_id:t})=>t===e._id));return t?Object.assign(Object.assign({},e),{contents:e.contents.map((e=>{const a=t.contents.find((({_id:t,originalContentId:a})=>e._id===a||t));return a?Object.assign(Object.assign({},e),{optimized:Object.assign(Object.assign({},e.optimized),a)}):e}))}):e}))})}):e}updateComponentVersionAssetOptimizedContent(e,{coid:t,vaid:a,vacid:n,patch:i}){const s=e.componentsAssets[t];return s&&s.length?Object.assign(Object.assign({},e),{componentsAssets:Object.assign(Object.assign({},e.componentsAssets),{[t]:s.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{contents:e.contents.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{optimized:Object.assign(Object.assign({},e.optimized),i)})))})))})}):e}processComponentVersionAssetContentRequest(e,{coid:t,vaid:a,vacid:n}){return this.updateComponentVersionAssetOptimizedContent(e,{coid:t,vaid:a,vacid:n,patch:{status:"processing"}})}processComponentVersionAssetContentFailure(e,{coid:t,vaid:a,vacid:n}){return this.updateComponentVersionAssetOptimizedContent(e,{coid:t,vaid:a,vacid:n,patch:{status:"error"}})}changeComponentAssetName(e,{component:t,assetId:a,name:n}){if(!t)return e;const i=t._id,s=e.componentsAssets[i];return s&&0!==s.length?Object.assign(Object.assign({},e),{componentsAssets:Object.assign(Object.assign({},e.componentsAssets),{[i]:s.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{localName:n})))})}):e}changeVersionAssetName(e,{versionId:t,assetId:a,name:n}){if(!t)return e;const i=e.versionsAssets[t];return i&&0!==i.length?Object.assign(Object.assign({},e),{versionsAssets:Object.assign(Object.assign({},e.versionsAssets),{[t]:i.map((e=>e._id!==a?e:Object.assign(Object.assign({},e),{localName:n})))})}):e}reduce(e,t){switch(t.type){case o.default.RESET:return this.reset();case s.default.SET_VERSION_ASSETS:return this.setVersionAssets(e,t);case s.default.SET_COMPONENT_ASSETS:return this.setComponentAssets(e,t);case s.default.SET_MULTIPLE_COMPONENT_ASSETS:return this.setMultipleComponentAssets(e,t);case s.default.UPDATE_VERSION_ASSET_OPTIMIZED_CONTENTS:return this.updateVersionAssetOptimizedContents(e,t);case s.default.PROCESS_VERSION_ASSET_CONTENT_REQUEST:return this.processVersionAssetContentRequest(e,t);case s.default.PROCESS_VERSION_ASSET_CONTENT_FAILURE:return this.processVersionAssetContentFailure(e,t);case s.default.UPDATE_COMPONENT_VERSION_ASSET_OPTIMIZED_CONTENTS:return this.updateComponentVersionAssetOptimizedContents(e,t);case s.default.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_REQUEST:return this.processComponentVersionAssetContentRequest(e,t);case s.default.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_FAILURE:return this.processComponentVersionAssetContentFailure(e,t);case r.default.CHANGE_ASSET_NAME:return t.component?this.changeComponentAssetName(e,t):t.versionId?this.changeVersionAssetName(e,t):e;default:return e}}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(390),r=a(286),o=a(331),d=a(100),l=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const c={getIdsFromParameters:e=>e.projects.flatMap((({screens:e})=>e)).flatMap((({dots:e})=>e)),updateDotState(e,t,a){const{_id:n,name:i,color:s,status:r}=a,o=null!=n?n:t,c={_id:o,status:r,name:i,color:s};if(!(0,d.isAllPropertiesFilled)(c)&&!e.dots[t])return e;(0,d.deleteEmptyProperties)(c);const u=e.dots,p=t,f=u[p],S=l(u,["symbol"==typeof p?p:p+""]);S[o]=Object.assign(Object.assign({},f),c);const h=e.errorDotIds.filter((e=>e!==o));return Object.assign(Object.assign({},e),{errorDotIds:h,dots:S})}};class u extends(i()){constructor(e){super(e)}getInitialState(){return{loadingDotIds:[],errorDotIds:[],dots:{}}}requestDotStates(e,{parameters:t}){const a=c.getIdsFromParameters(t),n=(0,o.union)(e.loadingDotIds,a),i=(0,o.difference)(e.errorDotIds,a);return Object.assign(Object.assign({},e),{errorDotIds:i,loadingDotIds:n})}addDotStates(e,{parameters:t,response:a}){const n=c.getIdsFromParameters(t),i=a.projects.flatMap((({screens:e})=>e)).flatMap((({dots:e})=>e)),s=i.map((({_id:e})=>e)),r=(0,o.difference)(n,s),d=(0,o.difference)(e.loadingDotIds,n),l=(0,o.union)(e.errorDotIds,r);return Object.assign(Object.assign({},e),{loadingDotIds:d,errorDotIds:l,dots:Object.assign(Object.assign({},e.dots),Object.fromEntries(i.map((e=>[e._id,e]))))})}dotStatesError(e,{parameters:t}){const a=c.getIdsFromParameters(t),n=(0,o.difference)(e.loadingDotIds,a);return Object.assign(Object.assign({},e),{loadingDotIds:n})}addDotState(e,{dot:t}){return c.updateDotState(e,t._id,t)}updateDotState(e,{did:t,dotData:a}){return c.updateDotState(e,t,a)}updateDotColor(e,{did:t,color:a}){return c.updateDotState(e,t,{color:a})}updateDotStatus(e,{did:t,status:a}){return c.updateDotState(e,t,{status:a})}reduce(e,t){switch(t.type){case s.default.RequestDotStates:return this.requestDotStates(e,t);case s.default.AddDotStates:return this.addDotStates(e,t);case s.default.DotStatesError:return this.dotStatesError(e,t);case r.default.ADD_DOT:return this.addDotState(e,t);case r.default.UPDATE_DOT:return this.updateDotState(e,t);case r.default.UPDATE_DOT_COLOR:return this.updateDotColor(e,t);case r.default.UPDATE_DOT_STATUS:return this.updateDotStatus(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.RequestDotStates="dotStates/request",e.AddDotStates="dotStates/add",e.DotStatesError="dotStates/error"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(392),r=a(100),o=a(393),d=a(185),l=a(284);const c="alias:";class u extends(i()){constructor(e){super(e)}getInitialState(){return{errorProjectIds:[],loadingProjectIds:[],projectsEmojis:{}}}requestEmojis(e,{pid:t}){const a=e.errorProjectIds.filter((e=>e!==t)),n=[...e.loadingProjectIds,t];return Object.assign(Object.assign({},e),{errorProjectIds:a,loadingProjectIds:n})}addEmojis(e,{pid:t,response:a}){const n=e.loadingProjectIds.filter((e=>e!==t)),i={},s=[];(0,r.entriesOf)(a.emoji).forEach((([e,t])=>{const a=e.replace(/_/g," ");if(t.startsWith(c)){const e=t.substring(c.length);i[a]=e}else o.default.some((({aliases:e})=>e.includes(a)))||s.push({emoji:t,aliases:[a]})}));const d={};return(0,r.entriesOf)(i).forEach((([e,t])=>{var a;const n=o.default.findIndex((({aliases:e})=>e.includes(t)));if(n>=0)d[n]=[...null!==(a=d[n])&&void 0!==a?a:[],e];else{const a=s.find((({aliases:e})=>e.includes(t)));null==a||a.aliases.push(e)}})),Object.assign(Object.assign({},e),{loadingProjectIds:n,projectsEmojis:Object.assign(Object.assign({},e.projectsEmojis),{[t]:{defaultEmojiAliases:d,customEmojis:s}})})}emojisError(e,{pid:t}){const a=[...e.errorProjectIds,t],n=e.loadingProjectIds.filter((e=>e!==t));return Object.assign(Object.assign({},e),{errorProjectIds:a,loadingProjectIds:n})}removeIntegration(e,{bid:t,isLastSlackIntegration:a}){if(!a)return this.requestEmojis(e,{pid:t});const{projectsEmojis:n}=e,i=(0,d.filterOut)(n,t);return Object.assign(Object.assign({},e),{projectsEmojis:i})}reduce(e,t){switch(t.type){case s.default.RequestEmojis:return this.requestEmojis(e,t);case s.default.AddEmojis:return this.addEmojis(e,t);case s.default.EmojisError:return this.emojisError(e,t);case l.default.REMOVE_INTEGRATION:return this.removeIntegration(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.RequestEmojis="emojis/request",e.AddEmojis="emojis/add",e.EmojisError="emojis/error"}(n||(n={}));const i=n},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(395),r=a(284),o=a(263),d=a(396),l=a(401),c=a(7);class u extends(i()){constructor(e){super(e)}getInitialState(){return{url:"",stories:[],selectedStoryPath:"",loading:!0}}reset(){return this.getInitialState()}setStories(e,{stories:t}){return Object.assign(Object.assign({},e),{loading:!1,stories:t})}updateUrl(e,{url:t}){let a=t;return a.endsWith("/")&&(a=a.slice(0,-1)),Object.assign(Object.assign({},e),{url:a})}updateStory(e,{storyId:t,styleguidesData:a,payload:n}){return Object.assign(Object.assign({},e),{stories:e.stories.map((e=>{if(e.id===t){const t=Object.assign(Object.assign({},e),n);return t.status=(0,d.calculateStoryStatus)(t.connectedComponentIds,a),t}return e}))})}deleteStory(e,{storyId:t}){return Object.assign(Object.assign({},e),{stories:e.stories.filter((e=>e.id!==t))})}updateSelectedStoryPath(e,{selectedStoryPath:t}){return Object.assign(Object.assign({},e),{selectedStoryPath:t})}addStoryConnectedComponent(e,{storyPath:t,styleguidesData:a,connectedComponent:n}){return Object.assign(Object.assign({},e),{stories:e.stories.map((e=>{if(`${e.kind}/${e.name}`===t){const t=Object.assign({},e);return t.connectedComponentItemIds.includes(n._id)||t.connectedComponentItemIds.push(n._id),n.componentId&&!t.connectedComponentIds.includes(n.componentId)&&t.connectedComponentIds.push(n.componentId),t.status=(0,d.calculateStoryStatus)(t.connectedComponentIds,a),t}return e}))})}removeStoryConnectedComponent(e,{storyPath:t,styleguidesData:a,connectedComponent:n}){return Object.assign(Object.assign({},e),{stories:e.stories.map((e=>{if(`${e.kind}/${e.name}`===t){const t=Object.assign({},e);return t.connectedComponentItemIds=t.connectedComponentItemIds.filter((e=>n._id!==e)),t.connectedComponentIds=t.connectedComponentIds.filter((e=>n.componentId!==e)),t.status=(0,d.calculateStoryStatus)(t.connectedComponentIds,a),t}return e}))})}updateForRemoveComponent(e,{coid:t}){return Object.assign(Object.assign({},e),{stories:e.stories.map((e=>e.connectedComponentIds.includes(t)?Object.assign(Object.assign({},e),{status:c.StoryStatus.HasIssue}):e))})}updateForRemoveComponents(e,{sectionComponents:t}){let a=e;return t.reduce(((e,{coids:t})=>[...e,...t]),[]).forEach((e=>{a=this.updateForRemoveComponent(a,{coid:e})})),a}updateForUpdateConnectedComponents(e,{styleguidesData:t}){return Object.assign(Object.assign({},e),{stories:(0,l.transformStories)(e.stories,t)})}reduce(e,t){switch(t.type){case o.default.RESET:case r.default.RESET:return this.reset();case s.default.SET_STORIES:return this.setStories(e,t);case s.default.UPDATE_URL:return this.updateUrl(e,t);case s.default.UPDATE_STORY:return this.updateStory(e,t);case s.default.DELETE_STORY:return this.deleteStory(e,t);case s.default.UPDATE_SELECTED_STORY_PATH:return this.updateSelectedStoryPath(e,t);case s.default.ADD_STORY_CONNECTED_COMPONENT:return this.addStoryConnectedComponent(e,t);case s.default.REMOVE_STORY_CONNECTED_COMPONENT:return this.removeStoryConnectedComponent(e,t);case s.default.UPDATE_FOR_UPDATE_CONNECTED_COMPONENTS:return this.updateForUpdateConnectedComponents(e,t);case r.default.REMOVE_COMPONENT:return this.updateForRemoveComponent(e,t);case r.default.REMOVE_COMPONENTS:return this.updateForRemoveComponents(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.SET_STORIES="storybookIntegration/setStories",e.UPDATE_URL="storybookIntegration/updateUrl",e.UPDATE_STORY="storybookIntegration/updateStory",e.DELETE_STORY="storybookIntegration/deleteStory",e.UPDATE_SELECTED_STORY_PATH="storybookIntegration/updateSelectedStoryPath",e.ADD_STORY_CONNECTED_COMPONENT="storybookIntegration/addStoryConnectedComponent",e.REMOVE_STORY_CONNECTED_COMPONENT="storybookIntegration/removeStoryConnectedComponent",e.UPDATE_FOR_UPDATE_CONNECTED_COMPONENTS="storybookIntegration/updateForUpdateConnectedComponents"}(n||(n={}));const i=n},,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(270),i=a.n(n),s=a(413);const r={enabled:!0,role:"pawn",restricted:!0};class o extends(i()){constructor(e){super(e)}getInitialState(){return{isSCIMSettingsPending:!0,isSCIMTokensPending:!0,isSCIMTokenCreatePending:!1,isSCIMTokenDeletePending:!1,scimSettingsData:r,scimTokens:[],newSCIMTokenGenerated:!1}}getSCIMSettingsSuccess(e,t){return Object.assign(Object.assign({},e),{scimSettingsData:t,isSCIMSettingsPending:!1})}getSCIMSettingsFailure(e){return Object.assign(Object.assign({},e),{isSCIMSettingsPending:!1})}getSCIMTokensSuccess(e,t){return Object.assign(Object.assign({},e),{scimTokens:t,isSCIMTokensPending:!1})}getSCIMTokensFailure(e){return Object.assign(Object.assign({},e),{isSCIMTokensPending:!1})}createSCIMTokenRequest(e){return Object.assign(Object.assign({},e),{newSCIMTokenGenerated:!1,isSCIMTokenCreatePending:!0})}createSCIMTokenSuccess(e,t){return Object.assign(Object.assign({},e),{newSCIMTokenGenerated:!0,isSCIMTokenCreatePending:!1,scimTokens:[t,...e.scimTokens]})}createSCIMTokenFailure(e){return Object.assign(Object.assign({},e),{isSCIMTokenCreatePending:!1,newSCIMTokenGenerated:!1})}deleteSCIMTokenRequest(e){return Object.assign(Object.assign({},e),{isSCIMTokenDeletePending:!0})}deleteSCIMTokenSuccess(e,t){return Object.assign(Object.assign({},e),{scimTokens:e.scimTokens.filter((({accessTokenId:e})=>e!==t)),scimSettingsData:r,isSCIMTokenDeletePending:!1})}deleteSCIMTokenFailure(e){return Object.assign(Object.assign({},e),{isSCIMTokenDeletePending:!1})}updateSCIMRole(e,t){const a=Object.assign({},e.scimSettingsData,{role:t});return Object.assign(Object.assign({},e),{scimSettingsData:a})}updateSCIMAccessibility(e,t){const a=Object.assign({},e.scimSettingsData,{restricted:t});return Object.assign(Object.assign({},e),{scimSettingsData:a})}updateSCIMStatus(e,t){const a=Object.assign({},e.scimSettingsData,{enabled:t});return Object.assign(Object.assign({},e),{scimSettingsData:a})}reduce(e,t){switch(t.type){case s.default.GET_SCIM_SETTINGS_SUCCESS:return this.getSCIMSettingsSuccess(e,t.SCIMSettings);case s.default.GET_SCIM_SETTINGS_FAILURE:return this.getSCIMSettingsFailure(e);case s.default.GET_SCIM_TOKENS_SUCCESS:return this.getSCIMTokensSuccess(e,t.scimTokens);case s.default.GET_SCIM_TOKENS_FAILURE:return this.getSCIMTokensFailure(e);case s.default.CREATE_SCIM_TOKEN_REQUEST:return this.createSCIMTokenRequest(e);case s.default.CREATE_SCIM_TOKEN_SUCCESS:return this.createSCIMTokenSuccess(e,t.newToken);case s.default.CREATE_SCIM_TOKEN_FAILURE:return this.createSCIMTokenFailure(e);case s.default.DELETE_SCIM_TOKEN_REQUEST:return this.deleteSCIMTokenRequest(e);case s.default.DELETE_SCIM_TOKEN_SUCCESS:return this.deleteSCIMTokenSuccess(e,t.accessTokenId);case s.default.UPDATE_SCIM_ROLE:return this.updateSCIMRole(e,t.role);case s.default.UPDATE_SCIM_ACCESSIBILITY:return this.updateSCIMAccessibility(e,t.restricted);case s.default.UPDATE_SCIM_STATUS:return this.updateSCIMStatus(e,t.enabled);default:return e}}}const d=o},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.GET_SCIM_SETTINGS_REQUEST="workspaceSettings/getSCIMSettingsRequest",e.GET_SCIM_SETTINGS_SUCCESS="workspaceSettings/getSCIMSettingsSuccess",e.GET_SCIM_SETTINGS_FAILURE="workspaceSettings/getSCIMSettingsFailure",e.GET_SCIM_TOKENS_REQUEST="workspaceSettings/getSCIMTokensRequest",e.GET_SCIM_TOKENS_SUCCESS="workspaceSettings/getSCIMTokensSuccess",e.GET_SCIM_TOKENS_FAILURE="workspaceSettings/getSCIMTokensFailure",e.CREATE_SCIM_TOKEN_REQUEST="workspaceSettings/createSCIMTokenRequest",e.CREATE_SCIM_TOKEN_SUCCESS="workspaceSettings/createSCIMTokenSuccess",e.CREATE_SCIM_TOKEN_FAILURE="workspaceSettings/createSCIMTokenFailure",e.DELETE_SCIM_TOKEN_REQUEST="workspaceSettings/deleteSCIMTokenRequest",e.DELETE_SCIM_TOKEN_SUCCESS="workspaceSettings/deleteSCIMTokenSuccess",e.DELETE_SCIM_TOKEN_FAILURE="workspaceSettings/deleteSCIMTokenFailure",e.UPDATE_SCIM_ROLE="workspaceSettings/updateSCIMRoleRequest",e.UPDATE_SCIM_ACCESSIBILITY="workspaceSettings/updateSCIMAccessibilityRequest",e.UPDATE_SCIM_STATUS="workspaceSettings/updateSCIMStatusRequest"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(270),i=a.n(n),s=a(285),r=a(415),o=a(263),d=a(284),l=a(286),c=a(287),u=a(416),p=a(313),f=a(337),S=a(331),h=a(417),E=a(418),g=a(359),O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class T extends(i()){constructor(e){super(e)}getInitialState(){return{currentFlowId:null,flows:{},fetchedFlowIds:new Set,width:window.innerWidth,height:window.innerHeight-52,positions:{},zoomLevels:{},addShapeMode:null,lastConnectorEndStyleUsed:h.default.Arrow,lastNoteColorUsed:"yellow",lastConnectorColorUsed:"teflon",lastShapeColorUsed:"teflon",selectedNodes:[],exportingPDF:!1,creatingBoard:!1,creatingFromEmptyView:!1,notesVisible:!0,noteMode:!1,dotPosition:null,clientPosition:null,dotId:null,statusFilter:g.default.Open,colorFilter:null,savedNotes:{},highlightedDots:[],highlightedComments:[],loadingDots:!0}}load(e,{barrel:{barrelId:t},data:{flows:a},flows:n}){var i,s,r,o;if(!a)return Object.assign(Object.assign({},e),{lastConnectorEndStyleUsed:null!==(i=null==n?void 0:n.lastConnectorEndStyleUsed)&&void 0!==i?i:e.lastConnectorEndStyleUsed,lastConnectorColorUsed:null!==(s=null==n?void 0:n.lastConnectorColorUsed)&&void 0!==s?s:e.lastConnectorColorUsed,lastShapeColorUsed:null!==(r=null==n?void 0:n.lastShapeColorUsed)&&void 0!==r?r:e.lastShapeColorUsed,lastNoteColorUsed:null!==(o=null==n?void 0:n.lastNoteColorUsed)&&void 0!==o?o:e.lastNoteColorUsed});const{lastConnectorEndStyleUsed:d,lastConnectorColorUsed:l,lastShapeColorUsed:c,lastNoteColorUsed:p}=n;return Object.assign(Object.assign({},this.getInitialState()),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.fromEntries(a.map((e=>[e._id,e])))}),zoomLevels:Object.assign(Object.assign({},e.zoomLevels),Object.fromEntries(a.map((({_id:e})=>[e,u.ZOOM_LEVEL_DEFAULT])))),fetchedFlowIds:e.fetchedFlowIds,lastConnectorEndStyleUsed:d,lastConnectorColorUsed:l,lastShapeColorUsed:c,lastNoteColorUsed:p})}reset(e){return Object.assign(Object.assign({},this.getInitialState()),{flows:e.flows,zoomLevels:e.zoomLevels,fetchedFlowIds:e.fetchedFlowIds})}loadFlow(e,{pid:t,flow:a,complete:n}){return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},e.flows[t]),{[a._id]:a})}),zoomLevels:Object.assign(Object.assign({},e.zoomLevels),{[a._id]:u.ZOOM_LEVEL_DEFAULT}),fetchedFlowIds:n?e.fetchedFlowIds.add(a._id):e.fetchedFlowIds})}loadFlows(e,{pid:t,flows:a}){return a.reduce(((e,a)=>this.loadFlow(e,{pid:t,flow:a,complete:!0})),e)}updateFlowValue(e,{pid:t,flid:a,key:n,value:i}){const s=e.flows[t];if(!s)return e;const r=s[a];return r?Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},e.flows[t]),{[a]:Object.assign(Object.assign({},r),{[n]:"function"==typeof i?i(r):i})})})}):e}updateFlow(e,{pid:t,flid:a,flow:n}){const i=e.flows[t];if(!i)return e;const s=i[a];if(!s)return e;const r=Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},e.flows[t]),{[n._id]:Object.assign(Object.assign({},s),n)})});return Object.assign(Object.assign({},e),{flows:r,zoomLevels:Object.assign(Object.assign({},e.zoomLevels),{[n._id]:u.ZOOM_LEVEL_DEFAULT})})}addNodeToFlow(e,{pid:t,flid:a,node:n}){let i=this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>n._id?e.concat(n):e});return n.type===r.default.Shape&&(i=Object.assign(Object.assign({},i),{creatingFromEmptyView:!1}),i.flows[t][E.tempFlowId]&&delete i.flows[t][E.tempFlowId]),i}updateShapeColor(e,{pid:t,flid:a,noid:n,color:i}){const s=Object.assign(Object.assign({},e),{lastShapeColorUsed:(0,f.getColorName)(i)});return this.updateFlowValue(s,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{color:i}))):[]})}updateShapeType(e,{pid:t,flid:a,noid:n,shapeType:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{shapeType:i}))):[]})}addNodesToFlow(e,{pid:t,flid:a,nodes:n,connectors:i}){const s=this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e.concat(n)});return i?this.updateFlowValue(s,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>null==e?void 0:e.concat(i)}):s}updateFlowNodesPosition(e,{pid:t,flid:a,nodes:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e.map((e=>{const t=n.find((t=>t._id===e._id));return t?Object.assign(Object.assign({},e),t):e}))})}deleteFlowNodes(e,{pid:t,flid:a,nodeIds:n,deletedConnectors:i}){let s=this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e.filter((e=>!n.includes(e._id)))});s=this.updateFlowValue(s,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>Object.assign(Object.assign({},e),{nodes:(0,S.difference)(e.nodes,n)}))).filter((e=>e.nodes.length)):[]});const r=null==i?void 0:i.map((({_id:e})=>e));return(null==r?void 0:r.length)?this.deleteConnectors(s,{pid:t,flid:a,connectorIds:r}):s}createConnector(e,{pid:t,flid:a,connector:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.concat(n):[n]})}updateConnector(e,{pid:t,flid:a,conid:n,connector:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),i))):[]})}updateConnectorLineType(e,{pid:t,flid:a,conid:n,lineType:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{type:i}))):[]})}updateConnectorEndStyle(e,{pid:t,flid:a,conid:n,endStyle:i}){const s=Object.assign(Object.assign({},e),{lastConnectorEndStyleUsed:i});return this.updateFlowValue(s,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{end:Object.assign(Object.assign({},e.end),{style:i})}))):[]})}updateConnectorColor(e,{pid:t,flid:a,conid:n,color:i}){const s=Object.assign(Object.assign({},e),{lastConnectorColorUsed:(0,f.getColorName)(i)});return this.updateFlowValue(s,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{color:i}))):[]})}updateConnectorPoints(e,{pid:t,flid:a,conid:n,start:i,end:s}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:i&&s?Object.assign(Object.assign({},e),{start:i,end:s}):i?Object.assign(Object.assign({},e),{start:i}):s?Object.assign(Object.assign({},e),{end:s}):e)):[]})}addConnectorLabel(e,{pid:t,flid:a,conid:n,label:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{label:i}))):[]})}updateConnectorLabel(e,{pid:t,flid:a,conid:n,label:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{label:Object.assign(Object.assign({},e.label),i)}))):[]})}updateConnectorLabelText(e,{pid:t,flid:a,conid:n,text:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{label:Object.assign(Object.assign({},e.label),{text:i})}))):[]})}updateConnectorLabelWidth(e,{pid:t,flid:a,conid:n,width:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{label:Object.assign(Object.assign({},e.label),{width:i})}))):[]})}updateConnectorLineTrajectory(e,{pid:t,flid:a,conid:n,points:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{lineTrajectory:i}))):[]})}updateGroupName(e,{pid:t,flid:a,fgid:n,name:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{name:i}))):[]})}updateGroupColor(e,{pid:t,flid:a,fgid:n,color:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{color:i}))):[]})}removeNodesFromGroup(e,{pid:t,flid:a,fgid:n,nodeIds:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{nodes:(0,S.difference)(e.nodes,i)}))).filter((e=>e.nodes.length)):[]})}addNodesToGroup(e,{pid:t,flid:a,fgid:n,nodeIds:i,fromGroup:s}){let r=e;return s&&(r=this.removeNodesFromGroup(e,{pid:t,flid:a,fgid:s,nodeIds:i})),this.updateFlowValue(r,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{nodes:(0,S.union)(e.nodes,i)}))):[]})}updateGroupOrder(e,{pid:t,flid:a,fgids:n,index:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value({groups:e}){if(!e)return[];const t=(0,S.arrayRemove)(e,(e=>n.includes(e._id)));return t?(e.splice(i,0,t),e):e}})}deleteGroups(e,{pid:t,flid:a,fgids:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.filter((e=>!n.includes(e._id))):[]})}setSelectedNodes(e,{nodeIds:t}){return Object.assign(Object.assign({},e),{selectedNodes:t})}createGroupsStart(e,{pid:t,flid:a,groups:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?[...e,...n]:[]})}createGroupsRequest(e,{pid:t,flid:a,groups:n,currentGroupIds:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>{const t=i.indexOf(e._id);return-1===t?e:Object.assign(Object.assign({},e),{name:n[t].name})})):[]})}createGroupsSuccess(e,{pid:t,flid:a,createdGroupIds:n,currentGroupIds:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"groups",value:({groups:e})=>e?e.map((e=>{const t=i.indexOf(e._id);return-1===t?e:Object.assign(Object.assign({},e),{_id:n[t]})})):[]})}createBoardStart(e,{pid:t,flid:a,name:n}){return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},e.flows[t]),{[a]:{_id:a,name:n,nodes:[]}})}),creatingBoard:!0})}createBoardSuccess(e,{pid:t,flow:a,currentFlowId:n}){const i=t,s=e.flows[i],r=n,o=(s[r],O(s,["symbol"==typeof r?r:r+""]));return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},o),{[a._id]:a})}),creatingBoard:!1})}deleteBoard(e,{pid:t,flid:a}){const n=t,i=e.flows[n],s=a,r=(i[s],O(i,["symbol"==typeof s?s:s+""]));return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:r}),creatingBoard:!1})}updateBoardName(e,{pid:t,flid:a,name:n}){return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.assign(Object.assign({},e.flows[t]),{[a]:Object.assign(Object.assign({},e.flows[t][a]),{name:n})})})})}updateBoardOrder(e,{pid:t,flows:a,index:n}){const{flows:i}=e,s=Object.entries(i[t]),r=(0,S.arrayRemove)(s,(([e])=>a.includes(e)));return r?(s.splice(n,0,r),Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[t]:Object.fromEntries(s)})})):e}updateConnectorLabelPosition(e,{pid:t,flid:a,conid:n,position:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{label:Object.assign(Object.assign({},e.label),{position:i})}))):[]})}deleteConnectors(e,{pid:t,flid:a,connectorIds:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.filter((e=>!n.includes(e._id))):[]})}deleteConnectorLabel(e,{pid:t,flid:a,conid:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?e.map((e=>{if(e._id!==n)return e;const{label:t}=e;return O(e,["label"])})):[]})}updateFlowNode(e,{pid:t,flid:a,noid:n,node:i}){var s;const r=this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),i))):[]});if(!i.defaultVariant)return r;const o=null===(s=e.flows[t][a].connectors)||void 0===s?void 0:s.filter((({start:e,end:t})=>e.node===n||t.node===n)).map((({_id:e})=>e));return(null==o?void 0:o.length)?this.deleteConnectors(r,{pid:t,flid:a,connectorIds:o}):r}updateVariantGroupNode(e,{pid:t,flid:a,noid:n,defaultVariant:i,connectors:s,deletedConnectors:r}){let o=this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{defaultVariant:i}))):[]});const d=null==r?void 0:r.map((({_id:e})=>e));return(null==d?void 0:d.length)&&(o=this.deleteConnectors(o,{pid:t,flid:a,connectorIds:d})),null==s||s.forEach((e=>{o=this.createConnector(o,{pid:t,flid:a,connector:e})})),o}updateConnectorIds(e,{pid:t,flid:a,connectorIdMap:n}){return this.updateFlowValue(e,{pid:t,flid:a,key:"connectors",value:({connectors:e})=>e?n?e.map((e=>{const t=e._id;return t in n?Object.assign(Object.assign({},e),{_id:n[t]}):e})):e:[]})}updateNodeText(e,{pid:t,flid:a,noid:n,text:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:Object.assign(Object.assign({},e),{text:i}))):[]})}updateNodeWidth(e,{pid:t,flid:a,noid:n,width:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e._id!==n)return e;if(null===i){const t=e,{width:a}=t;return O(t,["width"])}return Object.assign(Object.assign({},e),{width:i})})):[]})}updateNodeHeight(e,{pid:t,flid:a,noid:n,height:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e._id!==n)return e;if(null===i){const t=e,{height:a}=t;return O(t,["height"])}return Object.assign(Object.assign({},e),{height:i})})):[]})}updateFlowNodeName(e,{pid:t,flid:a,noid:n,node:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e._id!==n)return e;if(e.type===r.default.Screen)return Object.assign(Object.assign({},e),{screen:Object.assign(Object.assign({},e.screen),i)});if(e.type===r.default.VariantGroup){const t=i.screens,a=e.variantGroup.screens.map((e=>{const{variantName:a}=t.find((t=>t._id===e._id))||{};return a?Object.assign(Object.assign({},e),{variantName:a}):e}));return Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:a})})}return e})):[]})}updateFlowNodeScreenVersion(e,{pid:t,flid:a,noid:n,node:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id!==n?e:e.type===r.default.Screen?Object.assign(Object.assign({},e),{screen:Object.assign(Object.assign({},e.screen),{latestVersion:i.screen.latestVersion})}):e.type===r.default.VariantGroup?Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:e.variantGroup.screens.map((e=>{var t;const a=null===(t=i.variantGroup)||void 0===t?void 0:t.screens.find((t=>e._id===t._id));return a?Object.assign(Object.assign({},e),{latestVersion:a.latestVersion}):e}))})}):e)):[]})}updateFlowNodeType(e,{pid:t,flid:a,noid:n,node:i}){return this.updateFlowValue(e,{pid:t,flid:a,key:"nodes",value:({nodes:e})=>e?e.map((e=>e._id===n?i:e)):[]})}updateScreenName(e,{pid:t,sid:a,name:n,syncWithApi:i}){const{currentFlowId:s}=e;return i&&s?this.updateFlowValue(e,{pid:t,flid:s,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e.type===r.default.Screen&&e.screen._id===a)return Object.assign(Object.assign({},e),{screen:Object.assign(Object.assign({},e.screen),{name:n})});if(e.type===r.default.VariantGroup){const t=e.variantGroup.screens.map((e=>e._id===a?Object.assign(Object.assign({},e),{name:n}):e));return Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:t})})}return e})):[]}):e}updateScreenVariantName(e,{pid:t,vgid:a,svid:n,name:i,syncWithApi:s}){const{currentFlowId:o}=e;return s&&o?this.updateFlowValue(e,{pid:t,flid:o,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e.type===r.default.VariantGroup&&e.variantGroup._id===a){const t=e.variantGroup.screens.map((e=>e._id===n?Object.assign(Object.assign({},e),{variantName:i}):e));return Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:t})})}return e})):[]}):e}deleteScreens(e,{pid:t,items:a,syncWithApi:n}){const{currentFlowId:i}=e;if(!n||!i)return e;let s=e;return a.forEach((e=>{"screen"===e.type?s=this.removeScreen(s,{pid:t,sid:e._id,syncWithApi:n}):"variantGroup"===e.type&&(s=this.deleteVariantGroupNode(s,{pid:t,vgid:e._id,syncWithApi:n}))})),s}removeScreen(e,{pid:t,sid:a,syncWithApi:n}){const{currentFlowId:i}=e;return n&&i?this.updateFlowValue(e,{pid:t,flid:i,key:"nodes",value({nodes:e}){if(!e)return[];let t=e;const{_id:n}=e.find((e=>e.type===r.default.Screen&&e.screen._id===a||e.type===r.default.VariantGroup&&e.defaultVariant===a))||{};return n&&(t=e.filter((e=>e._id!==n))),t.map((e=>{if(e.type!==r.default.VariantGroup)return e;const t=e.variantGroup.screens.filter((({_id:e})=>e!==a));return 1===t.length?{_id:e._id,type:r.default.Screen,screen:t[0],position:e.position}:Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:t})})}))}}):e}removeScreenVariant(e,{pid:t,vgid:a,svid:n,syncWithApi:i}){const{currentFlowId:s}=e;return i&&s?this.updateFlowValue(e,{pid:t,flid:s,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e.type!==r.default.VariantGroup)return e;if(e.variantGroup._id===a){if(e.defaultVariant===n)return{_id:e._id,type:r.default.Screen,screen:e.variantGroup.screens.find((({_id:e})=>e===n)),position:e.position};const t=e.variantGroup.screens.filter((({_id:e})=>e!==n));return 1===t.length?{_id:e._id,type:r.default.Screen,screen:t[0],position:e.position}:Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:t})})}return e})):[]}):e}createVariantGroupNode(e,{pid:t,variantGroupData:a,variantScreensData:n}){const{currentFlowId:i}=e;return i?this.updateFlowValue(e,{pid:t,flid:i,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e.type===r.default.Screen&&n[e.screen._id])return{_id:e._id,type:r.default.VariantGroup,variantGroup:{_id:a._id,name:a.name,screens:a.screens.map((({id:e,variantName:t})=>({_id:e,name:n[e].name,variantName:t,latestVersion:n[e].latestVersion})))},defaultVariant:e.screen._id,position:e.position};if(e.type===r.default.VariantGroup){const t=a.screens.reduce(((e,{id:t,variantName:a})=>(e[t]=a,e)),{}),i=Object.keys(t),{variantGroup:s,defaultVariant:r}=e;if(i.includes(r)){const a=s.screens.map((({_id:e})=>e)),r=i.filter((e=>!a.includes(e))).map((e=>{const{name:a,latestVersion:i}=n[e];return{_id:e,name:a,variantName:t[e],latestVersion:i}}));return Object.assign(Object.assign({},e),{variantGroup:Object.assign(Object.assign({},e.variantGroup),{screens:e.variantGroup.screens.concat(r)})})}}return e})):[]}):e}detachVariantGroupNode(e,{pid:t,vgid:a}){const{currentFlowId:n}=e;return n?this.updateFlowValue(e,{pid:t,flid:n,key:"nodes",value:({nodes:e})=>e?e.map((e=>{if(e.type!==r.default.VariantGroup||e.variantGroup._id!==a)return e;const t=e.variantGroup.screens.find((({_id:t})=>t===e.defaultVariant));return{_id:e._id,type:r.default.Screen,position:e.position,screen:{_id:t._id,name:t.name,latestVersion:t.latestVersion}}})):[]}):e}deleteVariantGroupNode(e,{pid:t,vgid:a,syncWithApi:n}){const{currentFlowId:i}=e;return n&&i?this.updateFlowValue(e,{pid:t,flid:i,key:"nodes",value:({nodes:e})=>e?e.filter((e=>!(e.type===r.default.VariantGroup&&e.variantGroup._id===a))):[]}):e}setCurrentFlowId(e,{flid:t}){return Object.assign(Object.assign({},e),{currentFlowId:t,selectedNodes:[]})}setDimensions(e,{width:t,height:a}){return Object.assign(Object.assign({},e),{width:t,height:a})}changePosition(e,{flid:t,position:a}){return Object.assign(Object.assign({},e),{positions:Object.assign(Object.assign({},e.positions),{[t]:a})})}setZoomLevel(e,{flid:t,zoomLevel:a,position:n}){const i=(0,p.clamp)(a,u.ZOOM_LEVEL_MIN,u.ZOOM_LEVEL_MAX),s=this.changePosition(e,{flid:t,position:n});return Object.assign(Object.assign({},s),{zoomLevels:Object.assign(Object.assign({},s.zoomLevels),{[t]:i})})}enableAddShapeMode(e,{addShapeMode:t,creatingFromEmptyView:a}){return Object.assign(Object.assign({},e),{addShapeMode:t,creatingFromEmptyView:a})}disableAddShapeMode(e){return Object.assign(Object.assign({},e),{addShapeMode:null})}disableCreatingFromEmptyView(e){return Object.assign(Object.assign({},e),{creatingFromEmptyView:!1})}setExportingPDF(e,t){return Object.assign(Object.assign({},e),{exportingPDF:t})}transferToAnotherFlow(e,t){var a,n;const{pid:i,flid:s,targetFlid:r,transferredConnectors:o,transferredGroups:d,transferredNodes:l}=t,{flows:c}=e,u=c[i],p=u[s],f=u[r];if(!p||!f||!p.groups)return e;const S=l.map((({_id:e})=>e)),h=o.map((({_id:e})=>e)),E=d.map((({_id:e})=>e)),g=Object.assign(Object.assign({},p),{nodes:p.nodes.filter((({_id:e})=>!S.includes(e))),connectors:null===(a=p.connectors)||void 0===a?void 0:a.filter((({_id:e})=>!h.includes(e))),groups:null===(n=p.groups)||void 0===n?void 0:n.filter((({_id:e})=>!E.includes(e)))}),O=Object.assign(Object.assign({},f),{nodes:f.nodes.concat(l),connectors:(f.connectors||[]).concat(o||[]),groups:(f.groups||[]).concat(d)});return Object.assign(Object.assign({},e),{flows:Object.assign(Object.assign({},e.flows),{[i]:Object.assign(Object.assign({},e.flows[i]),{[s]:g,[r]:O})})})}updateTransferredGroupData(e,{pid:t,flid:a,nodes:n}){let i=e;for(const s of n)i=this.updateFlowNode(i,{pid:t,flid:a,noid:s._id,node:s});return i}enableNoteMode(e){return Object.assign(Object.assign({},e),{notesVisible:!0,noteMode:!0})}disableNoteMode(e){return Object.assign(Object.assign({},e),{noteMode:!1})}showNotes(e){return Object.assign(Object.assign({},e),{notesVisible:!0,noteMode:!1})}hideNotes(e){return Object.assign(Object.assign({},e),{notesVisible:!1,noteMode:!1,dotId:null})}createNote(e,{dot:{_id:t},dotPosition:a,clientPosition:n}){const i=this.showNotes(e);return Object.assign(Object.assign({},i),{dotPosition:a,clientPosition:n,dotId:t,statusFilter:g.default.Open,colorFilter:null})}selectDot(e,{dotId:t,commentId:a,position:n}){if(e.dotId===t)return e;const i=this.showNotes(e);let s=[];return Array.isArray(a)?s=a:a&&(s=[a]),Object.assign(Object.assign({},i),{dotId:t,clientPosition:n,highlightedComments:s,highlightedDots:e.highlightedDots.filter((e=>e!==t))})}saveNote(e,t,a,n){const{savedNotes:i}=e,s=(0,f.isDraftDot)(a)?"newDot":a;return Object.assign(Object.assign({},e),{savedNotes:Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},i[t]),{[s]:n})})})}deselectDot(e){return Object.assign(Object.assign({},e),{dotId:null})}setDots(e,{dotId:t,statusFilter:a,colorFilter:n}){return Object.assign(Object.assign({},e),{loadingDots:!1,dotId:t,statusFilter:a,colorFilter:n})}unhighlightComment(e,{cmid:t}){return Object.assign(Object.assign({},e),{highlightedComments:e.highlightedComments.filter((e=>e!==t))})}updateDot(e,{did:t,dotData:{_id:a}}){return e.dotId!==t&&t===a?e:Object.assign(Object.assign({},e),{dotId:a})}updateDotStatus(e,{did:t,status:a,statusFilter:n}){const i=n||e.statusFilter;return e.dotId===t&&i!==a?Object.assign(Object.assign({},e),{statusFilter:i,dotId:null}):n?Object.assign(Object.assign({},e),{statusFilter:i}):e}updateLastNoteColorUsed(e,{colorName:t}){return Object.assign(Object.assign({},e),{lastNoteColorUsed:t})}changeDotFilter(e,{status:t,color:a,dotId:n}){return Object.assign(Object.assign({},e),{colorFilter:a,statusFilter:t,dotId:n})}removeDot(e,{flid:t,did:a,note:n}){let{savedNotes:i}=e;return(0,f.isDraftDot)(a)&&(i=Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},i[t]),{newDot:n})})),e.dotId!==a?(0,f.isDraftDot)(a)?Object.assign(Object.assign({},e),{savedNotes:i}):e:Object.assign(Object.assign({},e),{savedNotes:i,dotId:null})}reduce(e,t){switch(t.type){case d.default.LOAD:return this.load(e,t);case o.default.RESET:case d.default.RESET:return this.reset(e);case s.default.LOAD_FLOW:return this.loadFlow(e,t);case s.default.LOAD_FLOWS:return this.loadFlows(e,t);case s.default.UPDATE_FLOW_NODES_POSITION:return this.updateFlowNodesPosition(e,t);case s.default.DELETE_FLOW_NODES:return this.deleteFlowNodes(e,t);case s.default.CREATE_CONNECTOR:return this.createConnector(e,t);case s.default.UPDATE_CONNECTOR:return this.updateConnector(e,t);case s.default.UPDATE_CONNECTOR_LINE_TYPE:return this.updateConnectorLineType(e,t);case s.default.UPDATE_CONNECTOR_END_STYLE:return this.updateConnectorEndStyle(e,t);case s.default.UPDATE_CONNECTOR_COLOR:return this.updateConnectorColor(e,t);case s.default.UPDATE_CONNECTOR_POINTS:return this.updateConnectorPoints(e,t);case s.default.UPDATE_CONNECTOR_LINE_TRAJECTORY:return this.updateConnectorLineTrajectory(e,t);case s.default.ADD_CONNECTOR_LABEL:return this.addConnectorLabel(e,t);case s.default.UPDATE_CONNECTOR_LABEL:return this.updateConnectorLabel(e,t);case s.default.UPDATE_CONNECTOR_LABEL_TEXT:return this.updateConnectorLabelText(e,t);case s.default.UPDATE_CONNECTOR_LABEL_WIDTH:return this.updateConnectorLabelWidth(e,t);case s.default.UPDATE_CONNECTOR_LABEL_POSITION:return this.updateConnectorLabelPosition(e,t);case s.default.DELETE_CONNECTOR_LABEL:return this.deleteConnectorLabel(e,t);case s.default.UPDATE_FLOW_NODE:return this.updateFlowNode(e,t);case s.default.UPDATE_VARIANT_GROUP_NODE:return this.updateVariantGroupNode(e,t);case s.default.CREATE_CONNECTORS:return this.updateConnectorIds(e,t);case s.default.UPDATE_NODE_TEXT:return this.updateNodeText(e,t);case s.default.UPDATE_NODE_WIDTH:return this.updateNodeWidth(e,t);case s.default.UPDATE_NODE_HEIGHT:return this.updateNodeHeight(e,t);case s.default.ADD_TEXT_LABEL_NODE:case s.default.ADD_SHAPE_NODE:return this.addNodeToFlow(e,t);case s.default.UPDATE_SHAPE_COLOR:return this.updateShapeColor(e,t);case s.default.UPDATE_SHAPE_TYPE:return this.updateShapeType(e,t);case s.default.ADD_NODES_TO_FLOW_SUCCESS:return this.addNodesToFlow(e,t);case s.default.UPDATE_FLOW_NODE_NAME:return this.updateFlowNodeName(e,t);case s.default.UPDATE_FLOW_NODE_SCREEN_VERSION:return this.updateFlowNodeScreenVersion(e,t);case s.default.UPDATE_FLOW_NODE_TYPE:return this.updateFlowNodeType(e,t);case s.default.SET_CURRENT_FLOW:return this.setCurrentFlowId(e,t);case s.default.SET_DIMENSIONS:return this.setDimensions(e,t);case s.default.CHANGE_POSITION:return this.changePosition(e,t);case s.default.SET_ZOOM_LEVEL:return this.setZoomLevel(e,t);case s.default.ENABLE_ADD_SHAPE_MODE:return this.enableAddShapeMode(e,t);case s.default.DISABLE_ADD_SHAPE_MODE:return this.disableAddShapeMode(e);case s.default.DISABLE_CREATING_FROM_EMPTY_VIEW:return this.disableCreatingFromEmptyView(e);case s.default.UPDATE_FLOW:return this.updateFlow(e,t);case s.default.DELETE_CONNECTORS:return this.deleteConnectors(e,t);case s.default.UPDATE_GROUP_NAME:return this.updateGroupName(e,t);case s.default.UPDATE_GROUP_COLOR:return this.updateGroupColor(e,t);case s.default.REMOVE_NODES_FROM_GROUP:return this.removeNodesFromGroup(e,t);case s.default.ADD_NODES_TO_GROUP:return this.addNodesToGroup(e,t);case s.default.UPDATE_GROUP_ORDER:return this.updateGroupOrder(e,t);case s.default.DELETE_GROUPS:return this.deleteGroups(e,t);case s.default.SET_SELECTED_NODES:return this.setSelectedNodes(e,t);case s.default.CREATE_GROUPS_START:return this.createGroupsStart(e,t);case s.default.CREATE_GROUPS_REQUEST:return this.createGroupsRequest(e,t);case s.default.CREATE_GROUPS_SUCCESS:return this.createGroupsSuccess(e,t);case s.default.EXPORT_AS_PDF:return this.setExportingPDF(e,!0);case s.default.PDF_EXPORT_FINISHED:return this.setExportingPDF(e,!1);case s.default.CREATE_BOARD_START:return this.createBoardStart(e,t);case s.default.CREATE_BOARD_SUCCESS:return this.createBoardSuccess(e,t);case s.default.DELETE_BOARD:return this.deleteBoard(e,t);case s.default.UPDATE_BOARD_ORDER:return this.updateBoardOrder(e,t);case s.default.UPDATE_BOARD_NAME:case s.default.CREATE_BOARD_REQUEST:return this.updateBoardName(e,t);case s.default.TRANSFER_GROUPS_TO_ANOTHER_FLOW:case s.default.TRANSFER_NODES_TO_ANOTHER_FLOW:return this.transferToAnotherFlow(e,t);case s.default.UPDATE_TRANSFERRED_DATA:return this.updateTransferredGroupData(e,t);case l.default.UPDATE_NAME:return this.updateScreenName(e,t);case l.default.RENAME_SCREEN_VARIANT:return this.updateScreenVariantName(e,t);case l.default.REMOVE_SCREEN:return this.removeScreen(e,t);case l.default.REMOVE_SCREEN_VARIANT:return this.removeScreenVariant(e,t);case c.default.UPDATE_VARIANT_GROUP:return this.createVariantGroupNode(e,t);case c.default.DETACH_VARIANT_GROUP:return this.detachVariantGroupNode(e,t);case c.default.DELETE_VARIANT_GROUP:return this.deleteVariantGroupNode(e,t);case c.default.DELETE_SCREENS:return this.deleteScreens(e,t);case s.default.ENABLE_NOTE_MODE:return this.enableNoteMode(e);case s.default.DISABLE_NOTE_MODE:return this.disableNoteMode(e);case s.default.CREATE_NOTE:return this.createNote(e,t);case s.default.SHOW_NOTES:return this.showNotes(e);case s.default.HIDE_NOTES:return this.hideNotes(e);case s.default.SELECT_DOT:case s.default.OPEN_DOT:return this.selectDot(e,t);case s.default.UPDATE_DOT:return this.updateDot(e,t);case s.default.CHANGE_DOT_FILTER:return this.changeDotFilter(e,t);case s.default.UPDATE_DOT_STATUS:return this.updateDotStatus(e,t);case s.default.UPDATE_DOT_COLOR:return this.updateLastNoteColorUsed(e,t);case s.default.SAVE_NOTE:return this.saveNote(e,t.flid,t.did,t.note);case s.default.ADD_DOT:return this.saveNote(e,t.flid,t.dot._id,"");case s.default.CREATE_COMMENT:return this.saveNote(e,t.flid,t.did,"");case s.default.CLOSE_DOT_POPUP:return this.deselectDot(e);case s.default.SET_DOTS:return this.setDots(e,t);case s.default.UNHIGHLIGHT_COMMENT:return this.unhighlightComment(e,t);case s.default.REMOVE_DOT:return this.removeDot(e,t);default:return e}}}const m=T},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{Colors:()=>n,GRID_SIZE:()=>i,ZOOM_LEVEL_GRID_SIZE_2X:()=>s,ZOOM_LEVEL_GRID_SIZE_4X:()=>r,SELECTION_RECT_STROKE_WIDTH:()=>o,DASH_VALUE:()=>d,getScaledDashValue:()=>l,GROUP_DASH_VALUE:()=>c,getScaledGroupDashValue:()=>u,PADDING:()=>p,SCALE_FACTOR:()=>f,ZOOM_LEVELS:()=>S,ZOOM_LEVEL_DEFAULT:()=>h,ZOOM_LEVEL_MIN:()=>E,ZOOM_LEVEL_MAX:()=>g,MENU_BUTTON_WIDTH:()=>O,MENU_BUTTON_HEIGHT:()=>T,MENU_BUTTON_OFFSET_Y:()=>m,GROUP_RECTANGLE_PADDING:()=>_,MENU_BOTTOM_OFFSET:()=>b,HEADER_HEIGHT:()=>C});const n={Transparent:"transparent",Teflon:"#554d56",Clooney:"#c1bec1",CornflowerBlue:"#419bf9",CornflowerBlueActive:"#448fe1",CornflowerBlue15:"rgba(65, 154, 249, 0.15)",CornflowerBlue40:"rgba(65, 154, 249, 0.4)",CornflowerBlue70:"rgba(65, 154, 249, 0.7)",CornflowerBluePale:"#9ecbfa",Karl:"#edeced",KarlActive:"#d4d1d4",Gandalf:"#979197",Gandalf10:"rgba(151, 145, 151, 0.1)",Gandalf25:"rgba(151, 145, 151, 0.25)",White:"#fff",Snowman:"#fbfbfb",WarmGray:"#bcb5b9"},i=160,s=.093,r=.046,o=1,d=[4,8],l=e=>d.map((t=>t/e.scaleX())),c=[8,16],u=e=>c.map((t=>t/e.scaleX())),p=24,f=100,S=Object.freeze([.031,.0625,.125,.25,.5,.75,1,1.5,2]),h=.5,[E]=S,g=S[S.length-1],O=24,T=19,m=-12,_=72,b=T-m,C=52},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{tempFlowId:()=>n});const n="123456789012345678901234"},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(285),r=a(420),o=a(284);class d extends(i()){constructor(e){super(e),this.reducer=new r.default}getInitialState(){return{dots:{}}}setDots(e,{pid:t,flid:a,dots:n}){return this.reducer.setDots(e,{pid:t,flid:a,dots:n})}createNote(e,{pid:t,flid:a,dot:n}){return this.reducer.insertDot(e,{pid:t,flid:a,dot:n})}updateDot(e,{pid:t,flid:a,did:n,dotData:i}){return this.reducer.updateDot(e,{pid:t,flid:a,did:n,dot:i})}updateDotStatus(e,{pid:t,flid:a,did:n,status:i}){return this.reducer.updateDot(e,{pid:t,flid:a,did:n,dot:{status:i}})}updateDotColor(e,{pid:t,flid:a,did:n,color:i}){return this.reducer.updateDot(e,{pid:t,flid:a,did:n,dot:{color:i}})}addDot(e,{pid:t,flid:a,dot:n}){return this.reducer.insertDot(e,{pid:t,flid:a,dot:n})}createComment(e,{pid:t,flid:a,did:n,comment:i}){return this.reducer.insertDotComment(e,{pid:t,flid:a,did:n,comment:i})}addComment(e,{pid:t,flid:a,did:n,comment:i}){return this.reducer.insertDotComment(e,{pid:t,flid:a,did:n,comment:i})}updateComment(e,{pid:t,flid:a,did:n,cmid:i,commentData:s}){return this.reducer.updateDotComment(e,{pid:t,flid:a,did:n,cmid:i,commentData:s})}removeComment(e,{pid:t,flid:a,did:n,cmid:i}){return this.reducer.removeDotComment(e,{pid:t,flid:a,did:n,cmid:i})}removeDot(e,{pid:t,flid:a,did:n}){return this.reducer.removeDot(e,{pid:t,flid:a,did:n})}updateUserData(e,{bid:t,uid:a,userData:n}){const i=e.dots[t];for(const s in i){const r=i[s];if(r&&r.length){const i=r.map((e=>{const t=e.comments.map((e=>e.createdBy&&e.createdBy._id===a?Object.assign(Object.assign({},e),{author:Object.assign(Object.assign({},e.createdBy),n)}):e));return e.createdBy&&e.createdBy._id===a?Object.assign(Object.assign({},e),{comments:t,createdBy:Object.assign(Object.assign({},e.createdBy),n)}):Object.assign(Object.assign({},e),{comments:t})}));return this.reducer.setDots(e,{pid:t,flid:s,dots:i})}}return e}reduce(e,t){switch(t.type){case s.default.SET_DOTS:return this.setDots(e,t);case s.default.CREATE_NOTE:return this.createNote(e,t);case s.default.UPDATE_DOT:return this.updateDot(e,t);case s.default.UPDATE_DOT_STATUS:return this.updateDotStatus(e,t);case s.default.UPDATE_DOT_COLOR:return this.updateDotColor(e,t);case s.default.ADD_DOT:return this.addDot(e,t);case s.default.CREATE_COMMENT:return this.createComment(e,t);case s.default.ADD_COMMENT:return this.addComment(e,t);case s.default.UPDATE_COMMENT:return this.updateComment(e,t);case s.default.REMOVE_COMMENT:return this.removeComment(e,t);case s.default.REMOVE_DOT:return this.removeDot(e,t);case o.default.UPDATE_USER_DATA:return this.updateUserData(e,t);default:return e}}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=class{getDots(e,{pid:t,flid:a}){var n,i;if(t&&a)return null===(i=null===(n=e.dots)||void 0===n?void 0:n[t])||void 0===i?void 0:i[a]}getSingleDot(e,{pid:t,flid:a,did:n}){if(!t||!a||!n)return;const i=this.getDots(e,{pid:t,flid:a});return null==i?void 0:i.find((({_id:e})=>n===e))}setDots(e,{pid:t,flid:a,dots:n}){return t&&a?Object.assign(Object.assign({},e),{dots:Object.assign(Object.assign({},e.dots),{[t]:Object.assign(Object.assign({},e.dots[t]),{[a]:n})})}):e}insertDot(e,{pid:t,flid:a,did:n,dot:i}){if(!t||!a)return e;const s=this.getDots(e,{pid:t,flid:a})||[];if(this.getSingleDot(e,{pid:t,flid:a,did:null!=n?n:i._id}))return e;const r=[...s,i];return this.setDots(e,{pid:t,flid:a,dots:r})}updateDot(e,{pid:t,flid:a,did:n,dot:i}){if(!t||!a)return e;const s=this.getDots(e,{pid:t,flid:a});if(!s)return e;if(!this.getSingleDot(e,{pid:t,flid:a,did:null!=n?n:i._id}))return e;const r=s.map((e=>e._id===n?Object.assign(Object.assign({},e),i):e));return this.setDots(e,{pid:t,flid:a,dots:r})}removeDot(e,{pid:t,flid:a,did:n}){if(!t||!a)return e;const i=this.getDots(e,{pid:t,flid:a});if(!i)return e;const s=i.filter((({_id:e})=>e!==n));return this.setDots(e,{pid:t,flid:a,dots:s})}insertDotComment(e,{pid:t,flid:a,did:n,comment:i}){var s,r,o,d;const l=this.getSingleDot(e,{pid:t,flid:a,did:n});if(!l)return e;if(null===(r=null===(s=l)||void 0===s?void 0:s.comments)||void 0===r?void 0:r.find((e=>e._id===i._id)))return e;const c={comments:[...null!==(d=null===(o=l)||void 0===o?void 0:o.comments)&&void 0!==d?d:[],i]};return this.updateDot(e,{pid:t,flid:a,did:n,dot:c})}updateDotComment(e,{pid:t,flid:a,did:n,cmid:i,commentData:s}){var r,o;const d=this.getSingleDot(e,{pid:t,flid:a,did:n});if(!d)return e;const l={comments:null===(o=null===(r=d)||void 0===r?void 0:r.comments)||void 0===o?void 0:o.map((e=>e._id!==i?e:Object.assign(Object.assign({},e),s)))};return this.updateDot(e,{pid:t,flid:a,did:n,dot:l})}removeDotComment(e,{pid:t,flid:a,did:n,cmid:i}){var s,r;const o=this.getSingleDot(e,{pid:t,flid:a,did:n});if(!o)return e;const d={comments:null===(r=null===(s=o)||void 0===s?void 0:s.comments)||void 0===r?void 0:r.filter((e=>e._id!==i))};return this.updateDot(e,{pid:t,flid:a,did:n,dot:d})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(286),r=a(284),o=a(15),d=a(348),l=a(337),c=a(359);class u extends(i()){getInitialState(){return{annotationFirstTimeLandingHidden:!1,loadingAnnotations:!0,annotationId:null,filterId:void 0,statusFilter:"All",annotationConfigFilter:c.AnnotationStatusFilter.All,lastNoteTypeUsed:void 0,savedAnnotations:{}}}reset(e){const{savedAnnotations:t,annotationFirstTimeLandingHidden:a}=e;return Object.assign(Object.assign({},this.getInitialState()),{savedAnnotations:t,annotationFirstTimeLandingHidden:a})}setAnnotations(e,{annotationId:t}){return Object.assign(Object.assign({},e),{loadingAnnotations:!1,annotationId:t})}setAnnotationsForIntermediateLoading(e,{barrelData:{annotations:t},annotationsDetails:{annotationId:a}}){const{savedAnnotations:n}=e;return e.annotationId===a||!e.annotationId&&!a?Object.assign(Object.assign(Object.assign({},e),t),{loadingAnnotations:!1,annotationId:a,lastNoteTypeUsed:(null==t?void 0:t.lastNoteTypeUsed)!==d.default.None._id?null==t?void 0:t.lastNoteTypeUsed:void 0,annotationFirstTimeLandingHidden:!!(null==t?void 0:t.annotationFirstTimeLandingHidden),savedAnnotations:n}):Object.assign(Object.assign(Object.assign({},e),t),{annotationId:e.annotationId,lastNoteTypeUsed:(null==t?void 0:t.lastNoteTypeUsed)!==d.default.None._id?null==t?void 0:t.lastNoteTypeUsed:void 0,annotationFirstTimeLandingHidden:!!(null==t?void 0:t.annotationFirstTimeLandingHidden),savedAnnotations:n,loadingAnnotations:!1})}selectAnnotation(e,{annotationId:t}){return e.annotationId===t||!e.annotationId&&!t?e:Object.assign(Object.assign({},e),{annotationId:t,annotationFirstTimeLandingHidden:!0})}deselectAnnotation(e){return Object.assign(Object.assign({},e),{annotationId:null})}removeAnnotation(e,{atid:t,sid:a,text:n}){let{savedAnnotations:i}=e;return(0,l.isDraftAnnotation)(t)&&(i=Object.assign(Object.assign({},i),{[a]:Object.assign(Object.assign({},i[a]),{newAnnotation:n})})),e.annotationId!==t?(0,l.isDraftAnnotation)(t)?Object.assign(Object.assign({},e),{savedAnnotations:i}):e:Object.assign(Object.assign({},e),{savedAnnotations:i,annotationId:null})}createAnnotation(e,{annotation:{_id:t}}){return Object.assign(Object.assign({},e),{annotationId:t,annotationConfigFilter:c.AnnotationStatusFilter.All,annotationFirstTimeLandingHidden:!0})}updateAnnotation(e,{atid:t,annotationData:{_id:a}}){return e.annotationId!==t&&t===a?e:Object.assign(Object.assign({},e),{annotationId:a})}updateDotPopupRemarkType(e,{remark:t,atid:a,remarkType:n,sid:i,textContent:s}){if(n===o.default.Annotation){const{savedAnnotations:a}=e;return Object.assign(Object.assign({},e),{annotationId:t._id,savedAnnotations:Object.assign(Object.assign({},a),{[i]:Object.assign(Object.assign({},a[i]),{[t._id]:null!=s?s:""})}),annotationFirstTimeLandingHidden:!0,annotationConfigFilter:c.AnnotationStatusFilter.All})}return e.annotationId===a?Object.assign(Object.assign({},e),{annotationId:null}):e}updateLastNoteTypeUsed(e,{atid:t,newType:a}){return e.annotationId!==t?e:Object.assign(Object.assign({},e),{lastNoteTypeUsed:a})}changeAnnotationFilter(e,{filterId:t,statusFilter:a}){return Object.assign(Object.assign({},e),{statusFilter:a,filterId:t})}deleteLastNoteTypeUsed(e,{atid:t}){return e.annotationId!==t?e:Object.assign(Object.assign({},e),{lastNoteTypeUsed:void 0})}load(e,{annotations:t={}}){const{savedAnnotations:a}=e;return Object.assign(Object.assign(Object.assign({},e),t),{annotationId:e.annotationId,lastNoteTypeUsed:t.lastNoteTypeUsed!==d.default.None._id?t.lastNoteTypeUsed:void 0,annotationFirstTimeLandingHidden:!!t.annotationFirstTimeLandingHidden,savedAnnotations:a})}handleChangeSelectedView(e){const{lastNoteTypeUsed:t,savedAnnotations:a,annotationFirstTimeLandingHidden:n,annotationConfigFilter:i}=e;return Object.assign(Object.assign({},this.getInitialState()),{lastNoteTypeUsed:t,savedAnnotations:a,annotationFirstTimeLandingHidden:n,annotationConfigFilter:i})}saveAnnotationText(e,t,a,n){const{savedAnnotations:i}=e,s=(0,l.isDraftAnnotation)(a)?"newAnnotation":a;return Object.assign(Object.assign({},e),{savedAnnotations:Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},i[t]),{[s]:n})})})}handleAddDot(e,{sid:t,dot:{_id:a}}){if(!(0,l.isDraftDot)(a))return e;const{savedAnnotations:n}=e;return Object.assign(Object.assign({},e),{savedAnnotations:Object.assign(Object.assign({},n),{[t]:Object.assign(Object.assign({},n[t]),{newAnnotation:""})})})}hideAnnotationFirstTimeLanding(e){return Object.assign(Object.assign({},e),{annotationFirstTimeLandingHidden:!0})}changeAnnotationConfigFilter(e,{configFilter:t,annotationId:a}){return Object.assign(Object.assign({},e),{annotationConfigFilter:t,annotationId:a})}reduce(e,t){switch(t.type){case r.default.RESET:return this.reset(e);case r.default.CHANGE_SELECTED_VIEW:return this.handleChangeSelectedView(e);case r.default.LOAD_INTERMEDIATE:return this.setAnnotationsForIntermediateLoading(e,t);case s.default.SET_ANNOTATIONS:return this.setAnnotations(e,t);case s.default.SELECT_LAYER:case s.default.DESELECT_LAYER:case s.default.SHOW_FLOW_LINKS:case s.default.SELECT_DOT:case s.default.OPEN_DOT_MENU:case s.default.CLOSE_DOT_POPUP:case s.default.CREATE_NOTE:case s.default.ENTER_STAGE_MODE:return this.deselectAnnotation(e);case s.default.OPEN_SCREEN:case s.default.SELECT_ANNOTATION:return this.selectAnnotation(e,t);case s.default.REMOVE_ANNOTATION:return this.removeAnnotation(e,t);case s.default.CREATE_ANNOTATION:return this.createAnnotation(e,t);case s.default.UPDATE_ANNOTATION:return this.updateAnnotation(e,t);case s.default.CHANGE_ANNOTATION_FILTER:return this.changeAnnotationFilter(e,t);case s.default.UPDATE_DOTPOPUP_REMARK_TYPE:return this.updateDotPopupRemarkType(e,t);case s.default.UPDATE_ANNOTATION_TYPE:return this.updateLastNoteTypeUsed(e,t);case s.default.DELETE_ANNOTATION_TYPE:return this.deleteLastNoteTypeUsed(e,t);case r.default.LOAD:return this.load(e,t);case s.default.ADD_ANNOTATION:return this.saveAnnotationText(e,t.sid,t.annotation._id,"");case s.default.SAVE_ANNOTATION_TEXT:return this.saveAnnotationText(e,t.sid,t.atid,t.annotationText);case s.default.ADD_DOT:return this.handleAddDot(e,t);case s.default.HIDE_ANNOTATION_LANDING:return this.hideAnnotationFirstTimeLanding(e);case s.default.CHANGE_ANNOTATION_CONFIG_FILTER:return this.changeAnnotationConfigFilter(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(270),i=a.n(n),s=a(361),r=a(286),o=a(15),d=a(284),l=a(325),c=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};class u extends(i()){constructor(e){super(e),this.reducer=new s.default({propertyName:"annotations"})}getInitialState(){return{annotations:{}}}setAnnotations(e,{pid:t,sid:a,annotations:n}){return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:a,data:n})}setAnnotationsForIntermediateLoading(e,{annotationsDetails:{pid:t,sid:a,annotations:n}}){return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:a,data:n})}updateAnnotationPosition(e,{pid:t,sid:a,atid:n,x:i,y:s}){return this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{x:i,y:s}})}updateAnnotationText(e,{pid:t,sid:a,atid:n,componentSourceId:i,annotationData:s}){return i?e:this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:s})}updateAnnotationType(e,{pid:t,sid:a,atid:n,componentSourceId:i,newType:s}){return i?e:this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{type:s}})}deleteAnnotationType(e,{pid:t,sid:a,atid:n,componentSourceId:i}){return i?e:this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:{type:void 0}})}removeAnnotation(e,{pid:t,sid:a,atid:n,componentSourceId:i}){return i?e:this.reducer.removeDotAndAnnotation(e,{pid:t,sid:a,daid:n})}addAnnotation(e,{pid:t,sid:a,annotation:n}){return n.componentSourceId?e:this.reducer.insertDotAndAnnotation(e,{pid:t,sid:a,data:n})}updateAnnotation(e,{pid:t,sid:a,atid:n,annotationData:i}){return i.componentSourceId?e:this.reducer.updateDotAndAnnotation(e,{pid:t,sid:a,daid:n,data:i})}updateDotPopupRemarkType(e,{pid:t,sid:a,atid:n,remark:i,remarkType:s}){return s===o.default.Annotation?this.reducer.insertDotAndAnnotation(e,{pid:t,sid:a,data:i}):this.reducer.removeDotAndAnnotation(e,{pid:t,sid:a,daid:n})}handleUnlinkAnnotation(e,{pid:t,sid:a,newAnnotation:n}){return this.reducer.insertDotAndAnnotation(e,{pid:t,sid:a,data:n})}updateUserData(e,{bid:t,uid:a,userData:n}){const i=e.annotations[t];for(const s in i){const i=e.annotations[t][s];if(i&&i.length){const r=i.map((e=>e.creator&&e.creator._id===a?Object.assign(Object.assign({},e),{creator:Object.assign(Object.assign({},e.creator),n)}):e));return this.reducer.setDotsAndAnnotations(e,{pid:t,sid:s,data:r})}}return e}removeProjectEntry(e,{bid:t}){const{annotations:a}=e,n=a,i=t,s=(n[i],c(n,["symbol"==typeof i?i:i+""]));return Object.assign(Object.assign({},e),{annotations:s})}handleTransferOwnership(e,{bid:t,toOrganization:a,oid:n}){if(a||"user"!==n){return!!n&&"user"!==n&&!1===a?e:this.removeProjectEntry(e,{bid:t})}return e}reduce(e,t){switch(t.type){case r.default.SET_ANNOTATIONS:return this.setAnnotations(e,t);case r.default.UPDATE_ANNOTATION_POSITION:return this.updateAnnotationPosition(e,t);case r.default.UPDATE_ANNOTATION_TEXT:return this.updateAnnotationText(e,t);case r.default.UPDATE_ANNOTATION_TYPE:return this.updateAnnotationType(e,t);case r.default.DELETE_ANNOTATION_TYPE:return this.deleteAnnotationType(e,t);case r.default.REMOVE_ANNOTATION:return this.removeAnnotation(e,t);case r.default.ADD_ANNOTATION:case r.default.CREATE_ANNOTATION:return this.addAnnotation(e,t);case r.default.UPDATE_ANNOTATION:return this.updateAnnotation(e,t);case r.default.UPDATE_DOTPOPUP_REMARK_TYPE:return this.updateDotPopupRemarkType(e,t);case r.default.UNLINK_ANNOTATION:return this.handleUnlinkAnnotation(e,t);case d.default.UPDATE_USER_DATA:return this.updateUserData(e,t);case l.default.TRANSFER_OWNERSHIP:case d.default.OWNERSHIP_TRANSFERRED:return this.handleTransferOwnership(e,t);case d.default.LOAD_INTERMEDIATE:return this.setAnnotationsForIntermediateLoading(e,t);case d.default.REMOVE:return this.removeProjectEntry(e,t);default:return e}}}const p=u},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(270),i=a.n(n),s=a(287),r=a(286);class o extends(i()){getInitialState(){return{selectedScreens:[]}}setSelectedScreens(e,{sids:t}){const a=new Set(t);return Object.assign(Object.assign({},e),{selectedScreens:Array.from(a)})}clearScreenSelection(e){return Object.assign(Object.assign({},e),{selectedScreens:[]})}reduce(e,t){switch(t.type){case s.default.SET_SELECTED_SCREENS:return this.setSelectedScreens(e,t);case s.default.CLEAR_SCREEN_SELECTION:case r.default.CLOSE_TAG_MANAGER:return this.clearScreenSelection(e);default:return e}}}const d=o},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(270),i=a.n(n),s=a(425);class r extends(i()){getInitialState(){return{step:"Rate",isOpen:!1,canSurveyBeShown:!1,rate:null}}handleDismissSurvey(e){return Object.assign(Object.assign({},e),{isOpen:!1,canSurveyBeShown:!1})}handleShowSurvey(e,{triggeringEvent:t}){return e.isOpen?e:Object.assign(Object.assign({},e),{isOpen:!0,step:"Rate",rate:null,triggeringEvent:t})}handleRateSurvey(e,{rating:t}){return Object.assign(Object.assign({},e),{rate:t,step:"Feedback"})}handleSubmitFeedback(e){return Object.assign(Object.assign({},e),{step:"Rate",canSurveyBeShown:!1,isOpen:!1})}setCanShowSurvey(e,{canSurveyBeShown:t}){return e.isOpen&&e.canSurveyBeShown?e:Object.assign(Object.assign({},e),{canSurveyBeShown:t})}reduce(e,t){switch(t.type){case s.default.DISMISS_SURVEY:return this.handleDismissSurvey(e);case s.default.RATE_SURVEY:return this.handleRateSurvey(e,t);case s.default.SUBMIT_FEEDBACK:return this.handleSubmitFeedback(e);case s.default.SHOW_SURVEY:return this.handleShowSurvey(e,t);case s.default.SET_CAN_SHOW_SURVEY:return this.setCanShowSurvey(e,t);default:return e}}}const o=r},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.TRIGGER_SURVEY="npsSurvey/triggerSurvey",e.SHOW_SURVEY="npsSurvey/showSurvey",e.DISMISS_SURVEY="npsSurvey/dismissSurvey",e.RATE_SURVEY="npsSurvey/rateSurvey",e.SUBMIT_FEEDBACK="npsSurvey/submitFeedback",e.SET_CAN_SHOW_SURVEY="npsSurvey/setCanShowSurvey",e.HANDLE_VIEWED_NPS="npsSurvey/handleViewedNPS"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(270),i=a.n(n),s=a(427);class r extends(i()){getInitialState(){return{dragging:!1,draggingItemType:"",dragData:null}}handleStartDrag(e,{draggingItemType:t,dragData:a}){return Object.assign(Object.assign({},e),{dragging:!0,draggingItemType:t,dragData:a})}handleEndDrag(e){return Object.assign(Object.assign({},e),{dragging:!1,draggingItemType:"",dragData:null})}reduce(e,t){switch(t.type){case s.default.START_DRAG:return this.handleStartDrag(e,t);case s.default.END_DRAG:return this.handleEndDrag(e);default:return e}}}const o=r},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.START_DRAG="dragDrop/startDrag",e.END_DRAG="dragDrop/endDrag"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(270),i=a.n(n),s=a(263),r=a(429);class o extends(i()){constructor(e){super(e)}getInitialState(){return{loading:!0,accounts:[],selectedAccountId:void 0,accountDetails:{},createDomainPending:!1}}hydrateEmbeddedData(e,{accounts:t,accountId:a,accountDetail:n}){const i=Object.assign({},e.accountDetails);return a&&n&&(i[a]=n),Object.assign(Object.assign({},e),{accounts:t,selectedAccountId:a,accountDetails:i,loading:!n})}addDomain(e,{aid:t,domain:a}){var n;const{accountDetails:i}=e,s=i[t];if(!s)return e;if(null===(n=s.domains)||void 0===n?void 0:n.find((e=>e._id===a._id)))return e;const r=s.domains?[...s.domains,a]:[a];return Object.assign(Object.assign({},e),{createDomainPending:!1,accountDetails:Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},s),{domains:r})})})}updateDomainConfigurationSettings(e,{aid:t,doid:a,captureSettings:n}){var i;const{accountDetails:s}=e,r=s[t];if(!r)return e;return(null===(i=r.domains)||void 0===i?void 0:i.find((e=>e._id===a)))?Object.assign(Object.assign({},e),{accountDetails:Object.assign(Object.assign({},s),{[t]:Object.assign(Object.assign({},r),{domains:r.domains.map((e=>(e._id===a&&(e.captureSettings=n),e)))})})}):e}deleteDomain(e,{aid:t,doid:a}){var n;const{accountDetails:i}=e,s=i[t];if(!s)return e;return(null===(n=s.domains)||void 0===n?void 0:n.find((e=>e._id===a)))?Object.assign(Object.assign({},e),{accountDetails:Object.assign(Object.assign({},i),{[t]:Object.assign(Object.assign({},s),{domains:s.domains.filter((e=>e._id!==a))})})}):e}createDomain(e){return Object.assign(Object.assign({},e),{createDomainPending:!0})}createDomainFailure(e){return Object.assign(Object.assign({},e),{createDomainPending:!1})}addAdmin(e,{aid:t,member:a}){const{accountDetails:n}=e,i=n[t];return i?Object.assign(Object.assign({},e),{accountDetails:Object.assign(Object.assign({},n),{[t]:Object.assign(Object.assign({},i),{members:[...i.members,a]})})}):e}removeAdmin(e,{aid:t,member:{user:{_id:a}}}){const{accountDetails:n}=e,i=n[t];return i?Object.assign(Object.assign({},e),{accountDetails:Object.assign(Object.assign({},n),{[t]:Object.assign(Object.assign({},i),{members:i.members.filter((({user:{_id:e}})=>e!==a))})})}):e}reduce(e,t){switch(t.type){case s.default.HYDRATE_EMBEDDED_DATA:return this.hydrateEmbeddedData(e,t);case r.default.UPDATE_DOMAIN_CONFIGURATION_SETTINGS:return this.updateDomainConfigurationSettings(e,t);case r.default.DELETE_DOMAIN:return this.deleteDomain(e,t);case r.default.ADD_DOMAIN:return this.addDomain(e,t);case r.default.CREATE_DOMAIN:return this.createDomain(e);case r.default.CREATE_DOMAIN_FAILURE:return this.createDomainFailure(e);case r.default.ADD_ADMIN:return this.addAdmin(e,t);case r.default.REMOVE_ADMIN:return this.removeAdmin(e,t);default:return e}}}const d=o},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.CREATE_DOMAIN="accountAdmin/createDomain",e.ADD_DOMAIN="accountAdmin/addDomain",e.CREATE_DOMAIN_FAILURE="accountAdmin/createDomainFailure",e.UPDATE_DOMAIN_CONFIGURATION_SETTINGS="accountAdmin/updateConfigurationSettings",e.DELETE_DOMAIN="accountAdmin/deleteDomain",e.CREATE_ADMIN="accountAdmin/createAdmin",e.ADD_ADMIN="accountAdmin/addAdmin",e.REMOVE_ADMIN="accountAdmin/removeAdmin"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(270),i=a.n(n),s=a(284);class r extends(i()){getInitialState(){return{selectedComponents:[]}}setSelectedComponents(e,{selectedComponents:t}){const a=new Set(t);return Object.assign(Object.assign({},e),{selectedComponents:Array.from(a)})}clearComponentSelection(e){return Object.assign(Object.assign({},e),{selectedComponents:[]})}reduce(e,t){switch(t.type){case s.default.SET_SELECTED_COMPONENTS:return this.setSelectedComponents(e,t);case s.default.CLEAR_COMPONENT_SELECTION:return this.clearComponentSelection(e);default:return e}}}const o=r},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(270),i=a.n(n),s=a(263),r=a(432),o=a(327);class d extends(i()){constructor(e){super(e)}getInitialState(){return{globalSearchPopupOpen:!1,lastOrganizationId:"user",lastResultEntity:{results:[],resultBatchId:null},lastSearchedTerm:"",lastTotalNumberOfResults:0,lastSelectedItemIndex:0}}reset(){return this.getInitialState()}openGlobalSearchPopup(e){return Object.assign(Object.assign({},e),{globalSearchPopupOpen:!0})}closeGlobalSearchPopup(e){return Object.assign(Object.assign({},e),{globalSearchPopupOpen:!1})}saveSearchData(e,{term:t,resultEntity:a,organizationId:n,totalNumberOfResults:i,selectedItemIndex:s}){return Object.assign(Object.assign({},e),{lastSearchedTerm:t,lastResultEntity:a,lastOrganizationId:n,lastTotalNumberOfResults:i,lastSelectedItemIndex:s})}reduce(e,t){switch(t.type){case o.default.CHANGE_SELECTED_ORGANIZATION:case s.default.RESET:return this.reset();case r.default.OPEN_GLOBAL_SEARCH_POPUP:return this.openGlobalSearchPopup(e);case r.default.CLOSE_GLOBAL_SEARCH_POPUP:return this.closeGlobalSearchPopup(e);case r.default.SAVE_SEARCH_DATA:return this.saveSearchData(e,t);default:return e}}}const l=d},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.OPEN_GLOBAL_SEARCH_POPUP="globalSearch/openGlobalSearchPopup",e.CLOSE_GLOBAL_SEARCH_POPUP="globalSearch/closeGlobalSearchPopup",e.SAVE_SEARCH_DATA="globalSearch/saveSearchData"}(n||(n={}));const i=n},,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(436)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(93),i=a(437),s=a(490),r=a(526),o=a(801),d=a(806),l=a(841),c=a(1037),u=a(1040),p=a(262),f=a(264),S=a(5),h=a(535),E=a(1043);a(1045);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=["WorkspaceScrollStore","AnnotationsDataStore","AnnotationsStore","DotsDataStore","DotsStore"];function T(){return Promise.all([a.e(12),a.e(19),a.e(5),a.e(47),a.e(46),a.e(48),a.e(35)]).then(a.bind(a,1681))}function m(){return Promise.all([a.e(12),a.e(19),a.e(5),a.e(50),a.e(47),a.e(49),a.e(46),a.e(4)]).then(a.bind(a,2049))}function _(){return Promise.all([a.e(12),a.e(19),a.e(5),a.e(50),a.e(49),a.e(1)]).then(a.bind(a,2827))}class b extends n.Component{constructor(...e){super(...e),g(this,"state",{loadedContainer:null}),g(this,"handleOnLoad",(e=>{this.setState({loadedContainer:e})}))}static getStores(){return[f.default.AppStore]}static calculateState(){const{page:e,ssoTokenExpired:t}=f.default.AppStore.getState();return{page:e,ssoTokenExpired:t}}getChildContext(){const{page:e}=this.state;return{page:e}}componentDidMount(){document.addEventListener("dragover",(e=>{e.preventDefault(),e.stopPropagation()})),document.addEventListener("drop",(e=>{e.preventDefault(),e.stopPropagation()}))}render(){const{page:e,ssoTokenExpired:t,loadedContainer:a}=this.state;return S.isWindowsApp&&!S.supports.SPA?n.h(c.default,null):n.h(i.default,{fluxStoresToBeConverted:O},n.h(s.default,{userId:Zeplin.user._id},n.h(r.default,null),n.h(E.default,{suspense:n.h("main",null),onLoad:this.handleOnLoad},n.h(E.Route,{name:"space",condition:"workspace"===e,component:T}),n.h(E.Route,{name:"barrel",condition:"barrel"===e,component:m}),n.h(E.Route,{name:"activities",condition:"activities"===e,component:_})),a&&n.h(n.Fragment,null,n.h(o.default,null),n.h(d.default,null),n.h(l.default,null)),t&&n.h(u.default,{onLogin:p.default.loginSSO,onLogout:Zeplin.logout,frequency:t})))}}const C=(0,h.default)(b)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(438)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(439),s=a(477);class r extends n.Component{constructor(){super(...arguments),this.state={reduxStore:void 0}}initiateReduxRuntime(){const{fluxStoresToBeConverted:e}=this.props,t=(0,s.createReduxStore)(e);(0,s.registerReduxDispatchers)(t),this.setState({reduxStore:t},(()=>{(0,s.shadowFluxRuntime)(e,t),(0,s.subscribeFluxStoreUpdates)(t.dispatch)}))}componentDidMount(){this.initiateReduxRuntime()}render(){const{children:e}=this.props,{reduxStore:t}=this.state;if(t)return(0,n.h)(i.Provider,{store:t},e)}}const o=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{createReduxStore:()=>o,registerReduxDispatchers:()=>d,shadowFluxRuntime:()=>l,subscribeFluxStoreUpdates:()=>c});var n=a(478),i=a(482),s=a(264),r=a(481);function o(e){const t=(0,n.default)(e);return(0,i.configureStore)({reducer:t,middleware:e=>e({serializableCheck:!1,immutableCheck:!1,thunk:!1}),devTools:!1})}function d(e){s.default.dispatcher.register(e.dispatch)}function l(e,t){e.forEach((e=>{s.default.shadowFluxStore(e,t)}))}function c(e){const t=new Set;Object.values(s.default.stores).forEach((a=>{const n=a.getDispatchToken();t.has(n)||(a.addListener((()=>{r.default.propagateUpdate(e)})),t.add(n))}))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(480);const i={stateId:null};function s(e=i,t){return t.type===n.default.PROPAGATE_UPDATE?{stateId:Math.random()}:e}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.PROPAGATE_UPDATE="flashState/propagateUpdate"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(480),i=a(439);const s={propagateUpdate(e){(0,i.batch)((()=>{e({type:n.default.PROPAGATE_UPDATE})}))}}},,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(491)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(93),i=a(492),s=a(120),r=a(399),o=a(523),d=a(525),l=a(11),c=a(524),u=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const p=parseInt(l.OPTIMIZELY_LOG_LEVEL,10),f=(0,d.getOptimizelyLogger)(p);class S extends n.Component{constructor(){super(...arguments),this.lastFetchTime=0,this.pollTimeout=null,this.fetchAndSaveOptimizelyDatafile=()=>u(this,void 0,void 0,(function*(){const e=this.lastFetchTime;this.lastFetchTime=Date.now();try{const e=yield(0,s.getOptimizelyDatafile)(),{datafile:t}=this.state;if(!(0,r.deepDiffer)(t,e))return;c.default.clearAll(),this.setState({datafile:e})}catch(t){this.lastFetchTime=e}})),this.pollOptimizelyDataFile=e=>{const{pollIntervalTime:t}=this.props;this.pollTimeout&&clearTimeout(this.pollTimeout),this.pollTimeout=setTimeout((()=>{this.fetchAndSaveOptimizelyDatafile(),this.pollOptimizelyDataFile(t)}),e)},this.startPollingOptimizelyDataFile=()=>{const{pollIntervalTime:e}=this.props,t=e-(Date.now()-this.lastFetchTime);this.pollOptimizelyDataFile(Math.max(t,0))},this.handleVisibilityChange=()=>{document.hidden?this.pollTimeout&&(clearTimeout(this.pollTimeout),this.pollTimeout=null):this.startPollingOptimizelyDataFile()}}componentDidMount(){document.hidden||this.startPollingOptimizelyDataFile(),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentWillUnmount(){this.pollTimeout&&clearTimeout(this.pollTimeout),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}render(){const{datafile:e}=this.state,{userId:t,children:a}=this.props,s=(0,o.default)({datafile:e,logger:f});return(0,n.h)(i.OptimizelyProvider,{optimizely:s,user:{id:t}},a)}}S.defaultProps={pollIntervalTime:3e5};const h=S},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(492),i=a(503),s=a(17),r=a(524);function o(e){const t=(0,n.createInstance)(e),a=t.track.bind(t),o=t.decide.bind(t);return Object.assign(t,{track:(...e)=>{(0,s.shouldTrackUser)(Zeplin.user)&&a(...e)},decide:(e,a,n,d)=>{const l={key:e,userId:null!=n?n:t.user.id,userAttributes:null!=d?d:t.user.attributes},c=r.default.decisionExists(l);c||r.default.addDecision(l);const u=c||!(0,s.shouldTrackUser)(Zeplin.user)?[i.OptimizelyDecideOption.DISABLE_DECISION_EVENT]:[],p=a?a.concat(u):u;return o(e,p,n,d)}})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{OptimizelyCacheManager:()=>n,default:()=>i});class n{constructor(){this.decisionEvents=new Set,this.getDecisionKey=({key:e,userId:t,userAttributes:a})=>{let n=`${e}-${t}`;if(a&&a!=={}){const e=Object.keys(a).sort().map((e=>a[e]));n=`${n}-${JSON.stringify(e)}`}return n},this.decisionExists=e=>{const t=this.getDecisionKey(e);return this.decisionEvents.has(t)},this.addDecision=e=>{const t=this.getDecisionKey(e);this.decisionEvents.add(t)},this.clearAll=()=>{this.decisionEvents.clear()}}}const i=new n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{getOptimizelyLogger:()=>o,OptimizelyLogLevel:()=>n});var n,i=a(493);!function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"}(n||(n={}));const s={[n.DEBUG]:"DEBUG",[n.INFO]:"INFO",[n.WARNING]:"WARN",[n.ERROR]:"ERROR"};function r(e,t){return`[OPTIMIZELY] - ${s[e]} - ${(new Date).toISOString()} - ${t}`}function o(e=n.INFO){return{log:(t,a)=>{if(!(t<e))switch(t){case i.LogLevel.DEBUG:console.log(r(n.DEBUG,a));break;case i.LogLevel.INFO:console.info(r(n.INFO,a));break;case i.LogLevel.WARNING:console.warn(r(n.WARNING,a));break;case i.LogLevel.ERROR:console.error(r(n.ERROR,a))}}}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(527)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var n=a(93),i=a(106),s=a(104),r=a(5),o=a(123),d=a(7),l=a(99),c=a(528),u=a(535),p=a(538),f=a(547),S=a(551),h=a(557),E=a(562),g=a(574),O=a(621),T=a(751),m=a(783),_=a(737),b=a(789),C=a(738),A=a(264),y=a(794),I=a(262),N=a(795),P=a(560),D=a(796),R=a(6),v=a(185),L=a(798),j=a(295),U=a(492),w=a(799),k=a(800);class M extends n.Component{constructor(){super(...arguments),this.getAllNotifications=()=>{setTimeout((()=>{N.default.getNotifications(null,500)}),4)},this.getHeaderMessage=()=>{const{processingSnapshotTiles:e}=this.state;if(e)return"Processing image..."},this.trackNotificationsButtonClick=()=>{const{hasUnreadNotifications:e,shouldAcceptNewTerms:t}=this.state;mixpanel.master.track("Clicked notifications icon",{"Has Unread Notifications":e||t})},this.handleCloseNotificationSettingsDialog=()=>{I.default.setNotificationSettingsDialogVisibility(!1)}}static getStores(){return[A.default.AppStore,A.default.SpaceStore,A.default.OrganizationStore,A.default.UserStore,A.default.BarrelStore,A.default.DashboardStore,A.default.ScreenStore,A.default.ProjectsDataStore,A.default.StyleguidesDataStore,A.default.NotificationsStore,A.default.ActivitiesViewStore,A.default.FlowStore,A.default.GlobalSearchStore]}static calculateState(){const{loading:e,selectedTab:t,selectedOrganizationId:a,createSampleProjectInProgress:n}=A.default.SpaceStore.getState(),{loading:r,loadingOrganization:l,loadingProfiles:c,loadingBarrels:u,organizations:p}=A.default.OrganizationStore.getState(),{loading:f,username:S,avatar:h,shouldAcceptNewTerms:E,userId:g}=A.default.UserStore.getState(),{loading:O,initingNewlyIntegratedSlackChannel:T,barrelId:m,barrelType:y,organizationId:I,selectedView:N,shouldDisplayFlowNewBadge:P,intermediateScreenLoading:R}=A.default.BarrelStore.getState(),v=_.default.getBarrel(),{name:U=""}=v||{},w=(0,j.default)(v,g),{tagFilter:{tags:k,untagged:M},filterValue:V,jiraIssueFilter:F}=A.default.DashboardStore.getState(),{loadingSnapshot:G,processingSnapshotTiles:B,screenId:x,stageMode:W}=A.default.ScreenStore.getState(),{loading:z,notifications:H}=A.default.NotificationsStore.getState(),{selectedOrganizationId:Y,listScrollData:q}=A.default.ActivitiesViewStore.getState(),K=L.default.getFirstFlowId(m),{name:J=""}=b.default.getScreen()||{},Z=A.default.AppStore.getState();let{backButtonLink:X}=Z,$=Z.backButtonLabel;const{page:Q}=A.default.AppStore.getState(),{globalSearchPopupOpen:ee}=A.default.GlobalSearchStore.getState();let te,ae=!1;"workspace"===Q?(ae=e||r||l||c||f||u||n,te=a):"activities"===Q?(ae=z||l||u||!!q,te=Y||a):N===d.ProjectViewTypes.SCREEN?(ae=O||G||!!B,te=I||a):(ae=O||T,te=I||a);const ne=!!te&&"user"!==te;if("activities"!==Q||$&&X)if("workspace"===Q||O||$&&X){if(N===d.ProjectViewTypes.SCREEN&&R){const e={q:V,ja:F,sid:x};Object.assign(e,M?{untagged:"true"}:{tag:k}),$="Dashboard",X=(0,s.urlResolve)("project-dashboard",{url:{pid:m},query:e})}}else if(N===d.ProjectViewTypes.SCREEN){const e={q:V,ja:F,sid:x};Object.assign(e,M?{untagged:"true"}:{tag:k}),$="Dashboard",X=(0,s.urlResolve)("project-dashboard",{url:{pid:m},query:e})}else if(N===d.ProjectViewTypes.FLOW)$="Dashboard",X=(0,s.urlResolve)("project-dashboard",{url:{pid:m}});else{const{name:e}=C.default.getOrganization(te)||{},t=y===o.default.PROJECT?"projects":"styleguides",a={[y===o.default.PROJECT?"pid":"stid"]:m};X=ne?(0,s.urlResolve)(`workspace-${t}`,{url:{oid:te},query:a}):(0,s.urlResolve)(t,{query:a}),$=this.getBackButtonLabel(ne,e)}else{const{name:e}=C.default.getOrganization(te)||{};X=ne?(0,s.urlResolve)("workspace-projects",{url:{oid:te}}):(0,s.urlResolve)("projects"),$=this.getBackButtonLabel(ne,e)}let ie,se,re,oe;if("barrel"===Q&&(N===d.ProjectViewTypes.STYLEGUIDE?ie="Styleguide":N===d.ProjectViewTypes.DASHBOARD?ie="Dashboard":N===d.ProjectViewTypes.SCREEN&&(ie=J)),se=ae?"Zeplin":"workspace"===Q?`Workspace - ${(0,i.uppercaseFirst)(t)} - Zeplin`:"activities"===Q?"Notifications - Zeplin":N===d.ProjectViewTypes.SCREEN?`${J} - ${U} - Zeplin`:`${U} - Zeplin`,"barrel"===Q&&N===d.ProjectViewTypes.SCREEN){let e,t;v&&v.screens&&({previousBoundaryScreen:e,nextBoundaryScreen:t}=this.getBoundaryScreens(v.sections,v.screens.map((({_id:e})=>e))));const a=b.default.getPreviousScreen(x);a?re=(0,s.urlResolve)("project-screen",{url:{pid:m,sid:a._id}}):e&&R&&(re=(0,s.urlResolve)("project-screen",{url:{pid:m,sid:e}}));const n=b.default.getNextScreen(x);n?oe=(0,s.urlResolve)("project-screen",{url:{pid:m,sid:n._id}}):t&&R&&(oe=(0,s.urlResolve)("project-screen",{url:{pid:m,sid:t}}))}return{loading:ae,loadingBarrel:O,selectedView:N,page:Q,title:se,backButtonLink:X,backButtonLabel:$,activitiesBackButtonLabel:ie,organizations:p,username:S,avatar:h,selectedOrganizationId:te,screenName:J,previousScreenURL:re,nextScreenURL:oe,stageMode:W,barrelType:y,isMemberOfBarrel:w,barrelId:m,barrelName:U,hasUnreadNotifications:D.default.hasAnyUnread(te),notifications:H,processingSnapshotTiles:B,firstFlowId:K,shouldDisplayFlowNewBadge:P,shouldAcceptNewTerms:E,isOnboardingProject:_.default.isOnboardingProject(),createSampleProjectInProgress:n,userId:g,globalSearchPopupOpen:ee,intermediateScreenLoading:R}}static getBackButtonLabel(e,t){return e?(0,n.h)("div",{class:k.default.backButtonLabel,title:t},(0,n.h)("div",{class:(0,l.default)(k.default.organizationName,"ellipsis")},t),(0,n.h)("div",null,"’s Workspace")):"Workspace"}componentDidMount(){this.getAllNotifications(),window.addEventListener("online",this.getAllNotifications)}componentDidUpdate(e,t){R.default&&(!t.hasUnreadNotifications&&this.state.hasUnreadNotifications?R.default.ipcRenderer.send("unread-notifications",(0,v.calculateOverlayIcon)()):t.hasUnreadNotifications&&!this.state.hasUnreadNotifications&&R.default.ipcRenderer.send("read-notifications"))}componentWillUnmount(){window.removeEventListener("online",this.getAllNotifications)}renderHeaderCenter(){const{loading:e,page:t,selectedView:a,organizations:i,username:s,avatar:r,selectedOrganizationId:l,screenName:c,previousScreenURL:u,nextScreenURL:h,barrelType:E,isMemberOfBarrel:g,barrelId:O,barrelName:T,firstFlowId:m,shouldDisplayFlowNewBadge:_,isOnboardingProject:b,intermediateScreenLoading:C,createSampleProjectInProgress:A}=this.state;if("workspace"===t)return A?(0,n.h)("div",{class:"noOrganizationsLabel noSelect"},"Loading Sample Project..."):i.length?(0,n.h)(p.default,{organizations:i,username:s,avatar:r,selectedOrganizationId:l,onOrganizationChange:y.default.changeSelectedOrganization}):(0,n.h)("div",{class:"noSelect"},"Workspace");if("activities"===t)return(0,n.h)("span",{title:"Notifications"},"Notifications");if(a===d.ProjectViewTypes.STORYBOOK)return(0,n.h)("span",{title:"Connect with Storybook"},"Connect with Storybook");if(a===d.ProjectViewTypes.SCREEN){const t=e&&!C;return(0,n.h)(f.default,{loading:t,loadingMessage:this.getHeaderMessage(),title:c,previousScreenURL:u,nextScreenURL:h})}return E!==o.default.STYLEGUIDE&&g?!e&&a&&[d.ProjectViewTypes.DASHBOARD,d.ProjectViewTypes.STYLEGUIDE,d.ProjectViewTypes.FLOW].includes(a)?(0,n.h)(S.default,{barrelId:O,selectedTab:a,firstFlowId:m,shouldRenderFlowNewBadge:_&&!b}):void 0:(0,n.h)("span",{title:T},T)}renderHeaderRight(){const{selectedOrganizationId:e,hasUnreadNotifications:t,page:a,backButtonLink:i,activitiesBackButtonLabel:r,shouldAcceptNewTerms:o,loading:d,globalSearchPopupOpen:l}=this.state;let c;const u="activities"===a;return c=u?i:"user"===e?(0,s.urlResolve)("activities"):(0,s.urlResolve)("workspace-activities",{url:{oid:e}}),(0,n.h)(n.Fragment,null,!d&&(0,w.default)(e,Zeplin.user._id,this.props.optimizely)&&(0,n.h)(h.default,{popupOpen:l,onClick:P.default.openGlobalSearchPopup}),(0,n.h)(g.default,null),(0,n.h)(m.default,{hasUnreadNotifications:t||o,active:u,backLabel:u?"":r,backLink:c,onNotificationsButtonClick:u?void 0:this.trackNotificationsButtonClick}),(0,n.h)(O.default,null),(0,n.h)(T.default,{onClose:this.handleCloseNotificationSettingsDialog}))}render(){const{loading:e,loadingBarrel:t,page:a,selectedView:i,backButtonLabel:s,backButtonLink:o,title:l,stageMode:u}=this.state;return document.title=l,"barrel"===a&&i===d.ProjectViewTypes.SCREEN&&u?t?(0,n.h)(E.default,null):null:(0,n.h)(c.default,{class:k.default.header,loading:e,hideLogo:r.isWindowsApp,backButtonLabel:s,backButtonLink:o,headerCenter:this.renderHeaderCenter(),headerRight:this.renderHeaderRight()})}}M.getBoundaryScreens=(e=[],t)=>{const a={},n=e.flatMap((e=>e.screens));return n.forEach(((e,i)=>{e===t[0]&&i>0?a.previousBoundaryScreen=n[i-1]:e===t[t.length-1]&&i<n.length-1&&(a.nextBoundaryScreen=n[i+1])})),a};const V=(0,U.withOptimizely)((0,u.default)(M))},,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(539)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(223),s=a(540),r=a(340),o=a(546);function d(e){const{username:t,avatar:a,organizations:d,selectedOrganizationId:l,onOrganizationChange:c}=e,u=[{id:"user",name:t,logoUrl:a},...d.map((e=>({id:e._id,name:e.name,logoUrl:e.logo}))).sort(r.sortBy.name)];return n.h("div",{class:o.default.organizationDropdownWrapper},n.h(i.default,{options:{class:o.default.organizationDropdownOptions,top:35,fixedTop:!0,centerX:!0},onChange:c},u.map((({id:e,name:t,logoUrl:a})=>n.h(i.default.Item,{key:e,class:o.default.organizationDropdownItem,dropdownLabel:n.h(s.default,{class:o.default.labelOrganizationItem,name:t,logoUrl:"user"!==e?a:null,showAvatar:"user"!==e,personal:"user"===e}),label:n.h(s.default,{name:t,logoUrl:a,personal:"user"===e}),value:e,selected:l===e})))))}d.defaultProps={selectedOrganizationId:"user"};const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(541)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(542),s=a(99),r=a(545);const o=function({class:e,logoUrl:t,name:a,personal:o,showAvatar:d=!0}){const l=(o?"Personal":a+"’s")+" Workspace",c=o?"user":"organization";return n.h("div",{class:(0,s.default)(r.default.organizationItem,e)},d&&n.h(i.default,{class:r.default.organizationLogo,src:t,type:c,size:24,bgSize:15}),n.h("div",{class:(0,s.default)(r.default.organizationName,"ellipsis")},l))}},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={organizationItem:"qFE6z5LY7tcqZvY3aVmq",organizationLogo:"qS1Cayc71E3YGiaDYsuU",organizationName:"GiiSxeyzWQ_DnaMEvTKp"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={organizationDropdownWrapper:"oSVp33dywoy2T3R1mL41",labelOrganizationItem:"K_YwSa2BdGtNAh6jijtP",organizationDropdownOptions:"nrTzF3J6CPo2yw8z_7zx",organizationDropdownItem:"WeX4hi7VsZ_CjOEvtj5f"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(548)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(93),i=a(533),s=a(549),r=a(171),o=a(99),d=a(434),l=a(409),c=a(550);class u extends n.Component{constructor(){super(...arguments),this.titleRef=(0,n.createRef)(),this.nodeRefs={},this.onlineTimeout=null,this.state={titleWidth:null,offline:!1,online:!1},this.fixTitleWidth=()=>{this.titleRef.current&&this.setState({titleWidth:getComputedStyle(this.titleRef.current).width})},this.restoreTitleWidth=()=>{const{titleWidth:e}=this.state;null!==e&&this.setState({titleWidth:null})},this.setOffline=()=>{this.setState({offline:!0})},this.setOnline=()=>{this.setState({offline:!1,online:!0}),document.hidden?document.addEventListener("visibilitychange",this.unsetOnline,{once:!0}):this.unsetOnline()},this.unsetOnline=()=>{this.onlineTimeout=setTimeout((()=>{this.setState({online:!1})}),1e4)},this.handleClickOnTitle=()=>{const{title:e}=this.props;(0,l.copyContent)({content:e,toastContainer:document.querySelector(".screenContainer"),successText:"Screen name copied to clipboard"}),mixpanel.master.track("Copied screen name",{Source:"Header"})}}get titleExtra(){const{offline:e,online:t}=this.state,{loadingMessage:a}=this.props;return a||(e?"Looks like there is a problem with the connection.":t?"Keep working! Connection is back…":"Loading layers…")}componentDidMount(){window.addEventListener("offline",this.setOffline),window.addEventListener("online",this.setOnline)}componentDidUpdate(e){const{title:t}=this.props;e.title!==t&&(0,l.deselectContent)()}componentWillUnmount(){this.onlineTimeout&&clearTimeout(this.onlineTimeout),window.removeEventListener("offline",this.setOffline),window.removeEventListener("online",this.setOnline),document.removeEventListener("visibilitychange",this.unsetOnline)}render(){const{loading:e,title:t,previousScreenURL:a,nextScreenURL:l}=this.props,{titleWidth:u,offline:p,online:f}=this.state,S=(0,o.default)(c.default.screenNavigator,{[c.default.loading]:e,[c.default.offline]:p,[c.default.online]:f}),h=null===u?{}:{width:u};return(0,n.h)("div",{class:S,ref:(0,r.default)(this,"base"),onMouseLeave:this.restoreTitleWidth},(0,n.h)(d.Link,{to:a||"",title:"← Previous screen",onClick:this.fixTitleWidth},(0,n.h)(i.default,null)),(0,n.h)("div",{class:(0,o.default)(c.default.screenTitle,"textSelect")},(0,n.h)("h2",{class:"ellipsis",onClick:this.handleClickOnTitle,ref:this.titleRef,style:h,title:t},t),(0,n.h)("div",{class:c.default.titleExtra},this.titleExtra)),(0,n.h)(d.Link,{to:l||"",title:"Next screen →",onClick:this.fixTitleWidth},(0,n.h)(s.default,null)))}}const p=u},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={screenNavigator:"h0GXqqELLk64ofGhRt4w",screenTitle:"VeMy8lh4jWy2Ipx9ziv5",titleExtra:"r9wqvcUCM27rnpYZOr2h",loading:"Iah_SyDQdc0guQBCyx8Y",offline:"jkLFsF2by9djQlWZAz2M",online:"bGiSf4ebOZup1F2eevWK"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(552)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(4),s=a(104),r=a(7),o=a(553),d=a(556);function l({barrelId:e,selectedTab:t,firstFlowId:a,shouldRenderFlowNewBadge:l}){if(!e)return null;const c=(0,i.getOS)()===i.OS.MAC?"⌥":"Alt+",u=(0,s.urlResolve)("project-dashboard",{url:{pid:e}}),p=(0,s.urlResolve)("project-styleguide",{url:{bid:e}}),f=a?(0,s.urlResolve)("project-flow",{url:{pid:e,flid:a}}):(0,s.urlResolve)("project-flow-empty",{url:{pid:e}});return n.h(o.default,null,n.h(o.default.Tab,{label:"Dashboard",shortcut:`${c}A`,selected:t===r.ProjectViewTypes.DASHBOARD,href:u}),n.h(o.default.Tab,{label:n.h("div",null,"Flows",l&&n.h("span",{class:d.default.newBadge},"NEW")),shortcut:`${c}L`,selected:t===r.ProjectViewTypes.FLOW,href:f}),n.h(o.default.Tab,{label:"Styleguide",shortcut:`${c}S`,selected:t===r.ProjectViewTypes.STYLEGUIDE,href:p}))}},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={newBadge:"UOpb5B3ARwwLcGvrLR_2"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(558)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(93),i=a(7),s=a(99),r=a(4),o=a(559),d=a(560),l=a(561);class c extends n.Component{constructor(){super(...arguments),this.handleKeyDown=e=>{const{popupOpen:t}=this.props,a=(0,r.getOS)()===r.OS.MAC?e.metaKey:e.ctrlKey;t&&"Escape"===e.key?(e.stopPropagation(),e.preventDefault(),d.default.closeGlobalSearchPopup()):t||!a||e.key!==i.Keyboard.Key.j&&e.key!==i.Keyboard.Key.k||(e.preventDefault(),d.default.openGlobalSearchPopup("keyDown"))},this.handleClick=()=>{const{onClick:e}=this.props;e("click")}}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown,!0)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown,!0)}render(){const e=(0,r.getOS)()===r.OS.MAC?"⌘":"Ctrl";return(0,n.h)("div",{onClick:this.handleClick,class:(0,s.default)(l.default.globalSearchButton,"noSelect")},(0,n.h)(o.default,{class:l.default.globalSearchButtonIcon,width:16,height:16,color:"var(--gandalf)"}),(0,n.h)("span",{class:(0,s.default)(l.default.globalSearchButtonContent,"ellipsis")},"Search workspace"),(0,n.h)("span",{class:l.default.shortcut},e,"+K"))}}const u=c},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(432);const s={openGlobalSearchPopup(e){n.default.dispatcher.dispatch({type:i.default.OPEN_GLOBAL_SEARCH_POPUP,eventType:e})},closeGlobalSearchPopup(){n.default.dispatcher.dispatch({type:i.default.CLOSE_GLOBAL_SEARCH_POPUP})},saveSearchData({term:e,resultEntity:t,organizationId:a,totalNumberOfResults:s,selectedItemIndex:r}){n.default.dispatcher.dispatch({type:i.default.SAVE_SEARCH_DATA,term:e,resultEntity:t,organizationId:a,totalNumberOfResults:s,selectedItemIndex:r})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={globalSearchButton:"NGOvT3aPCAc8sc3Sx3O3",globalSearchButtonIcon:"qFnjfcMyLMcThYEWn3Vl",shortcut:"H_DyXXNer5v2Tzwi8V8E",globalSearchButtonContent:"V3zEBRhYB3ch4xRXZmpS"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(563)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(530),s=a(564),r=a(568),o=a(99),d=a(573);function l(){return(0,n.h)(n.Fragment,null,(0,n.h)("div",{class:(0,o.default)(d.default.stageModeLoadingBackground,"noSelect")}),(0,n.h)("div",{class:d.default.stageModeLoadingBarWrapper},(0,n.h)(i.default,{running:!0})),(0,n.h)("div",{class:d.default.loadingButtons},(0,n.h)(s.default,null),(0,n.h)(r.default,{loading:!0,title:"Loading…"})))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(565)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(566),s=a(434),r=a(567);function o({url:e}){return e?(0,n.h)(s.Link,{to:e||"",class:r.default.leaveStageModeButton},(0,n.h)(i.default,{color:"#FFF"})):(0,n.h)("div",{class:r.default.leaveStageModeButton},(0,n.h)(i.default,{color:"#FFF"}))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={leaveStageModeButton:"vYK_8D07IRtl_3tWWQi_"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(569)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(96),s=a(434),r=a(99),o=a(570),d=a(571),l=a(572);function c({loading:e,title:t,previousScreenURL:a,nextScreenURL:c}){const u=(0,i.useRef)(null),p=(0,i.useRef)(null),[f,S]=(0,i.useState)(null);const h=null===f?{}:{width:f},E=e?"var(--gandalf-50pc)":"var(--teflon)";return(0,n.h)("div",{class:(0,r.default)(l.default.stageModeNavigator,{[l.default.loading]:e}),ref:u,onMouseLeave:function(){null!==f&&S(null)}},(0,n.h)(s.Link,{class:l.default.link,to:a||"",title:"← Previous screen"},(0,n.h)(o.default,{class:l.default.icon,color:E})),(0,n.h)("div",{class:(0,r.default)("ellipsis",l.default.screenTitle),style:h},(0,n.h)("span",{class:"ellipsis",ref:p,title:t},t)),(0,n.h)(s.Link,{class:l.default.link,to:c||"",title:"Next screen →",onClick:function(){if(f)return;const{width:e}=p.current.getBoundingClientRect();S(e)}},(0,n.h)(d.default,{class:l.default.icon,color:E})))}},,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={stageModeNavigator:"k8ZriXyaozjEOqUq7cNs",link:"VhpzaOb5ZOAWUm6ggywT",loading:"CwlZLWD3SQw00ZZf1KEA",screenTitle:"sVhUo7f18Wt3nplWJXQX",icon:"XdZTzSdqtYuuqAcBdatr"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={stageModeLoadingBarWrapper:"UEd7N2c8a5eDJ4cajm1a",loadingButtons:"sVvD9UlCQtloexBtXxcE",stageModeLoadingBackground:"jx7SgFVPRv18QAmRyJ9x"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(575)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(264),s=a(576),r=a(577),o=a(535);a(620);function d(e){const{_id:t,versionCollection:a={},barrel:{_id:n,barrelType:i},progress:{update:s,isGettingProject:r,isGettingProjectFailed:o,countOfImagesToUpload:d,countOfUploadedImages:l,isApiOperationCompleted:c,isApiOperationFailed:u,apiOperationFailedError:p}}=e,{_id:f,name:S,type:h}=a;let E=p;if("string"==typeof p)try{E=JSON.parse(p)}catch(g){}return{id:t,versionCollectionId:f,versionCollectionName:S,versionCollectionType:h,barrelId:n,barrelType:i,update:s,gettingProject:r,gettingProjectFailed:o,countOfImagesToUpload:d,countOfUploadedImages:l,apiOperationCompleted:c,apiOperationFailed:u,apiOperationFailedError:E}}class l extends n.Component{static getStores(){return[i.default.VersionImportsStore]}static calculateState(){const{componentRejections:e,versionImports:t,indicatorVisible:a,listVisible:n,suggestedResourcesByBarrel:s,multipleColorsSupportedHintBoxVisible:r,exportToStyleguideHintBoxVisible:o,xdPluginReleasedMessageVisible:l}=i.default.VersionImportsStore.getState();if(0===t.length)return{indicatorVisible:!1,versionImportsProgress:0,anyVersionImportFailed:!1,listOpen:!1,importsSource:null,componentRejections:{},suggestedResourcesByBarrel:{},importsByBarrel:[]};const c=t.reduce(((e,t,a)=>{const{importsByBarrel:n,versionImportsProgress:i,anyVersionImportFailed:s}=e,r=Math.floor((i*a+function(e){return e.progress.isApiOperationCompleted?100:Math.floor(e.progress.countOfUploadedImages/(e.progress.countOfImagesToUpload+1)*100)}(t))/(a+1)),o=s||!!t.progress.isApiOperationFailed,l=n.find((e=>e._id===t.barrel._id));let c=n;return l?l.versionImports.push(d(t)):c.unshift({_id:t.barrel._id,name:t.barrel.name,type:t.barrel.type,barrelType:t.barrel.barrelType,versionImports:[d(t)]}),{importsByBarrel:c,versionImportsProgress:r,anyVersionImportFailed:o}}),{importsByBarrel:[],versionImportsProgress:0,anyVersionImportFailed:!1}),{importsByBarrel:u,versionImportsProgress:p,anyVersionImportFailed:f}=c;return{suggestedResourcesByBarrel:s,indicatorVisible:a,versionImportsProgress:p,anyVersionImportFailed:f,listOpen:n,importsSource:t[0].source||"Photoshop",componentRejections:e,importsByBarrel:u,multipleColorsSupportedHintBoxVisible:r,exportToStyleguideHintBoxVisible:o,xdPluginReleasedMessageVisible:l}}render(){const{indicatorVisible:e,versionImportsProgress:t,anyVersionImportFailed:a,listOpen:i,importsSource:o,componentRejections:d,suggestedResourcesByBarrel:l,importsByBarrel:c,multipleColorsSupportedHintBoxVisible:u,exportToStyleguideHintBoxVisible:p,xdPluginReleasedMessageVisible:f}=this.state;return e?n.h(r.default,{class:"versionImportsContainer",versionImportsProgress:t,anyVersionImportFailed:a,listOpen:i,onListOpen:s.default.showImportsList,onListClose:s.default.hideImportsList,importsSource:o,componentRejections:d,suggestedResourcesByBarrel:l,multipleColorsSupportedHintBoxVisible:u,xdPluginReleasedMessageVisible:f,exportToStyleguideHintBoxVisible:p,importsByBarrel:c,onImportClick:s.default.goToImportedVersion,onRetryImport:s.default.retryImport,onCancelImport:s.default.cancelImport,onRetryGetProject:s.default.retryGetProjectForImports,onClearImports:s.default.clearImports,currentUser:Zeplin.user,onComponentLimitHintHideClick:s.default.hideComponentLimitHint,onComponentLimitActionClick:s.default.seePlans}):null}}const c=(0,o.default)(l)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(375),i=a(264);const s={hideImportsIndicator(){i.default.dispatcher.dispatch({type:n.default.HIDE_IMPORTS_INDICATOR})},showImportsList(){i.default.dispatcher.dispatch({type:n.default.SHOW_IMPORTS_LIST})},hideImportsList(){i.default.dispatcher.dispatch({type:n.default.HIDE_IMPORTS_LIST})},handleImports(e){i.default.dispatcher.dispatch({type:n.default.HANDLE_IMPORTS,imports:e})},setSuggestedLocalResources(e){i.default.dispatcher.dispatch({type:n.default.SET_SUGGESTED_LOCAL_RESOURCES,suggestedResourcesByBarrel:e})},suggestedRemoteColorsFileReceived({bid:e,fileName:t}){i.default.dispatcher.dispatch({type:n.default.SUGGESTED_REMOTE_COLORS_FILE_RECEIVED,bid:e,fileName:t})},suggestedRemoteTextStylesFileReceived({bid:e,fileName:t}){i.default.dispatcher.dispatch({type:n.default.SUGGESTED_REMOTE_TEXT_STYLES_FILE_RECEIVED,bid:e,fileName:t})},suggestedRemoteColorsReceived({bid:e,colors:t}){i.default.dispatcher.dispatch({type:n.default.SUGGESTED_REMOTE_COLORS_RECEIVED,bid:e,colors:t})},suggestedRemoteTextStylesReceived({bid:e,textStyles:t}){i.default.dispatcher.dispatch({type:n.default.SUGGESTED_REMOTE_TEXT_STYLES_RECEIVED,bid:e,textStyles:t})},goToImportedVersion(){i.default.dispatcher.dispatch({type:n.default.GO_TO_IMPORTED_VERSION})},retryImport(e){i.default.dispatcher.dispatch({type:n.default.RETRY_IMPORT,id:e})},cancelImport(e){i.default.dispatcher.dispatch({type:n.default.CANCEL_IMPORT,id:e})},retryGetProjectForImports(e){i.default.dispatcher.dispatch({type:n.default.RETRY_GET_PROJECT_FOR_IMPORTS,id:e})},clearImports(e){i.default.dispatcher.dispatch({type:n.default.CLEAR_IMPORTS,ev:e})},hideComponentLimitHint(e){i.default.dispatcher.dispatch({type:n.default.HIDE_COMPONENT_LIMIT_HINT,barrelId:e})},seePlans(){i.default.dispatcher.dispatch({type:n.default.SEE_PLANS})},hideMultipleColorsSupportedHintBox(){i.default.dispatcher.dispatch({type:n.default.HIDE_MULTIPLE_COLORS_SUPPORTED_HINT_BOX})},hideExportToStyleguideHintBox(){i.default.dispatcher.dispatch({type:n.default.HIDE_EXPORT_TO_STYLEGUIDE_HINT_BOX})},showXdPluginReleasedMessage(){i.default.dispatcher.dispatch({type:n.default.SHOW_XD_PLUGIN_RELEASED_MESSAGE})},hideXdPluginReleasedMessage(){i.default.dispatcher.dispatch({type:n.default.HIDE_XD_PLUGIN_RELEASED_MESSAGE})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(578)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var n=a(93),i=a(145),s=a.n(i),r=a(579),o=a(582),d=a(159),l=a(404),c=a(585),u=a(149),p=a(604),f=a(610),S=a(613),h=a(616),E=a(576);a(619);class g extends n.Component{constructor(e){super(e),this.renderVersionImport=this.renderVersionImport.bind(this),this.renderBarrelGroup=this.renderBarrelGroup.bind(this)}handleExportToStyleguideHintBoxClick(){E.default.hideExportToStyleguideHintBox(),(0,l.openLink)("https://zpl.io/exporting-to-a-styleguide")}renderVersionImport(e){const{onImportClick:t,onRetryImport:a,onCancelImport:i,onRetryGetProject:s}=this.props,{id:r,versionCollectionId:o,versionCollectionName:d,versionCollectionType:l,barrelId:u,barrelType:p,update:f,gettingProject:S,gettingProjectFailed:h,countOfUploadedImages:E,countOfImagesToUpload:g,apiOperationCompleted:O,apiOperationFailed:T,apiOperationFailedError:m}=e;return S&&!h?n.h(c.GettingProject,null):S&&h?n.h(c.GettingProjectFailed,{id:r,onRetry:s}):g===E&&O&&!T?n.h(c.Done,{key:r,id:r,update:f,barrelId:u,barrelType:p,versionCollectionId:o,versionCollectionName:d,versionCollectionType:l,onClick:t}):O&&T?n.h(c.Failed,{key:r,id:r,update:f,versionCollectionName:d,errorMessage:m?m.message:null,onRetry:a}):O?void 0:n.h(c.InProgress,{key:r,id:r,update:f,versionCollectionName:d,countOfImagesToUpload:g,countOfUploadedImages:E,onCancel:i})}renderComponentRejection(e){const{componentRejections:t,currentUser:a,onComponentLimitHintHideClick:i,onComponentLimitActionClick:s}=this.props;if(!t[e])return null;const{owner:r,ownerPlan:o,rejected:d,total:l}=t[e];return n.h(p.default,{key:"componentLimitHintBox",onHideClick:i,onActionClick:s,owner:r,currentUser:a,ownerPlan:o,rejected:d,total:l,barrelId:e})}renderBarrelGroup(e){return n.h("div",{key:e._id},n.h("div",{class:"barrelInformation"},n.h("div",{class:"ellipsis"},e.name,", ",e.type)),n.h("div",{class:"barrelGroup"},this.renderComponentRejection(e._id),this.renderSuggestedResources(e._id,e.barrelType),n.h("div",{class:"list"},e.versionImports.map(this.renderVersionImport))))}renderSuggestedResources(e,t){const{suggestedResourcesByBarrel:a,onListClose:i}=this.props,{colors:s=[],textStyles:r=[]}=a[e]||{};return n.h(f.default,{onClick:i,colors:s,textStyles:r,barrelType:t,barrelId:e})}renderMultipleColorsSupportedHintBox(e,t){const{multipleColorsSupportedHintBoxVisible:a,exportToStyleguideHintBoxVisible:i}=this.props;if(i){const a="Zeplin now supports multiple colors with same values, you can re-export your colors to your styleguide to start using them.";return n.h(S.default,{barrelType:t,barrelId:e,content:a,onClick:this.handleExportToStyleguideHintBoxClick})}if(a){const a="Zeplin now supports multiple colors with same values, we updated the colors in the styleguide.";return n.h(S.default,{barrelType:t,barrelId:e,content:a,onClick:E.default.hideMultipleColorsSupportedHintBox})}return null}renderXdPluginReleasedMessage(){const{xdPluginReleasedMessageVisible:e}=this.props;return e?n.h(h.default,{onClick:E.default.hideXdPluginReleasedMessage}):null}renderVersionImports(){const{importsSource:e="Photoshop",importsByBarrel:t,onClearImports:a}=this.props,i=1===t.length?t[0].name:"Zeplin";return n.h("div",{class:"versionImports"},n.h("div",{class:"body"},n.h("div",{class:"title"},n.h("div",null,e),n.h(d.default,{asset:"img/icHand.png"}),n.h("div",{class:"ellipsis"},i)),1===t.length?n.h(n.Fragment,null,this.renderComponentRejection(t[0]._id),this.renderSuggestedResources(t[0]._id,t[0].barrelType),this.renderMultipleColorsSupportedHintBox(t[0]._id,t[0].barrelType),this.renderXdPluginReleasedMessage(),n.h("div",{class:"list"},t[0].versionImports.map(this.renderVersionImport))):t.map(this.renderBarrelGroup)),n.h(u.default,{onClick:a},n.h("div",null),n.h("div",null),n.h("div",null)))}render(){const{class:e,versionImportsProgress:t,anyVersionImportFailed:a,listOpen:i,onListClose:s,onListOpen:d}=this.props;return n.h(r.default,{class:e,content:this.renderVersionImports(),contentClass:"versionImportsPopoverContent",open:i,onClose:s,onOpen:d,left:2,top:2},n.h(o.default,{warning:a,progress:t}))}}g.propTypes={versionImportsProgress:s().number.isRequired,anyVersionImportFailed:s().bool.isRequired,listOpen:s().bool.isRequired,onListOpen:s().func.isRequired,onListClose:s().func.isRequired,importsSource:s().string.isRequired,importsByBarrel:s().arrayOf(s().shape({_id:s().string.isRequired,name:s().string.isRequired,type:s().string.isRequired,versionImports:s().arrayOf(s().shape({id:s().string.isRequired,versionCollectionId:s().string,versionCollectionName:s().string.isRequired,barrelId:s().string.isRequired,barrelType:s().oneOf(["project","styleguide"]),update:s().bool.isRequired,countOfImagesToUpload:s().number.isRequired,countOfUploadedImages:s().number.isRequired,apiOperationCompleted:s().bool.isRequired,apiOperationFailed:s().bool.isRequired,apiOperationFailedError:s().shape({message:s().string.isRequired})}))})),onImportClick:s().func.isRequired,onRetryImport:s().func.isRequired,onCancelImport:s().func.isRequired,onRetryGetProject:s().func.isRequired,onClearImports:s().func.isRequired};const O=g},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(583)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(145),s=a.n(i),r=a(149),o=a(105);a(584);const d=30*Math.PI;function l(e){const{progress:t=0,warning:a=!1}=e,i=`${d*t/100} ${d*(100-t)/100}`;return n.h(r.default,{class:"versionImportsIndicator"},n.h("svg",{width:"32",height:"32",version:"1.1"},n.h("circle",{cx:"16",cy:"16",r:15}),n.h("circle",{cx:"16",cy:"16",r:15,"stroke-dasharray":i})),100===t&&n.h("img",{src:(0,o.imageUrl)("img/icImportsDone.svg")}),a&&n.h("div",{class:"warning"}))}l.defaultProps={progress:0,warning:!1},l.propTypes={progress:s().number,warning:s().bool};const c=l},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{GettingProject:()=>n.default,GettingProjectFailed:()=>i.default,InProgress:()=>r.default,Failed:()=>o.default,Done:()=>s.default});var n=a(586),i=a(589),s=a(593),r=a(599),o=a(601)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(587)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(588);function i(){return n.h("div",{class:"versionImport gettingProject noSelect"},"Getting project ready to import..")}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(590)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(145),s=a.n(i),r=a(591),o=a(149),d=a(105);a(592);class l extends r.default{constructor(e){super(e),this.handleRetryClick=this.handleRetryClick.bind(this)}handleRetryClick(){const{onRetry:e,id:t}=this.props;e(t)}render(){return n.h("div",{class:"versionImport gettingProjectFailed noSelect"},"Fetching project failed.",n.h(o.default,{onClick:this.handleRetryClick},n.h("img",{src:(0,d.imageUrl)("img/icImportProgressFetchProjectRetry.svg")})))}}l.propTypes={id:s().string.isRequired,onRetry:s().func.isRequired};const c=l},,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(594)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(93),i=a(145),s=a.n(i),r=a(159),o=a(595),d=a(99),l=a(591),c=a(104),u=a(123);a(598);const p={};function f(e){switch(e){case"type1":return[n.h("div",null,"Done!"),n.h(r.default,{asset:"img/icDone.png"})];case"type2":return"This looks great!";case"type3":return[n.h("span",{class:"wow"},"wow."),n.h("span",{class:"suchDesigns"},"such designs."),n.h("span",{class:"amaze"},"amaze."),n.h("span",{class:"soColors"},"so colors.")];default:return"Done!"}}class S extends l.default{get versionCollectionLink(){const{barrelId:e,barrelType:t,versionCollectionId:a,versionCollectionType:n}=this.props;if("screen"===n)return(0,c.urlResolve)("project-screen",{url:{pid:e,sid:a}});const i={url:{bid:e},query:{coid:a}},s=t===u.default.PROJECT?"project-styleguide-components":"styleguide-components";return(0,c.urlResolve)(s,i)}render(){const{id:e,update:t,versionCollectionName:a,onClick:i}=this.props;p[e]||(p[e]=function(){switch(Math.floor(100*Math.random())){case 0:return"type1";case 1:case 2:return"type2";case 3:case 4:return"type3";default:return"type4"}}());const s=p[e];return n.h(o.default,{class:(0,d.default)("done",s),update:t,success:!0,versionCollectionName:a,progress:100,detail:f(s),buttonIcon:"img/icImportDone.svg",link:this.versionCollectionLink,onClick:i})}}S.propTypes={id:s().string.isRequired,update:s().bool.isRequired,versionCollectionId:s().string.isRequired,versionCollectionName:s().string.isRequired,barrelId:s().string.isRequired,barrelType:s().oneOf(["project","styleguide"]),onClick:s().func.isRequired};const h=S},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(596)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(149),s=a(99),r=a(105);a(597);function o(e){const{class:t,update:a,success:o,versionCollectionName:d,progress:l,detail:c,detailTitle:u,buttonIcon:p,onButtonClick:f,onClick:S,link:h}=e;let E=a?"Replacing":"Importing";E=o?E.replace("ing","ed"):E;const g=[n.h("div",{class:"information",key:"information"},n.h("div",{class:"title ellipsis"},E," “",d,"”"),n.h("div",{class:"progress"},l?n.h("div",{style:{width:`${l}%`}}):null),n.h("div",{class:"detail ellipsis",title:u||""},c)),h?n.h("img",{key:"img",src:(0,r.imageUrl)(p)}):n.h(i.default,{key:"button",onClick:f},n.h("img",{src:(0,r.imageUrl)(p)}))];return h?n.h("a",{class:(0,s.default)("versionImport",t),href:h,"data-link-type":"inApp",onClick:S},g):n.h("div",{class:(0,s.default)("versionImport",t),onClick:S},g)}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(600)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(145),s=a.n(i),r=a(595),o=a(591);class d extends o.default{constructor(e){super(e),this.handleCancelClick=this.handleCancelClick.bind(this)}calculateProgress(){const{countOfUploadedImages:e,countOfImagesToUpload:t}=this.props;return Math.floor(e/(t+1)*100)}isTicklingBackend(){const{countOfUploadedImages:e,countOfImagesToUpload:t}=this.props;return e===t}handleCancelClick(){const{onCancel:e,id:t}=this.props;e(t)}renderProgress(){return n.h("div",{class:"progress"},n.h("div",{style:{width:`${this.calculateProgress()}%`}}))}renderDetail(){const{countOfUploadedImages:e,countOfImagesToUpload:t}=this.props;return this.isTicklingBackend()?"Tickling the backend":`Uploading Images…(${e} of ${t})`}render(){const{update:e,versionCollectionName:t}=this.props;return n.h(r.default,{class:"inprogress",update:e,versionCollectionName:t,progress:this.calculateProgress(),detail:this.renderDetail(),buttonIcon:"img/icImportCancel.svg",onButtonClick:this.handleCancelClick})}}d.propTypes={id:s().string.isRequired,update:s().bool.isRequired,versionCollectionName:s().string.isRequired,countOfUploadedImages:s().number.isRequired,countOfImagesToUpload:s().number.isRequired,onCancel:s().func.isRequired};const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(602)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(145),s=a.n(i),r=a(595),o=a(591);a(603);class d extends o.default{constructor(e){super(e),this.handleRetryButtonClick=this.handleRetryButtonClick.bind(this)}handleRetryButtonClick(){const{onRetry:e,id:t}=this.props;e(t)}render(){const{update:e,versionCollectionName:t,errorMessage:a}=this.props;return n.h(r.default,{class:"failed",update:e,success:!1,versionCollectionName:t,detail:a||"Zeplin couldn't upload this one to the cloud.",detailTitle:a||"",buttonIcon:"img/icImportRetry.svg",onButtonClick:this.handleRetryButtonClick})}}d.propTypes={id:s().string.isRequired,update:s().bool.isRequired,versionCollectionName:s().string.isRequired,errorMessage:s().string,onRetry:s().func.isRequired};const l=d},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(605)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(606);a(609);const s=new Date(2016,11,1);class r extends n.Component{constructor(e){super(e),this.handleHideClick=this.handleHideClick.bind(this)}handleHideClick(){const{barrelId:e,onHideClick:t}=this.props;t(e)}render(){const{owner:e,ownerPlan:t,rejected:a,total:r,currentUser:o,onActionClick:d}=this.props,l=e._id===o._id;let c,u,p;return"Company"===t.name?(c=`${l?"You're":"Owner of the project is"} on the ${t.name} plan which was deprecated ${Math.floor((Date.now()-s)/2592e6)} months ago. Due to technical limitations, you can only store up to ${t.componentLimit}.`,u=l?"Upgrade to the Organization plan and access unlimited components.":"Ping them to upgrade to the Organization plan and access unlimited components.",p="Upgrade"):l?(p="See plans",c=`You can store up to ${t.componentLimit} components on the ${t.name} plan.`,u="Upgrade to access more space!"):(p="See plans",c=`Owner of the project is on the ${t.name} plan where you can store up to ${t.componentLimit} components per project.`,u="Ping them to upgrade and access more space!"),n.h(i.default,{class:"componentLimitHintBox",actionContent:p,onHideClick:this.handleHideClick,onActionClick:d},"Out of ",r," components you exported, ",a," not added to the project.",n.h("br",null),n.h("br",null),c,n.h("br",null),n.h("br",null),u)}}const o=r},,,,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(611)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(606),s=a(106),r=a(104),o=a(123);a(612);const d={[o.default.PROJECT]:"project-styleguide",[o.default.STYLEGUIDE]:"styleguide"};const l=function(e){const{colors:t,textStyles:a,barrelId:o,barrelType:l,onClick:c}=e;if(!t.length&&!a.length)return null;let u;t.length&&a.length&&(u=`Found ${(0,s.pluralize)(t.length,"color")} and ${(0,s.pluralize)(a.length,"text style")}`),t.length&&!a.length&&(u=`Found ${(0,s.pluralize)(t.length,"color")}`),!t.length&&a.length&&(u=`Found ${(0,s.pluralize)(a.length,"text style")}`);let p=(0,r.urlResolve)(`${d[l]}-colors`,{url:{bid:o}});return t.length||(p=(0,r.urlResolve)(`${d[l]}-textstyles`,{url:{bid:o}})),n.h("a",{href:p,class:"suggestedResourcesHintBox",onClick:c,"data-link-type":"inApp"},n.h(i.default,null,u,"."," Click to head to the Styleguide to add them."))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(614)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(606),s=a(123),r=a(104);a(615);const o={[s.default.PROJECT]:"project-styleguide",[s.default.STYLEGUIDE]:"styleguide"};const d=function({barrelId:e,barrelType:t,content:a,onClick:s}){const d=(0,r.urlResolve)(`${o[t]}-colors`,{url:{bid:e}});return(0,n.h)("a",{href:d,class:"multipleColorsSupportedHintBox",onClick:s,"data-link-type":"inApp"},(0,n.h)(i.default,null,a))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(617)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(93),i=a(606);a(618);function s({onClick:e}){return(0,n.h)("a",{href:"https://zpl.io/blog/xd-plugin",class:"xdPluginReleasedMessage",onClick:e},(0,n.h)(i.default,null,"We’ve made some big improvements to Zeplin for Adobe XD. Check out our new plugin that lets you publish designs from cloud documents to Zeplin!"))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(622)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var n=a(93),i=a(623),s=a(542),r=a(579),o=a(535),d=a(340),l=a(404),c=a(651),u=a(262),p=a(264),f=a(386),S=a(652);const h={showUserMenu:!1};class E extends n.Component{constructor(){super(...arguments),this.state=h,this.handleOpenNotificationSettingsDialog=()=>{this.setState({showUserMenu:!1}),u.default.setNotificationSettingsDialogVisibility(!0)},this.handleUpdatePlanClick=()=>{this.setState({showUserMenu:!1},(()=>{(0,S.showPlanChooserOverlay)({source:"Profile"})}))},this.handlePopoverOpen=()=>{this.setState({showUserMenu:!0})},this.handlePopoverClose=()=>{this.setState({showUserMenu:!1}),c.default.setSelectedView(f.USER_MENU)}}static calculateState(){const{organizations:e,loadingProfiles:t,organizationProfiles:a}=p.default.OrganizationStore.getState(),n=t?[]:e.filter((({_id:e})=>a[e]&&!a[e].restricted)).sort(d.sortBy.name),{userId:i,email:s,avatar:r,emotar:o,username:c,fullName:u,verified:f,paymentPlan:S,selectedView:h}=p.default.UserStore.getState(),E=(0,l.getUserAvatar)({email:s,emotar:o,avatar:r,_id:i}).src,{plans:g=[]}=p.default.AppStore.getState().config||{};return{username:c,fullName:u,email:s,avatar:r,emotar:o,currentAvatar:E,verified:f,paymentPlan:S,organizations:n,selectedView:h,plans:g}}static getStores(){return[p.default.UserStore,p.default.OrganizationStore,p.default.AppStore]}render(){const{username:e,fullName:t,email:a,avatar:o,emotar:d,currentAvatar:l,verified:u,paymentPlan:p,organizations:f,selectedView:S,showUserMenu:h,plans:E}=this.state,g=(0,n.h)(i.default,{username:e,fullName:t,email:a,avatar:o,currentAvatar:l,verified:u,paymentPlan:p,plans:E,selectedEmotar:d,organizations:f,selectedView:S,onNotificationSettingsClick:this.handleOpenNotificationSettingsDialog,onUpdatePlanClick:this.handleUpdatePlanClick,onSelectedViewChange:c.default.setSelectedView,onEmotarChange:c.default.updateUserEmotar,onLogout:c.default.logout});return(0,n.h)(n.Fragment,null,(0,n.h)(r.default,{open:h,content:g,onClose:this.handlePopoverClose,onOpen:this.handlePopoverOpen},(0,n.h)("button",{class:"noSelect",title:e},(0,n.h)(s.default,{src:l,size:28}))))}}const g=(0,o.default)(E)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(624)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(625),s=a(640),r=a(99),o=a(386),d=a(650);class l extends n.Component{constructor(){super(...arguments),this.handleUserMenuSelect=()=>{this.props.onSelectedViewChange(o.USER_MENU)},this.handleEmotarsSelect=()=>{this.props.onSelectedViewChange(o.EMOTARS)},this.handleEmotarClick=e=>{const{selectedEmotar:t,onEmotarChange:a}=this.props;e!==t&&a(e)}}renderEmotarsSection(){const{avatar:e,selectedEmotar:t}=this.props;return(0,n.h)("section",{class:d.default.emotarsSection},(0,n.h)(s.default,{avatarUrl:e,selectedEmotar:t,onEmotarClick:this.handleEmotarClick,onBackButtonClick:this.handleUserMenuSelect}))}renderUserMenuSection(){const{currentAvatar:e,username:t,fullName:a,email:s,organizations:r,verified:o,paymentPlan:l,plans:c,onNotificationSettingsClick:u,onUpdatePlanClick:p,onLogout:f}=this.props;return(0,n.h)("section",{class:d.default.userMenuSection},(0,n.h)(i.default,{avatarUrl:e,username:t,fullName:a,email:s,organizations:r,verified:o,paymentPlanName:l.name,plans:c,onNotificationSettingsClick:u,onUpdatePlanClick:p,onLogoutClick:f,onAvatarClick:this.handleEmotarsSelect}))}render(){const{selectedView:e}=this.props,t=(0,r.default)(d.default.userMenuWrapper,d.default[e]);return(0,n.h)("div",{class:t},this.renderUserMenuSection(),this.renderEmotarsSection())}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(626)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(627),s=a(633),r=a(636),o=a(149),d=a(104),l=a(639);const c=function(e){const{avatarUrl:t,username:a,fullName:c,email:u,verified:p,paymentPlanName:f,plans:S,organizations:h,onNotificationSettingsClick:E,onUpdatePlanClick:g,onAvatarClick:O,onLogoutClick:T}=e;return(0,n.h)("div",{class:l.default.userMenu},(0,n.h)(i.default,{profileLink:(0,d.urlResolve)("profile"),avatarUrl:t,username:a,fullName:c,info:u,verified:p,onAvatarClick:O}),h.length>0&&(0,n.h)(n.Fragment,null,(0,n.h)("div",{class:l.default.menuSeparator}),h.map((e=>{var t;const a=(0,d.urlResolve)("workspace-members",{url:{oid:e._id}}),i=null===(t=S.find((t=>t.id===e.paymentPlan)))||void 0===t?void 0:t.name;return(0,n.h)(s.default,{key:e._id,avatarUrl:e.logo,organizationName:e.name,organizationStatus:e.status,organizationLink:a,planName:i})}))),(0,n.h)("div",{class:l.default.menuSeparator}),0===h.length&&(0,n.h)(r.default,{menuLabel:f,iconUrl:"img/icPlan.svg",actionContent:(0,n.h)(o.default,{class:l.default.updatePlanButton},"Update Plan"),onClick:g}),(0,n.h)(r.default,{menuLabel:"Notification Settings",onClick:E}),(0,n.h)("div",{class:l.default.menuSeparator}),(0,n.h)(r.default,{menuLabel:"Log out",onClick:T}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(628)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(99),s=a(629),r=a(632);const o=function(e){const{avatarUrl:t,username:a,fullName:o,info:d,profileLink:l,verified:c,onAvatarClick:u}=e,p=o||a;return(0,n.h)("a",{class:r.default.menuUserItem,href:l},(0,n.h)(s.default,{onClick:function(e){e.preventDefault(),u()},src:t,size:64}),(0,n.h)("div",{class:r.default.infoContainer},(0,n.h)("span",{class:(0,i.default)(r.default.username,"ellipsis"),title:p},p),(0,n.h)("span",{class:(0,i.default)(r.default.info,"ellipsis")},d),!c&&(0,n.h)("span",{class:r.default.status},"Not verified yet.")))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(630)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(542),s=a(631);const r=function(e){const t=Object.assign({},e);return delete t.onClick,n.h("div",{class:s.default.updatableAvatar,onClick:e.onClick},n.h(i.default,t))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={updatableAvatar:"Tjk6Qw4YLTfxKLlHJZqA"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={menuUserItem:"Pqd1SUefY6QyjTKQjCwg",infoContainer:"AI7Jm5lcQ4agjBb1F3TS",username:"gUprkNdw7dvZT6w0cKtj",info:"bnXiRuGDlcsokpxgJh9z",status:"WIPCTlGZzGKgfbgKxlMJ"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(634)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(99),s=a(542),r=a(635);const o=function({organizationName:e,organizationLink:t,organizationStatus:a,avatarUrl:o,planName:d}){return(0,n.h)("a",{class:r.default.menuOrganizationItem,href:t},(0,n.h)(s.default,{src:o,type:"organization",size:64,bgSize:36}),(0,n.h)("div",{class:r.default.infoContainer},(0,n.h)("span",{class:(0,i.default)(r.default.organizationName,"ellipsis"),title:e},e),(0,n.h)("span",{class:r.default.info},d?`${d} `:"","Workspace"),"frozen"===a&&(0,n.h)("span",{class:r.default.status},"Workspace suspended")))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={menuOrganizationItem:"HlL0G4Vz8Rbfaghv5uBz",infoContainer:"LZLlDcelz5605vBtWvBE",organizationName:"eUGSU0brleQ8lXVMrq_f",info:"vhRKYHQXNZCEDfoRHcLP",status:"JmRShRX0P6Db9RYh8PnR"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(637)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(99),s=a(105),r=a(638);const o=function({menuLabel:e,iconUrl:t,actionContent:a,onClick:o}){return(0,n.h)("div",{onClick:o,class:(0,i.default)(r.default.menuItem,"noSelect")},(0,n.h)("div",{class:r.default.menuIcon},t&&(0,n.h)("img",{src:(0,s.imageUrl)(t)})),(0,n.h)("span",{class:(0,i.default)(r.default.menuLabel,"ellipsis")},e),a)}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={menuItem:"tXjXEtYEiI6sNDTOBXod",menuIcon:"gSQxbCAcGznGTj184mxq",menuLabel:"RTaG6hb62ERJmsQUYMew"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={userMenu:"UGKFwotfI3pXUw5KKg_w",menuSeparator:"BIR_as_3JVK44HiktFe7",updatePlanButton:"A4cPDDfdWIEgIY1G3ZDJ"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(641)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(93),i=a(145),s=a.n(i),r=a(642),o=a(629),d=a(149),l=a(533),c=a(105),u=a(104),p=a(649);function f(e){const{onEmotarClick:t,onBackButtonClick:a,avatarUrl:i,selectedEmotar:s}=e;let f=null;return s?f=(0,c.emotarUrl)(s):i&&(f=i),n.h("div",{class:p.default.emotars},n.h("h2",null,n.h(d.default,{class:p.default.backButton,onClick:a},n.h(l.default,{color:"var(--gandalf)"})," ",n.h("span",null,"Back")),n.h("span",null,"How is your mood today?")),n.h("div",{class:p.default.avatarContainer},n.h("a",{href:(0,u.urlResolve)("profile")},n.h(o.default,{src:f,size:64}))),n.h(r.default,{onEmotarClick:t,avatarUrl:i,selectedEmotar:s}))}f.propTypes={onEmotarClick:s().func.isRequired,onBackButtonClick:s().func.isRequired,avatarUrl:s().string,selectedEmotar:s().string};const S=f},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(643)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(93),i=a(145),s=a.n(i),r=a(644),o=a(542),d=a(647),l=a(99),c=a(648);class u extends n.Component{constructor(e){super(e),this.handleRandomClick=this.handleRandomClick.bind(this),this.handleSmallAvatarClick=this.handleSmallAvatarClick.bind(this)}handleRandomClick(){const{onEmotarClick:e}=this.props,t=Math.floor(Math.random()*d.default.length);e(d.default[t])}handleSmallAvatarClick(){this.props.onEmotarClick(null)}render(){const{onEmotarClick:e,avatarUrl:t,selectedEmotar:a}=this.props,i=(0,l.default)(c.default.avatar,{selected:!!t&&!a});return n.h("div",{class:c.default.emotarList},t?n.h("div",{onClick:this.handleSmallAvatarClick,class:i},n.h(o.default,{src:t,size:36})):n.h(r.default,{onClick:this.handleRandomClick,emotar:"random",selected:"random"===a}),d.default.map((t=>n.h(r.default,{key:t,onClick:e,emotar:t,selected:t===a}))))}}u.propTypes={onEmotarClick:s().func.isRequired,selectedEmotar:s().bool,avatarUrl:s().string};const p=u},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(645)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(93),i=a(145),s=a.n(i),r=a(542),o=a(99),d=a(105),l=a(646);class c extends n.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{onClick:e,emotar:t}=this.props;e(t)}render(){const{emotar:e,selected:t}=this.props,a=(0,o.default)(l.default.emotar,"noSelect",{[l.default.selected]:t}),i=(0,d.emotarUrl)(e);return n.h("div",{onClick:this.handleClick,class:a},n.h(r.default,{src:i,size:36}))}}c.propTypes={onClick:s().func.isRequired,emotar:s().string.isRequired,selected:s().bool};const u=c},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={emotar:"xJQtUlX8Q8mLZuB9JAtZ",selected:"n246Z8LfWgiOTFOaxLwh"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=["sunglasses","thinking_face","heart_eyes","grin","sweat_smile","white_frowning_face","unamused","upside_down_face","relieved","nerd_face","weary","anguished","face_with_rolling_eyes","scream","smile","smirk","face_with_thermometer","face_with_head_bandage","panda_face","new_moon_with_face","tomato","full_moon_with_face","tennis","space_invader","monkey_face","tophat","lion_face","four_leaf_clover","shit","pig_nose","robot_face","mouse","mushroom","penguin","chestnut","koala","hamburger","jack_o_lantern","rabbit","lollipop","hamster","lemon","tv","gift","ghost","frog","eyes","dart","dark_sunglasses","chicken","cookie","grapes","bear","eggplant","alien","octopus","bread","dog","meat_on_bone","pizza"]},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={emotarList:"EQuv4V_GX_kTV8Izgq8X",avatar:"KmOJuDkcmeNujMsmjGtE",selected:"DcMS7fjmuMToOXPev3Kx"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={emotars:"EKJjSn_LvhR377nB1n_s",avatarContainer:"kLuSNb9ZIveAyZyAi2yM",backButton:"gVkbsmMvjbydliuioYyF"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={userMenuWrapper:"ySvR8oDrXXZS78_ILrLA",emotars:"hqiEbaVW057AEyVXokjS",userMenu:"rgIg780wcBqnyeEpuuY3",emotarsSection:"OQVz_rX3X6zofzN_86UG",userMenuSection:"Eg4EqqCy4awrPQJZ3_TT"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(282),i=a(264),s=a(79),r=a(185),o=a(120);const d=(0,r.debouncePromise)(o.updateEmailNotifications);function l(e,t){i.default.dispatcher.dispatch({type:n.default.SET_USER_ATTRIBUTE,name:e,value:t})}const c={loadUser(e){i.default.dispatcher.dispatch({type:n.default.LOAD_USER,user:e})},updateUser(e){i.default.dispatcher.dispatch({type:n.default.UPDATE_USER,user:e})},setUsername(e){l("username",e)},setEmail(e){l("email",e)},setFullName(e){l("fullName",e)},setBio(e){l("bio",e)},setEmotar(e){l("emotar",e)},setAvatar(e){l("avatar",e)},setEmailNotifications(e){l("isEmailNotificationEnabled",e)},setVerified(){l("verified",!0)},setDesktopNotifications(e){l("isDesktopNotificationEnabled",e)},setBilling(e){l("billing",e)},setSelectedView(e){i.default.dispatcher.dispatch({type:n.default.SET_SELECTED_VIEW,selectedView:e})},updateEmailNotifications(e){const t=Zeplin.user.emailNotifications;c.setEmailNotifications(e),d(e).then((()=>{Zeplin.updateUser({emailNotifications:e})})).catch((e=>{c.setEmailNotifications(t),s.handleError(e)}))},setEmailNotificationPreferences({preferences:e,syncWithApi:t=!1}){const{emailNotificationSettings:a}=i.default.UserStore.getState();if(!a)return;const s=a.emailPreferences;i.default.dispatcher.dispatch({type:n.default.SET_EMAIL_NOTIFICATION_PREFERENCES,preferences:e,oldPreferences:s,syncWithApi:t})},muteProjectNotifications({pid:e,syncWithApi:t=!1}){i.default.dispatcher.dispatch({type:n.default.MUTE_PROJECT_NOTIFICATIONS,pid:e,syncWithApi:t})},muteStyleguideNotifications({stid:e,syncWithApi:t=!1}){i.default.dispatcher.dispatch({type:n.default.MUTE_STYLEGUIDE_NOTIFICATIONS,stid:e,syncWithApi:t})},unmuteProjectNotifications({pid:e,syncWithApi:t=!1}){i.default.dispatcher.dispatch({type:n.default.UNMUTE_PROJECT_NOTIFICATIONS,pid:e,syncWithApi:t})},unmuteStyleguideNotifications({stid:e,syncWithApi:t=!1}){i.default.dispatcher.dispatch({type:n.default.UNMUTE_STYLEGUIDE_NOTIFICATIONS,stid:e,syncWithApi:t})},updateFollowedProjectNotifications({followedProjectIds:e,unfollowedProjectIds:t}){const{emailNotificationSettings:a}=i.default.UserStore.getState(),{followedProjects:s}=a||{},r=[...s||[]];i.default.dispatcher.dispatch({type:n.default.UPDATE_FOLLOWED_PROJECT_NOTIFICATIONS,followedProjectIds:e,unfollowedProjectIds:t,oldFollowedProjectIds:r})},setFollowedProjectNotifications({projectIds:e}){i.default.dispatcher.dispatch({type:n.default.SET_FOLLOWED_PROJECT_NOTIFICATIONS,projectIds:e})},updateUserEmotar(e){const t=Zeplin.user.emotar;c.setEmotar(e),(0,o.updateUserEmotar)(e).then((()=>{Zeplin.updateUser({emotar:e}),mixpanel.master.track("Updated emotar",{Emoji:e})})).catch((e=>{c.setEmotar(t),s.handleError(e)}))},markZeplinThreeZeroWhatsNewAsSeen(){i.default.dispatcher.dispatch({type:n.default.MARK_ZEPLIN_THREE_ZERO_WHATS_NEW_AS_SEEN})},stopPromotingSpacingSectionDescriptionEditButton(){i.default.dispatcher.dispatch({type:n.default.STOP_PROMOTING_SPACING_SECTION_DESCRIPTION_EDIT_BUTTON})},hideStyleguideTutorial(){i.default.dispatcher.dispatch({type:n.default.HIDE_STYLEGUIDE_TUTORIAL})},hideDashboardOnboardingHintbox(){i.default.dispatcher.dispatch({type:n.default.HIDE_DASHBOARD_ONBOARDING_HINTBOX})},hideAddToFlowOnboarding(){i.default.dispatcher.dispatch({type:n.default.HIDE_ADD_TO_FLOW_ONBOARDING})},hideAddToFlowTooltip(){i.default.dispatcher.dispatch({type:n.default.HIDE_ADD_TO_FLOW_TOOLTIP})},stopPromotingExportDesignTokens(){i.default.dispatcher.dispatch({type:n.default.STOP_PROMOTING_EXPORT_DESIGN_TOKENS})},hideInvitedUserHintbox(){i.default.dispatcher.dispatch({type:n.default.HIDE_INVITED_USER_HINTBOX})},hidePersonalWorkspaceHintbox(){i.default.dispatcher.dispatch({type:n.default.HIDE_PERSONAL_WORKSPACE_HINTBOX})},acquaintancesRequested(){i.default.dispatcher.dispatch({type:n.default.ACQUAINTANCES_REQUESTED})},setAcquaintances(e){i.default.dispatcher.dispatch({type:n.default.SET_ACQUAINTANCES,acquaintances:e})},getAcquaintancesFailed(e){i.default.dispatcher.dispatch({type:n.default.GET_ACQUAINTANCES_FAILED,error:e})},logout(){(0,o.logoutUser)().finally(Zeplin.logout)},terminateSession(){i.default.dispatcher.dispatch({type:n.default.TERMINATE_SESSION})},markStorybookIntegrationPromotionAsSeen(){i.default.dispatcher.dispatch({type:n.default.MARK_STORYBOOK_INTEGRATION_PROMOTION_AS_SEEN})},markHighlightComponentsPromotionAsSeen(){i.default.dispatcher.dispatch({type:n.default.MARK_HIGHLIGHT_COMPONENTS_PROMOTION_AS_SEEN})},markLinkToStyleguidePromotionAsSeen(){i.default.dispatcher.dispatch({type:n.default.MARK_LINK_TO_STYLEGUIDE_PROMOTION_AS_SEEN})},setTermsForApproval(e){i.default.dispatcher.dispatch({type:n.default.SET_TERMS_FOR_APPROVAL,termsForApproval:e})},acceptTerms({acceptedTermsId:e,syncWithApi:t=!1}){const{termsForApproval:a}=i.default.UserStore.getState();i.default.dispatcher.dispatch({type:n.default.ACCEPT_TERMS,acceptedTermsId:e,oldTermsForApproval:a,syncWithApi:t})},markGlobalSearchNewTagMenuSeen(){i.default.dispatcher.dispatch({type:n.default.MARK_GLOBAL_SEARCH_NEW_BADGE_MENU_SEEN})}},u=c},(e,t,a)=>{"use strict";a.r(t),a.d(t,{showPlanChooserOverlay:()=>g});var n=a(79),i=a(120),s=a(104),r=a(92),o=a(653),d=a(732),l=a(733),c=a(185),u=a(734),p=a(91);const f=document.createElement("div");f.id="paymentDialogsContainer",document.body.appendChild(f);const S=new r.default(o.default,f),h=new r.default(u.default,f);let E;function g({source:e,upgradeTrigger:t,cb:a,oid:n,bid:i,displayFullMode:s=!1}={}){d.default.setOverridingCategory(l.default.PRICING),E=a,h.render({oid:n,bid:i,upgradeTrigger:t,displayFullMode:s,cancelEnabled:s,onCancelPlan:b,onUpdateSubscription:T,onCreateWorkspace:O,onClose:m}),mixpanel.master.track("Viewed pricing modal",{Source:e,Trigger:t}),(0,p.sendGAPageView)({source:"/pricing-popup"})}function O(e){location.assign((0,s.urlResolve)("workspace-create",{query:{period:e.period,plan:e.group}}))}function T(e,t){setTimeout((()=>m({action:"updatePlan",plan:t})),3e3)}function m(e={}){h.remove(),d.default.setOverridingCategory(null),E&&(E(e),E=null)}function _(e){(function(e){return e?i.getOrganizationUpcomingInvoice(e):i.getUserUpcomingInvoice()})(e).then((({invoice:t})=>{m({action:"cancelPlan"});const a=(0,c.formatTime)(1e3*t.period_end,{year:"numeric",month:"long",day:"numeric"});S.render({oid:e,periodEndDate:a,onClose(){S.remove()},onBackClick(){S.remove(),g({source:"Cancel modal, back click",oid:e,displayFullMode:!0})}})})).catch((e=>{n.handleError(e)}))}function b(e){_(e)}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(654)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(93),i=a(79),s=a(120),r=a(104),o=a(134),d=a(655),l=a(705),c=a(729),u=a(707);function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(){location.replace((0,r.urlResolve)("profile-account"))}function S(){Intercom("showNewMessage")}class h extends n.Component{constructor(...e){super(...e),p(this,"state",{loading:!1,transferEmail:"",transferPlanFormShown:!1,transferPlanFormError:"",cancelReason:"",cancelDescription:"",transferPlanWarningDialogShown:!1,transferOrgOwnershipDialogShown:!1,subscriptionCancelledDialogShown:!1,cancelPlanDialogShown:!1}),p(this,"hideTransferPlanWarningDialog",(()=>{this.setState({transferPlanWarningDialogShown:!1})})),p(this,"hideTransferOrgOwnershipDialog",(()=>{this.setState({transferOrgOwnershipDialogShown:!1})})),p(this,"hideCancelPlanDialog",(()=>{this.setState({cancelPlanDialogShown:!1})})),p(this,"hideSubscriptionCancelledDialog",(()=>{this.setState({subscriptionCancelledDialogShown:!1})})),p(this,"performTransferUserPlan",(()=>{const{transferEmail:e}=this.state;this.setState({loading:!0}),(0,s.transferUserSubscription)(e).then((()=>{this.setState({loading:!1}),Zeplin.user.paymentPlan="free",delete Zeplin.user.subscriptionStatus,location.replace((0,r.urlResolve)("profile-billing"))})).catch((e=>{this.setState({loading:!1}),(0,i.handleError)(e)}))})),p(this,"performCancelUserPlan",(()=>{const{cancelReason:e,cancelDescription:t}=this.state;this.setState({loading:!0}),(0,s.cancelUserSubscription)({reason:e,description:t}).then((()=>{Zeplin.updateUser({subscriptionStatus:"will_cancel_at_period_end"}),this.setState({loading:!1,subscriptionCancelledDialogShown:!0})})).catch((e=>{this.setState({loading:!1}),(0,i.handleError)(e)}))})),p(this,"performCancelOrgPlan",(()=>{const{oid:e}=this.props,{cancelReason:t,cancelDescription:a}=this.state;this.setState({loading:!0}),(0,s.cancelOrganizationSubscription)(e,{reason:t,description:a}).then((()=>{this.setState({loading:!1,subscriptionCancelledDialogShown:!0})})).catch((e=>{this.setState({loading:!1}),(0,i.handleError)(e)}))})),p(this,"performCancelPlan",(()=>{this.props.oid?this.performCancelOrgPlan():this.performCancelUserPlan()})),p(this,"handleQuestionChange",(()=>{this.state.transferPlanFormShown&&this.setState({transferPlanFormShown:!1})})),p(this,"handleGoToOrgDashboardClick",(()=>{const{oid:e}=this.props;location.replace((0,r.urlResolve)("workspace-members",{url:{oid:e}}))})),p(this,"handleCancelPlanClick",((e,t)=>{this.setState({cancelReason:e,cancelDescription:t,cancelPlanDialogShown:!0})})),p(this,"handleTransferPlanFormSubmit",(e=>{this.setState({transferPlanFormError:""}),function(e){return e===Zeplin.user.email?Promise.reject(new Error("C'mon, that's you")):new Promise(((t,a)=>{(0,s.getUserStatus)(e).then((e=>{"invited"!==e.status?t():a(new Error("No registered user with this email"))})).catch((e=>{(0,i.handleError)(e,{serverErrorHandler:()=>a(new Error("Something is wrong :(")),clientErrorHandler:{404:()=>{a(new Error("No registered user with this email"))}},fallbackHandler:()=>{a(new Error("Something is wrong :("))}})}))}))}(e).then((()=>{this.setState({transferEmail:e,transferPlanWarningDialogShown:!0})})).catch((e=>{this.setState({transferPlanFormError:e.message})}))})),p(this,"handleTransferPlanClick",(()=>{const{oid:e}=this.props;e?this.setState({transferOrgOwnershipDialogShown:!0}):this.setState({transferPlanFormShown:!0})})),p(this,"handleCancelPlanSuccess",(()=>{const{oid:e}=this.props;e?location.replace((0,r.urlResolve)("workspace-profile-billing",{url:{oid:e}})):location.replace((0,r.urlResolve)("profile-billing"))}))}render(){const{onClose:e,onBackClick:t,periodEndDate:a}=this.props,{loading:i,transferEmail:s,transferPlanFormError:r,transferPlanFormShown:p,subscriptionCancelledDialogShown:h,cancelPlanDialogShown:E,transferPlanWarningDialogShown:g,transferOrgOwnershipDialogShown:O}=this.state;return n.h(n.Fragment,null,n.h(d.default,{onClose:e,onBackClick:t,onCancelPlanClick:this.handleCancelPlanClick,onTransferPlanClick:this.handleTransferPlanClick,onTransferPlanFormSubmit:this.handleTransferPlanFormSubmit,onQuestionChange:this.handleQuestionChange,onChangeEmailClick:f,onContactSupportClick:S,transferPlanFormError:r,transferPlanFormShown:p}),i&&n.h(o.default,null),g&&n.h(l.default,{email:s,onClose:this.hideTransferPlanWarningDialog,onTransfer:this.performTransferUserPlan}),O&&n.h(u.BasicOverlayDialog,{title:"Transfer ownership?",message:'To transfer the ownership of the organization, select the user in the organization dashboard and click "Transfer Ownership"',positiveButtonText:"GO TO DASHBOARD",onPositiveButtonClick:this.handleGoToOrgDashboardClick,negativeButtonText:"CANCEL",hideNegativeButton:!1,onClose:this.hideTransferOrgOwnershipDialog}),E&&n.h(c.default,{periodEndDate:a,onCancelPlan:this.performCancelPlan,onClose:this.hideCancelPlanDialog}),h&&n.h(u.BasicOverlayDialog,{title:"Subscription cancelled successfully",message:"Let us know if there's anything bothering you: support@zeplin.io",positiveButtonText:"OK",onPositiveButtonClick:this.handleCancelPlanSuccess,onClose:this.hideSubscriptionCancelledDialog}))}}const E=h},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(656)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(657),s=a(660),r=a(663),o=a(533);a(704);const d=function(e){const{onClose:t,onBackClick:a,onCancelPlanClick:d,onTransferPlanFormSubmit:l,onTransferPlanClick:c,onChangeEmailClick:u,onContactSupportClick:p,onQuestionChange:f,transferPlanFormError:S,transferPlanFormShown:h}=e;return n.h(i.default,{onClose:t},n.h("div",{class:"cancelPlanModal"},n.h("div",{class:"cancelPlanHeader"},n.h("button",{class:"cancelPlanHeaderButton",onClick:a},n.h(o.default,{color:"var(--gandalf)"}),n.h("span",{class:"cancelPlanHeaderButtonText"},"Plans"))),n.h("div",{class:"cancelPlanHero"},n.h("h2",{class:"title"},"Why are you cancelling?"),n.h("p",{class:"text"},"It's sad to see you go. Tell us why you're cancelling, maybe we can help!")),n.h(s.default,null),n.h(r.default,{onBackClick:a,onQuestionChange:f,onCancelPlanClick:d,onTransferPlanFormSubmit:l,onTransferPlanClick:c,onChangeEmailClick:u,onContactSupportClick:p,transferPlanFormShown:h,transferPlanFormError:S})))}},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(661)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(662);function i(){return n.h("div",{class:"covidNotice"},"Here at Zeplin, we value our community—if you’re having financial/budgetary issues due to the current state of events, please contact us at ",n.h("a",{href:"mailto:support@zeplin.io"},"support@zeplin.io"),". We’d love to help.")}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(664)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(665),s=a(667);a(703);const r=function(e){const{onBackClick:t,onCancelPlanClick:a,onTransferPlanFormSubmit:r,onTransferPlanClick:o,onChangeEmailClick:d,onContactSupportClick:l,transferPlanFormError:c,transferPlanFormShown:u,onQuestionChange:p}=e;return n.h(i.default,{class:"cancelPlanSurvey",onChange:p},n.h(s.WrongAccount,{onTransferPlanClick:o,onTransferPlanFormSubmit:r,onChangeEmailClick:d,transferPlanFormShown:u,transferPlanFormError:c}),n.h(s.SubscribedAnnually,{onBackClick:t}),n.h(s.MovedToTeamPlan,{onCancelPlanClick:a}),n.h(s.SwitchedToAnotherTool,{onCancelPlanClick:a}),n.h(s.RanIntoIssue,{onContactSupportClick:l,onCancelPlanClick:a}),n.h(s.TooExpensive,{onContactSupportClick:l,onCancelPlanClick:a}),n.h(s.ProjectEnded,{onCancelPlanClick:a}),n.h(s.Other,{onCancelPlanClick:a}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(666)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(93);class i extends n.Component{constructor(e){super(e),this.state={index:-1},this.handleSelectQuestion=this.handleSelectQuestion.bind(this)}handleSelectQuestion(e){this.props.onChange&&this.props.onChange(e.target.value),this.setState({index:Number(e.target.value)})}render(){const{index:e}=this.state,{class:t,children:a}=this.props;return n.h("div",{class:t},n.toChildArray(a).map(((t,a)=>n.cloneElement(t,{value:a,selected:e===a,onSelect:this.handleSelectQuestion}))))}}const s=i},(e,t,a)=>{"use strict";a.r(t),a.d(t,{MovedToTeamPlan:()=>n.default,Other:()=>i.default,ProjectEnded:()=>s.default,RanIntoIssue:()=>r.default,SubscribedAnnually:()=>o.default,SwitchedToAnotherTool:()=>d.default,TooExpensive:()=>l.default,WrongAccount:()=>c.default});var n=a(668),i=a(682),s=a(692),r=a(693),o=a(694),d=a(698),l=a(699),c=a(700)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(669),s=a(672),r=a(675),o=a(681);class d extends n.Component{constructor(e){super(e),this.handleCancelPlanClick=this.handleCancelPlanClick.bind(this)}handleCancelPlanClick(){this.props.onCancelPlanClick(o.MOVED_TO_TEAM_PLAN)}render(){const{onSelect:e,selected:t,value:a}=this.props,o=[n.h("p",null,"Glad to hear that you'll be getting more out of Zeplin together! 👨‍👩‍👦‍👦"),n.h(i.default,null,n.h(s.default,{onClick:this.handleCancelPlanClick},"Cancel plan"))];return n.h(r.default,{onSelect:e,selected:t,value:a,content:o,mainText:"Moved to a team plan"})}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(670)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(671);const i=function(e){return n.h("div",{class:"questionButtons"},e.children)}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(673)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(149),s=a(99);a(674);const r=function(e){const{secondary:t,class:a}=e,r=(0,s.default)("questionButton",a,{primary:!t,secondary:t}),o=Object.assign({},e,{class:r});return delete o.secondary,n.h(i.default,o)}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(676)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(677),s=a(99);a(680);const r=function(e){const{content:t,mainText:a,subText:r,onSelect:o,selected:d,value:l}=e;return n.h("div",{class:"cancelPlanSurveyQuestion"},n.h("label",{class:(0,s.default)("selectWithText",{hasSubText:!!r})},n.h(i.default,{onClick:o,checked:d,value:l}),n.h("div",{class:"textContainer"},n.h("p",{class:"mainText"},a),r&&n.h("p",{class:"subText"},r))),d&&n.h("div",{class:"questionContent"},t))}},,,,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{PROJECT_ENDED:()=>n,MOVED_TO_TEAM_PLAN:()=>i,SWITCHED_TO_ANOTHER_TOOL:()=>s,RAN_INTO_ISSUE:()=>r,TOO_EXPENSIVE:()=>o,OTHER:()=>d});const n="Project ended",i="Moved to team plan",s="Switched to another tool",r="Ran into issue",o="Too expensive",d="Other"},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(683),s=a(675),r=a(681);class o extends n.Component{constructor(e){super(e),this.handleFormSubmit=this.handleFormSubmit.bind(this)}handleFormSubmit(e){this.props.onCancelPlanClick(r.OTHER,e)}render(){const{onSelect:e,selected:t,value:a}=this.props,r=[n.h("p",null,"Mind sharing why? This'll help us improve Zeplin."),n.h(i.default,{onSubmit:this.handleFormSubmit,placeholder:"Notes on why you're cancelling",buttonText:"Cancel plan"})];return n.h(s.default,{onSelect:e,selected:t,value:a,content:r,mainText:"Other"})}}const d=o},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(684)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(99),s=a(171),r=a(672),o=a(685),d=a(688);a(691);class l extends n.Component{constructor(e){super(e),this.state={value:"",dirty:!1,isInputValid:!0},this.handleInput=this.handleInput.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}isSubmitEnabled(){const{maxLength:e}=this.props,{value:t,isInputValid:a}=this.state;return t&&t.length<e&&t.trim()&&a}handleInput(e){this.setState({value:e.target.value,dirty:!0})}handleSubmit(e){e.preventDefault(),this.isSubmitEnabled()&&(this.props.onSubmit(this.state.value),this.setState({dirty:!1}))}componentDidMount(){this.nodeRefs.textInput.focus()}componentDidUpdate(e,t){"email"===this.props.type&&t.value!==this.state.value&&this.setState({isInputValid:this.nodeRefs.textInput.checkValidity()})}render(){const{placeholder:e,buttonText:t,label:a,type:l,error:c,maxLength:u,class:p}=this.props,{value:f,dirty:S,isInputValid:h}=this.state,E="email"===l&&d.default||o.default,g=!S&&!!c,O=f&&f.trim()&&h;return n.h("form",{class:(0,i.default)("questionTextForm",{hasError:g},p),onSubmit:this.handleSubmit},a&&n.h("label",{class:"questionTextFormLabel"},a),n.h(E,{class:"formInput",maxLength:u,onInput:this.handleInput,type:l,placeholder:e,value:f,inputRef:(0,s.default)(this,"textInput")}),g&&n.h("div",{class:"errorText"},c),n.h(r.default,{class:"questionTextFormButton",disabled:!O,type:"submit"},t))}}l.defaultProps={maxLength:2048};const c=l},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(686)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(99);a(687);class s extends n.Component{constructor(e){super(e),this.state={value:e.value},this.handleInput=this.handleInput.bind(this)}handleInput(e){this.props.onInput&&this.props.onInput(e),this.setState({value:e.target.value})}render(){const{value:e}=this.state,{placeholder:t,inputRef:a,maxLength:s,class:r}=this.props;return n.h("div",{class:(0,i.default)("questionTextArea",r)},n.h("div",{class:"mirror"},n.h("pre",null,e," ")),n.h("textarea",{value:e,maxLength:s,placeholder:t,ref:a,onInput:this.handleInput}))}}const r=s},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(689)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(93),i=a(99);a(690);const s=function(e){const t=Object.assign({},e,{class:(0,i.default)("questionTextInput",e.class),type:e.type||"text",ref:e.inputRef});return delete t.inputRef,n.h("input",t)}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(669),s=a(672),r=a(675),o=a(681);class d extends n.Component{constructor(e){super(e),this.handleCancelPlanClick=this.handleCancelPlanClick.bind(this)}handleCancelPlanClick(){this.props.onCancelPlanClick(o.PROJECT_ENDED)}render(){const{onSelect:e,selected:t,value:a}=this.props,o=[n.h("p",null,"Thanks for using Zeplin, hope to have you back on board soon! 👋"),n.h(i.default,null,n.h(s.default,{onClick:this.handleCancelPlanClick},"Cancel plan"))];return n.h(r.default,{onSelect:e,selected:t,value:a,content:o,mainText:"Project ended, won't need Zeplin for a while"})}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(669),s=a(672),r=a(675),o=a(681);class d extends n.Component{constructor(e){super(e),this.handleCancelPlanClick=this.handleCancelPlanClick.bind(this)}handleCancelPlanClick(){this.props.onCancelPlanClick(o.RAN_INTO_ISSUE)}render(){const{onSelect:e,selected:t,value:a}=this.props,o=[n.h("p",null,"Sorry to hear that. Contact us and we'd love to help you out right away. 💪"),n.h(i.default,null,n.h(s.default,{onClick:this.props.onContactSupportClick},"Contact support"),n.h(s.default,{secondary:!0,onClick:this.handleCancelPlanClick},"Cancel plan"))];return n.h(r.default,{onSelect:e,selected:t,value:a,content:o,mainText:"Ran into an issue",subText:"e.g. “I couldn't export my designs.”, “I failed to install the Photoshop plugin.”"})}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(675),s=a(695);const r=function(e){const{onSelect:t,selected:a,value:r,onBackClick:o}=e,d=[n.h("p",null,"You can always switch your billing frequency. ",n.h(s.default,{onClick:o},"Go back")," to plan selection, select the Monthly tab and select your plan."),n.h("br",null),n.h("p",null,"Your previous payment will be pro-rated and credited to your account automatically.")];return n.h(i.default,{onSelect:t,selected:a,value:r,content:d,mainText:"Subscribed annually, instead of monthly"})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(696)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(697);const i=function(e){return n.h("button",{class:"questionInlineButton",onClick:e.onClick},e.children)}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(683),s=a(675),r=a(681);class o extends n.Component{constructor(e){super(e),this.handleFormSubmit=this.handleFormSubmit.bind(this)}handleFormSubmit(e){this.props.onCancelPlanClick(r.SWITCHED_TO_ANOTHER_TOOL,e)}render(){const{onSelect:e,selected:t,value:a}=this.props,r=[n.h("p",null,"Mind sharing which tool and why? This'll help us improve Zeplin."),n.h(i.default,{onSubmit:this.handleFormSubmit,placeholder:"Notes on which tool you're switching to, and why",buttonText:"Cancel plan"})];return n.h(s.default,{onSelect:e,selected:t,value:a,content:r,mainText:"Switched to another tool"})}}const d=o},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(669),s=a(672),r=a(675),o=a(681);class d extends n.Component{constructor(e){super(e),this.handleCancelPlanClick=this.handleCancelPlanClick.bind(this)}handleCancelPlanClick(){this.props.onCancelPlanClick(o.TOO_EXPENSIVE)}render(){const{onSelect:e,selected:t,value:a}=this.props,o=n.h(n.Fragment,null,n.h("p",null,"We wouldn’t want to lose you over pricing. Mind contacting us and sharing why? We’d love to figure out the best plan for you and your team."),n.h(i.default,null,n.h(s.default,{onClick:this.props.onContactSupportClick},"Contact support"),n.h(s.default,{secondary:!0,onClick:this.handleCancelPlanClick},"Cancel plan")));return n.h(r.default,{onSelect:e,selected:t,value:a,content:o,mainText:"Too expensive",subText:"e.g. It’s difficult to pay in USD"})}}const l=d},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(701)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(669),s=a(672),r=a(683),o=a(675);a(702);function d(e){const{onChangeEmailClick:t,onTransferPlanClick:a,onTransferPlanFormSubmit:o,transferPlanFormError:d,transferPlanFormShown:l}=e;return l?[n.h("p",null,"You can always change your account's email or transfer your plan to another Zeplin user."),n.h("div",{class:"transferPlanFormContainer"},n.h("span",{class:"emoji"},"☝️"),n.h("div",{class:"text"},n.h("p",null,"By transferring the subscription, you will transfer your billing information and all the projects under this account."),n.h("br",null),n.h("p",null,"Your personal plan will be downgraded to Free plan and you can own only one project."))),n.h(r.default,{class:"transferPlanForm",type:"email",maxLength:254,label:"Enter the email of the user to transfer to:",error:d,onSubmit:o,placeholder:"Email",buttonText:"Transfer plan"})]:[n.h("p",null,"You can always change your account's email or transfer your plan to another Zeplin user."),n.h(i.default,null,n.h(s.default,{onClick:a},"Transfer plan"),n.h(s.default,{onClick:t},"Change email"))]}const l=function(e){const{onSelect:t,selected:a,value:i}=e;return n.h(o.default,{onSelect:t,selected:a,value:i,content:d(e),mainText:"Subscribed with the wrong account or email address",subText:"e.g. “I used my personal email address.”, “I subscribed with my own account, instead of our designers.”"})}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(706)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(93),i=a(707);a(728);const s=function(e){const{email:t}=e;return n.h(i.default,{onClose:e.onClose,width:444,class:"transferWarningDialog",positiveButtonText:"TRANSFER",negativeButtonText:"CANCEL",onPositiveButtonClick:e.onTransfer,hideNegativeButton:!1},n.h("div",{class:"dialogWrapper"},n.h("h1",{class:"dialogHeader"},"Transfer subscription"),n.h("div",{class:"dialogBody"},n.h("p",{class:"primaryInfo"},"You’re transferring your subscription to ",n.h("strong",null,'"',t,'"'),"."),n.h("p",null,"By transferring the subscription, you will ",n.h("strong",null,"transfer your billing information and all the projects under this account.")))))}},,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(730)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(93),i=a(707);a(731);const s=function(e){const{periodEndDate:t,onCancelPlan:a,onClose:s}=e;return n.h(i.default,{width:484,class:"cancelPlanDialog",positiveButtonText:"CANCEL PLAN",negativeButtonText:"KEEP PLAN",onClose:s,onPositiveButtonClick:a,hideNegativeButton:!1},n.h("div",{class:"dialogWrapper"},n.h("h1",{class:"dialogHeader"},"Cancel Plan"),n.h("div",{class:"dialogBody"},n.h("p",null,"You can continue using your plan until your billing period ends on",n.h("strong",null," ",t),". Once the billing period ends, your projects and styleguides will be archived automatically."))))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(378);const s={setOverridingCategory(e){n.default.dispatcher.dispatch({type:i.default.SET_OVERRIDING_CATEGORY,overridingCategory:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={DEFAULT:"default",PROFILE:"profile",PRICING:"pricing",PROJECTS:"projects",STYLEGUIDES:"styleguides",STYLEGUIDE:"styleguide",PROJECT_DASHBOARD:"project-dashboard",PROJECT_FLOW:"project-flow",PROJECT_STYLEGUIDE:"project-styleguide",PROJECT_SCREEN:"project-screen",ORGANIZATION_PROJECTS:"organization-projects",ORGANIZATION_PROFILE:"organization-profile",ORGANIZATION_DASHBOARD:"organization-dashboard"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(735)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(93),i=a(535),s=a(707),r=a(134),o=a(149),d=a(7),l=a(76),c=a(99),u=a(736),p=a(171),f=a(104),S=a(404),h=a(264),E=a(737),g=a(739),O=a(740),T=a(106),m=a(743),_=a(747),b=a(91);a(750);class C extends n.Component{constructor(){super(...arguments),this.nodeRefs={},this.updateSubscription=e=>{var t;const{currentPlan:a,organization:n}=this.state,{oid:i}=this.props,s=a&&d.PLAN_ORDER[e.group]<d.PLAN_ORDER[a.group],r=a&&d.PLAN_ORDER[e.group]>d.PLAN_ORDER[a.group]&&e.group===d.PlanGroup.ORGANIZATION,o=(s?"Downgrade":"Update")+" subscription?",c=s&&e.projectLimit?`You'll have ${e.projectLimit} active projects and styleguides on the ${e.name} plan. You can upgrade it again, anytime!`:"You can update it again, anytime!",u=null===(t=this.nodeRefs)||void 0===t?void 0:t.dialogContent;l.create({title:o,message:c,done:{name:"UPDATE",cb:()=>{this.setState({loading:!0}),g.default.updateOrganizationSubscription({oid:i,plan:e.id,oldPlan:n.paymentPlan,isReactivation:!a,toastContainer:u,onSuccess:(e,t)=>{r&&(0,b.sendWorkspaceConversion)(d.WorkspacePlanType.ORGANIZATION),this.handleUpdateSubscriptionSuccess(e,t)},onError:()=>{this.setState({loading:!1})},syncWithApi:!0})}},cancel:{name:"CANCEL"}})},this.handleUpdateSubscriptionSuccess=(e,t)=>{const{onUpdateSubscription:a}=this.props;this.setState({loading:!1}),a&&a(e,t)},this.createChangePlanHandler=e=>{const{oid:t,dialogSource:a,onCreateWorkspace:n}=this.props;return()=>{if(e.group===d.PlanGroup.ENTERPRISE){const e="mailto:enterprise@zeplin.io?subject=Interested in Zeplin Enterprise Plan";if("macApp"===a)return void history.replaceState(null,"",(0,f.urlResolve)("workspace-create",{query:{source:a,close:!0,redirect:e}}));(0,b.sendEnterpriseInquiry)(),(0,S.openLink)(e)}else t?this.updateSubscription(e):n(e)}},this.createCancelPlanHandler=e=>{const{oid:t}=this.props;return a=>{a.preventDefault(),a.stopPropagation(),this.setState({loading:!0}),this.props.onCancelPlan(t,e)}},this.createPeriodClickHandler=e=>()=>{this.setState({period:e})},this.renderTitleAndDescription=()=>{const{currentPlan:e,organization:t,maxUserLimit:a}=this.state,{upgradeTrigger:i,displayFullMode:s}=this.props;let r,o;const l="deprecated"===(null==e?void 0:e.status);switch(i){case d.PlanUpgradeTrigger.USER_LIMIT:r="Your Zeplin team is growing 👨‍👩‍👧‍👦",o=(0,n.h)("p",null,"You are currently on the ",(0,n.h)("strong",null,"Free")," plan where you can have up to ",a," members. Upgrade below to invite as many members as you need.");break;case d.PlanUpgradeTrigger.VERSION_LIMIT:r="Access unlimited version history ⌛",o=(0,n.h)("p",null,"You are currently on the ",(0,n.h)("strong",null,"Free")," plan where you can view 30 days of version history. Upgrade below to access unlimited version history, including access to your existing versions.");break;case d.PlanUpgradeTrigger.PROJECT_LIMIT:{r="More projects, more opportunities 🍧";const a=(null==t?void 0:t.projectLimit)||e.projectLimit;o=(0,n.h)("p",null,"You are currently on the ",(0,n.h)("strong",null,e.name)," plan️ where you can have up to ",(0,T.pluralize)(a,"project"),". Upgrade below to create as many as you need.");break}case d.PlanUpgradeTrigger.STYLEGUIDE_LIMIT:{const a=(null==t?void 0:t.styleguideLimit)||e.styleguideLimit;r="More styleguides, more coherence 🍧",o=(0,n.h)("p",null,"You are currently on the ",(0,n.h)("strong",null,e.name)," plan️ where you can have up to ",a," styleguide(s). Upgrade below to create as many as you need.");break}case d.PlanUpgradeTrigger.VARIANT_GROUP_LIMIT:r=l?"You are on a deprecated plan 👀":"Your project is evolving 🦕",o=l?(0,n.h)("p",null,"You are currently on the deprecated ",e.name," plan. Due to technical limitations on deprecated plans, you can add up to ",e.variantGroupLimit," screen variants. Upgrade to an active plan below to create as many variants as you need."):(0,n.h)("p",null,"You are currently on the ",(0,n.h)("strong",null,e.name)," plan where you can have up to ",e.variantGroupLimit," screen variants. To better organize your screens, upgrade below to create as many variants as you need.");break;case d.PlanUpgradeTrigger.FLOW_NODE_LIMIT:r=l?"You are on a deprecated plan 👀":"Access even more flows ⤴️",o=l?(0,n.h)("p",null,"You are currently on the deprecated ",e.name," plan. Due to technical limitations on deprecated plans, you can add up to ",e.flowNodeLimit," screens/shapes to flows. Upgrade to an active plan below to access more flows."):(0,n.h)("p",null,"You are currently on the ",e.name," plan where you can add up to ",e.flowNodeLimit," screens to flows. Upgrade below to access even more flows and document your entire user journey.");break;case d.PlanUpgradeTrigger.FLOW_PROJECT_LIMIT:r="Access even more flows ⤴️",o=(0,n.h)("p",null,"You are currently on the ",e.name," plan where you can add up to ",e.flowDistinctProjectLimit," projects with flows. Upgrade below to access even more flows and document your entire user journey.");break;default:r="Change plan",o=(0,n.h)("p",null,"You can upgrade or downgrade to another plan, change your plan’s billing cycle or cancel your plan below.")}return(0,n.h)(n.Fragment,null,(0,n.h)("h1",null,r),(0,n.h)("div",{class:(0,c.default)("plansDescription",{fixedHeight:!s})},o))},this.renderDeprecatedPlanBanner=()=>{const{currentPlan:e,organization:t}=this.state,a=(null==t?void 0:t.subscriptionStatus)||Zeplin.user.subscriptionStatus,i="active"===a||"past_due"===a;return"deprecated"===(null==e?void 0:e.status)?(0,n.h)("div",{class:"deprecatedPlanBanner"},(0,n.h)("p",null,"You’re on the deprecated ",(0,n.h)("strong",null,e.name)," plan."," ",i&&(0,n.h)("span",null,"If you’d like to, you can cancel your plan ",(0,n.h)("a",{class:"cancelLink",href:"#",onClick:this.createCancelPlanHandler(e)},(0,n.h)("strong",null,"here")),".")),(0,n.h)("p",null,"Reach out to us if you have any questions: ",(0,n.h)("a",{href:"mailto:support@zeplin.io",target:"_blank",rel:"noopener noreferrer"},"support@zeplin.io"))):null},this.renderPlanContent=e=>{const{unitPrice:t}=(0,u.getPlanPrice)({plan:e,period:e.period===d.BillingPeriod.ETERNAL?d.BillingPeriod.ANNUALLY:e.period,seatCount:1});switch(e.name){case"Team":return(0,n.h)(O.TeamPlanContent,{projectLimit:e.projectLimit,selectedUnitPrice:t});case"Organization":return(0,n.h)(O.OrganizationPlanContent,{minUserCount:e.quantity,selectedUnitPrice:t});case"Enterprise":return(0,n.h)(O.EnterprisePlanContent,null)}},this.renderPlanFooter=e=>{const{currentPlan:t}=this.state,{cancelEnabled:a}=this.props;if(e.group===d.PlanGroup.ENTERPRISE)return(0,n.h)(o.default,{primary:!0,onClick:this.createChangePlanHandler(e)},"Contact us");if(t&&d.PLAN_ORDER[e.group]<d.PLAN_ORDER[t.group])return(0,n.h)(o.default,{secondary:!0,onClick:this.createChangePlanHandler(e)},"Downgrade to ",e.name," Plan");if("active"===e.status&&"active"===(null==t?void 0:t.status)&&(null==t?void 0:t.group)===e.group){const i=e.period===t.period;return(0,n.h)(n.Fragment,null,i?(0,n.h)("div",{className:"currentPlanLabel"},"Current plan"):(0,n.h)(o.default,{class:(0,c.default)("changePeriod",{primary:e.period===d.BillingPeriod.ANNUALLY,secondary:e.period===d.BillingPeriod.MONTHLY}),onClick:this.createChangePlanHandler(e)},"Change period"),a&&(0,n.h)(o.default,{class:"cancelButton",secondary:!0,onClick:this.createCancelPlanHandler(e)},"Cancel plan"))}return(0,n.h)(o.default,{primary:!0,onClick:this.createChangePlanHandler(e)},"Upgrade to ",e.name," Plan")}}static calculateState(e,t){const{oid:a,bid:n}=t,{plans:i}=h.default.AppStore.getState().config,{paymentPlan:s,userId:r}=h.default.UserStore.getState(),{maxUserLimit:o}=E.default.getBarrel({bid:n})||{},{organizations:l}=h.default.OrganizationStore.getState(),c="string"==typeof s?i.find((e=>e.id===s)):s,u=l.find((({_id:e})=>e===a)),p=u?i.find((e=>e.id===u.paymentPlan)):c;let f=d.BillingPeriod.ANNUALLY;return!(null==e?void 0:e.period)&&t.period?f=t.period:p&&p.period!==d.BillingPeriod.ETERNAL&&(f=p.period),{period:f,plans:i,currentPlan:p,userId:r,organization:u,maxUserLimit:o,loading:null==e?void 0:e.loading}}static getStores(){return[h.default.AppStore,h.default.UserStore,h.default.OrganizationStore,h.default.BarrelStore,h.default.ProjectsDataStore,h.default.StyleguidesDataStore]}render(){const{isDismissible:e,displayFullMode:t,dialogSource:a,onClose:i}=this.props,{period:l,plans:u,loading:f}=this.state,S=u.find((e=>"active"===e.status&&e.group===d.PlanGroup.TEAM&&e.period===l)),h=u.find((e=>"active"===e.status&&e.group===d.PlanGroup.ORGANIZATION&&e.period===l)),E=u.find((e=>"active"===e.status&&e.group===d.PlanGroup.ENTERPRISE));return(0,n.h)(s.default,{class:(0,c.default)("planChooserDialog",{displayFullMode:t,noRadius:"macApp"===a}),width:960,onClose:i,isDismissible:e,hideFooter:!0},(0,n.h)("div",{class:"planChooserDialogContent",ref:(0,p.default)(this,"dialogContent")},f&&(0,n.h)(r.default,{class:"planChooserLoading"}),this.renderTitleAndDescription(),t&&(0,n.h)(n.Fragment,null,this.renderDeprecatedPlanBanner(),(0,n.h)("div",{class:"periodTabsContainer"},(0,n.h)("div",{className:(0,c.default)("periodTabSlider","noSelect",{[l]:!0})}),(0,n.h)(o.default,{ninja:!0,class:(0,c.default)("periodTab",{selected:l===d.BillingPeriod.MONTHLY}),onClick:this.createPeriodClickHandler(d.BillingPeriod.MONTHLY)},"Monthly"),(0,n.h)(o.default,{ninja:!0,className:(0,c.default)("periodTab",{selected:l===d.BillingPeriod.ANNUALLY}),onClick:this.createPeriodClickHandler(d.BillingPeriod.ANNUALLY)},"Annually"))),(0,n.h)("div",{class:"plans"},[S,h,E].map((e=>(0,n.h)("div",{key:e.id,class:"plan"},this.renderPlanContent(e),(0,n.h)("div",{class:"footer"},this.renderPlanFooter(e)))))),t&&(0,n.h)("div",{class:"planComparisonAndFaq"},(0,n.h)(m.default,{plans:u,period:l}),(0,n.h)(_.default,null))))}}C.defaultProps={displayFullMode:!1,cancelEnabled:!1,isDismissible:!0};const A=(0,i.default)(C,{withProps:!0})},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var n=a(264),i=a(738),s=a(123),r=a(104),o=a(185),d=a(331),l=a(295),c=a(434),u=a(348),p=a(349),f=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function S({bid:e}={}){let t=e;if(t||({barrelId:t}=n.default.BarrelStore.getState()),!t)return null;const{projects:a}=n.default.ProjectsDataStore.getState();if(a&&t in a)return a[t];const{styleguides:i}=n.default.StyleguidesDataStore.getState();return i&&t in i?i[t]:null}function h({pid:e}={}){let t=e;if(!t){const{barrelId:e,barrelType:a}=n.default.BarrelStore.getState();a===s.default.PROJECT&&(t=e)}if(!t)return null;const{projects:a}=n.default.ProjectsDataStore.getState();return a&&t in a?a[t]:null}function E({bid:e,uid:t}={}){const a=S({bid:e});if(!a)return null;let s=t;if(s||({userId:s}=n.default.UserStore.getState()),(0,o.isOrganizationProject)(a)){const{members:e}=i.default.getOrganization()||{};if(null==e?void 0:e.length)return e.find((({user:e})=>e._id===s))}return a.users.find((({user:e})=>e._id===s))}function g({oid:e,barrelType:t,query:a}={}){if(e){const n=(null!=t?t:s.default.PROJECT)===s.default.PROJECT?"projects":"styleguides";return"user"===e?(0,r.urlResolve)(n,{query:a}):(0,r.urlResolve)(`workspace-${n}`,{url:{oid:e},query:a})}const{organizationId:i,barrelType:o}=n.default.BarrelStore.getState(),d=E(),l=(null!=t?t:o)===s.default.PROJECT?"projects":"styleguides",c=null!=i?i:"user";return"user"!==c&&d?(0,r.urlResolve)(`workspace-${l}`,{url:{oid:c},query:a}):(0,r.urlResolve)(l,{query:a})}function O(e,t){let a;if("linked"===e.status){const e=t.find((e=>"linked"!==e.remPreferences.status));a=e&&e.remPreferences}return a||e}function T(e,t){let a;return"linked"!==e.status&&(a=t.find((e=>"linked"!==e.remPreferences.status&&"web"===e.type))),a&&{name:a.name,remPreferences:a.remPreferences}}function m(e){let t=e;return t||(t=h()),!!t&&t.kind===p.default.Onboarding}const _={hasProject:function(e){const{projects:t}=n.default.ProjectsDataStore.getState();return t&&e in t},hasStyleguide:function(e){const{styleguides:t}=n.default.StyleguidesDataStore.getState();return t&&e in t},getBarrel:S,getProject:h,findUser:E,isUserRestricted:function(){var e;return"pawn"===(null===(e=E())||void 0===e?void 0:e.role)},getVariantGroupOfScreen:function(e){const{variantGroups:t=[]}=h()||{};return t.find((({screens:t})=>t.some((({id:t})=>t===e))))},findBarrelOrganizationId:function(e){if(!S({bid:e}))return null;const{organizationProjects:t,organizationStyleguides:a}=n.default.OrganizationStore.getState();for(const[n,i]of Object.entries(t))if(i.includes(e))return n;for(const[n,i]of Object.entries(a))if(i.includes(e))return n;return null},getWorkspaceURL:g,getStyleguidesData:function({barrelStore:e,styleguidesDataStore:t,projectsDataStore:a}){const n=e.getState(),{loading:i}=n,r=f(n,["loading"]);if(i)return[];const{styleguides:c}=t.getState(),u=S(),p=E(),{barrelId:h,barrelType:g}=r,{name:m,type:_,colors:b,textStyles:C,spacingSections:A,remPreferences:y,componentSections:I,connectedComponents:N,localConnectedComponents:P,dimensionSuffix:D,densityScale:R}=u;if(!p)return[];const v=p.user._id,L=(0,l.default)(u,v);if(!L)return[];const j=g===s.default.STYLEGUIDE?m:"Local Styleguide",U=function(e,t){if(t===s.default.STYLEGUIDE)return[...e.ancestors].reverse();if(!e.styleguideLink)return[];const{styleguide:a,status:n}=e.styleguideLink;if("active"===n){const e=[...a.ancestors].reverse();return[a._id,...e]}return[]}(u,g).map((e=>c[e])).filter(Boolean);return[{id:h,name:j,type:_,colors:b,textStyles:C,spacingSections:A.map((e=>Object.assign(Object.assign({},e),{spacingTokens:(0,d.sortArrayOfObjectsByPropertyName)(e.spacingTokens,"value")}))),remPreferences:O(y,U),parentStyleguideToInheritRemPreferences:T(y,U),componentSections:I,connectedComponents:N,localConnectedComponents:P,isMember:L,isOrganizationBarrel:(0,o.isOrganizationProject)(u),dimensionSuffix:D,densityScale:R},...U.map(((e,t)=>({id:e._id,name:e.name,type:e.type,colors:e.colors,textStyles:e.textStyles,spacingSections:e.spacingSections.map((e=>Object.assign(Object.assign({},e),{spacingTokens:(0,d.sortArrayOfObjectsByPropertyName)(e.spacingTokens,"value")}))),remPreferences:O(e.remPreferences,U.slice(t+1)),componentSections:e.componentSections,connectedComponents:e.connectedComponents,localConnectedComponents:e.localConnectedComponents,isMember:(0,l.default)(e,v),isOrganizationBarrel:(0,o.isOrganizationProject)(e),dimensionSuffix:e.dimensionSuffix,densityScale:e.densityScale})))]},navigateToWorkspace:function(e={}){const t=g(e);setTimeout((()=>c.default.history.push(t)),4)},canUploadDesigns:function({uid:e,pid:t}){const a=h({pid:t});if(!a)return null;const n=a.users.find((({user:t})=>t._id===e));if(!n)return!1;if((0,o.isOrganizationProject)(a))return["king","queen","rook"].includes(n.role);const i=a.users.find((e=>"owner"===e.role));return!!i&&("free"!==i.user.paymentPlan||"owner"===n.role)},navigateToBarrel:function(e,t){const a=(0,r.urlResolve)(e,{url:{bid:t}});c.default.history.push(a)},reloadCurrentPage:function(){const{href:e}=window.location;setTimeout((()=>{c.default.history.replace(e)}),4)},findNoteType:function(e,t){if(!t)return u.default.None;const{noteTypes:a=[]}=h({pid:e})||{};return a.find((e=>e._id===t))||u.default.None},findNoteTypeByName:function(e,t){if(!t)return u.default.None;const{noteTypes:a=[]}=h({pid:e})||{};return a.find((e=>e.name===t))||u.default.None},noteTypeExists:function(e,t){if(!t)return!1;const{noteTypes:a=[]}=h({pid:e})||{};return a.some((e=>e._id===t))},isOnboardingProject:m,onboardingProjectExists:function(){const{projects:e}=n.default.ProjectsDataStore.getState();return Object.values(e).some((e=>m(e)))}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(264),i=a(100),s=a(349),r=a(340);function o(e,{pid:t}={}){let a=null!=e?e:n.default.BarrelStore.getState().organizationId;if(!a&&t&&(a=function(e){const{organizationProjects:t}=n.default.OrganizationStore.getState();for(const[a,n]of Object.entries(t))if(n.includes(e))return a;return null}(t)),!a)return null;const{organizations:i}=n.default.OrganizationStore.getState();return i.find((e=>e._id===a))}function d(e){var t;const a=null!=e?e:n.default.BarrelStore.getState().organizationId;if(!a)return null;const{organizations:i}=n.default.OrganizationStore.getState();return null===(t=i.find((({_id:e})=>e===a)))||void 0===t?void 0:t.members}function l(e){return o(null!=e?e:n.default.SpaceStore.getState().selectedOrganizationId).sections.filter((({type:e})=>"individual"!==e)).map((({_id:e})=>e))}function c(e){const{organizationProjects:t}=n.default.OrganizationStore.getState(),{projects:a}=n.default.ProjectsDataStore.getState(),i=t[e];return null==i?void 0:i.map((e=>a[e]))}function u(e){const{organizations:t,organizationProjects:a}=n.default.OrganizationStore.getState();for(const[n,i]of Object.entries(a))if(i.includes(e)){const a=t.find((e=>e._id===n));if(a&&a.sections){const t=a.sections.find((t=>t.projects.find((t=>t===e))));if(t)return t}}return null}function p({itemIds:e,visibleItems:t,visibleTargetIndex:a,firstDroppableIndex:n=0}){let i;return t.length<=n?e.length:a===n?(i=t[a],e.indexOf(i._id)):(i=t[a-1],e.indexOf(i._id)+1)}function f(e,t){const{showArchivedProjects:a}=n.default.SpaceStore.getState(),s=o(e).sections.find((e=>e._id===t)),r=c(e);return s.projects.map((e=>r.find((t=>t._id===e&&(a||"archived"!==t.status))))).filter(i.exists)}const S={getOrganization:o,getOrganizationMembers:d,getOrganizationMember:function(e,t){const a=d(e);return a?a.find((({user:e})=>e._id===t)):null},getOrganizationProjectsWithLookup:function({oid:e,archivedProjectsVisible:t}){const{organizationProjects:a}=n.default.OrganizationStore.getState(),{projects:i}=n.default.ProjectsDataStore.getState(),s=a[e];if(s)return s.reduce(((e,a)=>t||"archived"!==i[a].status?(e.projects.push(i[a]),e.lookup[a]=i[a],e):e),{projects:[],lookup:{}})},getOrganizationProjects:c,getOrganizationStyleguides:function(e){const{organizationStyleguides:t}=n.default.OrganizationStore.getState(),{styleguides:a}=n.default.StyleguidesDataStore.getState(),i=t[e];return null==i?void 0:i.map((e=>a[e]))},getOrganizationWorkflowStatus:function(e,t){const{organizations:a}=n.default.OrganizationStore.getState(),{workflowStatuses:i}=a.find((({id:t})=>t===e))||{};return null==i?void 0:i.find((({_id:e})=>e===t))},getOrganizationProfile:function(e){const{organizationProfiles:t}=n.default.OrganizationStore.getState();return t[e]},getCollapsableSectionIds:l,getCollapsedSectionIds:function(e){const{collapsedSections:t}=n.default.SpaceStore.getState();return l(e).filter((e=>t[e]))},getExpandedSectionIds:function(e){const{collapsedSections:t}=n.default.SpaceStore.getState();return l(e).filter((e=>!t[e]))},findSectionIndicesOfProjects:function(e,t){const{sections:a}=o(e);return t.map((e=>{const t=a.find((t=>t.projects.includes(e))),n=t.projects.findIndex((t=>t===e));return{pid:e,oseid:t._id,index:n}}))},findProjectOrganizationSection:u,findProjectOrganizationSectionId:function(e){var t;const a=u(e);return null!==(t=null==a?void 0:a._id)&&void 0!==t?t:null},getVisibleProjectsOfSection:f,whereToDropSectionInWorkspace:function({oid:e,index:t}){const{sections:a,sectionIds:n}=o(e);return p({itemIds:n,visibleItems:a,visibleTargetIndex:t,firstDroppableIndex:1})},whereToDropProjectInSection:function({oid:e,oseid:t,index:a}){const n=o(e).sections.find((e=>e._id===t)),i=f(e,t),s=void 0===a?i.length:a;return p({itemIds:n.projects,visibleItems:i,visibleTargetIndex:s})},hasArchivedProjects:function(e){const t=c(e);return!!t&&t.some((e=>"archived"===e.status))},isOrganizationFrozen:function(){const e=o();return!!e&&"frozen"===e.status},isProjectLimitExceeded:function(e){var t,a;const{organizations:i}=n.default.OrganizationStore.getState(),{paymentPlan:r,userId:o}=n.default.UserStore.getState(),{config:d}=n.default.AppStore.getState(),{plans:l}=d,u=i.find((t=>t._id===e));if("suspended"===(null==u?void 0:u.status))return!1;const p=u?l.find((e=>e.id===u.paymentPlan)):r,f="user"===e,S=null!==(t=c(e))&&void 0!==t?t:[],h=u&&u.projectLimit?u.projectLimit:null===(a=p)||void 0===a?void 0:a.projectLimit,E=(f?S.filter((e=>{const t=e.users.some((({user:{_id:e},role:t})=>e===o&&"owner"===t)),a=e.kind===s.default.Onboarding;return t&&!a})):S).filter((e=>"archived"!==e.status));return h>0&&E.length>=h},findMostRecentOrganizationProfile:function({organizations:e,organizationProfiles:t}={}){const{organizationProfiles:a,organizations:s}=n.default.OrganizationStore.getState(),o=null!=t?t:a,d=(null!=e?e:s).map((({_id:e})=>o[e]?Object.assign({oid:e},o[e]):null)).filter(i.exists),l=d.filter((e=>"king"===e.role)).reverse(),c=d.filter((e=>e.invitedAt)).sort(((e,t)=>r.sortBy.date(e,t,(e=>e.invitedAt)))),u=l.concat(c);if(u.length)return u[0]}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(324),i=a(738),s=a(264);function r(e={}){var t,a;const n=null!==(a=null!==(t=e.selectedOrganizationId)&&void 0!==t?t:e.oid)&&void 0!==a?a:s.default.SpaceStore.getState().selectedOrganizationId;return Object.assign(Object.assign({},e),{oid:n})}const o={getBarrels(e){s.default.dispatcher.dispatch({type:n.default.GET_BARRELS,oid:e})},requestInvite(e,t){s.default.dispatcher.dispatch({type:n.default.REQUEST_INVITE,id:e,container:t})},addOrganization(e){s.default.dispatcher.dispatch({type:n.default.ADD_ORGANIZATION,organization:e})},addOrganizationWorkflowStatus(e){const{oid:t,workflowStatusData:a,syncWithApi:i=!1}=r(e);s.default.dispatcher.dispatch({type:n.default.ADD_ORGANIZATION_WORKFLOW_STATUS,oid:t,workflowStatusData:a,syncWithApi:i})},updateOrganization(e,t){s.default.dispatcher.dispatch({type:n.default.UPDATE_ORGANIZATION,id:e,organization:t})},updateOrganizationSubscription({oid:e,plan:t,oldPlan:a,isReactivation:i,toastContainer:r,onSuccess:o,onError:d,syncWithApi:l}){s.default.dispatcher.dispatch({type:n.default.UPDATE_ORGANIZATION_SUBSCRIPTION,oid:e,plan:t,oldPlan:a,isReactivation:i,toastContainer:r,onSuccess:o,onError:d,syncWithApi:l})},updateOrganizationWorkflowStatus(e){const{oid:t,workflowStatusId:a,workflowStatusData:o,syncWithApi:d=!1}=r(e),l=d?i.default.getOrganizationWorkflowStatus(t,a):{};s.default.dispatcher.dispatch({type:n.default.UPDATE_ORGANIZATION_WORKFLOW_STATUS,oid:t,workflowStatusId:a,workflowStatusData:o,oldWorkflowStatusData:l,syncWithApi:d})},updateOrganizationWorkflowStatusName({workflowStatusId:e,name:t,syncWithApi:a}){this.updateOrganizationWorkflowStatus({workflowStatusId:e,workflowStatusData:{name:t},syncWithApi:a})},updateOrganizationWorkflowStatusColor({workflowStatusId:e,color:t,syncWithApi:a}){this.updateOrganizationWorkflowStatus({workflowStatusId:e,workflowStatusData:{color:t},syncWithApi:a})},updateOrganizationMemberRole({oid:e,uid:t,mid:a,role:i}){s.default.dispatcher.dispatch({type:n.default.UPDATE_ORGANIZATION_MEMBER_ROLE,oid:e,mid:a,uid:t,role:i})},removeOrganization(e){s.default.dispatcher.dispatch({type:n.default.REMOVE_ORGANIZATION,id:e})},deleteOrganizationWorkflowStatus(e){const{oid:t,workflowStatusId:a,syncWithApi:o=!1}=r(e),d=o?i.default.getOrganizationWorkflowStatus(t,a):{};s.default.dispatcher.dispatch({type:n.default.DELETE_ORGANIZATION_WORKFLOW_STATUS,oid:t,workflowStatusId:a,oldWorkflowStatusData:d,syncWithApi:o})},getOrganizationSectionsSuccess(e,t){s.default.dispatcher.dispatch({type:n.default.GET_ORGANIZATION_SECTIONS_SUCCESS,sections:e,oid:t})},organizationMembersRequested(e){s.default.dispatcher.dispatch({type:n.default.ORGANIZATION_MEMBERS_REQUESTED,oid:e})},getOrganizationMembersSuccess(e){s.default.dispatcher.dispatch({type:n.default.GET_ORGANIZATION_MEMBERS_SUCCESS,organizationMembers:e})},getOrganizationMembersFailed(e,t){s.default.dispatcher.dispatch({type:n.default.GET_ORGANIZATION_MEMBERS_FAILED,oid:e,error:t})},addOrganizationProfile(e,t){s.default.dispatcher.dispatch({type:n.default.ADD_ORGANIZATION_MEMBER_PROFILE,organizationProfile:e,oid:t})},addBarrelToFocus(e){var t;const{mid:a,bid:i,barrelType:o,shouldPopOldestBarrel:d,oid:l,syncWithApi:c}=r(e),{focusedBarrels:u}=s.default.OrganizationStore.getState();let p;(null===(t=u[l])||void 0===t?void 0:t.length)&&([p]=u[l]),s.default.dispatcher.dispatch({type:n.default.ADD_BARREL_TO_FOCUS,oid:l,mid:a,bid:i,barrelType:o,poppedBarrel:p,shouldPopOldestBarrel:d,syncWithApi:c})},addBarrelToFocusSuccess(){s.default.dispatcher.dispatch({type:n.default.ADD_BARREL_TO_FOCUS_SUCCESS})},removeBarrelFromFocus(e){const{mid:t,bid:a,barrelType:i,poppedBarrel:o,oid:d,syncWithApi:l}=r(e);s.default.dispatcher.dispatch({type:n.default.REMOVE_BARREL_FROM_FOCUS,oid:d,mid:t,bid:a,barrelType:i,poppedBarrel:o,syncWithApi:l})},unpinBarrelFromFocus(e){const{mid:t,bid:a,barrelType:i,oid:o,syncWithApi:d}=r(e);s.default.dispatcher.dispatch({type:n.default.UNPIN_BARREL_FROM_FOCUS,oid:o,mid:t,bid:a,barrelType:i,syncWithApi:d})},unpinBarrelFromFocusSuccess({bid:e}){s.default.dispatcher.dispatch({type:n.default.UNPIN_BARREL_FROM_FOCUS_SUCCESS,bid:e})},repinBarrelToFocus({oid:e,bid:t}){s.default.dispatcher.dispatch({type:n.default.REPIN_BARREL_TO_FOCUS,oid:e,bid:t})},hitPinLimit({pinnedAnyway:e,focusCountLimit:t}){s.default.dispatcher.dispatch({type:n.default.HIT_PIN_LIMIT,pinnedAnyway:e,focusCountLimit:t})},removeUnjoinedBarrels({oid:e,mid:t}){const a=i.default.getOrganizationProjects(e),r=i.default.getOrganizationStyleguides(e),o=a.filter((({users:e})=>e.some((({user:e})=>e._id===t)))).map((({_id:e})=>e)),d=r.filter((({users:e})=>e.some((({user:e})=>e._id===t)))).map((({_id:e})=>e));s.default.dispatcher.dispatch({type:n.default.REMOVE_UNJOINED_BARRELS,oid:e,remainingProjects:o,remainingStyleguides:d})},updateMemberTags({oid:e,mid:t,operation:a,tags:i}){s.default.dispatcher.dispatch({type:n.default.UPDATE_MEMBER_TAGS,oid:e,mid:t,operation:a,tags:i})},addProjectSection(e){const{oid:t,index:a,sectionData:o,shouldCalculateActualIndex:d,dialogDismissParams:l,syncWithApi:c,bulkOperation:u=!1}=r(e),{sections:p}=i.default.getOrganization(t);let f;c&&(f=i.default.findSectionIndicesOfProjects(t,o.projects));let S=a;if(void 0===S){const e=p.findIndex((({projects:e})=>e.includes(o.projects[0])));S=0===e?p.length:e+1}d&&(S=i.default.whereToDropSectionInWorkspace({oid:t,index:S})),s.default.dispatcher.dispatch({type:n.default.ADD_PROJECT_SECTION,oid:t,index:S,sectionData:o,oldIndices:f,dialogDismissParams:l,syncWithApi:c,bulkOperation:u})},addProjectSectionId(e){const{oid:t,index:a,oseid:i}=r(e);s.default.dispatcher.dispatch({type:n.default.ADD_PROJECT_SECTION_ID,oid:t,index:a,oseid:i})},updateProjectSection(e){const{oid:t,oseid:a,sectionData:o,syncWithApi:d=!1}=r(e);let l;if(d){l=i.default.getOrganization(t).sections.find((e=>e._id===a))}s.default.dispatcher.dispatch({type:n.default.UPDATE_PROJECT_SECTION,oid:t,oseid:a,sectionData:o,oldSectionData:l,syncWithApi:d})},removeProjectSection(e){const{oid:t,oseid:a,syncWithApi:o=!1}=r(e);let d,l;if(o){const e=i.default.getOrganization(t);l=e.sections.findIndex((e=>e._id===a)),d=e.sections[l]}s.default.dispatcher.dispatch({type:n.default.REMOVE_PROJECT_SECTION,oid:t,oseid:a,oldSectionIndex:l,oldSectionData:d,syncWithApi:o})},updateProjectSectionOrder(e){const{oid:t,oseid:a,index:o,shouldCalculateActualIndex:d,dialogDismissParams:l,syncWithApi:c=!1,source:u}=r(e);let p;if(c){const{sections:e}=i.default.getOrganization(t);p=e.findIndex((e=>e._id===a))}let f=o;d&&(f=i.default.whereToDropSectionInWorkspace({oid:t,index:o})),s.default.dispatcher.dispatch({type:n.default.UPDATE_PROJECT_SECTION_ORDER,oid:t,oseid:a,index:f,oldSectionIndex:p,dialogDismissParams:l,syncWithApi:c,source:u})},updateProjectOrder(e){const{oid:t,oseid:a,projects:o,index:d,shouldCalculateActualIndex:l,dialogDismissParams:c,syncWithApi:u=!1,bulkOperation:p=!1}=r(e);let f,S=[];if(u){const{sections:e}=i.default.getOrganization(t);f=a===e[0]._id,S=i.default.findSectionIndicesOfProjects(t,o)}let h=d;l&&(h=i.default.whereToDropProjectInSection({oid:t,oseid:a,index:d})),s.default.dispatcher.dispatch({type:n.default.UPDATE_PROJECT_ORDER,oid:t,oseid:a,projects:o,index:h,oldIndices:S,isDefaultSection:f,dialogDismissParams:c,syncWithApi:u,bulkOperation:p})},addSectionLink(e){const{oid:t,oseid:a,linkData:i,syncWithApi:o=!1}=r(e);s.default.dispatcher.dispatch({type:n.default.ADD_SECTION_LINK,oid:t,oseid:a,linkData:i,syncWithApi:o})},updateSectionLink(e){const{oid:t,oseid:a,oselid:o,linkData:d,syncWithApi:l=!1}=r(e);let c;if(l){c=i.default.getOrganization(t).sections.find((({_id:e})=>e===a)).links.find((e=>e._id===o))}s.default.dispatcher.dispatch({type:n.default.UPDATE_SECTION_LINK,oid:t,oseid:a,oselid:o,linkData:d,oldLink:c,syncWithApi:l})},removeSectionLink(e){const{oid:t,oseid:a,oselid:o,syncWithApi:d=!1}=r(e);let l;if(d){l=i.default.getOrganization(t).sections.find((({_id:e})=>e===a)).links.find((e=>e._id===o))}s.default.dispatcher.dispatch({type:n.default.REMOVE_SECTION_LINK,oid:t,oseid:a,oselid:o,oldLink:l,syncWithApi:d})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{TeamPlanContent:()=>n.TeamPlanContent,OrganizationPlanContent:()=>n.OrganizationPlanContent,EnterprisePlanContent:()=>n.EnterprisePlanContent});var n=a(741)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{TeamPlanContent:()=>c,OrganizationPlanContent:()=>u,EnterprisePlanContent:()=>p});var n=a(93),i=a(140),s=a(159),r=a(99),o=a(105);a(742);function d({children:e,newFeature:t}){return(0,n.h)("li",{class:(0,r.default)({newFeature:t})},(0,n.h)(i.default,{color:"var(--gandalf)"}),e)}function l(){return(0,n.h)("div",{class:"seatInfoTooltip"},(0,n.h)("div",{class:"tooltipContainer"},(0,n.h)("span",null,"💁‍♀️ "),(0,n.h)("p",null,"A seat is required to publish designs, access technical specs and download assets. Viewing a project and reading/adding notes does not require a seat.")))}function c({projectLimit:e,selectedUnitPrice:t,offer:a}){const i=!!(null==a?void 0:a.percentage),o=(null==a?void 0:a.projectLimit)&&a.projectLimit>e?a.projectLimit:void 0;return(0,n.h)("div",{class:"planContent"},(0,n.h)(s.default,{class:"planLogo",asset:"/img/icTeamPlan.png"}),(0,n.h)("h2",null,"Team"),(0,n.h)("p",{className:"description"},"Best for small teams"),(0,n.h)("p",{className:(0,r.default)("priceText",{hasDiscount:i})},(0,n.h)("span",{className:"unitPriceWrapper"},(0,n.h)("span",{className:"monthlyUnitPrice"},"$",t," "),(0,n.h)("span",{className:"seatText"},"seat*",(0,n.h)(l,null)),"/mo"),i&&(0,n.h)("a",null,"  Offer applied")),(0,n.h)("ul",null,o?(0,n.h)(d,{newFeature:!!a},(0,n.h)("s",null,e)," ",(0,n.h)("a",null,o)," Projects"):(0,n.h)(d,{newFeature:!!a},e," Projects"),(0,n.h)(d,null,"Flows (up to 6 projects)"),(0,n.h)(d,{newFeature:!!a},"Team Workspace"),(0,n.h)(d,{newFeature:!!a},"User Management"),(0,n.h)(d,null,"Unlimited Reviewers"),(0,n.h)(d,{newFeature:!!a},"Unlimited Version History")))}function u({minUserCount:e,selectedUnitPrice:t}){return(0,n.h)("div",{class:"planContent"},(0,n.h)(s.default,{class:"planLogo",asset:"/img/icOrganizationPlan.png"}),(0,n.h)("h2",null,"Organization"),(0,n.h)("p",{class:"description"},"Best for medium size teams"),(0,n.h)("p",{class:"priceText"},(0,n.h)("span",{class:"monthlyUnitPrice"},"$",t," "),(0,n.h)("span",{class:"seatText"},"seat*",(0,n.h)(l,null)),"/mo",(0,n.h)("br",null),(0,n.h)("span",{class:"minUserCount"},e," seat minimum")),(0,n.h)("h4",null,"Everything in Team, plus;"),(0,n.h)("ul",null,(0,n.h)(d,null,"Unlimited Projects"),(0,n.h)(d,null,"Flows (up to 12 projects)"),(0,n.h)(d,null,"Advanced User Permissions"),(0,n.h)(d,null,"Jira Server and Data Center Integration"),(0,n.h)(d,null,"Priority Support")))}function p(){return(0,n.h)("div",{class:"planContent"},(0,n.h)(s.default,{class:"planLogo",asset:"/img/icEnterprisePlan.png"}),(0,n.h)("h2",null,"Enterprise"),(0,n.h)("p",{class:"description"},"Best for large teams"),(0,n.h)("p",{className:"priceText"},(0,n.h)("img",{src:(0,o.imageUrl)("img/icTalk.svg")}),(0,n.h)("span",{className:"minUserCount"},"Custom Pricing")),(0,n.h)("h4",null,"Everything in Organization, plus;"),(0,n.h)("ul",null,(0,n.h)(d,null,"Flows (unlimited)"),(0,n.h)(d,null,"Flows Boards"),(0,n.h)(d,null,"Single Sign on (SSO)"),(0,n.h)(d,null,"SCIM"),(0,n.h)(d,null,"Invoiced Billing"),(0,n.h)(d,null,"Dedicated Success Manager"),(0,n.h)(d,null,"24hr Support SLA")))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(744)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(93),i=a(140),s=a(745),r=a(7),o=a(736),d=a(106),l=a(99),c=a(105),u=a(91),p=a(746);function f({plans:e,period:t}){const a=function(e){const t=(0,o.getActivePlan)(e,r.PlanGroup.FREE,r.BillingPeriod.ETERNAL),a=(0,o.getActivePlan)(e,r.PlanGroup.TEAM,r.BillingPeriod.ANNUALLY),n=(0,o.getActivePlan)(e,r.PlanGroup.TEAM,r.BillingPeriod.MONTHLY),i=(0,o.getActivePlan)(e,r.PlanGroup.ORGANIZATION,r.BillingPeriod.ANNUALLY),s=(0,o.getActivePlan)(e,r.PlanGroup.ORGANIZATION,r.BillingPeriod.MONTHLY),d=(0,o.getActivePlan)(e,r.PlanGroup.ENTERPRISE,r.BillingPeriod.ANNUALLY);return{free:{monthly:t,annual:t},team:{annual:a,monthly:n},organization:{annual:i,monthly:s},enterprise:{annual:d,monthly:d}}}(e),f=function(e,t){const a=e.free[t],i=e.team[t],s=e.organization[t],f=e.enterprise[t];return{sidebar:(0,n.h)("div",{class:(0,l.default)(p.default.row,p.default.header,p.default.border)},(0,n.h)("h2",null,"Compare features")),body:(0,n.h)("div",{class:(0,l.default)(p.default.row,p.default.header,p.default.border)},[a,i,s].map((e=>{const t=`$${(0,o.formatPriceForUI)(e.price/(e.period===r.BillingPeriod.ANNUALLY?12:1))}`,a=0===e.price?"Always free":"seat/month",i=(0,n.h)("div",{class:p.default.subText},a,e.quantity>1?(0,n.h)(n.Fragment,null,(0,n.h)("br",null),e.quantity," seat minimum"):""),s=-1===e.projectLimit?"Unlimited projects":(0,d.pluralize)(e.projectLimit,"Project");return(0,n.h)("div",{key:e.id,class:p.default.cell},(0,n.h)("h3",null,e.name),(0,n.h)("h2",null,t),i,(0,n.h)("div",{class:p.default.smallText},s))})),(0,n.h)("div",{class:p.default.cell},(0,n.h)("h3",null,f.name),(0,n.h)("img",{src:(0,c.imageUrl)("img/icTalk.svg")}),(0,n.h)("div",{class:p.default.subText},(0,n.h)("a",{href:"mailto:enterprise@zeplin.io?subject=Interested in Zeplin Enterprise Plan",target:"_blank",rel:"noopener noreferrer",onClick:u.sendEnterpriseInquiry},"Contact Us")),(0,n.h)("div",{class:p.default.smallText},"Custom Pricing")))}}(a,t),S=function(e){const t=[],a=[];for(const s of e){t.push((0,n.h)("div",{class:(0,l.default)(p.default.row,p.default.border)},(0,n.h)("h3",null,s.label))),a.push((0,n.h)("div",{class:(0,l.default)(p.default.row,p.default.empty,p.default.border)}));for(const e of s.features)t.push((0,n.h)("div",{class:p.default.row},(0,n.h)("li",{class:(0,l.default)({[p.default.comingSoon]:e.comingSoon,[p.default.hasList]:e.values.some((e=>Array.isArray(e)))})},e.label))),a.push((0,n.h)("div",{class:(0,l.default)(p.default.row,p.default.border)},e.values.map(((e,t)=>"boolean"==typeof e?(0,n.h)("div",{key:t,class:p.default.cell},e&&(0,n.h)(i.default,{color:"var(--cornflower-blue)"})):Array.isArray(e)?(0,n.h)("div",{key:t,class:p.default.cell},(0,n.h)("ul",null,e.map((e=>(0,n.h)("li",{key:e},"• ",e))))):(0,n.h)("div",{key:t,class:p.default.cell},e)))))}return{sidebar:t,body:a}}(s.default);return(0,n.h)("div",{class:p.default.planComparison},(0,n.h)("div",{class:p.default.sidebar},f.sidebar,S.sidebar),(0,n.h)("div",{class:p.default.body},f.body,S.body))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=[{label:"Handoff+",features:[{label:"Show specs",values:[!0,!0,!0,!0]},{label:"Generate assets",values:[!0,!0,!0,!0]},{label:"Generate code snippets",values:[!0,!0,!0,!0]},{label:"Pop out designs",values:[!0,!0,!0,!0]}]},{label:"Collaboration",features:[{label:"Screen Variants",values:["2 variant groups","Unlimited","Unlimited","Unlimited"]},{label:"Screen version history, commit messages",values:["30 days","Unlimited","Unlimited","Unlimited"]},{label:"Sections and tags to manage screens",values:[!0,!0,!0,!0]},{label:"Notes and comments",values:[!0,!0,!0,!0]}]},{label:"Styleguides",features:[{label:"Number of styleguides",values:["4 styleguides","12 styleguides","Unlimited","Unlimited"]},{label:"Colors, Text Styles",values:[!0,!0,!0,!0]},{label:"Number of Components",values:["99","Unlimited","Unlimited","Unlimited"]},{label:"Connected Components",values:[!0,!0,!0,!0]},{label:"Spacing",values:[!0,!0,!0,!0]}]},{label:"Open Platform",features:[{label:"Slack integration",values:[!0,!0,!0,!0]},{label:"Trello integration",values:[!0,!0,!0,!0]},{label:"Microsoft team integration",values:[!0,!0,!0,!0]},{label:"Jira Cloud integration",values:[!0,!0,!0,!0]},{label:"Jira Server and Data Center integrations",values:[!1,!1,!0,!0]},{label:"API and Webhook",values:[!0,!0,!0,!0]}]},{label:"Workspace management",features:[{label:"Workspace to manage projects",values:[!1,!0,!0,!0]},{label:"Project sections and statuses",values:[!1,!0,!0,!0]},{label:"Pin projects",values:[!1,!0,!0,!0]},{label:"Invite multiple users by tag",values:[!1,!1,!0,!0]},{label:"Content ownership",values:[!1,!1,!1,!0]},{label:"Multiple teams",values:[!1,!1,!1,!0]},{label:"Private projects",values:[!1,!1,!0,!0],comingSoon:!0}]},{label:"User management",features:[{label:"Dashboard to manage users",values:[!1,!0,!0,!0]},{label:"User permissions",values:[!1,["Admin","Editor"],["Admin","Editor","Developer"],["Admin","Editor","Developer"]]},{label:"Reviewer (free)",values:[!1,"Unlimited","Unlimited","Unlimited"]},{label:"Restricted members",values:[!1,!0,!0,!0]},{label:"Priority support",values:[!1,!1,!0,!0]},{label:"SCIM",values:[!1,!1,!1,!0]},{label:"Domain Capture",values:[!1,!1,!1,!0],comingSoon:!0}]}]},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={planComparison:"E6yMjyd2_DD6wn5stBn3",row:"UeuSRP_m26MWGUjhCUME",border:"TtLewa2c2kz9W_aurckG",empty:"DvwTfAUaoYsP6J89iLBF",sidebar:"cnjBCLhtLMYXhenAgsrw",comingSoon:"FvWreriDLaYZUDcAZdGV",hasList:"dy8DsoDcskERY1zA10uN",body:"dflqdo3snw66f0y4vLF5",cell:"GAQoWpdt2Sm03_EHZA6z",header:"IFB3NuvLzcUgQ7TkEjhA",subText:"TjfmtrV6IN0C2skHPYku",smallText:"ccaKw7vddhykSrJx7kXf"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(748)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(11),s=a(91);a(749);function r(){return(0,n.h)("div",{class:"planChooserFAQ"},(0,n.h)("h2",null,"FAQ"),(0,n.h)("h3",null,"Who requires a seat in Zeplin?"),(0,n.h)("p",null,"A seat is required to publish designs, access technical specs and download assets. Viewing a project and reading/adding notes is available for Reviewers and does not require a seat."),(0,n.h)("h3",null,"Why do developers require a seat?"),(0,n.h)("p",null,"Zeplin provides capabilities much needed by developers including clarity on “finalized” designs, an accessible design workspace friendly to non-designers, added structure to design screens and of course tailored technical specs built by developers for developers."),(0,n.h)("h3",null,"As a designer, do I have to pay for developers?"),(0,n.h)("p",null,"If you would like to divide billing between designers and developers, we can customize our Zeplin Enterprise plan to meet your needs,"," ",(0,n.h)("a",{href:"mailto:enterprise@zeplin.io",target:"_blank",onClick:s.sendEnterpriseInquiry},"click here")," ",'to contact our sales team."'),(0,n.h)("h3",null,"How does Zeplin work with Figma?"),(0,n.h)("p",null,"Figma is better together with Zeplin, learn more about how leading design teams use"," ",(0,n.h)("a",{href:`${i.WEB_URL}/figma`,target:"_blank"},"Figma & Zeplin together"),"."))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default,NotificationSettingsDialog:()=>i.default});var n=a(752),i=a(782)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(753),s=a(535),r=a(264);class o extends n.Component{static getStores(){return[r.default.AppStore]}static calculateState(){const{showNotificationSettingsDialog:e}=r.default.AppStore.getState();return{showNotificationSettingsDialog:e}}render(){const{showNotificationSettingsDialog:e}=this.state;if(e)return(0,n.h)(i.default,Object.assign({},this.props))}}const d=(0,s.default)(o)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(93),i=a(707),s=a(754),r=a(7),o=a(99),d=a(781);const l=function({dialogSource:e,onClose:t}){const a=e===r.AppType.MAC_APP;return(0,n.h)(i.default,{class:(0,o.default)(d.default.notificationSettingsDialog,{[d.default.macApp]:a}),containerClass:(0,o.default)(d.default.notificationSettingsDialogWrapper,{[d.default.macApp]:a}),width:400,positiveButtonText:"Done",showBackdrop:!0,hideFooter:a,isDismissible:!a,onClose:t},(0,n.h)(s.default,{isSourceMacApp:a}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(755)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(93),i=a(535),s=a(264),r=a(651),o=a(120),d=a(99),l=a(398),c=a(106),u=a(185),p=a(756),f=a(168),S=a(759),h=a(223),E=a(777),g=a(559),O=a(707),T=a(340),m=a(780);const _={isDesktopNotificationErrorVisible:!1},b="$selectAll";class C extends n.Component{constructor(){super(...arguments),this.state=_,this.preferencesChangeSet={},this.preferencesUpdateTimeout=null,this.sortJoinedOrganizationProjects=e=>{const{organizations:t}=e,a=t.map((e=>Object.assign(Object.assign({},e),{projects:e.projects.sort(T.sortBy.name)}))).sort(T.sortBy.name);return Object.assign(Object.assign({},e),{organizations:a})},this.fetchJoinedOrganizationProjects=()=>{o.getJoinedOrganizationProjects().then((e=>{this.setState({joinedOrganizationProjects:this.sortJoinedOrganizationProjects(e)})})).catch((()=>{this.setState({projectsFetchError:!0})}))},this.getJoinedProjects=()=>{const{joinedOrganizationProjects:e}=this.state;if(!e)return[];const{organizations:t,personalWorkspaceProjects:a}=e;return[...a,...t.map((({projects:e})=>e)).flat()]},this.showDesktopNotificationErrorDialog=()=>{this.setState({isDesktopNotificationErrorVisible:!0})},this.closeDesktopNotificationErrorDialog=()=>{this.setState({isDesktopNotificationErrorVisible:!1})},this.matchFollowDropdownItem=(e,t)=>(0,l.calculateMatchingScore)({searchTerm:(0,c.normalizeAndLowerCase)(t),target:(0,c.normalizeAndLowerCase)(e.name)}),this.handleToggleDesktopNotification=()=>{const{isDesktopNotificationEnabled:e}=this.state;"default"===Notification.permission?Notification.requestPermission((e=>{r.default.setDesktopNotifications("granted"===e)})):"granted"===Notification.permission?r.default.setDesktopNotifications(!e):"denied"===Notification.permission&&this.showDesktopNotificationErrorDialog()},this.handleToggleEmailNotification=()=>{const{isEmailNotificationEnabled:e}=this.state;r.default.updateEmailNotifications(!e)},this.handleToggleFollowProjectAction=(e,t)=>{const{emailNotificationSettings:{followedProjects:a}}=this.state;if("follow"!==t)r.default.updateFollowedProjectNotifications({unfollowedProjectIds:e});else{const t=e.filter((e=>!a.has(e)));r.default.updateFollowedProjectNotifications({followedProjectIds:t})}},this.handleToggleFollowProject=(e,t)=>{const{emailNotificationSettings:{followedProjects:a}}=this.state;if(e===b){const e=!t.some((e=>!a.has(e._id)))?"unfollow":"follow";return void this.handleToggleFollowProjectAction(t.map((e=>e._id)),e)}const n=a.has(e)?"unfollow":"follow";this.handleToggleFollowProjectAction([e],n)},this.handleDropdownStateChange=e=>{const{projectsFetchError:t}=this.state;t&&e&&(this.setState({projectsFetchError:!1}),this.fetchJoinedOrganizationProjects())},this.createEmailPreferenceToggleHandler=e=>t=>{this.preferencesUpdateTimeout&&clearTimeout(this.preferencesUpdateTimeout),this.preferencesChangeSet[e]=t.target.checked,this.preferencesUpdateTimeout=setTimeout((()=>{r.default.setEmailNotificationPreferences({preferences:this.preferencesChangeSet,syncWithApi:!0}),this.preferencesChangeSet={}}),1e3)},this.renderFollowDropdownItem=({_id:e,name:t,type:a})=>{const{emailNotificationSettings:{followedProjects:i}}=this.state;return(0,n.h)(h.default.Item,{class:m.default.followProjectDropdownItem,key:e,value:e,selected:i.has(e)},(0,n.h)("div",{class:m.default.projectItem},(0,n.h)("span",{class:(0,d.default)(m.default.name,"ellipsis")},t),",",(0,n.h)("span",{class:m.default.type},(0,u.getPlatformString)(a))))},this.renderWorkspaceDropdownGroup=({_id:e,name:t,projects:a},i)=>{const s=a.filter((({_id:e})=>i.has(e)));return 0===s.length?null:(0,n.h)("div",{class:m.default.workspaceGroup,key:e},(0,n.h)("div",{class:m.default.workspaceItem},t),(0,n.h)("div",null,s.map(this.renderFollowDropdownItem)))},this.renderFollowDropdownItems=({items:e,filterValue:t})=>{const{emailNotificationSettings:{followedProjects:a},joinedOrganizationProjects:i}=this.state;if(!i)return null;const{personalWorkspaceProjects:s,organizations:r}=i,o=new Set(e.map((({_id:e})=>e))),d=e.every((e=>a.has(e._id)))?"Unselect":"Select",l=t?`${d} all search results`:`${d} all projects`;return(0,n.h)(n.Fragment,null,(0,n.h)(h.default.Item,{class:m.default.followProjectDropdownItem,key:b,value:b},(0,n.h)("div",{class:m.default.selectAllProjectsItem},(0,n.h)("span",null,l))),(0,n.h)(E.default,null),this.renderWorkspaceDropdownGroup({_id:"$personalWorkspace",name:"Personal Workspace",projects:s},o),r.map((e=>this.renderWorkspaceDropdownGroup(e,o))))},this.renderToggleItems=()=>{const{isDesktopNotificationEnabled:e,isEmailNotificationEnabled:t}=this.state,{isSourceMacApp:a}=this.props,i=[{text:"Send me desktop notifications",checked:e,onChange:this.handleToggleDesktopNotification},{text:"Send me email notifications",checked:t,onChange:this.handleToggleEmailNotification}];return a&&i.shift(),i.map((({text:e,checked:t,onChange:a})=>(0,n.h)("div",{key:e,class:m.default.toggleItem},(0,n.h)("span",null,e),(0,n.h)(p.default,{class:m.default.toggleSwitch,checked:t,onChange:a}))))},this.renderCheckboxItems=()=>{const{isEmailNotificationEnabled:e,emailNotificationSettings:{emailPreferences:{screensAdded:t,screensUpdated:a,commentReplies:i,commentMentions:s}}}=this.state;return[{title:"Screens added",description:"New screens added to projects",checked:!!t,onChange:this.createEmailPreferenceToggleHandler("screensAdded")},{title:"Screens updated",description:"Version added to a screen",checked:!!a,onChange:this.createEmailPreferenceToggleHandler("screensUpdated")},{title:"Comment replies",description:"Someone replied to a comment you created",checked:!!i,onChange:this.createEmailPreferenceToggleHandler("commentReplies")},{title:"Comment mentions",description:"Someone @ mentions you in a comment",checked:!!s,onChange:this.createEmailPreferenceToggleHandler("commentMentions")}].map((({title:t,description:a,checked:i,onChange:s})=>(0,n.h)("label",{key:t,class:(0,d.default)(m.default.checkboxItem,{[m.default.disabled]:!e})},(0,n.h)("div",{class:m.default.checkboxLabel},(0,n.h)("p",{class:m.default.checkboxLabelTitle},t),(0,n.h)("p",{class:m.default.checkboxLabelDescription},a)),(0,n.h)(f.default,{checked:i,onChange:s,disabled:!e}))))}}static getStores(){return[s.default.UserStore]}static calculateState(){const{isDesktopNotificationEnabled:e,isEmailNotificationEnabled:t,emailNotificationSettings:a}=s.default.UserStore.getState();return{isDesktopNotificationEnabled:e,isEmailNotificationEnabled:t,emailNotificationSettings:a}}componentDidMount(){this.fetchJoinedOrganizationProjects()}render(){const{isDesktopNotificationErrorVisible:e,isEmailNotificationEnabled:t,joinedOrganizationProjects:a,projectsFetchError:i}=this.state,{isSourceMacApp:s}=this.props;return(0,n.h)("div",{class:m.default.notificationSettingsContainer},(0,n.h)("div",{class:m.default.header},(0,n.h)("h2",{class:m.default.title},"Notification Settings")),(0,n.h)("div",{class:(0,d.default)(m.default.bodyWrapper,{[m.default.macApp]:s})},(0,n.h)("div",{class:m.default.body},(0,n.h)("div",{class:m.default.toggleSection},this.renderToggleItems()),(0,n.h)("div",{class:m.default.followSection},(0,n.h)("h3",{class:m.default.title},"Follow projects"),(0,n.h)("p",{class:m.default.description},"You will receive email notifications only from the projects you choose to follow"),(0,n.h)(S.default,{dropdownProps:{class:m.default.followProjectsDropdown,defaultLabel:"Select projects to follow",multiSelect:!0,disabled:!t,options:{class:m.default.followProjectsDropdownOptions,top:36},onDropdownStateChange:this.handleDropdownStateChange},filterInputProps:{class:m.default.followProjectsFilterInput,placeholder:"Search for a project",placeholderWidth:133,icon:(0,n.h)(g.default,{color:"var(--gandalf)"})},itemTypeName:"project",items:this.getJoinedProjects(),renderItems:this.renderFollowDropdownItems,matchItem:this.matchFollowDropdownItem,loading:!a&&!i,error:i?"We’re experiencing a problem here, our developers are on the case":void 0,errorViewClass:m.default.followProjectsDropdownErrorView,emptyText:"You haven’t joined any projects yet 🤷‍♀️",onChange:this.handleToggleFollowProject})),(0,n.h)("div",{class:m.default.emailSection},(0,n.h)("div",{class:m.default.descriptionSection},(0,n.h)("h3",{class:m.default.title},"Email Preferences"),(0,n.h)("p",{class:m.default.description},"You will receive emails of the following types from the projects you have joined")),this.renderCheckboxItems()))),e&&(0,n.h)(O.BasicOverlayDialog,{message:"You need to enable notifications from browser settings.",positiveButtonText:"OK",onPositiveButtonClick:this.closeDesktopNotificationErrorDialog,hideNegativeButton:!0}))}}const A=(0,i.default)(C)},,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(778)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(779);function i(){return(0,n.h)("div",{class:"dropdownItemSeparator"})}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={notificationSettingsContainer:"FEDjWNts7KRuItmteSUc",header:"R5ZHgZiEtuMA4tb4f4l1",bodyWrapper:"zGg2q0FDt_G0VAjAicaN",macApp:"XXoK5YlrnFzMrLwm5JQV",body:"ip5sIYCsK72lXo65SBwZ",title:"i4NKuMXvguC_7vwBXQf7",description:"yM96G2HiVTbKYiUkg_J9",toggleSection:"o70lP9a9SolOQyxKCNo8",toggleItem:"McK5jizAHgLVtFef9XUE",toggleSwitch:"vl35d6Ete3dhwkpNa56Y",checkboxItem:"yJPnhLXDC5AYfeRoSm34",disabled:"gBpdGWiYq5KiQb0FJr0k",checkboxLabel:"JX7cvUifkmmWTKuRccm6",checkboxLabelTitle:"tNbbyGgvqFvwb451lJ2r",checkboxLabelDescription:"EXZ0v4aDW5qWvlGdS2R0",followSection:"OTceU7k9ZKdaYx7kZoSz",followProjectsDropdown:"z1mVHEye1SoXfdMGnS3V",workspaceGroup:"J9sc6PrYBeTAkkMVqqHM",followProjectDropdownItem:"SIOz8BHRsAhbOAAZS5fg",followProjectsDropdownOptions:"K5xYC5I4aT8VynmKeDu9",followProjectsFilterInput:"m4PPxXHzH6kte_7bACM7",selectAllProjectsItem:"dd9AMSGV8B78bu11oUbQ",workspaceItem:"BSZXZ0QrZg2N5N8QqwDM",projectItem:"yW1ooDKf3lj6zUtI2sIg",name:"qia0PiLfL9ZkjeTMQIKq",type:"aG4K8nCgA_bhTbRJenXx",followProjectsDropdownErrorView:"__Gy8n3Nt0ghDecV1HoZ",emailSection:"_dyDMsBURQZ8kEkoUDmf",descriptionSection:"Orz0HPMWZUnPfHTniHWl"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={notificationSettingsDialogWrapper:"hnaTOGBg8hPdVfIgWY3J",macApp:"RULW30lf2_NAJB5Qcu8G",notificationSettingsDialog:"m4x8pJo_pabKpdw_tJ4y"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(753)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(784)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(93),i=a(434),s=a(785);function r({hasUnreadNotifications:e,active:t,backLabel:a,backLink:r,onNotificationsButtonClick:o}){return(0,n.h)(i.Link,{to:r,back:a},(0,n.h)(s.default,{hasUnread:e,active:t,onClick:o}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(786)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(145),s=a.n(i),r=a(99),o=a(787),d=a(788);function l({hasUnread:e,active:t,onClick:a}){return n.h("button",{class:(0,r.default)(d.default.notificationsButton,{[d.default.active]:t}),onClick:a},e&&n.h("div",{class:d.default.unreadBadge}),n.h(o.default,null))}l.propTypes={hasUnread:s().bool,active:s().bool};const c=l},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={notificationsButton:"Qp6AVpWmSmtEc7zGqp2z",active:"maKvpeuEBzA9UZL4lNv9",unreadBadge:"TVnWAShn8P99E0vgg2pw"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(737),i=a(264),s=a(790),r=a(104),o=a(434),d=a(17),l=a(791),c=a(348),u=a(337),p=a(792),f=a(793),S=a(397),h=a(359);function E({pid:e,sid:t}={}){const a=n.default.getProject({pid:e});if(!(null==a?void 0:a.screens))return null;let s=t;return s||({screenId:s}=i.default.ScreenStore.getState()),s?a.screens.find((e=>e._id===s)):null}function g({pid:e,sid:t,vid:a}={}){const n=E({pid:e,sid:t});if(!(null==n?void 0:n.versions))return null;let s=a;return s||({versionId:s}=i.default.ScreenStore.getState()),s?n.versions.find((e=>e._id===s)):null}function O(e){const t=e||n.default.getProject();if(!(null==t?void 0:t.screens))return null;const{filterValue:a,sortType:r,tagFilter:o,jiraIssueFilter:d}=i.default.DashboardStore.getState(),{sortedSections:l,variantGroupsMapping:c}=(0,s.filterSortScreens)(t,r,{filterValue:a,tagFilter:o,jiraIssueFilter:d}),u=Object.keys(c).reduce(((e,t)=>(c[t].variants.forEach((({id:a})=>{e[a]=t})),e)),{});return{visibleScreens:l.flatMap((e=>e.screens)),variantScreenMapping:u}}function T({pid:e,sid:t}={}){var a,n;const s=null!=e?e:i.default.BarrelStore.getState().barrelId,r=null!=t?t:i.default.ScreenStore.getState().screenId;if(!s||!r)return null;const{dots:o}=i.default.DotsDataStore.getState();return null!==(n=null===(a=null==o?void 0:o[s])||void 0===a?void 0:a[r])&&void 0!==n?n:null}function m({pid:e,sid:t}={}){var a,n,s;const r=null!=e?e:i.default.BarrelStore.getState().barrelId,o=null!=t?t:i.default.ScreenStore.getState().screenId;if(!r||!o)return null;const{annotations:d}=i.default.AnnotationsDataStore.getState();if(!(null===(a=null==d?void 0:d[r])||void 0===a?void 0:a[o]))return null;const l=_({pid:e,sid:t});return[...null!==(s=null===(n=null==d?void 0:d[r])||void 0===n?void 0:n[o])&&void 0!==s?s:[],...null!=l?l:[]]}function _({pid:e,sid:t}={}){const a=null!=e?e:i.default.BarrelStore.getState().barrelId,s=null!=t?t:i.default.ScreenStore.getState().screenId;if(!a||!s)return null;const{snapshot:r}=g({pid:a,sid:s})||{};if(!(null==r?void 0:r.layers))return null;const o=n.default.getProject({pid:a});if(!(null==o?void 0:o.componentAnnotations))return null;const d=r.layers.flatMap(p.processLayer),l=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore}),c=new Map;for(const n of o.componentAnnotations){const e=c.get(n.componentSourceId)||[];c.set(n.componentSourceId,[...e,n])}const u=(e,t)=>!("originalCoordinates"in e)||!e.originalCoordinates||e.originalCoordinates.screenId!==s||(0,f.rectContainsPoint)(t.absoluteRect,{x:e.originalCoordinates.x*r.width,y:e.originalCoordinates.y*r.height}),h=[],E=(e,t)=>{const a=c.get(e);for(let n=a.length-1;n>=0;n--){const e=a[n];u(e,t)&&(h.push(Object.assign(Object.assign({},e),{componentLayer:t})),a.splice(n,1))}0===a.length&&c.delete(e)};for(const n of d){if(0===c.size)break;const e=(0,S.findComponentLayerWithType)(n,l);if(!e)continue;let t;if("virtualComponentLayer"===e.type)t=e.componentLayer;else{const{componentLayer:a}=e;({layer:t}=a)}const{componentId:a}=t;a&&c.has(a)&&E(a,t)}return h}function b({pid:e,sid:t,did:a}={}){const n=T({pid:e,sid:t});if(!n)return null;let s=a;return s||({dotId:s}=i.default.DotsStore.getState()),s?n.find((e=>e._id===s)):null}function C({pid:e,sid:t,atid:a}={}){const n=m({pid:e,sid:t});if(!n)return null;let s=a;return s||({annotationId:s}=i.default.AnnotationsStore.getState()),s?n.find((e=>e._id===s)):null}function A({sid:e,pid:t}){const a=n.default.getVariantGroupOfScreen(e);return E({sid:e,pid:t})?a?{screenCount:0,variantGroupCount:1,screenVariantCount:a.screens.length}:{screenCount:1,variantGroupCount:0,screenVariantCount:0}:{screenCount:0,variantGroupCount:0,screenVariantCount:0}}const y={getScreens:function({pid:e,sids:t=[]}={}){const a=n.default.getProject({pid:e});return(null==a?void 0:a.screens)?a.screens.reduce(((e,a)=>(t.includes(a._id)&&e.push(a),e)),[]):null},getScreen:E,getVersion:g,getFilteredScreens:O,getPreviousScreen:function(e){const{visibleScreens:t,variantScreenMapping:a}=Object.assign({},O());if(!t)return null;const n=a[e]||e,i=t.findIndex((e=>e._id===n));return i<1?null:t[i-1]},getNextScreen:function(e){const{visibleScreens:t,variantScreenMapping:a}=Object.assign({},O());if(!t)return null;const n=a[e]||e,i=t.findIndex((e=>e._id===n));return-1===i||i===t.length-1?null:t[i+1]},getSectionOfScreen:function({pid:e,sid:t}={}){const a=n.default.getProject({pid:e});if(!(null==a?void 0:a.sections))return null;let s=t;return s||({screenId:s}=i.default.ScreenStore.getState()),s?a.sections.find((e=>e.screens.includes(s))):null},getComment:function({pid:e,sid:t,did:a,cmid:n}={}){var i,s;const r=b({pid:e,sid:t,did:a});return null!==(s=null===(i=null==r?void 0:r.comments)||void 0===i?void 0:i.find((e=>e._id===n)))&&void 0!==s?s:null},navigateToScreen:function(e){const{barrelId:t}=i.default.BarrelStore.getState(),{stageMode:a}=i.default.ScreenStore.getState(),n=a?"project-screen-stage-mode":"project-screen";o.default.history.push((0,r.urlResolve)(n,{url:{pid:t,sid:e}}))},getVersionsInformation:function({pid:e,sid:t}={}){const a=E({pid:e,sid:t});if(!(null==a?void 0:a.versions))return null;const[n]=a.versions;return n&&a.totalVersionCount?{latestVersionCreationDate:n.created,latestVersionCreatorName:n.creator?(0,d.getUserDisplayName)(n.creator):"Anonymous",numberOfVersions:a.versions.length}:null},getDots:T,getAnnotations:m,getDot:b,getAnnotation:C,getUniqueAnnotationTypes:function({pid:e,sid:t}){const a=m({pid:e,sid:t});if(!a)return null;const i=a.filter((({_id:e})=>!(0,u.isDraftAnnotation)(e))).map((({type:t})=>n.default.findNoteType(e,t))).filter((e=>(null==e?void 0:e.name)!==c.default.None.name));return(0,l.default)(i,"name")},getDotDetails:function(e,t,a,n,i){let s=n,r=t,o=a;if(s){const t=e.find((({_id:e})=>e===s));t?[r,o]=[t.status,null]:s=null}else if(i.length>1){const t=e.some((e=>e.status===h.default.Open&&i.includes(e._id)));t&&r!==h.default.Open?[r,o]=[h.default.Open,null]:t||r===h.default.Resolved||([r,o]=[h.default.Resolved,null])}return{dotId:s,colorFilter:o,statusFilter:r}},getAnnotationNoteType:function(e,t,a){let i;if(t){const s=e.find((e=>e._id===t));s&&(i=n.default.findNoteType(a,s.type))}return i},getAnnotationTypesToListInFilter:function({pid:e,sid:t,filterId:a}){const i=m({pid:e,sid:t});if(!i)return[];const{noteTypes:s=[]}=n.default.getBarrel({bid:e})||{};return s.filter((e=>i.some((t=>t.type&&t.type===e._id))||a&&a===e._id))},getAbsolutePositionOfComponentAnnotationDot:function({pid:e,sid:t,atid:a}={}){const{snapshot:n}=g({pid:e,sid:t})||{};if(!(null==n?void 0:n.layers))return null;const i=C({pid:e,sid:t,atid:a});if(!(null==i?void 0:i.componentSourceId))return null;const{componentLayer:s}=i;return{x:(s.absoluteRect.x+i.x*s.absoluteRect.width)/n.width,y:(s.absoluteRect.y+i.y*s.absoluteRect.height)/n.height}},getComponentAnnotationsOfScreen:_,getScreenComponentIdsOfComponentsWithSourceIds:function({pid:e,sid:t}={}){const a=null!=e?e:i.default.BarrelStore.getState().barrelId,s=null!=t?t:i.default.ScreenStore.getState().screenId;if(!a||!s)return[];const{snapshot:r}=g({pid:a,sid:s})||{};if(!(null==r?void 0:r.layers))return[];const o=r.layers.flatMap(p.processLayer),d=[],l=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore});for(const n of o){const e=(0,S.findComponentLayer)(n,l);if(e){if(!e.component.sourceId)continue;d.find((t=>t===e.component._id))||d.push(e.component._id)}}return d},getScreenStats:A,getScreenStatsForScreens:function({sids:e}){let t=0,a=0,n=0;return e.forEach((e=>{const{screenCount:i,variantGroupCount:s,screenVariantCount:r}=A({sid:e});t+=s,a+=i,n+=r})),{totalVariantGroupCount:t,totalScreenCount:a,totalScreenVariantCount:n}},getLayerBySourceId:function({pid:e,sid:t,sourceId:a}){var n;const s=null!=e?e:i.default.BarrelStore.getState().barrelId,r=null!=t?t:i.default.ScreenStore.getState().screenId;if(!s||!r)return null;const{snapshot:o}=g({pid:s,sid:r})||{};return(null==o?void 0:o.layers)&&null!==(n=o.layers.flatMap(p.processLayer).find((e=>e.sourceId===a)))&&void 0!==n?n:null}}},,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(327);const s={updatePageState(e){n.default.dispatcher.dispatch({type:i.default.UPDATE_PAGE_STATE,updateState:e})},changeSelectedTab(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_SELECTED_TAB,tab:e})},changeSelectedOrganization(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_SELECTED_ORGANIZATION,oid:e})},changeFilterValue(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_FILTER_VALUE,filterValue:e})},changeWorkflowStatusFilter({workflowStatus:e}){const{selectedOrganizationId:t}=n.default.SpaceStore.getState();n.default.dispatcher.dispatch({type:i.default.CHANGE_WORKFLOW_STATUS_FILTER,oid:t,workflowStatusFilter:e._id,workflowStatus:e})},changeProjectSelectedSortType(e){const{selectedOrganizationId:t}=n.default.SpaceStore.getState();n.default.dispatcher.dispatch({type:i.default.CHANGE_PROJECT_SELECTED_SORT_TYPE,oid:t,sortType:e})},toggleArchivedProjects(){n.default.dispatcher.dispatch({type:i.default.TOGGLE_ARCHIVED_PROJECTS})},unhighlightBarrel(e){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_BARREL,bid:e})},highlightSection(e){n.default.dispatcher.dispatch({type:i.default.HIGHLIGHT_SECTION,oseid:e})},unhighlightSection(){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_SECTION})},expandSections(e){const{selectedOrganizationId:t}=n.default.SpaceStore.getState();n.default.dispatcher.dispatch({type:i.default.EXPAND_SECTIONS,oid:t,oseids:e})},collapseSections(e){const{selectedOrganizationId:t}=n.default.SpaceStore.getState();n.default.dispatcher.dispatch({type:i.default.COLLAPSE_SECTIONS,oid:t,oseids:e})},setStyleguidesTabVisited(){n.default.dispatcher.dispatch({type:i.default.SET_STYLEGUIDES_TAB_VISITED})},openDialog(e,t={}){n.default.dispatcher.dispatch({type:i.default.OPEN_DIALOG,dialogType:e,dialogParams:t})},closeDialog(){const{visibleDialogType:e,visibleDialogParams:t}=n.default.SpaceStore.getState();n.default.dispatcher.dispatch({type:i.default.CLOSE_DIALOG,dialogType:e,dialogParams:t})},trackBarrelClick({isFromPinArea:e,barrelId:t}){n.default.dispatcher.dispatch({type:i.default.TRACK_BARREL_CLICK,barrelId:t,isFromPinArea:e})},setSelectedProjects(e){n.default.dispatcher.dispatch({type:i.default.SET_SELECTED_PROJECTS,pids:e})},clearProjectSelection(){n.default.dispatcher.dispatch({type:i.default.CLEAR_PROJECT_SELECTION})},postponeOfferReminder(e){n.default.dispatcher.dispatch({type:i.default.POSTPONE_OFFER_REMINDER,nextDate:e})},scrolledToProject(){n.default.dispatcher.dispatch({type:i.default.SCROLLED_TO_PROJECT})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(281),i=a(264),s=a(185),r=a(120);const o=(0,s.debouncePromise)(r.updateNotificationLastReadTime),d={addNotification(e){i.default.dispatcher.dispatch({type:n.default.AddNotification,notification:e})},getNotifications(e,t){i.default.dispatcher.dispatch({type:n.default.GetNotificationsRequested}),(0,r.getNotifications)(e,t).then((e=>{i.default.dispatcher.dispatch({type:n.default.GetNotificationsSuccess,notifications:e.notifications})})).catch((e=>{i.default.dispatcher.dispatch({type:n.default.GetNotificationsFailed,error:e})}))},updateNotificationLastReadTime(){o()},markAllAsRead(e){i.default.dispatcher.dispatch({type:n.default.MarkAllAsRead,notifications:e})},restoreReadStatus(e){i.default.dispatcher.dispatch({type:n.default.RestoreReadStatus,notifications:e})},setReadStatusOffline(e,t){i.default.dispatcher.dispatch({type:n.default.SetReadStatusOffline,nids:e,markedAsRead:t})},setReadStatusOfflineByNotifications(e,t){i.default.dispatcher.dispatch({type:n.default.SetReadStatusOfflineByNotifications,notifications:e,markedAsRead:t})},setEventReadStatus(e,t,a){i.default.dispatcher.dispatch({type:n.default.SetEventReadStatus,notification:e,eventIds:t,markedAsRead:a})},setEventReadStatusOffline(e,t,a){i.default.dispatcher.dispatch({type:n.default.SetEventReadStatusOffline,nid:e,eventIds:t,markedAsRead:a})},deleteEvent(e,t){i.default.dispatcher.dispatch({type:n.default.DeleteEvent,nid:e,eventId:t})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(359),i=a(280),s=a(797),r=a(337),o=a(264),d=a(738),l=a(100);const c=["CreateDot","CreateDot-Mention","CreateDotComment-Mention","CreateDotComment","ResolveDot","CreateFlowDot","CreateFlowDot-Mention","CreateFlowDotComment-Mention","CreateFlowDotComment","ResolveFlowDot"],u=["CreateScreen","CreateScreenVersion","DeleteScreen"],p=["CreateProjectComponent","CreateStyleguideComponent","CreateProjectComponentVersion","CreateStyleguideComponentVersion","CreateProjectColor","CreateStyleguideColor","CreateProjectTextStyle","CreateStyleguideTextStyle","DeleteProjectColor","DeleteStyleguideColor","DeleteProjectComponent","DeleteStyleguideComponent","DeleteProjectTextStyle","DeleteStyleguideTextStyle","UpdateProjectColor","UpdateStyleguideColor","UpdateProjectTextStyle","UpdateStyleguideTextStyle","CreateProjectSpacingToken","CreateStyleguideSpacingToken","UpdateProjectSpacingToken","UpdateStyleguideSpacingToken","DeleteProjectSpacingToken","DeleteStyleguideSpacingToken"],f=[...c,...u,...p],S=["CreateDot-Mention","CreateDotComment-Mention","CreateFlowDot-Mention","CreateFlowDotComment-Mention"];function h(e){return Object.values(s.default).includes(e)}function E({actionName:e}){return S.includes(e)}function g(e,t,a,n,{mutedProjects:i,mutedStyleguides:s}){const r=E(e);return O(e,(({organization:e,project:o,styleguide:d})=>{const l=null==o?void 0:o._id,c=null==d?void 0:d._id,u=(null==e?void 0:e._id)===t,p=!!l&&a.includes(l),f=!!l&&i.includes(l),S=!!c&&n.includes(c),h=!!c&&s.includes(c);return!(!r&&(f||h))&&(u||p||S)}))}function O(e,t){const a=e.events.filter(t);return a.length?Object.assign(Object.assign({},e),{events:a}):null}function T({events:e},t){return e.some((({project:e})=>(null==e?void 0:e._id)===t))}function m({actionName:e},t){return t===i.default.All||(t===i.default.Note?c.includes(e):t===i.default.Screen?u.includes(e):t===i.default.Styleguide?p.includes(e):t===i.default.Other?!f.includes(e):void 0)}function _(e){return e.every((({markedAsRead:e})=>e))}const b={isTypeValid:h,getDotStatesRequirement:function(e,t){const a=e.filter((e=>m(e,i.default.Note)&&t.some((({id:t})=>T(e,t))))),{errorDotIds:n,loadingDotIds:s,dots:r}=o.default.DotStatesStore.getState();let d,l=!0;for(const{events:i}of a)for(const{dot:e,project:t,screen:a}of i){const i=null==t?void 0:t._id,o=null==a?void 0:a._id,c=null==e?void 0:e._id,u=c?r[c]:void 0,p=!!c&&n.includes(c),f=!!c&&s.includes(c);if(f&&(l=!1),i&&o&&c&&!u&&!p&&!f){null!=d||(d={projects:[]});let e=d.projects.find((({id:e})=>e===i));e||(e={id:i,screens:[]},d.projects.push(e));let t=e.screens.find((({id:e})=>e===o));t||(t={id:o,dots:[]},e.screens.push(t)),t.dots.includes(c)||t.dots.push(c)}}return{dotStatesToLoad:d,dotStatesReady:l}},updatedDotStates:function(e){const{dots:t}=o.default.DotStatesStore.getState();return e.map((e=>Object.assign(Object.assign({},e),{events:e.events.map((e=>Object.assign(Object.assign({},e),{dot:e.dot?Object.assign(Object.assign({},e.dot),t[e.dot._id]):void 0})))})))},hasMention:E,filterEventsByNoteStatus:function(e,t){switch(t){case n.default.Open:return O(e,(({dot:e})=>"open"===(null==e?void 0:e.status)));case n.default.Resolved:return O(e,(({dot:e})=>"resolved"===(null==e?void 0:e.status)));case n.default.Mentioned:return E(e)?e:null;default:throw Error("Invalid statusFilter type")}},filterEventsByDotColor:function(e,t){return O(e,(({dot:e})=>!!e&&(0,r.getColorName)(e.color)===t))},filterEventsByUser:function(e,t){return O(e,(({source:e})=>(null==e?void 0:e._id)===t))},filterEventsByProject:function(e,t){return O(e,(({project:e})=>(null==e?void 0:e._id)===t))},filterEventsByStyleguide:function(e,t){return O(e,(({styleguide:e})=>(null==e?void 0:e._id)===t))},filterEventsByMutedStatus:g,getRelatedProjects:function({events:e}){return e.filter((({project:e})=>e)).map((({project:e})=>e._id))},getRelatedStyleguides:function({events:e}){return e.filter((({styleguide:e})=>e)).map((({styleguide:e})=>e._id))},isRelatedToProject:T,isRelatedToStyleguide:function({events:e},t){return e.some((({styleguide:e})=>(null==e?void 0:e._id)===t))},isInCategory:m,getCategory:function({actionName:e}){return c.includes(e)?i.default.Note:u.includes(e)?i.default.Screen:p.includes(e)?i.default.Styleguide:i.default.Other},trackEventWithFilterDetails:function(e,t={}){const{category:a,sectionId:n,noteStatusFilter:s,memberId:r,color:d}=o.default.ActivitiesViewStore.getState(),l={[i.default.All]:"All",[i.default.Note]:"Notes",[i.default.Screen]:"Screens",[i.default.Styleguide]:"Styleguide",[i.default.Other]:"Others"},c=[...s||d?["Note Type"]:[],...r?["User"]:[],...n?["Section"]:[]];mixpanel.master.track(e,Object.assign(Object.assign({},t),{"Selected Category":l[a],Filters:c.length?c:void 0}))},isActivityRead:function(e){return _(e.events)},areEventsRead:_,hasAnyUnread:function(e){const{userId:t,notificationSettings:a}=o.default.UserStore.getState(),{loading:n,notifications:i}=o.default.NotificationsStore.getState();if(!e||n)return null;const s=(d.default.getOrganizationProjects(e)||[]).filter((e=>e.users.some((({user:e})=>e._id===t))&&"archived"!==e.status)),r=(d.default.getOrganizationStyleguides(e)||[]).filter((({status:e,users:a})=>"archived"!==e&&a.some((({user:e})=>e._id===t))));return i.map((t=>g(t,e,s.map((({_id:e})=>e)),r.map((({_id:e})=>e)),a))).filter(l.exists).some((({events:e,actionName:t})=>!_(e)&&h(t)))}}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.AddProjectExtension="AddProjectExtension",e.AddStyleguideExtension="AddStyleguideExtension",e.ActivateProject="ActivateProject",e.ActivateStyleguide="ActivateStyleguide",e.ArchiveProject="ArchiveProject",e.ArchiveStyleguide="ArchiveStyleguide",e.AuthProjectSlack="AuthProjectSlack",e.AuthStyleguideSlack="AuthStyleguideSlack",e.CreateProjectComponent="CreateProjectComponent",e.CreateStyleguideComponent="CreateStyleguideComponent",e.CreateProjectComponentVersion="CreateProjectComponentVersion",e.CreateStyleguideComponentVersion="CreateStyleguideComponentVersion",e.CreateProjectColor="CreateProjectColor",e.CreateStyleguideColor="CreateStyleguideColor",e.CreateDot="CreateDot",e.CreateDotMention="CreateDot-Mention",e.CreateDotCommentMention="CreateDotComment-Mention",e.CreateDotComment="CreateDotComment",e.CreateScreen="CreateScreen",e.CreateScreenVersion="CreateScreenVersion",e.CreateProjectTextStyle="CreateProjectTextStyle",e.CreateStyleguideTextStyle="CreateStyleguideTextStyle",e.DeleteProjectColor="DeleteProjectColor",e.DeleteStyleguideColor="DeleteStyleguideColor",e.DeleteProjectComponent="DeleteProjectComponent",e.DeleteStyleguideComponent="DeleteStyleguideComponent",e.DeleteScreen="DeleteScreen",e.DeleteProject="DeleteProject",e.DeleteStyleguide="DeleteStyleguide",e.DeleteProjectTextStyle="DeleteProjectTextStyle",e.DeleteStyleguideTextStyle="DeleteStyleguideTextStyle",e.RemoveExtensionFromProject="RemoveExtensionFromProject",e.RemoveExtensionFromStyleguide="RemoveExtensionFromStyleguide",e.ResolveDot="ResolveDot",e.UpdateOrganizationMemberRole="UpdateOrganizationMemberRole",e.UpdateProjectColor="UpdateProjectColor",e.UpdateStyleguideColor="UpdateStyleguideColor",e.UpdateProjectUserRole="UpdateProjectUserRole",e.UpdateStyleguideUserRole="UpdateStyleguideUserRole",e.UpdateProjectTextStyle="UpdateProjectTextStyle",e.UpdateStyleguideTextStyle="UpdateStyleguideTextStyle",e.UserJoined="UserJoined",e.ProjectUserJoined="ProjectUserJoined",e.StyleguideUserJoined="StyleguideUserJoined",e.RemoveUserFromProject="RemoveUserFromProject",e.RemoveUserFromStyleguide="RemoveUserFromStyleguide",e.InviteMember="InviteMember",e.InviteProjectUser="InviteProjectUser",e.InviteStyleguideUser="InviteStyleguideUser",e.TransferProjectOwnership="TransferProjectOwnership",e.TransferStyleguideOwnership="TransferStyleguideOwnership",e.CreateProjectSpacingToken="CreateProjectSpacingToken",e.CreateStyleguideSpacingToken="CreateStyleguideSpacingToken",e.UpdateProjectSpacingToken="UpdateProjectSpacingToken",e.UpdateStyleguideSpacingToken="UpdateStyleguideSpacingToken",e.DeleteProjectSpacingToken="DeleteProjectSpacingToken",e.DeleteStyleguideSpacingToken="DeleteStyleguideSpacingToken",e.AttachProjectToJiraIssue="AttachProjectToJiraIssue",e.AttachSectionToJiraIssue="AttachSectionToJiraIssue",e.AttachScreenToJiraIssue="AttachScreenToJiraIssue",e.RemoveProjectJiraIssueAttachment="RemoveProjectJiraIssueAttachment",e.RemoveSectionJiraIssueAttachment="RemoveSectionJiraIssueAttachment",e.RemoveScreenJiraIssueAttachment="RemoveScreenJiraIssueAttachment",e.CreateFlowDot="CreateFlowDot",e.CreateFlowDotMention="CreateFlowDot-Mention",e.CreateFlowDotComment="CreateFlowDotComment",e.CreateFlowDotCommentMention="CreateFlowDotComment-Mention",e.ResolveFlowDot="ResolveFlowDot"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var n=a(415),i=a(337),s=a(416),r=a(737),o=a(264);function d(e){if(!e)return null;const{flows:{[e]:t={}}}=o.default.FlowStore.getState(),[a]=Object.keys(t);return a}function l(e,t){let a=e;if(a||({barrelId:a}=o.default.BarrelStore.getState()),!a)return null;let n=t;if(n||({currentFlowId:n}=o.default.FlowStore.getState()),!n)return null;const{flows:{[a]:i}}=o.default.FlowStore.getState();return i?i[n]:null}function c({pid:e,flid:t}={}){var a,n;const i=null!=e?e:o.default.BarrelStore.getState().barrelId,s=null!=t?t:o.default.FlowStore.getState().currentFlowId;if(!i||!s)return null;const{dots:r}=o.default.FlowDotsStore.getState();return null!==(n=null===(a=null==r?void 0:r[i])||void 0===a?void 0:a[s])&&void 0!==n?n:null}function u({pid:e,flid:t}={}){var a,n,s;const d=null!=e?e:o.default.BarrelStore.getState().barrelId,l=null!=t?t:o.default.FlowStore.getState().currentFlowId,c=r.default.findUser();if(!d||!l||!c)return null;const{statusFilter:u,colorFilter:p}=o.default.FlowStore.getState(),{dots:f}=o.default.FlowDotsStore.getState(),S=null!==(n=null===(a=null==f?void 0:f[d])||void 0===a?void 0:a[l])&&void 0!==n?n:null;return null!==(s=null==S?void 0:S.filter((e=>(0,i.checkFlowDotFilter)(e,u,p,c.user))))&&void 0!==s?s:null}function p({pid:e,flid:t,did:a}={}){const n=c({pid:e,flid:t});if(!n)return null;let i=a;return i||({dotId:i}=o.default.FlowStore.getState()),i?n.find((e=>e._id===i)):null}function f(e){let t=0,a=0;if(e.type===n.default.VariantGroup){const{variantGroup:{screens:n},defaultVariant:i}=e,s=n.find((({_id:e})=>i===e)),r=null==s?void 0:s.latestVersion.snapshot;({width:t,height:a}=r)}else e.type===n.default.Screen&&({width:t,height:a}=e.screen.latestVersion.snapshot);return{width:t,height:a}}function S(e,t){const a=t.nodes.filter((({type:e})=>e===n.default.Screen||e===n.default.VariantGroup));for(const n of a){const{position:{x:t,y:a}}=n,{width:i,height:r}=f(n);if(e.x>=t-s.GRID_SIZE&&e.x<=t+i+s.GRID_SIZE&&e.y>=a-s.GRID_SIZE&&e.y<=a+r+s.GRID_SIZE)return n}return null}function h(e,t){const a=[],{position:{x:n,y:i}}=e;for(const r of t){const{width:t,height:o}=f(e);r.x>=n-s.GRID_SIZE&&r.x<=n+t+s.GRID_SIZE&&r.y>=i-s.GRID_SIZE&&r.y<=i+o+s.GRID_SIZE&&a.push(r)}return a.sort(((e,t)=>e.x-t.x)),a}function E(e){let t=1/0,a=-1/0,n=1/0,i=-1/0;for(const s of e){const{x:e,y:r}=s.position,{width:o,height:d}=f(s),l=e+o,c=r+d;e<t&&(t=e),l>a&&(a=l),r<n&&(n=r),c>i&&(i=c)}return Number.isFinite(n)&&Number.isFinite(a)&&Number.isFinite(i)&&Number.isFinite(t)?{top:n,right:a,bottom:i,left:t}:{top:0,right:0,bottom:0,left:0}}function g(e,t){const a=t.groups||[];for(const i of a){const a=E(i.nodes.map((e=>t.nodes.find((({_id:t})=>e===t)))).filter((({type:e})=>e===n.default.Screen||e===n.default.VariantGroup)));if(e.x>=a.left&&e.x<=a.right&&e.y>=a.top&&e.y<=a.bottom)return i}return null}function O(e,t,a){const n=[],i=E(e.nodes.map((e=>a.nodes.find((({_id:t})=>e===t)))));for(const s of t)s.x>=i.left&&s.x<=i.right&&s.y>=i.top&&s.y<=i.bottom&&n.push(s);return n.sort(((e,t)=>e.x-t.x)),n}function T(){const e=u()||[],t=l(),a=[];e.sort(((e,t)=>e.x-t.x));const n=new Set;for(const i of e){if(n.has(i._id))continue;a.push(i),n.add(i._id);const s=S(i,t);if(s){const t=h(s,e);for(const e of t)n.has(e._id)||(a.push(e),n.add(e._id))}const r=g(i,t);if(r){const i=O(r,e,t);for(const e of i)n.has(e._id)||(a.push(e),n.add(e._id))}}return a}const m={getFirstFlowId:d,getFirstFlow:function(e){const t=d(e);if(!t)return null;const{flows:{[e]:a}}=o.default.FlowStore.getState();return a[t]},getFlow:l,getFlows:function(e){let t=e;t||({barrelId:t}=o.default.BarrelStore.getState());const{flows:{[t]:a}}=o.default.FlowStore.getState();return a?Object.values(a):[]},getConnectors:function(e){var t;const{barrelId:a}=o.default.BarrelStore.getState();if(!a)return[];let n=e;n||({currentFlowId:n}=o.default.FlowStore.getState());const i=l(a,n);return null!==(t=null==i?void 0:i.connectors)&&void 0!==t?t:[]},isFlowFetched:function(e){const{fetchedFlowIds:t}=o.default.FlowStore.getState();return t.has(e)},getFlowNodesInSection:function(e){const t=r.default.getProject();if(!(null==t?void 0:t.sections))return null;const a=l(t.id);if(!a)return null;const i=t.sections.find((({_id:t})=>t===e));return a.nodes.filter((e=>e.type===n.default.Screen?null==i?void 0:i.screens.includes(e.screen._id):e.type===n.default.VariantGroup&&(null==i?void 0:i.screens.includes(e.defaultVariant))))},getFlowScreenNodeCount:function(e){var t;return null!==(t=null==e?void 0:e.nodes.filter((({type:e})=>[n.default.Screen,n.default.VariantGroup].includes(e))).length)&&void 0!==t?t:0},getDots:c,getFilteredDots:u,getDot:p,getComment:function({pid:e,flid:t,did:a,cmid:n}={}){var i,s;const r=p({pid:e,flid:t,did:a});return null!==(s=null===(i=null==r?void 0:r.comments)||void 0===i?void 0:i.find((e=>e._id===n)))&&void 0!==s?s:null},getNextDotToNavigate:function(e){const t=T(),a=t.findIndex((({_id:t})=>e===t));return t[a+1]},getPrevDotToNavigate:function(e){const t=T(),a=t.findIndex((({_id:t})=>e===t));return t[a-1]}}},(e,t,a)=>{"use strict";function n(e,t,a){return!!(e&&t&&a)&&("user"===e?a.decide("global_search",[],t).enabled:a.decide("global_search",[],t,{organizationId:e}).enabled)}a.r(t),a.d(t,{default:()=>n})},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={header:"LBk_sok13MmiG6vq04QK",backButtonLabel:"T5yDnEEQoIYCtjHeoEyZ",organizationName:"xLjFXIWKb_i1F0yhEwlP"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a(802).default},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(93),i=a(535),s=a(803),r=a(264),o=a(123),d=a(733),l=a(7);class c extends n.Component{static calculateState(){const{overridingCategory:e}=r.default.SupportButtonStore.getState(),{barrelId:t,barrelType:a,selectedView:n}=r.default.BarrelStore.getState(),{selectedOrganizationId:i,selectedTab:s}=r.default.SpaceStore.getState();if(e)return{category:e};if(!t)return{category:"projects"===s&&"user"!==i?d.default.ORGANIZATION_PROJECTS:s};let c;if(a===o.default.STYLEGUIDE)c=d.default.STYLEGUIDE;else switch(n){case l.ProjectViewTypes.DASHBOARD:c=d.default.PROJECT_DASHBOARD;break;case l.ProjectViewTypes.FLOW:c=d.default.PROJECT_FLOW;break;case l.ProjectViewTypes.STYLEGUIDE:c=d.default.PROJECT_STYLEGUIDE;break;case l.ProjectViewTypes.SCREEN:c=d.default.PROJECT_SCREEN;break;default:c=d.default.DEFAULT}return{category:c}}static getStores(){return[r.default.SupportButtonStore,r.default.SpaceStore,r.default.BarrelStore]}render(){const{category:e}=this.state;return n.h(s.default,{category:e})}}const u=(0,i.default)(c,{withProps:!0,pure:!1})},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a(804).default},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(93),i=a(591),s=a(99),r=a(105),o=a(733),d=a(805);const l={[o.default.DEFAULT]:[{text:"Downloading Mac and Windows apps",url:"https://support.zeplin.io/en/articles/244698-downloading-mac-and-windows-apps",articleId:244698},{text:"Creating a project",url:"https://support.zeplin.io/en/articles/367394-creating-a-project",articleId:367394},{text:"Exporting assets",url:"https://support.zeplin.io/en/articles/1273241-exporting-assets-from-figma",articleId:1273241},{text:"Publishing designs",url:"https://support.zeplin.io/en/articles/1273189-publishing-designs-from-figma",articleId:1273189},{text:"Updating plans, billing information",url:"https://support.zeplin.io/en/collections/48596-pricing-plans",collectionId:48596}],[o.default.PRICING]:[{text:"Pricing & Plans",url:"https://support.zeplin.io/en/collections/48596-pricing-plans",collectionId:48596},{text:"Creating an account",url:"https://support.zeplin.io/en/articles/1067135-creating-an-account",articleId:1067135},{text:"Collaborating with your team",url:"https://support.zeplin.io/en/articles/1067492-collaborating-with-your-team",articleId:1067492},{text:"Updating your subscription",url:"https://support.zeplin.io/en/articles/5069881-downgrading-your-subscription",articleId:5069881},{text:"Choosing a subscription plan",url:"https://support.zeplin.io/en/articles/1166181-choosing-a-subscription-plan",articleId:1166181}],[o.default.PROJECTS]:[{text:"Adding a user to a project",url:"https://support.zeplin.io/en/articles/1988444-adding-a-user-to-a-project",articleId:1988444},{text:"Publishing designs",url:"https://support.zeplin.io/en/articles/1273189-publishing-designs-from-figma",articleId:1273189},{text:"Managing profile",url:"https://support.zeplin.io/en/collections/48616-profile",collectionId:48616},{text:"Creating a project",url:"https://support.zeplin.io/en/articles/367394-creating-a-project",articleId:367394},{text:"Transferring a project",url:"https://support.zeplin.io/en/articles/246355-transferring-a-project",articleId:246355}],[o.default.PROJECT_DASHBOARD]:[{text:"Adding a project to Slack",url:"https://support.zeplin.io/en/articles/246424-adding-a-project-to-slack",articleId:246424},{text:"Downloading all available assets in a screen",url:"https://support.zeplin.io/en/articles/1338605-downloading-all-available-assets-in-a-screen",articleId:1338605},{text:"Downloading screens as images",url:"https://support.zeplin.io/en/articles/774216-downloading-screens-as-images",articleId:774216},{text:"Organizing screens with Sections",url:"https://support.zeplin.io/en/articles/1396666-organizing-screens-with-sections",articleId:1396666},{text:"Collaborating with the team",url:"https://support.zeplin.io/en/articles/1067492-collaborating-with-your-team",articleId:1067492}],[o.default.PROJECT_FLOW]:[{text:"Getting started with flows",url:"https://support.zeplin.io/en/articles/5877004-getting-started-with-flows",articleId:5877004},{text:"Adding screens to a flow",url:"https://support.zeplin.io/en/articles/5917182-adding-screens-to-a-flow",articleId:5917182},{text:"Connecting screens within a flow",url:"https://support.zeplin.io/en/articles/5917201-connecting-screens-within-a-flow",articleId:5917201},{text:"Documenting in a flow via labels",url:"https://support.zeplin.io/en/articles/5917208-documenting-in-a-flow-via-labels",articleId:5917208},{text:"Creating groups within a flow",url:"https://support.zeplin.io/en/articles/5917194-creating-groups-within-a-flow ",articleId:5917194}],[o.default.PROJECT_STYLEGUIDE]:[{text:"Organizing styleguide colors",url:"https://support.zeplin.io/en/articles/1444421-organizing-styleguide-colors",articleId:1444421},{text:"Organizing styleguide text styles",url:"https://support.zeplin.io/en/articles/1504520-organizing-styleguide-text-styles",articleId:1504520},{text:"Exporting colors",url:"https://support.zeplin.io/en/articles/3095741-exporting-colors-from-figma",articleId:3095741},{text:"Exporting text styles",url:"https://support.zeplin.io/en/articles/3095838-exporting-text-styles-from-figma",articleId:3095838},{text:"Linking a project to a styleguide",url:"https://support.zeplin.io/en/articles/2998318-linking-a-project-to-a-styleguide",articleId:2998318}],[o.default.PROJECT_SCREEN]:[{text:"Updating a screen",url:"https://support.zeplin.io/en/articles/1090335-updating-a-screen",articleId:1090335},{text:"Exporting assets",url:"https://support.zeplin.io/en/articles/1273241-exporting-assets-from-figma",articleId:1273241},{text:"Downloading all available assets in a screen",url:"https://support.zeplin.io/en/articles/1338605-downloading-all-available-assets-in-a-screen",articleId:1338605},{text:"Comparing app/website with designs using Pop Out",url:"https://support.zeplin.io/en/articles/1437093-comparing-app-website-with-designs-using-pop-out",articleId:1437093},{text:"Changing units",url:"https://support.zeplin.io/en/articles/377715-changing-units",articleId:377715}],[o.default.STYLEGUIDES]:[{text:"Creating a styleguide",url:"https://support.zeplin.io/en/articles/2886183-creating-a-styleguide",articleId:2886183},{text:"Choosing a styleguide type",url:"https://support.zeplin.io/en/articles/2885272-choosing-a-styleguide-type",articleId:2885272},{text:"Setting up component variants",url:"https://support.zeplin.io/en/articles/4815554-setting-up-component-variants-from-figma",articleId:4815554},{text:"Exporting to a styleguide",url:"https://support.zeplin.io/en/articles/3043624-exporting-to-a-styleguide",articleId:3043624},{text:"Linking a project to a styleguide",url:"https://support.zeplin.io/en/articles/2998318-linking-a-project-to-a-styleguide",articleId:2998318}],[o.default.STYLEGUIDE]:[{text:"Choosing a styleguide type",url:"https://support.zeplin.io/en/articles/2885272-choosing-a-styleguide-type",articleId:2885272},{text:"Setting up component variants",url:"https://support.zeplin.io/en/articles/4815554-setting-up-component-variants-from-figma",articleId:4815554},{text:"Exporting to a styleguide",url:"https://support.zeplin.io/en/articles/3043624-exporting-to-a-styleguide",articleId:3043624},{text:"Adding a user to a styleguide",url:"https://support.zeplin.io/en/articles/3074305-adding-a-user-to-a-styleguide",articleId:3074305},{text:"Linking a project to a styleguide",url:"https://support.zeplin.io/en/articles/2998318-linking-a-project-to-a-styleguide",articleId:2998318}],[o.default.ORGANIZATION_DASHBOARD]:[{text:"Assigning roles to workspace members",url:"https://support.zeplin.io/en/articles/387773-assigning-roles-to-workspace-members",articleId:387773},{text:"Managing access level of workspace members",url:"https://support.zeplin.io/en/articles/4629006-managing-access-level-of-workspace-members",articleId:4629006},{text:"Grouping workspace members by tags",url:"https://support.zeplin.io/en/articles/419850-grouping-workspace-members-by-tags",articleId:419850},{text:"Updating workspace profile and billing information",url:"https://support.zeplin.io/en/articles/419843-accessing-workspace-profile-and-billing-information",articleId:419843},{text:"Transfer workspace ownership",url:"https://support.zeplin.io/en/articles/1374947-transferring-a-workspace",articleId:1374947}],[o.default.ORGANIZATION_PROJECTS]:[{text:"Transferring projects between workspaces",url:"https://support.zeplin.io/en/articles/246355-transferring-a-project",articleId:246355},{text:"Publishing designs",url:"https://support.zeplin.io/en/articles/1273189-publishing-designs-from-figma",articleId:1273189},{text:"Organizing projects with sections",url:"https://support.zeplin.io/en/articles/4232766-organizing-projects-with-sections",articleId:4232766},{text:"Assigning roles to workspace members",url:"https://support.zeplin.io/en/articles/387773-assigning-roles-to-workspace-members",articleId:387773},{text:"Updating workspace profile and billing information",url:"https://support.zeplin.io/en/articles/419843-accessing-workspace-profile-and-billing-information",articleId:419843}],[o.default.ORGANIZATION_PROFILE]:[{text:"Updating workspace profile and billing information",url:"https://support.zeplin.io/en/articles/419843-accessing-workspace-profile-and-billing-information",articleId:419843},{text:"Updating invoice and billing information",url:"https://support.zeplin.io/en/articles/377740-updating-invoice-and-billing-information",articleId:377740},{text:"Setting a billing email",url:"https://support.zeplin.io/en/articles/469347-setting-a-billing-email",articleId:469347},{text:"Updating credit card",url:"https://support.zeplin.io/en/articles/481582-updating-credit-card",articleId:481582},{text:"Sending Invoices",url:"https://support.zeplin.io/en/articles/479220-sending-invoices",articleId:479220}],[o.default.PROFILE]:[{text:"Setting your profile picture",url:"https://support.zeplin.io/en/articles/246033-setting-your-profile-picture",articleId:246033},{text:"Updating invoice and billing information",url:"https://support.zeplin.io/en/articles/377740-updating-invoice-and-billing-information",articleId:377740},{text:"Setting a billing email",url:"https://support.zeplin.io/en/articles/469347-setting-a-billing-email",articleId:469347},{text:"Updating your subscription",url:"https://support.zeplin.io/en/articles/5069881-downgrading-your-subscription",articleId:5069881},{text:"Transferring subscription",url:"https://support.zeplin.io/en/articles/980050-transferring-a-subscription",articleId:980050}]};class c extends i.default{constructor(){super(),this.closePopup=this.closePopup.bind(this),this.escHandler=this.escHandler.bind(this),this.buttonClickHandler=this.buttonClickHandler.bind(this),this.popupClickHandler=this.popupClickHandler.bind(this),this.showMessenger=this.showMessenger.bind(this),this.state={popupOpen:!1,unreadCount:0}}closePopup(){this.state.popupOpen&&this.setState({popupOpen:!1})}showMessenger(){mixpanel.master.track("Life saver popover",{"Clicked On":"Intercom"}),Intercom("show")}handleLinkClick(e){const t=e.target.closest("a");mixpanel.master.track("Life saver popover",{"Clicked On":t.href});const a=t.getAttribute("data-articleid");a&&(e.preventDefault(),Intercom("showArticle",a))}buttonClickHandler(e){e.stopPropagation(),this.setState((e=>({popupOpen:!e.popupOpen})))}escHandler(e){this.state.popupOpen&&e.keyCode===Zeplin.KEY_CODE.ESC&&this.closePopup()}popupClickHandler(e){e.stopPropagation(),this.closePopup()}componentDidMount(){Intercom("onShow",(()=>{this.setState({intercomOpen:!0})})),Intercom("onHide",(()=>{this.setState({intercomOpen:!1})})),Intercom("onUnreadCountChange",(e=>{this.setState({unreadCount:e})}))}componentDidUpdate(){this.state.popupOpen?(document.addEventListener("click",this.closePopup),document.addEventListener("keydown",this.escHandler)):(document.removeEventListener("click",this.closePopup),document.removeEventListener("keydown",this.escHandler))}componentWillUnmount(){document.removeEventListener("click",this.closePopup),document.removeEventListener("keydown",this.escHandler)}renderPopup(){if(!this.state.popupOpen)return null;const{category:e}=this.props,t=l[e].map((e=>n.h("li",{key:e.url},n.h("a",{href:e.url,"data-articleId":e.articleId,"data-collectionId":e.collectionId,target:"_blank",onClick:this.handleLinkClick},n.h("span",null,e.text)))));return n.h("div",{class:d.default.supportPopup,onClick:this.popupClickHandler},n.h("h3",null,"Handy articles:"),n.h("ul",null,t),n.h("hr",null),n.h("button",{type:"button",onClick:this.showMessenger},n.h("span",null,"Got another question? ☝️",this.renderUnreadBadge())))}renderUnreadBadge(){return this.state.unreadCount?n.h("div",{class:d.default.unreadBadge}):null}render(){const{popupOpen:e,intercomOpen:t}=this.state,a=(0,s.default)(d.default.supportButton,{[d.default.popupOpen]:e,[d.default.intercomOpen]:t});return n.h("div",{class:a,onClick:this.buttonClickHandler},n.h("img",{width:"28",height:"28",src:r.imageUrl("img/icLifeBuoy.svg")}),this.renderPopup(),this.renderUnreadBadge())}}c.defaultProps={category:o.default.DEFAULT};const u=c},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={supportButton:"R5bQ6Vc2A_Sc8WvTnnz5",popupOpen:"QXY52qyL4yuqO51_Stqb",intercomOpen:"E7i1KnZlN1r12Cm3VRSS",supportPopup:"aBImVbjTbmb5gxfamTvO",unreadBadge:"FhRlCJaYhM0bhIXzBR20"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(807)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(93),i=a(104),s=a(535),r=a(264),o=a(808),d=a(809);class l extends n.Component{constructor(){super(...arguments),this.handleRate=e=>{const{oid:t}=this.state;o.default.handleRate({rating:e,oid:t,location:(0,i.getAppRouteFromPathname)(window.location.pathname)||"",source:"webApp"})},this.handleFeedbackSubmit=e=>{const{rate:t,oid:a}=this.state;null!==t&&o.default.handleFeedbackSubmit({comment:e,score:t,oid:a,location:(0,i.getAppRouteFromPathname)(window.location.pathname)||"",source:"webApp"})},this.handleNPSSeen=()=>{const{oid:e,plan:t,triggeringEvent:a}=this.state;t&&a&&o.default.handleViewedNPS({oid:e,plan:t.name,location:(0,i.getAppRouteFromPathname)(window.location.pathname)||"",triggeringEvent:a})},this.handleDismissSurvey=()=>{const{oid:e,plan:t}=this.state;t&&o.default.dismissSurvey({oid:e,plan:t.name,location:(0,i.getAppRouteFromPathname)(window.location.pathname)||""})}}static calculateState(){const e=r.default.UserStore.getState().paymentPlan,{isOpen:t,step:a,rate:n,canSurveyBeShown:i,triggeringEvent:s}=r.default.NPSSurveyStore.getState(),{selectedOrganizationId:o}=r.default.SpaceStore.getState(),{organizationId:d}=r.default.BarrelStore.getState(),{organizations:l}=r.default.OrganizationStore.getState(),{config:c}=r.default.AppStore.getState(),u=(null==c?void 0:c.plans)||[],p=d||o,f=l.find((e=>e._id===p)),S=f?u.find((e=>e.id===f.paymentPlan)):e;return{isOpen:t,step:a,rate:n,canSurveyBeShown:i,oid:p,plan:S,triggeringEvent:s}}static getStores(){return[r.default.UserStore,r.default.NPSSurveyStore,r.default.SpaceStore,r.default.BarrelStore,r.default.AppStore,r.default.OrganizationStore]}render(){const{isOpen:e,step:t,rate:a,canSurveyBeShown:i}=this.state;if(e&&i)return(0,n.h)(d.default,{rating:a,step:t,onClose:this.handleDismissSurvey,onRateClick:this.handleRate,onSendFeedback:this.handleFeedbackSubmit,onNPSSeen:this.handleNPSSeen})}}const c=(0,s.default)(l)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(425);const s={triggerSurvey(e){n.default.dispatcher.dispatch({type:i.default.TRIGGER_SURVEY,triggeringEvent:e})},showSurvey(e){n.default.dispatcher.dispatch({type:i.default.SHOW_SURVEY,triggeringEvent:e})},dismissSurvey({oid:e,plan:t,location:a}){n.default.dispatcher.dispatch({type:i.default.DISMISS_SURVEY,oid:e,plan:t,location:a})},handleRate({rating:e,location:t,oid:a,source:s}){n.default.dispatcher.dispatch({type:i.default.RATE_SURVEY,rating:e,location:t,oid:a,source:s})},handleFeedbackSubmit({comment:e,location:t,oid:a,score:s,source:r}){n.default.dispatcher.dispatch({type:i.default.SUBMIT_FEEDBACK,comment:e,score:s,location:t,oid:a,source:r})},setCanSurveyBeShown(e){n.default.dispatcher.dispatch({type:i.default.SET_CAN_SHOW_SURVEY,canSurveyBeShown:e})},handleViewedNPS({oid:e,plan:t,location:a,triggeringEvent:s}){n.default.dispatcher.dispatch({type:i.default.HANDLE_VIEWED_NPS,oid:e,plan:t,location:a,triggeringEvent:s})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(810)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(93),i=a(96),s=a(811),r=a(812),o=a(840);const d=function({step:e,rating:t,onClose:a,onRateClick:d,onSendFeedback:l,onNPSSeen:c}){return(0,i.useEffect)((()=>{c()}),[]),(0,n.h)("div",{class:o.default.npsSurveyContainer},(0,n.h)("div",{class:o.default.questionText},"Rate"===e||null===t?"How likely are you to recommend Zeplin to a friend or a colleague?":t>6?"Thanks! Anything you want to share?":"Thanks, please tell us how we can improve:"),"Rate"===e?(0,n.h)("div",{class:o.default.rateAnswerWrapper},(0,n.h)("div",{class:o.default.rateHintContainer},(0,n.h)("div",{class:o.default.rateHintText},"Not at all likely"),(0,n.h)("div",{class:o.default.rateHintText},"Very likely")),(0,n.h)("div",{class:o.default.rateButtonsContainer},[...Array(11).keys()].map((e=>{return(0,n.h)("button",{key:e,class:o.default.rateButton,onClick:(t=e,function(){d(t)})},e);var t})))):(0,n.h)("div",{class:o.default.rateAnswerWrapper},(0,n.h)(r.default,{class:o.default.feedbackTextarea,autoEdit:!0,placeholder:"Anything you want to share?",onSubmit:l,maxLength:1024,color:"cornflowerBlue",buttonLabel:"Post",showEmojiAutoComplete:!0,disabledWhenEmpty:!0})),(0,n.h)("button",{class:o.default.closeButton,onClick:a},(0,n.h)(s.default,{width:14,height:14,color:"var(--clooney)"})))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(813)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var n=a(93),i=a(145),s=a.n(i),r=a(591),o=a(99),d=a(814),l=a(171),c=a(185),u=a(404),p=a(106),f=a(7),S=a(4),h=a(821),E=a(825),g=a(830),O=a(833),T=a(737),m=a(738),_=a(225),b=a(836);a(839);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class I extends r.default{constructor(e){super(e),this.handleFormattedContentUpdate=this.handleFormattedContentUpdate.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleClick=this.handleClick.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleInput=this.handleInput.bind(this),this.handleButtonClick=this.handleButtonClick.bind(this),this.handleKeyDownWhenEmojiListOpen=this.handleKeyDownWhenEmojiListOpen.bind(this),this.handleKeyDownWhenUserListOpen=this.handleKeyDownWhenUserListOpen.bind(this),this.handleKeyDownEmojiListActions=(0,c.debounce)(this.handleKeyDownEmojiListActions).bind(this),this.handleKeyDownUserListActions=(0,c.debounce)(this.handleKeyDownUserListActions).bind(this),this.handleSelectEmoji=this.handleSelectEmoji.bind(this),this.handleSelectUser=this.handleSelectUser.bind(this),this.handleEmojiMouseOver=this.handleEmojiMouseOver.bind(this),this.handleUserMouseOver=this.handleUserMouseOver.bind(this),this.handleEmojiClick=this.handleEmojiClick.bind(this),this.handleUserClick=this.handleUserClick.bind(this),this.handleTextAreaClick=this.handleTextAreaClick.bind(this),this.handleFileUpload=this.handleFileUpload.bind(this),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.handleFileInputChange=this.handleFileInputChange.bind(this),this.changeSuggestedEmojis=this.changeSuggestedEmojis.bind(this),this.changeSuggestedUsers=this.changeSuggestedUsers.bind(this),this.abortController=null,this.autocompleteListRef=n.createRef();const{value:t="",editing:a,formatter:i,barrelId:s}=e;this.state={selectedEmojiIndex:0,suggestedEmojis:[],suggestionPositionedParentTop:0,suggestionPositionedParentLeft:0,suggestionTargetTop:0,suggestionTargetBottom:0,suggestionTargetLeft:0,autoCompletedEmoji:!1,selectedUserIndex:0,suggestedUsers:[],autoCompletedUser:!1,value:t,originalValue:t,error:"",editing:a,uploading:!1,formattedContent:!a&&i?i(t,this.handleFormattedContentUpdate,s):t}}cancelEdit(){const{originalValue:e}=this.state,{onCancelEdit:t}=this.props;this.abortController&&(this.abortController.abort(),this.abortController=null),t&&t(),this.setState({editing:!1,uploading:!1,value:e,error:""},(()=>{this.nodeRefs.textArea.blur()}))}changeSuggestedEmojis(){const{barrelId:e}=this.props,{value:t,suggestedEmojis:a,selectedEmojiIndex:n}=this.state,{textArea:i}=this.nodeRefs,s=i.selectionStart,r=(0,b.getSuggestedEmojis)(t,s,e);if(r!==a){const e=Math.max(0,Math.min(n,r.length-1));this.setState(A({suggestedEmojis:r,selectedEmojiIndex:e},this.getSuggestionPositions()))}}changeSuggestedUsers(){const{value:e,suggestedUsers:t,selectedUserIndex:a}=this.state,{textArea:n}=this.nodeRefs,{barrelId:i}=this.props,s=function(e,t,a){const n=e.lastIndexOf("@",a);if(-1===n)return[];const i=e.substring(n+1,a).toLowerCase(),s=T.default.getBarrel({bid:t}),r=m.default.getOrganization(null,{pid:t});if(!s)return[];const{users:o}=s,d=[{_id:"everyone",name:"everyone",self:!1,description:"Notify all project members",groupDataType:s.icon.type,group:!0}];return r&&d.push({_id:"organization",name:"organization",icon:r.logo,self:!1,description:"Notify all workspace members",groupDataType:r.logo?null:"organizationPlaceholder",group:!0}),i&&d.push({_id:"project",name:"project",self:!1,description:"Notify all project members",groupDataType:s.icon.type,group:!0}),[...d.filter((({name:e})=>e.toLowerCase().startsWith(i))),...o.filter((({user:{status:e,username:t,fullName:a,_id:n}})=>"invited"!==e&&("me"===i&&Zeplin.user._id===n||t.toLowerCase().startsWith(i)||a&&a.toLowerCase().startsWith(i)))).map((({user:e,user:{username:t,email:a,_id:n}})=>({_id:n,name:t||a,icon:(0,u.getUserAvatar)(e).src,self:Zeplin.user._id===n})))]}(e,i,n.selectionStart),r=Math.max(0,Math.min(t.length?a:s.findIndex((({group:e})=>!e)),s.length-1));this.setState(A({suggestedUsers:s,selectedUserIndex:r},this.getSuggestionPositions()))}getSuggestionPositions(){const{textAreaMirror:e}=this.nodeRefs;let t=0,a=0;const n=(0,u.findFirstPositionedAncestor)(this.autocompleteListRef.current);n&&({top:t,left:a}=n.getBoundingClientRect());const{top:i,bottom:s,left:r}=e.getBoundingClientRect();return{suggestionPositionedParentTop:t,suggestionPositionedParentLeft:a,suggestionTargetTop:i,suggestionTargetBottom:s,suggestionTargetLeft:r}}get maxLength(){const{maxLength:e}=this.props,{value:t}=this.state;return(0,S.getBrowser)()===S.BROWSER.SAFARI?e+(t.match(/\n/g)||[]).length:e}submit(){const{resetOnSubmit:e,disabledWhenEmpty:t,onSubmit:a,formatter:n,barrelId:i}=this.props,{value:s,originalValue:r}=this.state;if(!(s.length>this.maxLength))if(s!==r||t){if(t&&!s)return;const o={error:"",editing:!1,originalValue:s,formattedContent:n?n(s,this.handleFormattedContentUpdate,i):s};e&&(o.value=r),this.setState(o),a(s)}else this.cancelEdit()}handleFormattedContentUpdate(e,t){const{value:a}=this.state;t===a&&this.setState({formattedContent:e})}handleSubmit(){const{submitOnBlur:e,onSubmit:t}=this.props,{value:a}=this.state;a.length>this.maxLength||(!e&&t&&this.submit(),this.nodeRefs.textArea.blur())}handleBlur(){const{submitOnBlur:e,onSubmit:t}=this.props,{uploading:a}=this.state;e&&!a&&t&&this.submit()}handleButtonClick(){const{readOnly:e}=this.props;e||this.handleSubmit()}handleClick(e){const{readOnly:t,autoEdit:a}=this.props,{editing:n}=this.state;e.target.closest("a")?e.stopPropagation():!a||t||n||this.setState((e=>({editing:!0,originalValue:e.value})))}handleInput(e){const{readOnly:t,onInput:a}=this.props;if(t)return;const{value:n}=e.target;this.setState({value:n,error:"",autoCompletedEmoji:!1,autoCompletedUser:!1},(()=>{a&&a(n)}))}handleKeyDown(e){const{readOnly:t,showEmojiAutoComplete:a,showUserAutoComplete:n}=this.props,{editing:i,uploading:s,suggestedEmojis:r,suggestedUsers:o}=this.state;if(t)return;if(a&&i&&0!==r.length)return e.stopPropagation(),void this.handleKeyDownWhenEmojiListOpen(e);if(n&&i&&0!==o.length)return e.stopPropagation(),void this.handleKeyDownWhenUserListOpen(e);e.key===f.Keyboard.Key.Escape&&(e.stopPropagation(),this.cancelEdit()),e.key===f.Keyboard.Key.Enter&&(0,S.cmdKey)(e)&&!s&&(e.stopPropagation(),this.handleSubmit())}handleKeyDownEmojiListActions(e){switch(e.keyCode){case Zeplin.KEY_CODE.ESC:this.setState({suggestedEmojis:[]});break;case Zeplin.KEY_CODE.ENTER:this.handleSelectEmoji();break;case Zeplin.KEY_CODE.ArrowDown:this.setState((e=>e.selectedEmojiIndex>=e.suggestedEmojis.length-1?{selectedEmojiIndex:e.suggestedEmojis.length-1}:{selectedEmojiIndex:e.selectedEmojiIndex+1}));break;case Zeplin.KEY_CODE.ArrowUp:this.setState((e=>e.selectedEmojiIndex<=0?{selectedEmojiIndex:0}:{selectedEmojiIndex:e.selectedEmojiIndex-1}))}}handleKeyDownUserListActions(e){switch(e.keyCode){case Zeplin.KEY_CODE.ESC:this.setState({suggestedUsers:[]});break;case Zeplin.KEY_CODE.ENTER:this.handleSelectUser();break;case Zeplin.KEY_CODE.ArrowDown:this.setState((e=>e.selectedUserIndex>=e.suggestedUsers.length-1?{selectedUserIndex:e.suggestedUsers.length-1}:{selectedUserIndex:e.selectedUserIndex+1}));break;case Zeplin.KEY_CODE.ArrowUp:this.setState((e=>e.selectedUserIndex<=0?{selectedUserIndex:0}:{selectedUserIndex:e.selectedUserIndex-1}))}}handleKeyDownWhenEmojiListOpen(e){(e.keyCode===Zeplin.KEY_CODE.ENTER||e.keyCode===Zeplin.KEY_CODE.ArrowDown||e.keyCode===Zeplin.KEY_CODE.ArrowUp)&&(e.preventDefault(),e.stopPropagation()),this.handleKeyDownEmojiListActions(e)}handleKeyDownWhenUserListOpen(e){(e.keyCode===Zeplin.KEY_CODE.ENTER||e.keyCode===Zeplin.KEY_CODE.ArrowDown||e.keyCode===Zeplin.KEY_CODE.ArrowUp)&&(e.preventDefault(),e.stopPropagation()),this.handleKeyDownUserListActions(e)}handleKeyUp(e){e.keyCode!==Zeplin.KEY_CODE.ArrowLeft&&e.keyCode!==Zeplin.KEY_CODE.ArrowRight&&e.keyCode!==Zeplin.KEY_CODE.ArrowUp&&e.keyCode!==Zeplin.KEY_CODE.ArrowDown||(this.props.showEmojiAutoComplete&&this.setState({autoCompletedEmoji:!1},this.changeSuggestedEmojis),this.props.showUserAutoComplete&&this.setState({autoCompletedUser:!1},this.changeSuggestedUsers))}handleEmojiClick(e){this.setState({selectedEmojiIndex:e},this.handleSelectEmoji)}handleUserClick(e){this.setState({selectedUserIndex:e},this.handleSelectUser)}handleEmojiMouseOver(e){this.setState({selectedEmojiIndex:e})}handleUserMouseOver(e){this.setState({selectedUserIndex:e})}handleSelectEmoji(){const{onInput:e}=this.props,{suggestedEmojis:t,selectedEmojiIndex:a,value:n}=this.state,{textArea:i}=this.nodeRefs,s=t[a],r=i.selectionStart,o=n.substring(0,r).lastIndexOf(":"),d=s.formattedAlias,l=`${n.substring(0,o)}:${d}: ${n.substring(r)}`,c=o+d.length+3;this.setState({error:"",value:l,autoCompletedEmoji:!0,suggestedEmojis:[]},(()=>{i.focus(),i.setSelectionRange(c,c),e&&e(l)}))}handleSelectUser(){const{onInput:e}=this.props,{suggestedUsers:t,selectedUserIndex:a,value:n}=this.state,{textArea:i}=this.nodeRefs,{name:s}=t[a],r=i.selectionStart,o=n.lastIndexOf("@",r),d=`${n.substring(0,o+1)}${s} ${n.substring(r)}`,l=o+s.length+2;this.setState({error:"",value:d,autoCompletedUser:!0,suggestedUsers:[]},(()=>{i.focus(),i.setSelectionRange(l,l),e&&e(d)}))}handleTextAreaClick(){this.state.editing&&(this.changeSuggestedEmojis(),this.changeSuggestedUsers())}async handleFileUpload(e,t){if(this.state.uploading)return;const a=[...t].find((e=>d.IMAGE_MIME_TYPES.includes(e.type)));if(!a)return;if(e.preventDefault(),e.stopPropagation(),a.size>1e7)return void this.setState({error:"Smaller than 10 MB please!"});const{onInput:n}=this.props,{value:i}=this.state,{textArea:s}=this.nodeRefs,r=(0,p.getFilenameWithoutExtensionFromPath)(a.name);let o="";/\n$/.test(i)?o=i:i&&(o=`${i}\n`),this.setState({error:"",uploading:!0,value:`${o}![${r}](Uploading…)`});try{this.abortController=new AbortController;const{fileURL:e}=await(0,d.uploadCommentImage)(a,this.abortController.signal);this.abortController=null;const t=`${o}![${r}](${e})\n`;this.setState({uploading:!1,value:t},(()=>{s.focus(),s.setSelectionRange(t.length,t.length),n&&n(t)}))}catch(l){if("AbortError"===l.name)return;this.setState({uploading:!1,value:i},(()=>{s.focus(),s.setSelectionRange(i.length,i.length),n&&n(i)}))}}handleDrop(e){this.handleFileUpload(e,e.dataTransfer.files)}handlePaste(e){this.handleFileUpload(e,e.clipboardData.files)}handleFileInputChange(e){this.handleFileUpload(e,e.target.files)}componentDidMount(){const{value:e,editing:t}=this.props,{textArea:a}=this.nodeRefs;t&&(a.focus(),a.setSelectionRange(e.length,e.length))}componentWillReceiveProps(e){const{value:t="",editing:a}=e,n={};void 0!==a&&Object.assign(n,{editing:a}),this.state.originalValue!==t&&Object.assign(n,{value:t,originalValue:t}),0!==Object.keys(n).length&&this.setState(n)}componentDidUpdate(e,t){const{showEmojiAutoComplete:a,showUserAutoComplete:n,formatter:i,barrelId:s}=this.props,{editing:r,value:o,autoCompletedEmoji:d,autoCompletedUser:l}=this.state,{textArea:c}=this.nodeRefs;r&&t.editing!==r&&(c.focus(),c.setSelectionRange(o.length,o.length)),a&&!d&&o!==t.value&&this.changeSuggestedEmojis(),n&&!l&&o!==t.value&&this.changeSuggestedUsers(),t.value!==o&&this.setState({formattedContent:i?i(o,this.handleFormattedContentUpdate,s):o})}renderEditorInfo(){const{markdownEditor:e}=this.props,{value:t,error:a}=this.state;if(a)return n.h("div",{class:"error"},a);if(e&&!t)return n.h("div",{class:"markdownInfo"},n.h("strong",null,"**bold**")," ",n.h("em",null,"_italic_")," ",n.h("code",null,"`code`")," ",n.h("span",null,">quote"));const i=(0,o.default)("counter",{negative:t.length>this.maxLength});return n.h("div",{class:i},this.maxLength-t.length)}renderAutocompleteLists(){const{autoCompleteContainer:e,showEmojiAutoComplete:t,showUserAutoComplete:a}=this.props,{editing:i,suggestionPositionedParentTop:s,suggestionPositionedParentLeft:r,suggestionTargetTop:o,suggestionTargetBottom:d,suggestionTargetLeft:l,suggestedEmojis:c,selectedEmojiIndex:u,suggestedUsers:p,selectedUserIndex:f}=this.state,S=n.h(O.default,{baseRef:this.autocompleteListRef,tabIndex:"-1",positionedParentTop:s,positionedParentLeft:r,targetTop:o,targetBottom:d,targetLeft:l},t&&i&&0!==c.length&&n.h(E.default,{onItemClick:this.handleEmojiClick,onItemMouseOver:this.handleEmojiMouseOver,suggestedEmojis:c,selectedIndex:u}),a&&i&&0!==p.length&&n.h(g.default,{onItemClick:this.handleUserClick,onItemMouseOver:this.handleUserMouseOver,suggestedUsers:p,selectedIndex:f}));return e?n.h(_.default,{into:e},S):S}render(){const{containerClass:e,class:t,color:a,placeholder:i,buttonLabel:s,disabledWhenEmpty:r,markdownEditor:d,openFilePicker:c}=this.props,{editing:u,uploading:p,value:f,formattedContent:E}=this.state,g=(0,S.getOS)()===S.OS.MAC?"⌘⏎":"Ctrl+⏎",O=(0,o.default)("shortcut",{[(0,S.getOS)()]:!0}),T=p||f.length>this.maxLength||r&&!f;return n.h("div",{class:(0,o.default)("textAreaContainer",e)},n.h("div",{class:(0,o.default)("textArea",t,{editing:u,markdownEditor:d},a)},n.h("div",{class:(0,o.default)("formattedContent",{placeholder:i&&!f}),onClick:this.handleClick,dangerouslySetInnerHTML:{__html:E||i}}),n.h("div",{class:"editor"},n.h("div",{ref:(0,l.default)(this,"textAreaMirror"),class:"mirror"},f," "),n.h("textarea",{ref:(0,l.default)(this,"textArea"),value:f,spellcheck:"false",placeholder:i,readOnly:p,onClick:this.handleTextAreaClick,onInput:this.handleInput,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onBlur:this.handleBlur,onDrop:d?this.handleDrop:null,onPaste:d?this.handlePaste:null})),n.h("div",{class:"controls",tabIndex:"-1"},this.renderEditorInfo(),d&&n.h(h.default,{open:c,disabled:p,onChange:this.handleFileInputChange}),n.h("button",{type:"button",class:"submit",disabled:T,ref:(0,l.default)(this,"submitButton"),onClick:this.handleButtonClick},n.h("span",{class:"labelMirror"},s),n.h("span",{class:"label"},s),n.h("span",{class:O},g)))),this.renderAutocompleteLists())}}I.propTypes={autoEdit:s().bool,value:s().string,containerClass:s().string,class:s().string,color:s().oneOf(["yellow","orange","peach","green","turquoise","cornflowerBlue","deepPurple"]).isRequired,editing:s().bool,maxLength:s().number.isRequired,placeholder:s().string,buttonLabel:s().string,readOnly:s().bool,submitOnBlur:s().bool,onSubmit:s().func,resetOnSubmit:s().bool,disabledWhenEmpty:s().bool,markdownEditor:s().bool,onCancelEdit:s().func,formatter:s().func,showEmojiAutoComplete:s().bool,showUserAutoComplete:s().bool,openFilePicker:s().bool,barrelId:s().string},I.defaultProps={autoEdit:!1,value:"",placeholder:"",buttonLabel:"Done",readOnly:!1,submitOnBlur:!1,onSubmit:null,resetOnSubmit:!1,disabledWhenEmpty:!1,markdownEditor:!1,onCancelEdit:null,showEmojiAutoComplete:!1,showUserAutoComplete:!1,openFilePicker:!1,barrelId:null};const N=I},,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n=a(831).default},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(93),i=a(99),s=a(827);a(832);function r(e){const{name:t,self:a,description:s,icon:r,groupDataType:o,selected:d,onClick:l,onMouseOver:c,listRef:u,fullName:p}=e;return(0,n.h)("div",{class:(0,i.default)({selected:d},"userItem"),onMouseOver:c,onClick:l,ref:u},r&&(0,n.h)("img",{class:"userImg",src:r}),!r&&(0,n.h)("img",{class:"userImg","data-type":o}),(0,n.h)("div",{class:"userInfo"},(0,n.h)("span",{class:(0,i.default)({self:a},"userName","ellipsis")},p||t),s&&(0,n.h)("span",{class:"userDescription ellipsis"},s)))}function o({suggestedUsers:e,selectedIndex:t,onItemClick:a,onItemMouseOver:o,class:d}){return(0,n.h)(s.default,{class:(0,i.default)("userAutoCompleteList",d),options:e,keyProp:"_id",selectedIndex:t,onItemMouseOver:o,onItemClick:a,RowComponent:r})}},(e,t,a)=>{"use strict";a.r(t)},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{getSuggestedEmojis:()=>s});var n=a(837);const i=/\s/;function s(e,t,a){const s=e.substring(0,t),r=s.lastIndexOf(":"),o=e.substring(r,t).match(/^:(.+)/);if(o){const e=o[0].substring(1);if(i.test(e))return[];const t=s.substring(0,r).lastIndexOf(":"),d=s.substring(t,r+1).match(n.default.EMOJI_CANDIDATE_REGEX);return d&&n.default.searchEmoji(d[0].substring(1,d[0].length-1),a)?[]:n.default.getSuggestedEmojis(e,a)}return[]}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(838),i=a.n(n),s=a(393),r=a(106),o=a(264);const d=i()(),l=/:(\S+?):/g,c=/\ud83c[\udffb-\udfff]/g;function u(e,t){var a,n;const i=e.replace(/_/g," "),{projectsEmojis:r}=o.default.EmojisStore.getState(),d=t?r[t]:void 0,{customEmojis:l,defaultEmojiAliases:c}=null!=d?d:{};for(let o=0;o<s.default.length;o++){const{emoji:e,aliases:t}=s.default[o],n=[...t,...null!==(a=null==c?void 0:c[o])&&void 0!==a?a:[]].find((e=>e===i));if(n)return p(e,n,!1)}for(let s=0;s<(null!==(n=null==l?void 0:l.length)&&void 0!==n?n:0);s++){const{emoji:e,aliases:t}=l[s],a=t.find((e=>e===i));if(a)return p(e,a,!0)}}function p(e,t,a){return{emoji:e,alias:t,customEmoji:a,formattedAlias:t.replace(/\s/g,"_")}}const f={EMOJI_CANDIDATE_REGEX:l,searchEmoji:u,getSuggestedEmojis:function(e,t){const a=e.toLowerCase().replace(/_/g," ").trim(),{projectsEmojis:n}=o.default.EmojisStore.getState(),i=t?n[t]:void 0,{customEmojis:d,defaultEmojiAliases:l}=null!=i?i:{},c=[];return s.default.forEach(((e,t)=>{var n;for(const i of[...e.aliases,...null!==(n=null==l?void 0:l[t])&&void 0!==n?n:[]])if((0,r.anyWordStartsWith)(i,a)||i.startsWith(a))return void c.push(p(e.emoji,i,!1))})),null==d||d.forEach((e=>{for(const t of e.aliases)if((0,r.anyWordStartsWith)(t,a)||t.startsWith(a))return void c.push(p(e.emoji,t,!0))})),c},spanEmojis:function(e){return e.replace(d,(e=>c.test(e)?`<span class="emoji skinType">${e}</span>`:`<span class="emoji">${e}</span>`)).replace(/<\/span><span class="emoji skinType">/g,"")},formatEmojiString:function(e,t){return e.replace(l,((e,a)=>{const n=u(a,t);return n?n.customEmoji?`<img class="customEmoji" src="${n.emoji}" title="${a}">`:n.emoji:`<span class="customEmojiPlainText">${e}</span>`}))},canWeMakeThisJumbo:function(e,t=5){var a,n;const i=(null!==(a=e.match(d))&&void 0!==a?a:[]).length+(null!==(n=e.match(l))&&void 0!==n?n:[]).length,s=e.replace(d,"").replace(l,"");return!s.trim()&&s.length<=t&&i>0&&i<=t}}},,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={npsSurveyContainer:"UD23cWsZPTJppHWxQNbc",closeButton:"EbcUWuEVM4ZWofbFL9fQ",questionText:"_7DDqyB5KhzikoSSmTxb",rateAnswerWrapper:"d7IQZLSlDdlOk_yCJYZ9",rateHintContainer:"GrrCpwFYv6VAVLZfe0t3",rateHintText:"HhRcyeE_iep7kD0bxhMf",rateButtonsContainer:"ogM_75xbo6aS9Dd962qA",rateButton:"tl6Hzvf5xzH78ww5h0eU",feedbackTextarea:"hewoMScHnYdA6FCb4Ajc"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(93),i=a(7),s=a(535),r=a(264),o=a(560),d=a(842),l=a(651),c=a(1036);class u extends n.Component{constructor(){super(...arguments),this.setOffline=()=>{this.setState({isOnline:!1})},this.setOnline=()=>{this.setState({isOnline:!0})},this.handleClick=()=>{o.default.closeGlobalSearchPopup()}}static getStores(){return[r.default.GlobalSearchStore,r.default.SpaceStore,r.default.BarrelStore,r.default.ActivitiesViewStore,r.default.AppStore,r.default.UserStore]}static calculateState(e){var t;const{globalSearchPopupOpen:a,lastSearchedTerm:n,lastOrganizationId:s,lastResultEntity:o,lastTotalNumberOfResults:d,lastSelectedItemIndex:l}=r.default.GlobalSearchStore.getState(),{selectedOrganizationId:c}=r.default.SpaceStore.getState(),{organizationId:u,selectedView:p}=r.default.BarrelStore.getState(),{selectedOrganizationId:f}=r.default.ActivitiesViewStore.getState(),{page:S}=r.default.AppStore.getState(),{globalSearchNewTagMenuSeen:h}=r.default.UserStore.getState();let E;E="workspace"===S?c:"activities"===S?f||c:(i.ProjectViewTypes.SCREEN,u||c);const g=s===E;return{globalSearchPopupOpen:a,selectedOrganizationId:E,lastResultEntity:g?o:{results:[],resultBatchId:null},lastSearchedTerm:g?n:"",lastTotalNumberOfResults:g?d:0,lastSelectedItemIndex:g?l:0,isOnline:null===(t=null==e?void 0:e.isOnline)||void 0===t||t,globalSearchNewTagMenuSeen:h}}componentDidMount(){window.addEventListener("online",this.setOnline),window.addEventListener("offline",this.setOffline)}componentWillUnmount(){window.removeEventListener("online",this.setOnline),window.removeEventListener("offline",this.setOffline)}render(){const{globalSearchPopupOpen:e,selectedOrganizationId:t,lastResultEntity:a,lastSearchedTerm:i,lastTotalNumberOfResults:s,lastSelectedItemIndex:r,isOnline:o,globalSearchNewTagMenuSeen:u}=this.state;return e?(0,n.h)("div",{class:c.default.globalSearchContainer,onClick:this.handleClick},(0,n.h)(d.default,{selectedOrganizationId:t,globalSearchNewTagMenuSeen:u,lastSearchedTerm:i,lastResultEntity:a,lastTotalNumberOfResults:s,lastSelectedItemIndex:r,isOnline:o,onGlobalSearchNewTagMenuOpen:l.default.markGlobalSearchNewTagMenuSeen})):null}}const p=(0,s.default)(u)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(843)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(93),i=a(99),s=a(185),r=a(106),o=a(4),d=a(811),l=a(844),c=a(847),u=a(560),p=a(434),f=a(120),S=a(861),h=a(104),E=a(868),g=a(872),O=a(873),T=a(1035),m=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};class _ extends n.Component{constructor(){super(...arguments),this.inputRef=(0,n.createRef)(),this.fetchDataTimeout=null,this.abortController=null,this.state={totalNumberOfResults:this.props.lastTotalNumberOfResults,loading:!1,searchTerm:this.props.lastSearchedTerm,resultEntity:this.props.lastResultEntity,selectedResultIndex:this.props.lastSelectedItemIndex,queryUpdated:!1,menuSeen:this.props.globalSearchNewTagMenuSeen,latestValidSearch:{total:this.props.lastTotalNumberOfResults,searchTerm:this.props.lastSearchedTerm,resultEntity:this.props.lastResultEntity},hasError:!1},this.fetchNewData=()=>m(this,void 0,void 0,(function*(){const{selectedOrganizationId:e}=this.props,{searchTerm:t}=this.state;try{this.abortController=new AbortController;const{results:a,total:n}=yield(0,f.search)(e,{term:t,types:[O.GlobalSearchResultType.Colors,O.GlobalSearchResultType.TextStyles,O.GlobalSearchResultType.Annotations,O.GlobalSearchResultType.DotComments,O.GlobalSearchResultType.Flows,O.GlobalSearchResultType.FlowGroups,O.GlobalSearchResultType.OrganizationSections,O.GlobalSearchResultType.Projects,O.GlobalSearchResultType.Styleguides,O.GlobalSearchResultType.Screens,O.GlobalSearchResultType.ProjectSections,O.GlobalSearchResultType.Components,O.GlobalSearchResultType.ComponentSections]},this.abortController.signal);this.abortController=null;const i=(0,r.getRandomString)();mixpanel.master.track("Executed global search",{"Global Search Text String":t,"Search Results Returned Quantity":n}),0===n&&mixpanel.master.track("Produced global search null result",{"Global Search Text String":t});const s=a.map(((t,a)=>(0,g.globalSearchResultMapper)(t,e,a)));this.setState({totalNumberOfResults:n,resultEntity:{results:s,resultBatchId:i},loading:!1,selectedResultIndex:0,queryUpdated:!1,latestValidSearch:{total:n,resultEntity:{results:s,resultBatchId:i},searchTerm:t},hasError:!1})}catch(a){if("AbortError"===a.name)return;console.error(a),this.setState({totalNumberOfResults:0,resultEntity:{results:[],resultBatchId:null},loading:!1,selectedResultIndex:0,queryUpdated:!1,hasError:!0})}})),this.handleSelectResult=e=>{const{latestValidSearch:{searchTerm:t,total:a},resultEntity:{results:n,resultBatchId:i}}=this.state,s=e.split("-");if(2!==s.length)return;const[r,o]=s,d=parseInt(o,10),l="null"!==r&&"string"==typeof i&&r===i,c=!isNaN(d)&&d>=0&&d<n.length;if(!l||!c)return;const f=n[d],{type:S,link:h,index:E}=f;mixpanel.master.track("Clicked global search search result",{"Search Result Resource Type":S,"Global Search Text String":t,"Search Results Returned Quantity":a,"Search Result Position":E}),this.setState({selectedResultIndex:E},(()=>{u.default.closeGlobalSearchPopup(),p.default.history.push(h)}))},this.handleInput=e=>{const{value:t}=e.target;this.setState({searchTerm:t,loading:!!t.length})},this.handleCancelSearch=()=>{this.setState({searchTerm:""},(()=>{var e;return null===(e=this.inputRef.current)||void 0===e?void 0:e.focus()}))},this.handleFeedbackClick=()=>{const e=new URL(window.location.href),t=Object.assign(Object.assign({},(0,h.parseUrlParams)(e.search)),{feedback:"globalSearch"});e.search=(0,h.joinUrlParams)(t),p.default.history.replace(e.toString()),Intercom("showNewMessage","Global Search Feedback: "),mixpanel.master.track("Clicked global search footer share feedback link")},this.handleNewTagMenuOpen=()=>{mixpanel.master.track("Clicked global search new feature button");const{menuSeen:e}=this.state;e||(this.setState({menuSeen:!0}),this.props.onGlobalSearchNewTagMenuOpen())},this.handleNewTagLearnMoreClick=()=>{mixpanel.master.track("Clicked global search new feature learn more link")},this.handleNewTagShareFeedbackClick=()=>{mixpanel.master.track("Clicked global search new feature share feedback link")}}componentDidMount(){var e,t;null===(e=this.inputRef.current)||void 0===e||e.focus(),null===(t=this.inputRef.current)||void 0===t||t.select()}componentDidUpdate(e,t){const{searchTerm:a}=this.state;t.searchTerm!==a&&(this.setState({queryUpdated:!0}),this.fetchDataTimeout&&clearTimeout(this.fetchDataTimeout),this.abortController&&(this.abortController.abort(),this.abortController=null),a?(this.setState({loading:!0,hasError:!1}),this.fetchDataTimeout=setTimeout((()=>{this.fetchNewData()}),300)):(mixpanel.master.track("Cleared global search query",{"Global Search Text String":t.searchTerm}),this.setState({resultEntity:{results:[],resultBatchId:null},selectedResultIndex:0,queryUpdated:!1,latestValidSearch:{total:0,searchTerm:"",resultEntity:{results:[],resultBatchId:null}},hasError:!1})))}componentWillUnmount(){const{latestValidSearch:e,selectedResultIndex:t}=this.state;this.abortController&&(this.abortController.abort(),this.abortController=null),this.fetchDataTimeout&&clearTimeout(this.fetchDataTimeout),u.default.saveSearchData({term:e.searchTerm,resultEntity:e.resultEntity,organizationId:this.props.selectedOrganizationId,totalNumberOfResults:e.total,selectedItemIndex:t})}renderListItemContent(e,t){return(0,n.h)(c.default,{item:e,selected:t})}renderListItems(){const{resultEntity:{results:e,resultBatchId:t}}=this.state;return e.map(((e,a)=>(0,n.h)(E.default.ListItem,{key:`${e._id}-${a}`,item:e,value:`${t}-${a}`,renderItem:this.renderListItemContent})))}renderFooter(){const{resultEntity:{results:e},loading:t,totalNumberOfResults:a,queryUpdated:s,hasError:o}=this.state,{isOnline:d}=this.props;let c=(0,n.h)(n.Fragment,null,(0,n.h)("span",null,"Loading results"),(0,n.h)(l.default,{class:(0,i.default)(T.default.loadingIndicator,{[T.default.loading]:s}),width:16,height:16}));return e.length?c=(0,n.h)(n.Fragment,null,(0,r.pluralize)(a,"result"),(0,n.h)(l.default,{class:(0,i.default)(T.default.loadingIndicator,{[T.default.loading]:s}),width:16,height:16})):d?o?c=(0,n.h)("span",null,"Fetching results failed. Please try again."):t||o||(c=(0,n.h)(n.Fragment,null,(0,n.h)("span",null,"No results"),(0,n.h)("span",{class:T.default.feedback},"Didn’t find what you wanted? ",(0,n.h)("a",{onClick:this.handleFeedbackClick},"Give us feedback")))):c=(0,n.h)("span",null,"No connection. Go online to see search results"),(0,n.h)("div",{class:T.default.globalSearchResultsListFooter},c)}render(){const{searchTerm:e,menuSeen:t,resultEntity:{results:a},selectedResultIndex:r}=this.state,l=!e.length,c=(0,o.getOS)()===o.OS.MAC;return(0,n.h)("div",{class:(0,i.default)(T.default.globalSearchWrapper,"noSelect"),onClick:s.stopPropagation},(0,n.h)("div",{class:T.default.shareFeedbackWrapper},(0,n.h)(S.default,{intercomMessageTag:"Global Search",learnMoreUrl:"https://zpl.io/search",intercomUrlMatchString:"globalSearch",featureName:"Global Search",featureDescription:"You can now search for projects, screens, and more from anywhere in Zeplin.",menuSeen:t,menuOriginOffsetX:0,menuOriginOffsetY:10,onMenuOpen:this.handleNewTagMenuOpen,onLearnMoreClick:this.handleNewTagLearnMoreClick,onShareFeedbackClick:this.handleNewTagShareFeedbackClick})),(0,n.h)("div",{class:T.default.searchBarWrapper},(0,n.h)("input",{ref:this.inputRef,dir:"auto",value:e,type:"search",placeholder:"Search workspace",onInput:this.handleInput,autoFocus:!0,spellcheck:!1}),l&&(0,n.h)("div",{class:(0,i.default)(T.default.shortcutHint)},(0,n.h)("div",{class:(0,i.default)(T.default.shortcutKey,{[T.default.mac]:c})},c?"⌘":"Ctrl"),(0,n.h)("div",{class:T.default.shortcutCombinator},"+"),(0,n.h)("div",{class:T.default.shortcutKey},"K")),!l&&(0,n.h)("button",{class:T.default.closeButton,onClick:this.handleCancelSearch},(0,n.h)(d.default,{width:16,height:16}))),!l&&!!a.length&&(0,n.h)(E.default,{selectedItemIndex:r,class:T.default.globalSearchResultsList,onSelect:this.handleSelectResult},this.renderListItems()),!l&&this.renderFooter())}}const b=_},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(848)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(93),i=a(96),s=a(849),r=a(99),o=a(404),d=a(400),l=a(185),c=a(850),u=a(851),p=a(852),f=a(853),S=a(854),h=a(855),E=a(856),g=a(857),O=a(858),T=a(859),m=a(860);const _=Object.freeze({[s.default.OrganizationSections]:"Workspace Section",[s.default.Projects]:"Project",[s.default.Flows]:"Flow Board",[s.default.FlowGroups]:"Flow Group",[s.default.ProjectSections]:"Screen Section",[s.default.Screens]:"Screen",[s.default.DotComments]:"Comment",[s.default.Annotations]:"Annotation",[s.default.Styleguides]:"Styleguide",[s.default.Colors]:"Color Style",[s.default.TextStyles]:"Text Style",[s.default.ComponentSections]:"Component Section",[s.default.Components]:"Component",[s.default.Assets]:"Asset"});const b=function({item:e,selected:t}){const[a,b]=(0,i.useState)(null);function C(e,t){let a=e;for(let n=0;n<t.length;n++){const e=t[n];a=a.replace(new RegExp(`&lt;${e}&gt;`,"gm"),`<${e}>`),a=a.replace(new RegExp(`&lt;/${e}&gt;`,"gm"),`</${e}>`)}return a}function A(e){e!==a&&b(e)}const{type:y,link:I}=e;return(0,n.h)("a",{href:I,onClick:l.preventDefault,class:(0,r.default)(m.default.globalSearchResultListItem,{[m.default.selected]:t})},(0,n.h)("div",{class:m.default.icon},function(){const{type:a}=e,i=t?"#fff":"var(--teflon)";switch(a){case s.default.Projects:case s.default.ProjectSections:return(0,n.h)(g.default,{color:i});case s.default.Screens:return(0,n.h)(c.default,{color:i});case s.default.Components:case s.default.ComponentSections:return(0,n.h)(O.default,{width:26,height:26,color:i});case s.default.DotComments:return(0,n.h)(u.default,{color:i});case s.default.Annotations:return(0,n.h)(p.default,{color:i});case s.default.Styleguides:return(0,n.h)(E.default,{color:i});case s.default.TextStyles:return(0,n.h)(h.default,{color:i});case s.default.Colors:return(0,n.h)(S.default,{color:i});case s.default.Flows:case s.default.FlowGroups:return(0,n.h)(T.default,{color:i});default:return(0,n.h)(f.default,{color:i})}}()),function(){const{mainText:t,variantParentText:i,path:s,mainTextContainsTag:l,variantTextContainsTag:c}=e,u=["em"];let p,f;if(l)p=(0,n.h)("span",null,t);else{let e=(0,d.escapeHTML)(t);e=C(e,u),p=(0,n.h)("span",{dangerouslySetInnerHTML:{__html:e}})}if(i)if(c)f=(0,n.h)("span",null,i);else{let e;e=(0,d.escapeHTML)(i),e=C(e,u),f=(0,n.h)("span",{dangerouslySetInnerHTML:{__html:e}})}return(0,n.h)("div",{class:m.default.nameAndPath},(0,n.h)("div",{class:(0,r.default)(m.default.name,"ellipsis")},p,f?(0,n.h)(n.Fragment,null,(0,n.h)("i",null," variant of "),f):null),s&&(0,n.h)("span",{ref:A,class:m.default.path},function(){const{path:t}=e;if(!t||!t.length)return null;const n=t.join(" ▸ ");if(!a)return n;let i=n,s=n;const r=a.offsetWidth;for(;Math.floor((0,o.getTextWidth)(s,"400 12px Roboto"))>r;){const e=Math.floor(i.length/2),t=i.substring(0,e),a=i.substring(e+1);s=`${t}…${a}`,i=`${t}${a}`}return s}()))}(),(0,n.h)("div",{class:m.default.type},_[y]))}},,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={globalSearchResultListItem:"_9OjS58IuqK5pgjeqLex5",selected:"O1G6mIM5vsPh0DeKdw4i",icon:"OFBsIW8Ei2wX57jVwH9w",type:"CkXJOxRQB9pZP7pI3wQA",nameAndPath:"noGgjqXjkC0b4JUnR294",name:"hkWcxXernE6RG4y1v4VL",path:"pHjXn7PMUNXCYl82nOwF"}},,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{globalSearchResultMapper:()=>o});var n=a(849),i=a(104);const s=/<\/?em>/m;function r(e){const t=Object.keys(e);return 1!==t.length||t[0].startsWith("variant")?"name"in e?"name":"description"in e?"description":null:t[0]}function o(e,t,a){var o,d,l;const{type:c,highlight:u,document:p}=e,{id:f,variant:S}=p,h=r(u);let E,g="",O=!1,T=!1;if(h){g=null!==(o=u[h][0])&&void 0!==o?o:"";const e=null!==(d=p[h])&&void 0!==d?d:"";O=s.test(e),g=O?e:g}else if(S){const e=function(e,t){return[`${"variant.name"in t?t["variant.name"]:e.name}`,`${"variant.group.name"in t?t["variant.group.name"]:e.group.name}`]}(S,u);if(2===e.length){[g,E]=e;const t=S.name;O=s.test(t),g=O?t:g;const a=S.group.name;T=s.test(a),E=T?a:E}}const m=function(e){const{type:t,highlight:a,document:i}=e,s=r(a),o=[],d="project"in i;function l(){i.project.section&&o.push(i.project.section.name),o.push(i.project.name)}function c(){i.section&&(i.section.parent&&o.push(i.section.parent.name),o.push(i.section.name))}function u(){d?l():o.push(i.styleguide.name)}switch(t){case n.default.OrganizationSections:return"name"===s?null:[i.name];case n.default.Projects:return i.section||"name"!==s?(i.section&&o.push(i.section.name),"description"===s&&o.push(i.name),o):null;case n.default.ProjectSections:return l(),"description"===s&&o.push(i.name),o;case n.default.Flows:return l(),o;case n.default.FlowGroups:return l(),o.push(i.flow.name),o;case n.default.Screens:return l(),c(),"description"===s&&o.push(i.name),o;case n.default.DotComments:case n.default.Annotations:return l(),i.screen.section&&o.push(i.screen.section.name),o.push(i.screen.name),o;case n.default.Styleguides:return"description"===s?[i.name]:null;case n.default.Colors:case n.default.TextStyles:case n.default.ComponentSections:return u(),i.parent&&o.push(i.parent.name),o;case n.default.Components:return u(),c(),"description"===s&&o.push(i.name),o;default:return null}}(e),_=null!==(l=function(e,t){const a="user"===t,{type:s,document:r}=e,{id:o}=r,d="project"in r;function l(e,t){return d?(0,i.urlResolve)(`project-${e}`,{url:{bid:r.project.id},query:{[`${t}`]:o}}):(0,i.urlResolve)(e,{url:{bid:r.styleguide.id},query:{[`${t}`]:o}})}switch(s){case n.default.OrganizationSections:return a?null:(0,i.urlResolve)("workspace-projects",{url:{oid:t},query:{seid:o}});case n.default.Projects:return(0,i.urlResolve)("project",{url:{bid:o}});case n.default.Flows:return(0,i.urlResolve)("project-flow",{url:{pid:r.project.id,flid:o}});case n.default.FlowGroups:return(0,i.urlResolve)("project-flow",{url:{pid:r.project.id,flid:r.flow.id},query:{fgid:o}});case n.default.ProjectSections:return(0,i.urlResolve)("project",{url:{bid:r.project.id},query:{seid:o}});case n.default.Screens:return(0,i.urlResolve)("project-screen",{url:{pid:r.project.id,sid:o}});case n.default.DotComments:return(0,i.urlResolve)("project-screen",{url:{pid:r.project.id,sid:r.screen.id},query:{did:r.dot.id,cmid:o}});case n.default.Annotations:return(0,i.urlResolve)("project-screen",{url:{pid:r.project.id,sid:r.screen.id},query:{atid:o}});case n.default.Styleguides:return(0,i.urlResolve)("styleguide",{url:{bid:o}});case n.default.Colors:return l("styleguide-colors","cid");case n.default.TextStyles:return l("styleguide-textstyles","tsid");case n.default.ComponentSections:return l("styleguide-components","seid");case n.default.Components:return l("styleguide-components","coid");default:return null}}(e,t))&&void 0!==l?l:"";return{_id:f,type:c,mainText:g,path:m,link:_,index:a,variantParentText:E,mainTextContainsTag:O,variantTextContainsTag:T}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={globalSearchWrapper:"jnlf3bF4wPKP6wOnAfMh",searchBarWrapper:"IAsJpMTZEjUnMCZ4d8g2",shortcutHint:"fttleoPgu3LlHt8teyxC",shortcutCombinator:"tJ9LU0Ros_sWCTgJaJnp",shortcutKey:"PU7AWK3_jejgsW98lboU",mac:"mKkVzZUh9MFUYYH7ic6M",closeButton:"I_TkSaNvjLsTaIe0yhw1",globalSearchResultsList:"QhkNjkknqPy5aJE8tOMd",placeholderListItem:"IAFlRPouDlotkmZcAlAL",globalSearchResultsListFooter:"dR1InDVgG76QQay3AVp1",loadingIndicator:"dVrH5DrfkVCPM8XO2Dh8",loading:"BbmUhSPttGiwdQxX4U6i",shareFeedbackWrapper:"Kl6cFC2XfVA0ixTMlmE1"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={globalSearchContainer:"BahXphvRls4cemwAM1vg"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(1038)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var n=a(93),i=a(6),s=a(96),r=a(159),o=a(149),d=a(404),l=a(11),c=a(4),u=a(99);a(1039);const p="fallback",f="initial",S="downloading",h="ready";function E(){const[e,t]=(0,s.useState)(0);(0,s.useEffect)((()=>{const a=setInterval((()=>{t((e+1)%3)}),1e3);return()=>clearInterval(a)}));const a=`${".".repeat(e+1)}`;return n.h(o.default,{class:"downloadingUpdates",primary:!0,disabled:!0},"Downloading",a)}function g(){const[e,t]=(0,s.useState)(function(){const e=(0,c.getAppVersion)();return!("unknown"!==e&&!e.startsWith("0")&&!e.startsWith("1"))}()?p:f);function a(){(0,d.openLink)("https://zpl.io/download-windows-64")}function g(){t(S),location.assign(`${l.ZPL_PROTOCOL}//update`)}function O(){t(h)}function T(){i.default.ipcRenderer.send("restart-app")}return(0,s.useEffect)((()=>(i.default.ipcRenderer.on("app-update-downloaded",O),()=>i.default.ipcRenderer.removeAllListeners("app-update-downloaded")))),n.h("main",{class:(0,u.default)("windowsAppForceUpdateNotifier",e)},e===h?n.h(r.default,{asset:"/img/imgUpdatedApp.png"}):n.h(r.default,{asset:"/img/imgUpdateApp.png"}),e===h?n.h("h1",null,"Update complete"):e===p?n.h("h1",null,"Download the new Windows app"):n.h("h1",null,"Unbox the new Windows app"),e===h?n.h("p",null,"Congratulations—you can now take advantage of the new, faster Windows app."):e===p?n.h("p",null,"We've built a better and faster Windows app, please download to continue."):n.h("p",null,"We've built a better and faster Windows app, please install the update to continue."),function(){switch(e){case f:return n.h(o.default,{primary:!0,onClick:g},"Install update");case S:return n.h(E,null);case h:return n.h(o.default,{primary:!0,onClick:T},"Relaunch app");default:return n.h(o.default,{primary:!0,onClick:a},"Download new Windows app")}}(),n.h("p",null,"Ping us at ",n.h("a",{href:"mailto:support@zeplin.io"},"support@zeplin.io")," if you have any questions."))}},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(1041)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(93);a(1042);const i=function({onLogin:e,onLogout:t,frequency:a}){return n.h("div",{class:"loginRequiredDialogContainer"},n.h("div",{class:"loginRequiredDialog"},n.h("span",null,"🗝"),n.h("h2",null,document.hasFocus()?"Please login again.":"Welcome back, please login again."),n.h("p",null,"Your organization requires you to login again ",n.h("strong",null,"every ",a),"."),n.h("div",{class:"buttonsContainer"},n.h("button",{onClick:t,class:"logout"},"LOG OUT"),n.h("button",{onClick:e,class:"login"},"LOGIN WITH SSO"))))}},(e,t,a)=>{"use strict";a.r(t)},,,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{setMixpanelGroupProperties:()=>f,trackVisitiedAppEvent:()=>S});var n=a(737),i=a(738),s=a(264),r=a(123),o=a(4),d=a(5),l=a(7),c=a(104);function u(){const{selectedOrganizationId:e}=s.default.SpaceStore.getState(),t=Zeplin.user&&Zeplin.user._id,a=t&&i.default.getOrganizationMember(e,t),n={};return e&&"user"!==e&&(n.workspace_id=e),a&&(n["User Role"]=a.role),n}function p(){mixpanel.master.unregister("workspace_id"),mixpanel.master.unregister("project_id"),mixpanel.master.unregister("styleguide_id"),mixpanel.master.unregister("User Role")}function f(){p(),s.default.SpaceStore.addListener((()=>{mixpanel.master.unregister("workspace_id"),mixpanel.master.unregister("User Role"),mixpanel.master.register(Object.assign({Client:d.isWindowsApp?"Windows":"Web","Client Version":(0,o.getAppVersion)()},u()))})),s.default.BarrelStore.addListener((()=>{p(),mixpanel.master.register(Object.assign(Object.assign({Client:d.isWindowsApp?"Windows":"Web","Client Version":(0,o.getAppVersion)()},u()),function(){const{organizationId:e,barrelType:t,barrelId:a}=s.default.BarrelStore.getState(),i={};if(t&&a){const s=n.default.findUser();t===r.default.PROJECT?i.project_id=a:i.styleguide_id=a,e&&"user"!==e&&(i.workspace_id=e),s&&(i["User Role"]=s.role)}return i}()))}))}function S(e){const t=(0,c.getAppRouteFromPathname)(e);if(!t)return;let a;switch(t){case l.AppRoutes.Workspace:a="Workspace";break;case l.AppRoutes.Project:a="Project";break;case l.AppRoutes.Styleguide:a="Styleguide";break;case l.AppRoutes.ProjectStyleguide:a="Project styleguide";break;case l.AppRoutes.Screen:a="Screen";break;case l.AppRoutes.ScreenVersion:a="Screen version";break;case l.AppRoutes.Notifications:a="Notifications";break;case l.AppRoutes.Flow:a="Flow"}a&&mixpanel.master.track("Visited app",{Location:a})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerProjectRouteHandlers:()=>ye});var n=a(1048),i=a(76),s=a(185),r=a(400),o=a(79),d=a(5),l=a(336),c=a(123),u=a(13),p=a(434),f=a(815),S=a(1049),h=a(739),E=a(738),g=a(1050),O=a(264),T=a(789),m=a(262),_=a(1055),b=a(737),C=a(1060),A=a(1062),y=a(1063),I=a(1064),N=a(1065),P=a(1066),D=a(1067),R=a(1068),v=a(798),L=a(392),j=a(837),U=a(1070),w=a(1071),k=a(120),M=a(106),V=a(397),F=a(402),G=a(410),B=a(104),x=a(1072),W=a(7),z=a(91),H=a(1073),Y=a(1074),q=a(736),K=a(15),J=a(100),Z=a(401),X=a(295),$=a(124),Q=a(80);const ee=["selectedView"],te=["subpage"];function ae(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){se(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let re=null;const oe=document.getElementById("androidResFolderReminderDialog");function de(e){const{userId:t}=O.default.UserStore.getState();return e&&e.dataStage===$.default.Complete&&(0,X.default)(e,t)}function le(e){const{projectName:t,projectFolderType:a,projectFolder:n,projectFolderPathParts:i}=e;_.default.setAssetExportTarget({name:t,type:a,path:n,pathParts:i})}function ce(e,t){if(!e.length)return Promise.resolve({});const a=e.map((e=>{return a=e,n=t,E.default.getOrganizationProfile(a)||k.getOrganizationMemberProfile(a,n);var a,n}));return Promise.all(a).then((t=>Object.fromEntries((0,x.default)(e,t)))).catch(o.handleError)}function ue(e,t){if(!t)return Promise.resolve([]);const{status:a,styleguide:n}=t;return"active"!==a?Promise.resolve([]):Promise.all([n._id,...n.ancestors].map((t=>function(e,{projectId:t}){const a=b.default.getBarrel({bid:e});return a&&a.dataStage===$.default.Complete?a:k.getStyleguide(e,{projectId:t})}(t,{projectId:e}))))}function pe(e,{projectId:t}){const a=b.default.getBarrel({bid:e});return a&&a.localConnectedComponents?{localConnectedComponents:a.localConnectedComponents}:k.getStyleguideLocalConnectedComponents(e,{projectId:t})}function fe(e,t,{local:a=!1}){if(!t)return Promise.resolve([]);const{status:n,styleguide:i}=t;if("active"!==n)return Promise.resolve([]);const s=a?pe:k.getStyleguideConnectedComponents;return Promise.all([i._id,...i.ancestors].map((t=>s(t,{projectId:e}))))}function Se(e,t){const a=k.getProjectConnectedComponents(e),n=fe(e,t,{local:!1}),i="true"===sessionStorage.getItem("connectedComponentsDevModeEnabled");return[a,n,i?k.getProjectLocalConnectedComponents(e):Promise.resolve({localConnectedComponents:null}),i?fe(e,t,{local:!0}):Promise.resolve([])]}function he(e){let t=null,a=[],n=[];return e.did?(1===e.did.length?(t=e.did[0],e.cmid&&(n=e.cmid)):e.did.length>1&&(a=e.did),{dotId:t,highlightedDots:a,highlightedComments:n}):{}}function Ee(e){let t=null;return e.did||e.cmid||!e.atid||([t]=e.atid),{annotationId:t}}function ge(e){const[t]=e.notifications||[];return{showNotificationSettingsDialog:"true"===t}}async function Oe({urlParams:e,projectData:t,organization:a,organizations:i,intermediateScreenLoadPayload:r}){const{pid:p,sid:g}=e,{screenId:T}=O.default.ScreenStore.getState();if(r&&g&&T!==g&&"dashboard"!==e.subpage)return;let m;r||(m=await k.getProjectComponentSections(p));const C=ie(ie({},t),m),[P,{items:R,metadata:L},j,{localConnectedComponents:U},w]=await Promise.all([ue(p,t.styleguideLink),...Se(p,t.styleguideLink)]);C.sections.sort(((e,t)=>e.order<t.order?-1:e.order>t.order?1:0)),C.sections=(0,Z.transformScreenSections)(C.sections);const M=new l.default(ie(ie({},C),{},{connectedComponents:R,localConnectedComponents:U}));r&&(M.componentSections=r.barrelData.data.project.componentSections);const{userId:V}=O.default.UserStore.getState(),{role:G}=M.findUser(V);!function(e,t,a){if(document.body.dataset.projectType=e.type,t){const e=t._id;"frozen"===t.status?n.showOrganizationFrozenBanner({oid:e,currentRole:a,isTeamPlan:(0,q.hasTeamPlan)(t.paymentPlan)}):"past_due"===t.subscriptionStatus?n.showFailedPaymentBanner({oid:e,currentRole:a}):"will_cancel_at_period_end"===t.subscriptionStatus?n.showCancelledSubscriptionBannerIfNecessary({oid:e,currentRole:a,subscriptionCancelAt:t.subscriptionCancelAt}):n.hideSubscriptionStatusBanners()}else{const t=e.findOwner();"past_due"===t.user.subscriptionStatus?n.showFailedPaymentBanner({currentRole:a,ownerEmail:t.user.email}):"will_cancel_at_period_end"===t.user.subscriptionStatus?n.showCancelledSubscriptionBannerIfNecessary({currentRole:a,subscriptionCancelAt:t.user.subscriptionCancelAt}):n.hideSubscriptionStatusBanners()}e.integration.slacks.length>0&&D.default.requestEmojis(e.id)}(M,a,G),j.forEach(((e,t)=>{P[t].connectedComponents=e.items})),w.forEach(((e,t)=>{P[t].localConnectedComponents=e.localConnectedComponents}));const B=a?a._id:"user",x=ce(i.map((e=>e._id)),V),W=(z=B,E.default.getOrganizationProjects(z)||k.getProjects("user"===z?null:z));var z;const X=function(e){return E.default.getOrganizationStyleguides(e)||k.getStyleguides("user"===e?null:e)}(B),$=function(e){return v.default.getFirstFlow(e)?null:k.getProjectFlows(e).catch((e=>(o.handleError(e),[])))}(p);P.forEach((e=>{(0,Y.subscribeToStyleguideChannel)(e._id)}));const[Q,{noVectorAssetInfoHidden:te,densityMismatchWarningHidden:ne,sourceFileInfoHidden:se,componentVariantsOnboardingDialogSeen:re,componentVariantsOnboardingHintboxSeen:oe,componentVariantViewSeen:de,numberOfLayerComponentViews:pe,flowLinkInfoDismissed:fe,screenVariantsOnboardingSeen:Oe,nestedScreenSectionsOnboardingSeen:Te,shouldDisplayFlowNewBadge:me,flowsNewBadgeMenuSeen:be,stageModeNewBadgeMenuSeen:Ce,annotationFirstTimeLandingHidden:Ae,stageModeFirstTimeLandingHidden:ye},Ie,Ne,Pe,De]=await Promise.all([u.barrelPrefs.getAll(M.id),u.userPrefs.getAll(),x,W,X,$]),{assetDensityScalePrefs:Re,assetNamingConvention:ve,collapsedSections:Le,dashboardSidebarWidth:je,extensions:Ue,fixedThumbnailSize:we,lastNoteColorUsed:ke,gridLayoutEnabled:Me,lastConnectorEndStyleUsed:Ve,lastConnectorColorUsed:Fe,lastShapeColorUsed:Ge,lastNoteColorUsedForFlow:Be,noteVisibility:xe,noteStatusFilter:We,annotationStatusFilter:ze,noteColorFilter:He,noResourceInfoDismissed:Ye,screenSidebarWidth:qe,showOptimizedSVG:Ke,showOptimizedPNG:Je,showOptimizedJPG:Ze,slackReconnectionAuntieSeen:Xe,styleguideLeftSidebarWidth:$e,styleguideRightSidebarWidth:Qe,versionsSidebarWidth:et,zoomLevel:tt,connectedComponentsLocalWorkspace:at,lastNoteTypeUsed:nt,lastRemarkTypeUsed:it,onboardingHighlightScreenOpened:st,onboardingLayerCompleted:rt,onboardingDotCompleted:ot,onboardingVersionsCompleted:dt,onboardingAssetsCompleted:lt,screenOnboardingStep:ct,screenOnboardingFlowHintboxHidden:ut,dashboardOnboardingEndingHintboxHidden:pt}=Q,ft={},St={};for(const n of M.screens)Q[n._id]&&(ft[n._id]=Q[n._id].versionsLastSeen,St[n._id]=Q[n._id].lastOpened);L.storybook&&L.storybook.url&&N.default.updateUrl(L.storybook.url);let ht={project:M,organization:a,organizations:i,organizationProfiles:Ie,organizationStyleguides:Pe,linkedStyleguides:P,flows:De};if("user"===B&&(ht=ie(ie({},ht),{},{organizationProjects:Ne})),b.default.isOnboardingProject(M)){const{oid:e}=E.default.findMostRecentOrganizationProfile({organizations:i,organizationProfiles:Ie})||{},t=E.default.getOrganizationProjects(e);e&&!t&&h.default.getBarrels(e)}if(r){const{lastNoteTypeUsed:t,annotationFirstTimeLandingHidden:a}=O.default.AnnotationsStore.getState(),{lastConnectorEndStyleUsed:n,lastConnectorColorUsed:i,lastShapeColorUsed:s,lastNoteColorUsed:o}=O.default.FlowStore.getState(),{dotPopupRemarkType:d,stageModeFirstTimeLandingHidden:l}=O.default.ScreenStore.getState(),c=r.barrelData.data.project.screens.find((({_id:e})=>e===g));ht.project.screens=ht.project.screens.map((e=>e._id===g?c:e));const u=r.barrelData.barrel,{selectedView:p}=u,f=ae(u,ee);_.default.load({barrel:ie(ie({},f),{},{intermediateScreenLoading:!1,organizationId:B}),styleguide:ie({},r.barrelData.styleguide),data:ie({},ht),flows:{lastConnectorEndStyleUsed:n,lastConnectorColorUsed:i,lastShapeColorUsed:s,lastNoteColorUsed:o},annotations:{lastNoteTypeUsed:t,annotationFirstTimeLandingHidden:a},screen:{lastRemarkTypeUsed:d,stageModeFirstTimeLandingHidden:l},user:{userId:V},app:ie({},ge(e))})}else _.default.load({barrel:{barrelType:"project",barrelId:p,organizationId:B,assetDensityScalePrefs:(0,F.initAssetDensityScalePrefsIfNecessary)(M.type,Re),assetNamingConvention:"android"===M.type?"snakeCase":ve,showOptimizedSVG:Ke,showOptimizedPNG:Je,showOptimizedJPG:Ze,noResourceInfoDismissed:Ye,noVectorAssetInfoHidden:te,densityMismatchWarningHidden:ne,sourceFileInfoHidden:se,flowLinkInfoDismissed:fe,showSlackReconnectionAuntie:!Xe,connectedComponentsDevModeEnabled:"true"===sessionStorage.getItem("connectedComponentsDevModeEnabled"),connectedComponentsLocalWorkspace:at,screenVersionsLastSeen:ft,screenLastOpened:St,shouldDisplayFlowNewBadge:me,flowsNewBadgeMenuSeen:be,stageModeNewBadgeMenuSeen:Ce,onboardingHighlightScreenOpened:st,onboardingLayerCompleted:rt,onboardingDotCompleted:ot,onboardingVersionsCompleted:dt,onboardingAssetsCompleted:lt,intermediateScreenLoading:!1},styleguide:{selectedStyleguideSection:"colors",collapsedSections:Le,leftSidebarWidth:$e,rightSidebarWidth:Qe,componentVariantsOnboardingDialogSeen:re},dashboard:{collapsedSections:Le,fixedThumbnailSize:we,sidebarWidth:je,screenVariantsOnboardingSeen:Oe,nestedScreenSectionsOnboardingSeen:Te,dashboardOnboardingEndingHintboxHidden:pt},screen:{gridLayoutEnabled:Me,zoomLevel:tt,notesVisible:xe,screenSidebarWidth:qe,versionsSidebarWidth:et,componentVariantsOnboardingHintboxSeen:oe,componentVariantViewSeen:de,numberOfLayerComponentViews:pe,lastRemarkTypeUsed:s.permissions.canCreateAnnotation(G)?it:K.default.Dot,screenOnboardingStep:ct,screenOnboardingFlowHintboxHidden:ut,stageModeFirstTimeLandingHidden:ye},dots:ie(ie({},he(e)),{},{statusFilter:We,colorFilter:He,lastNoteColorUsed:ke}),data:ie({},ht),flows:{lastConnectorEndStyleUsed:Ve,lastConnectorColorUsed:Fe,lastShapeColorUsed:Ge,lastNoteColorUsed:Be},annotations:ie(ie({},Ee(e)),{},{lastNoteTypeUsed:nt,annotationFirstTimeLandingHidden:Ae,annotationConfigFilter:ze}),user:{userId:V},app:ie({},ge(e))});return requestIdleCallback((()=>(0,H.loadSuggestedResourcesIfNeeded)(p,c.default.PROJECT))),requestIdleCallback((async()=>{if(!a)return;let e;a&&!a.members&&(e=await function(e){const t=E.default.getOrganization(e);return t&&t.members?t:k.getOrganizationMembersWithoutDetails(e)}(B));const t=e?e.members:a.members,n=Object.fromEntries(t.map((e=>[e.user._id,e]))),i=Ne.map((e=>e._id===M._id?M:ie(ie({},e),{},{users:e.users.map((e=>n[e.user._id])).filter(J.exists)})));A.default.getProjectsSuccess({projects:i,oid:B}),a.members||h.default.getOrganizationMembersSuccess(e)})),requestIdleCallback((async()=>{if(!a||a.sections)return;const{sections:e}=await k.getOrganizationSections(B);h.default.getOrganizationSectionsSuccess(e,B)})),S.default.init({enabledExtensions:Ue}),y.default.init(),I.default.getTeamsIntegration(c.default.PROJECT,p),d.isWindowsApp&&(_.default.getConnectedComponentsEditorInfo(),f.queryAssetDownloadTarget(M.id,M.type,le)),_e(M),M}async function Te(e,{reload:t=!1}={},a){const{pid:n}=e,{intermediateScreenLoading:r}=O.default.BarrelStore.getState();try{const t=function(){const{organizations:e}=O.default.OrganizationStore.getState();return e.length?Promise.resolve(e):k.getOrganizations()}(),i=await function(e,t){const a=b.default.getBarrel({bid:e});return a&&a.dataStage===$.default.Complete&&!t?Promise.resolve(a):k.getProject(e)}(n,r),o=function(e){if(!s.isOrganizationProject(e))return Promise.resolve(null);const t=b.default.findBarrelOrganizationId(e._id);let a=E.default.getOrganization(t);return a||(a=(0,w.fetchEmbeddedData)("organization")),a?Promise.resolve(a):k.getProjectOrganization(e._id).catch((()=>null))}(i),[d,c]=await Promise.all([o,t]),{barrelId:u}=O.default.BarrelStore.getState();if(u&&u!==n&&(0,Y.unsubscribeFromProjectChannel)(n),"archived"===i.status)throw new Q.default(412,"Project is archived","It was probably archived, please contact the owner.");if(!de(i))return function(e,t,a,n){const i=new l.default(t),s=a?a._id:"user",{userId:r}=O.default.UserStore.getState();return _.default.load({barrel:{barrelType:"project",barrelId:i.id,organizationId:s},data:{project:i,organization:a,organizations:n},user:{userId:r}}),_.default.changeSelectedView(W.ProjectViewTypes.DASHBOARD),_e(i),i}(0,i,d,c);return Oe({urlParams:e,projectData:i,organization:d,organizations:c,intermediateScreenLoadPayload:a})}catch(d){if(t)throw d;!function(e){o.handleError(e,{clientErrorHandler(){i.create({title:e.title,message:e.message}),b.default.navigateToWorkspace({barrelType:c.default.PROJECT})}})}(d)}}function me(...e){const{body:{integration:t}}=e[e.length-1],a=b.default.getBarrel(),n=t.slacks.filter((e=>!a.integration.slacks.find((t=>t._id===e._id))));n.length&&(n.forEach((e=>{_.default.addIntegration({intype:"slacks",integration:e})})),function(){const e=O.default.BarrelStore.findUser();s.permissions.canUpdateProject(e)&&y.default.init()}())}function _e(e){const t=(0,Y.subscribeToProjectChannel)(e._id),a=b.default.findBarrelOrganizationId(e._id);a&&"user"!==a&&(0,Y.subscribeToOrganizationChannel)(a),t.bind("UpdateUserSubscription",(({params:{uid:t},body:{plan:a,subscriptionStatus:i}})=>{const s=e.findUser(t);if(!s)return;const r=s.user.paymentPlan;s.user.paymentPlan=a;const o=s.user.subscriptionStatus;if(s.user.subscriptionStatus=i,"owner"===s.role){"will_cancel_at_period_end"===o&&(n.hideCancelledSubscriptionBanner(),s.user.subscriptionCancelAt=null);const{config:{plans:t}}=O.default.AppStore.getState(),{versionLimit:i}=t.find((e=>e.id===r)),{versionLimit:d}=t.find((e=>e.id===a)),l=T.default.getScreen();if(i>d){if(e.screens.forEach((e=>{e.allowedVersionCount=d,e.versions.length>d&&(e.versions.length=d)})),l){T.default.getVersion()||(g.default.setVersionId(l.versions[0]._id),(0,G.default)({text:"Displayed version is not available anymore.",container:document.querySelector("main"),source:"UpdateUserSubscription"}))}}else i<d&&(e.screens.forEach((e=>{e.allowedVersionCount=d,e.totalVersionCount&&e.totalVersionCount>i&&delete e.totalVersionCount})),l&&(!l.totalVersionCount||l.totalVersionCount>i)&&g.default.getVersions())}})),t.bind("CancelUserSubscription",(({params:{uid:e},body:{plan:t,subscriptionStatus:a,subscriptionCancelAt:i}})=>{const s=b.default.findUser();s&&(_.default.updateUserData({uid:e,userData:{paymentPlan:t,subscriptionStatus:a,subscriptionCancelAt:i}}),"owner"===s.role&&"will_cancel_at_period_end"===a&&n.showCancelledSubscriptionBannerIfNecessary({currentRole:s.role,subscriptionCancelAt:i}))})),t.bind("AuthProjectSlack",me),t.bind("TransferProjectOwnership",(({params:{pid:e,oid:t="user"},body:{users:a}})=>{a.forEach((({user:{_id:t},role:a})=>{_.default.updateUserRole({bid:e,uid:t,role:a})})),_.default.setOrganizationId({oid:t})})),t.bind("RequestPaymentFail",(e=>{const t=b.default.findUser(),a={currentRole:t.role};Object.assign(a,e.params),e.params.oid||"owner"===t.role||(a.ownerEmail=e.body.email),n.showFailedPaymentBanner(a)}))}function be(e,t,a,n){const{pid:r,sid:o}=e;if(!r||!s.validateId(r,"project"))return i.create({title:"Invalid project link",message:"There might be a typo, please try again."}),b.default.navigateToWorkspace({barrelType:c.default.PROJECT}),Promise.reject();const d=b.default.getBarrel(),{intermediateScreenLoading:l}=O.default.BarrelStore.getState();return!l&&d&&d.id===r&&d.dataStage!==$.default.Partial&&d.dataStage===$.default.Complete?Promise.resolve(d):(o&&n?_.default.reset({barrel:{selectedView:W.ProjectViewTypes.SCREEN},screen:{stageMode:!0}}):l||_.default.reset(),Te(e,t,a))}async function Ce(e,t){if(!de(await be(e,t)))return;const{pid:a,flid:n}=e,{shouldDisplayFlowNewBadge:i}=O.default.BarrelStore.getState();if(i&&_.default.hideFlowNewBadge(),n)!function(e,t){if(v.default.isFlowFetched(t))return void R.default.setCurrentFlow({pid:e,flid:t});k.getProjectFlow(e,t).then((a=>{R.default.loadFlow({pid:e,flid:t,flow:a,complete:!0}),R.default.setCurrentFlow({pid:e,flid:t})})).catch((e=>{o.handleError(e,{dialogCallback(){_.default.goToDashboard()}})}))}(a,n),function(e,t){var a;if(null!==(a=v.default.getDots({pid:e,flid:t}))&&void 0!==a&&a.length)return;k.getProjectFlowDots(e,t).then((a=>{R.default.setDots({pid:e,flid:t,dots:a})}))}(a,n);else{const e=v.default.getFirstFlowId(a);if(e)return void _.default.goToFlow({pid:a,flid:e})}_.default.changeSelectedView(W.ProjectViewTypes.FLOW)}function Ae(e){const{query:{coid:[t]=[]},ev:a}=e;if(!a.target.closest(".dotPopup"))return!1;const n=b.default.getStyleguidesData({barrelStore:O.default.BarrelStore,styleguidesDataStore:O.default.StyleguidesDataStore}),{component:i={}}=(0,V.findComponentById)(n,t)||{};return!!i.variant&&(P.default.open(t,U.default.NOTE),!0)}function ye(){O.default.dispatcher.register((e=>{if(e.type===L.default.AddEmojis)!function(){const e=document.querySelectorAll(".customEmojiPlainText");Array.prototype.forEach.call(e,(e=>{const t=(0,r.escapeHTML)(e.innerText.trim()),{barrelId:a}=O.default.BarrelStore.getState(),n=j.default.formatEmojiString(t,a);e.outerHTML=n}))}()}))}i.polyfill.registerDialog(oe),p.default.route(/\/project\/([\da-f]{24})\/screen\/([\da-f]{24})(?:\/version\/([\da-f]{24}))?$/i,(async function(e){(0,z.sendGAPageView)({title:"Screen - Zeplin"});const{match:[t,a,n],query:r,query:{did:[o]=[],cmid:d=[],atid:[c]=[]},reload:p}=e,f=Object.assign({pid:t,sid:a,vid:n},r),S=Date.now();re=S,m.default.setPage("barrel");const h=b.default.getBarrel(),{intermediateScreenLoading:E}=O.default.BarrelStore.getState(),{screenId:C}=O.default.ScreenStore.getState();let A;if(!h||E){const{dotId:e}=O.default.DotsStore.getState(),{annotationId:t}=O.default.AnnotationsStore.getState(),{versionId:r}=O.default.ScreenStore.getState();A=await async function(e){const{pid:t,sid:a,vid:n,screenLimit:i}=e,r=b.default.getBarrel();let o,d;try{if(r){if(!r.screens.find((({_id:e})=>e===a)))return;o=ie({},r)}else{const e=await k.getProjectDetail(t,a,i);o=ie({},e.project),o.screens=[...e.previousScreens,e.screen,...e.nextScreens]}let c;if(r)c=o;else{const e=await k.getProjectComponentSections(t);c=ie(ie({},o),e)}const p=new l.default(ie({},c)),{userId:f}=O.default.UserStore.getState(),{role:S}=p.findUser(f),[h,{noVectorAssetInfoHidden:E,densityMismatchWarningHidden:g,sourceFileInfoHidden:m,componentVariantsOnboardingDialogSeen:b,componentVariantsOnboardingHintboxSeen:C,componentVariantViewSeen:A,numberOfLayerComponentViews:y,flowLinkInfoDismissed:I,screenVariantsOnboardingSeen:N,nestedScreenSectionsOnboardingSeen:P,shouldDisplayFlowNewBadge:D,annotationFirstTimeLandingHidden:R,flowsNewBadgeMenuSeen:v,stageModeNewBadgeMenuSeen:L,stageModeFirstTimeLandingHidden:j}]=await Promise.all([u.barrelPrefs.getAll(p.id),u.userPrefs.getAll()]),{assetDensityScalePrefs:U,assetNamingConvention:w,collapsedSections:M,dashboardSidebarWidth:V,fixedThumbnailSize:G,lastNoteColorUsed:B,gridLayoutEnabled:x,lastConnectorEndStyleUsed:z,lastConnectorColorUsed:H,lastShapeColorUsed:Y,noteVisibility:q,noteStatusFilter:J,annotationStatusFilter:Z,noteColorFilter:X,noResourceInfoDismissed:$,screenSidebarWidth:Q,showOptimizedSVG:ee,showOptimizedPNG:te,showOptimizedJPG:ae,slackReconnectionAuntieSeen:ne,styleguideLeftSidebarWidth:se,styleguideRightSidebarWidth:re,versionsSidebarWidth:oe,zoomLevel:de,connectedComponentsLocalWorkspace:le,lastNoteTypeUsed:ce,lastRemarkTypeUsed:ue,onboardingHighlightScreenOpened:pe,onboardingLayerCompleted:fe,onboardingDotCompleted:Se,onboardingVersionsCompleted:ge,onboardingAssetsCompleted:Oe,screenOnboardingStep:Te,screenOnboardingFlowHintboxHidden:me,dashboardOnboardingEndingHintboxHidden:_e}=h,be={},Ce={};for(const e of p.screens)h[e._id]&&(be[e._id]=h[e._id].versionsLastSeen,Ce[e._id]=h[e._id].lastOpened);const Ae={project:p},{statusFilter:ye,colorFilter:Ie,dotId:Ne,highlightedDots:Pe}=O.default.DotsStore.getState(),De=o.screens.find((e=>e._id===a)),{dotId:Re}=T.default.getDotDetails(De.dots,ye,Ie,Ne,Pe),{annotationId:ve}=O.default.AnnotationsStore.getState(),Le=T.default.getAnnotationNoteType(De.annotations,ve,t);d={barrelData:{barrel:{barrelType:"project",selectedView:W.ProjectViewTypes.SCREEN,barrelId:t,assetDensityScalePrefs:(0,F.initAssetDensityScalePrefsIfNecessary)(p.type,U),assetNamingConvention:"android"===p.type?"snakeCase":w,showOptimizedSVG:ee,showOptimizedPNG:te,showOptimizedJPG:ae,noResourceInfoDismissed:$,noVectorAssetInfoHidden:E,densityMismatchWarningHidden:g,sourceFileInfoHidden:m,flowLinkInfoDismissed:I,showSlackReconnectionAuntie:!ne,connectedComponentsDevModeEnabled:"true"===sessionStorage.getItem("connectedComponentsDevModeEnabled"),connectedComponentsLocalWorkspace:le,screenVersionsLastSeen:be,screenLastOpened:Ce,shouldDisplayFlowNewBadge:D,flowsNewBadgeMenuSeen:v,stageModeNewBadgeMenuSeen:L,onboardingHighlightScreenOpened:pe,onboardingLayerCompleted:fe,onboardingDotCompleted:Se,onboardingVersionsCompleted:ge,onboardingAssetsCompleted:Oe,intermediateScreenLoading:!0},styleguide:{selectedStyleguideSection:"colors",collapsedSections:M,leftSidebarWidth:se,rightSidebarWidth:re,componentVariantsOnboardingDialogSeen:b},dashboard:{collapsedSections:M,fixedThumbnailSize:G,sidebarWidth:V,screenVariantsOnboardingSeen:N,nestedScreenSectionsOnboardingSeen:P,dashboardOnboardingEndingHintboxHidden:_e},data:ie({},Ae),screen:{gridLayoutEnabled:x,zoomLevel:de,notesVisible:q,screenSidebarWidth:Q,versionsSidebarWidth:oe,componentVariantsOnboardingHintboxSeen:C,componentVariantViewSeen:A,numberOfLayerComponentViews:y,lastRemarkTypeUsed:s.permissions.canCreateAnnotation(S)?ue:K.default.Dot,screenOnboardingStep:Te,screenOnboardingFlowHintboxHidden:me,stageModeFirstTimeLandingHidden:j},dots:ie(ie({},he(e)),{},{statusFilter:J,colorFilter:X,lastNoteColorUsed:B}),flows:{lastConnectorEndStyleUsed:z,lastConnectorColorUsed:H,lastShapeColorUsed:Y},annotations:ie(ie({},Ee(e)),{},{lastNoteTypeUsed:ce,annotationFirstTimeLandingHidden:R,annotationConfigFilter:Z}),user:{userId:f}},dotsDetails:{pid:t,sid:a,dots:De.dots||[],dotId:Re},annotationsDetails:{pid:t,sid:a,annotations:De.annotations||[],annotationId:ve,noteType:Le},screenData:{pid:t,sid:a,vid:n}},_.default.loadIntermediate(d)}catch(c){}return d}(f),A&&(s.validateId(a,"screen")?(C&&C===a||!C)&&(n&&r!==n&&g.default.setVersionId(n),!c&&o&&e!==o&&g.default.selectDot({dotId:o,commentId:d}),!o&&c&&t!==c&&g.default.selectAnnotation({annotationId:c})):(i.create({title:"Invalid screen link",message:"There might be a typo, please try again."}),_.default.goToDashboard()))}return be(f,{reload:p},A).then((e=>{if(re>S)return;const{screenId:r,versionId:l,stageMode:u}=O.default.ScreenStore.getState();if(!de(e)||r!==a&&!h)return;const{dotId:p}=O.default.DotsStore.getState(),{annotationId:f}=O.default.AnnotationsStore.getState();A?g.default.getFlows({screenId:a,barrelId:t}):s.validateId(a,"screen")?r&&r===a?r&&r===a&&(u&&g.default.openScreen({sid:a,vid:n}),l!==n&&g.default.setVersionId(n),!c&&o&&p!==o&&g.default.selectDot({dotId:o,commentId:d}),!o&&c&&f!==c&&g.default.selectAnnotation({annotationId:c})):o||d.length?g.default.openScreen({sid:a,vid:n,did:o,cmid:d}):c?g.default.openScreen({sid:a,vid:n,atid:c}):g.default.openScreen({sid:a,vid:n}):(i.create({title:"Invalid screen link",message:"There might be a typo, please try again."}),_.default.goToDashboard()),(o||c)&&history.replaceState(null,null,(0,B.urlResolve)("project-screen",{url:{pid:t,sid:a,vid:n}}))}))})),p.default.route(/\/project\/([\da-f]{24})\/screen\/([\da-f]{24})\/stage/i,(function(e){(0,z.sendGAPageView)({title:"Screen - Zeplin"});const{match:[t,a],reload:n}=e,r=Object.assign({pid:t,sid:a});return m.default.setPage("barrel"),be(r,{reload:n},!1,!0).then((e=>{e&&!e.partial&&(s.validateId(a,"screen")||(i.create({title:"Invalid screen link",message:"There might be a typo, please try again."}),_.default.goToDashboard()),g.default.openScreen({sid:a,stageMode:!0}))}))})),p.default.route(/\/project\/([\da-f]{24})\/styleguide\/colors/i,(function(e){(0,z.sendGAPageView)({title:"Color Palette - Styleguide - Zeplin"});const{match:[t],query:a,query:{cid:n=[],seid:[i]=[]}={},reload:s}=e,r=Object.assign({pid:t},a);return re=Date.now(),m.default.setPage("barrel"),be(r,{reload:s}).then((e=>{de(e)&&(_.default.changeSelectedView(W.ProjectViewTypes.STYLEGUIDE),C.default.changeSelectedNavigatorId({selectedStyleguideSection:"colors",selectedNavigatorId:i,highlightScrolledSection:!!i}),C.default.highlightColors(n))}))})),p.default.route(/\/project\/([\da-f]{24})\/styleguide\/textstyles/i,(function(e){(0,z.sendGAPageView)({title:"Text Style Catalog - Styleguide - Zeplin"});const{match:[t],query:a,query:{tsid:n=[],seid:[i]=[]}={},reload:s}=e,r=Object.assign({pid:t},a);return re=Date.now(),m.default.setPage("barrel"),be(r,{reload:s}).then((e=>{de(e)&&(_.default.changeSelectedView(W.ProjectViewTypes.STYLEGUIDE),C.default.changeSelectedNavigatorId({selectedStyleguideSection:"textStyles",selectedNavigatorId:i,highlightScrolledSection:!!i}),C.default.highlightTextStyles(n))}))})),p.default.route(/\/project\/([\da-f]{24})\/styleguide\/spacing/i,(function(e){(0,z.sendGAPageView)({title:"Spacing and Layout - Styleguide - Zeplin"});const{match:[t],query:a,query:{sptid:n=[],seid:[i]=[]}={},reload:s}=e,r=Object.assign({pid:t},a);return re=Date.now(),m.default.setPage("barrel"),be(r,{reload:s}).then((e=>{de(e)&&(_.default.changeSelectedView(W.ProjectViewTypes.STYLEGUIDE),C.default.changeSelectedNavigatorId({selectedStyleguideSection:"spacing",selectedNavigatorId:i,highlightScrolledSection:!!i}),C.default.highlightSpacingTokens(n))}))})),p.default.route(/\/project\/([\da-f]{24})\/styleguide\/components/i,(function(e){(0,z.sendGAPageView)({title:"Components - Styleguide - Zeplin"});const{match:[t],query:a,query:{coid:[n]=[],cseid:[i]=[],seid:[s]=[i]}={},reload:r}=e,o=Object.assign({pid:t},a);return re=Date.now(),m.default.setPage("barrel"),be(o,{reload:r}).then((e=>{if(!de(e))return;_.default.changeSelectedView(W.ProjectViewTypes.STYLEGUIDE);const t=b.default.getStyleguidesData({barrelStore:O.default.BarrelStore,styleguidesDataStore:O.default.StyleguidesDataStore}),{component:a}=n&&(0,V.findComponentById)(t,n)||{},{collapsedSections:i}=O.default.StyleguideStore.getState(),r=function({styleguidesData:e,selectedNavigatorId:t,collapsedSections:a}){if(!t)return a;const n=a,i=(0,V.getComponentSectionById)(e,t);if(i){const{idPath:e}=i;e.forEach((e=>{n[e]=!1}))}return n}({styleguidesData:t,selectedNavigatorId:s,collapsedSections:i});a&&a.idPath.slice(0,-1).forEach((e=>{r[e]=!1})),C.default.changeSelectedNavigatorId({selectedStyleguideSection:"components",selectedNavigatorId:s,highlightScrolledSection:!!s}),C.default.changeSelection({selectionComponentId:n,selection:a,collapsedSections:r,updateCollapsedSections:s||a})}))})),p.default.route(/\/project\/([\da-f]{24})\/styleguide\/storybook/i,(function(e){(0,z.sendGAPageView)({title:"Storybook - Styleguide - Zeplin"});const{match:[t],query:a,query:{storyPath:[n]=[]}={},reload:i}=e,s=Object.assign({pid:t},a);return m.default.setPage("barrel"),be(s,{reload:i}).then((e=>{de(e)&&(N.default.updateSelectedStoryPath(n),_.default.changeSelectedView(W.ProjectViewTypes.STORYBOOK))}))})),p.default.route(/\/project\/([\da-f]{24})\/flow(?:\/([\da-f]{24}))?/i,(function(e){const{match:[t,a],query:n,reload:i}=e;(0,z.sendGAPageView)({title:"Flow - Zeplin"});const s=Object.assign({pid:t,flid:a,subpage:W.ProjectViewTypes.FLOW},n);return re=Date.now(),m.default.setPage("barrel"),Ce(s,{reload:i})})),p.default.route(/\/project\/([\da-f]{24})(?:\/(dashboard|styleguide))?$/i,(function(e){const{match:[t,a=W.ProjectViewTypes.DASHBOARD],query:n,reload:i}=e;(0,z.sendGAPageView)({title:`${(0,M.uppercaseFirst)(a)} - Zeplin`});const s=Object.assign({pid:t,subpage:a},n);return re=Date.now(),m.default.setPage("barrel",W.ProjectViewTypes.DASHBOARD),async function(e,t){const a=await be(e,t);if(!de(a))return;const{subpage:n}=e,i=ae(e,te),s=["sid","seid","eid"],r=["cid","tsid"],o=Object.keys(i);let d;if(o.some((e=>s.includes(e)))||n===W.ProjectViewTypes.DASHBOARD?d=W.ProjectViewTypes.DASHBOARD:o.some((e=>r.includes(e)||n===W.ProjectViewTypes.STYLEGUIDE))?d=W.ProjectViewTypes.STYLEGUIDE:n===W.ProjectViewTypes.FLOW&&(d=W.ProjectViewTypes.FLOW),!d)return;const l=e=>{const t=a.sections.filter((t=>"default"!==t.name&&t.screens.some((t=>e.includes(t))))),n=[...new Set([...t.flatMap((({path:e})=>e||[])),...t.map((e=>e._id))])];return{sids:e,sectionsToExpand:n}};let c={};if("sid"in i)c=l(i.sid);else if("seid"in i){const e=i.seid[0],t=a.sections.find((({_id:t})=>t===e)),n=t?[...t.path||[],e]:[];c={seid:e,sectionsToExpand:n}}else if("eid"in i)S.default.load({bid:a.id,eid:i.eid[0],uid:O.default.UserStore.getState().userId});else if(d===W.ProjectViewTypes.DASHBOARD){const{screenId:e}=O.default.ScreenStore.getState();e&&(c=l([e]))}n===W.ProjectViewTypes.DASHBOARD&&(c=ie(ie({},c),{},{tags:i.tag,jiraIssues:i.ja,untagged:i.untagged&&"true"===i.untagged[0],filterValue:i.q&&i.q[0]||""})),_.default.changeSelectedView(d,c)}(s,{reload:i})})),p.default.addPrevention(/\/project\/([\da-f]{24})\/styleguide\/components/i,Ae),p.default.addPrevention(/\/(styleguide)\/([\da-f]{24})\/components/i,Ae)},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(297),i=a(264),s=a(737);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e={}){const t={};if(!e.currentBid){const{barrelId:e}=i.default.BarrelStore.getState();t.currentBid=e}if(!e.bid){const{barrelId:e}=i.default.BarrelStore.getState();t.bid=e}if(!e.barrelType){const{barrelType:e}=i.default.BarrelStore.getState();t.barrelType=e}return o(o({},e),t)}const c={init(e){const{barrelType:t,bid:a,enabledExtensions:s}=l(e);i.default.dispatcher.dispatch({type:n.default.INIT,barrelType:t,bid:a,enabledExtensions:s})},loadExtensions(e){const{bid:t,extensions:a,enabledExtensions:s,currentBid:r}=l(e);i.default.dispatcher.dispatch({type:n.default.LOAD_EXTENSIONS,bid:t,extensions:a,enabledExtensions:s,currentBid:r})},updateOption(e,t,a){i.default.dispatcher.dispatch({type:n.default.UPDATE_OPTION,eid:e,name:t,value:a})},load(e){const{barrelType:t,bid:a,eid:s,uid:r,local:o=!1}=l(e);i.default.dispatcher.dispatch({type:n.default.LOAD,barrelType:t,bid:a,eid:s,uid:r,local:o,syncWithApi:!0})},reload(){i.default.dispatcher.dispatch({type:n.default.RELOAD})},openSettings(e){const t=s.default.isOnboardingProject(),{onboardingType:a}=s.default.getProject()||{};i.default.dispatcher.dispatch({type:n.default.OPEN_SETTINGS,extensionId:e,isOnboardingProject:t,onboardingType:a})},closeSettings(){i.default.dispatcher.dispatch({type:n.default.CLOSE_SETTINGS})},add(e){const{barrelType:t,bid:a,uid:s,extension:r,local:o=!1,currentBid:d}=l(e),{userId:c}=i.default.UserStore.getState(),u=s===c&&a===d,p=r._id;i.default.dispatcher.dispatch({type:n.default.ADD,barrelType:t,bid:a,eid:p,extension:r,openSettings:u,currentBid:d,local:o})},enable(e){const{bid:t,eid:a}=l(e);i.default.dispatcher.dispatch({type:n.default.ENABLE,bid:t,eid:a})},disable(e){const{bid:t,eid:a}=l(e);i.default.dispatcher.dispatch({type:n.default.DISABLE,bid:t,eid:a})},remove(e){const{bid:t,barrelType:a,eid:s,local:r=!1,syncWithApi:o=!1}=l(e),{barrelId:d}=i.default.BarrelStore.getState();if(t!==d)return;const{extensions:c}=i.default.ExtensionsStore.getState(),u=c.find((e=>e.id===s));i.default.dispatcher.dispatch({type:n.default.REMOVE,bid:t,barrelType:a,eid:s,removedExtension:u,local:r,syncWithApi:o})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var n=a(286),i=a(789),s=a(1051),r=a(1054),o=a(397),d=a(337),l=a(185),c=a(106),u=a(737),p=a(264),f=a(354),S=a(15),h=a(338),E=a(1052),g=a(124),O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function T(e={}){var t,a,n,i,s;const r=null!==(t=e.pid)&&void 0!==t?t:p.default.BarrelStore.getState().barrelId,o=null!==(a=e.sid)&&void 0!==a?a:p.default.ScreenStore.getState().screenId,d=null!==(n=e.vid)&&void 0!==n?n:p.default.ScreenStore.getState().versionId,l=null!==(i=e.did)&&void 0!==i?i:p.default.DotsStore.getState().dotId,c=null!==(s=e.atid)&&void 0!==s?s:p.default.AnnotationsStore.getState().annotationId;let{vgid:f}=e;if(e.svid&&!e.vgid){const t=u.default.getVariantGroupOfScreen(e.svid);t&&(f=t._id)}return Object.assign(Object.assign({},e),{pid:r,sid:o,vid:d,did:l,vgid:f,atid:c})}const m={getVersionsLastSeenForCurrentScreen(){var e;const{screenId:t}=p.default.ScreenStore.getState();if(!t)return{};const{screenVersionsLastSeen:a}=p.default.BarrelStore.getState();return{sid:t,date:null!==(e=null==a?void 0:a[t])&&void 0!==e?e:new Date}},setCurrentDate(){const{screenId:e}=p.default.ScreenStore.getState();return e?{sid:e,date:new Date}:{}},updateTimeForAddVersion(e,t){var a;const{screenId:n}=p.default.ScreenStore.getState();if(!n||n!==e)return{};const{screenLastOpened:s,screenVersionsLastSeen:r}=p.default.BarrelStore.getState(),o="screenVersionsLastSeen"===t?r:s,{versions:[{created:d}]}=i.default.getScreen();return{sid:n,date:null!==(a=null==o?void 0:o[n])&&void 0!==a?a:new Date(d)}},openScreen({sid:e,vid:t,did:a,cmid:i,atid:r,stageMode:o}){const d=s.default.getOpenScreenData(e,t,a,i,r,o);p.default.dispatcher.dispatch(Object.assign({type:n.default.OPEN_SCREEN},d))},selectLayer(e){const{layer:t,screenId:a,componentId:i}=e,{numberOfLayerComponentViews:s}=p.default.ScreenStore.getState(),r=!!i&&s<o.LAYER_COMPONENT_VIEW_LIMIT,d=E.default.shouldHighlightOnboardingLayer();p.default.dispatcher.dispatch({type:n.default.SELECT_LAYER,layer:t,numberOfLayerComponentViews:s,shouldIncrementNumberOfLayerComponentViews:r,screenId:a,shouldCompleteLayerOnboarding:d})},deselectLayer(){p.default.dispatcher.dispatch({type:n.default.DESELECT_LAYER})},enterLayer(e){p.default.dispatcher.dispatch({type:n.default.ENTER_LAYER,layer:e})},leaveLayer(){p.default.dispatcher.dispatch({type:n.default.LEAVE_LAYER})},highlightLayer(e){p.default.dispatcher.dispatch({type:n.default.HIGHLIGHT_LAYER,layer:e})},unhighlightLayer(){p.default.dispatcher.dispatch({type:n.default.UNHIGHLIGHT_LAYER})},enablePercentageMode(){p.default.dispatcher.dispatch({type:n.default.ENABLE_PERCENTAGE_MODE})},disablePercentageMode(){p.default.dispatcher.dispatch({type:n.default.DISABLE_PERCENTAGE_MODE})},addScreen(e){const{pid:t,seid:a,index:i,screen:s,syncWithApi:r=!1}=T(e);p.default.dispatcher.dispatch({type:n.default.ADD_SCREEN,pid:t,seid:a,index:i,screen:s,syncWithApi:r})},addScreenTiles(e){const{pid:t,sid:a,vid:i,tileInfo:s,syncWithApi:r=!1}=T(e);p.default.dispatcher.dispatch({type:n.default.ADD_SCREEN_TILES,pid:t,sid:a,vid:i,tileInfo:s,syncWithApi:r})},updateDescription(e){const{pid:t,sid:a,description:s,syncWithApi:r=!1}=T(e);let o;r&&({description:o}=i.default.getScreen({sid:a})),p.default.dispatcher.dispatch({type:n.default.UPDATE_DESCRIPTION,pid:t,sid:a,description:s,oldDescription:o,syncWithApi:r})},updateName(e){const{pid:t,sid:a,name:s,onError:r,syncWithApi:o=!1}=T(e);let d;o&&({name:d}=i.default.getScreen({sid:a})),p.default.dispatcher.dispatch({type:n.default.UPDATE_NAME,pid:t,sid:a,name:s,oldName:d,onError:r,syncWithApi:o})},removeScreen(e){const{pid:t,uid:a,sid:s,vgid:r=null,syncWithApi:o=!1}=T(Object.assign(Object.assign({},e),{svid:e.sid})),{screenId:d}=p.default.ScreenStore.getState(),l=s===d;let c,f,S,h;if((o||l)&&(c=i.default.getScreen({pid:t,sid:s})),l&&r){const{variantGroups:e}=u.default.getBarrel({bid:t}),{screens:a}=e.find((({_id:e})=>e===r)),n=a[0].id===s?a[1].id:a[0].id;i.default.navigateToScreen(n)}if(o){const e=i.default.getSectionOfScreen({pid:t,sid:s});f=e._id,S=e.screens.indexOf(s)}if(a){h=u.default.getBarrel({bid:t}).findUser(a)}p.default.dispatcher.dispatch({type:n.default.REMOVE_SCREEN,pid:t,seid:f,index:S,sid:s,vgid:r,removedScreen:c,removingCurrentScreen:l,user:h,syncWithApi:o})},openTagManager(e){p.default.dispatcher.dispatch({type:n.default.OPEN_TAG_MANAGER,sids:e})},closeTagManager(){p.default.dispatcher.dispatch({type:n.default.CLOSE_TAG_MANAGER})},updateTags(e){const{pid:t,updates:a,isScreen:i=!1,syncWithApi:s=!1}=T(e);p.default.dispatcher.dispatch({type:n.default.UPDATE_TAGS,pid:t,updates:a,isScreen:i,syncWithApi:s})},renameTag(e){const{pid:t,tag:a,name:n,syncWithApi:i=!1}=T(e),{screens:s}=u.default.getBarrel({bid:t}),r=s.filter((({tags:e})=>null==e?void 0:e.includes(a))),o=r.map((({_id:e})=>({_id:e,operation:f.default.Remove,tags:[a]})));o.push(...r.map((({_id:e})=>({_id:e,operation:f.default.Add,tags:[n]})))),this.updateTags({pid:t,updates:o,syncWithApi:i})},removeTag(e){const{pid:t,tag:a,syncWithApi:n=!1}=T(e),{screens:i}=u.default.getBarrel({bid:t}),s=i.filter((({tags:e})=>null==e?void 0:e.includes(a))).map((({_id:e})=>({_id:e,operation:f.default.Remove,tags:[a]})));this.updateTags({pid:t,updates:s,syncWithApi:n})},openSourceFile(e){p.default.dispatcher.dispatch({type:n.default.OPEN_SOURCE_FILE,path:e})},openSourceFolder(e){p.default.dispatcher.dispatch({type:n.default.OPEN_SOURCE_FOLDER,path:e})},setDots(e){const{pid:t,sid:a,dots:s}=T(e);s.forEach((e=>{var t;null!==(t=e.status)&&void 0!==t||(e.status=r.default.OPEN)}));const{statusFilter:o,colorFilter:d,dotId:l,highlightedDots:c}=p.default.DotsStore.getState(),{dotId:u,colorFilter:f,statusFilter:S}=i.default.getDotDetails(s,o,d,l,c);p.default.dispatcher.dispatch({type:n.default.SET_DOTS,pid:t,sid:a,dots:s,dotId:u,colorFilter:f,statusFilter:S})},setAnnotations(e){const{pid:t,sid:a,annotations:s}=T(e),{annotationId:r}=p.default.AnnotationsStore.getState(),o=i.default.getAnnotationNoteType(s,r,t);p.default.dispatcher.dispatch({type:n.default.SET_ANNOTATIONS,pid:t,sid:a,annotations:s,annotationId:r,noteType:o})},selectDot({dotId:e,commentId:t,source:a}){var i;const{dotId:s}=p.default.DotsStore.getState();if(s===e)return;const r=E.default.shouldHighlightOnboardingDot(),o=E.default.getOnboardingHighlightDot(),{onboardingType:d}=null!==(i=u.default.getBarrel())&&void 0!==i?i:{};p.default.dispatcher.dispatch({type:n.default.SELECT_DOT,dotId:e,commentId:t,source:a,shouldCompleteDotOnboarding:(null==o?void 0:o._id)===e&&r,onboardingType:d})},selectAnnotation(e){const{pid:t,sid:a,annotationId:s,source:r}=T(e),{annotationId:o}=p.default.AnnotationsStore.getState();if(o===s)return;let d,l=!1;const c=i.default.getAnnotation({pid:t,sid:a,atid:s});c&&(d=u.default.findNoteType(t,c.type),l=!!c.componentSourceId),p.default.dispatcher.dispatch({type:n.default.SELECT_ANNOTATION,annotationId:s,source:r,noteType:d,linkedAnnotation:l})},saveNote({sid:e,did:t,note:a}){p.default.dispatcher.dispatch({type:n.default.SAVE_NOTE,sid:e,did:t,note:a})},saveAnnotationText({sid:e,atid:t,annotationText:a}){p.default.dispatcher.dispatch({type:n.default.SAVE_ANNOTATION_TEXT,sid:e,atid:t,annotationText:a})},unhighlightComment(e){p.default.dispatcher.dispatch({type:n.default.UNHIGHLIGHT_COMMENT,cmid:e})},closeDotPopup(){p.default.dispatcher.dispatch({type:n.default.CLOSE_DOT_POPUP})},changeDotFilter(e,t){let{dotId:a}=p.default.DotsStore.getState();if(a){const n=i.default.getDot({did:a}),s=u.default.findUser();(0,d.checkDotFilter)(n,e,t,s.user)||(a=null)}p.default.dispatcher.dispatch({type:n.default.CHANGE_DOT_FILTER,dotId:a,status:e,color:t})},dotsFlashed(){p.default.dispatcher.dispatch({type:n.default.DOTS_FLASHED})},openPopout(e){const{pid:t,sid:a,vid:s}=T(e),{name:r}=i.default.getScreen({pid:t,sid:a}),{snapshot:{width:o,height:d,url:l}}=i.default.getVersion({pid:t,sid:a,vid:s});p.default.dispatcher.dispatch({type:n.default.OPEN_POPOUT,pid:t,name:r,width:o,height:d,url:l})},changeZoomLevel(e,t){p.default.dispatcher.dispatch({type:n.default.CHANGE_ZOOM_LEVEL,zoomLevel:e,animateZooming:t})},zoomIn(){p.default.dispatcher.dispatch({type:n.default.ZOOM_IN})},zoomOut(){p.default.dispatcher.dispatch({type:n.default.ZOOM_OUT})},resetZoom(){p.default.dispatcher.dispatch({type:n.default.RESET_ZOOM})},zoomApplied(){p.default.dispatcher.dispatch({type:n.default.ZOOM_APPLIED})},startGesture(){p.default.dispatcher.dispatch({type:n.default.START_GESTURE})},zoomWithGesture(e){p.default.dispatcher.dispatch({type:n.default.ZOOM_WITH_GESTURE,scale:e})},zoomWithWheel(e){p.default.dispatcher.dispatch({type:n.default.ZOOM_WITH_WHEEL,deltaY:e})},changeScrollPosition(e,t){p.default.dispatcher.dispatch({type:n.default.CHANGE_SCROLL_POSITION,scrollTop:e,scrollLeft:t})},toggleGridLayout(){p.default.dispatcher.dispatch({type:n.default.TOGGLE_GRID_LAYOUT})},toggleGridWidget(){p.default.dispatcher.dispatch({type:n.default.TOGGLE_GRID_WIDGET})},enableNoteMode({flash:e=!0}={}){p.default.dispatcher.dispatch({type:n.default.ENABLE_NOTE_MODE,flash:e})},disableNoteMode(){p.default.dispatcher.dispatch({type:n.default.DISABLE_NOTE_MODE})},createNote(e){const{pid:t,sid:a,x:s,y:o}=T(e),l=i.default.getDots(),{lastNoteColorUsed:u}=p.default.DotsStore.getState(),f={_id:`newDot${(0,c.getRandomString)()}`,name:(null==l?void 0:l.length)?String(parseInt(l[l.length-1].name,10)+1):"1",x:s,y:o,color:(0,d.getColorValueByName)(u),status:r.default.OPEN,comments:[]};p.default.dispatcher.dispatch({type:n.default.CREATE_NOTE,pid:t,sid:a,dot:f})},createAnnotation(e){const{pid:t,sid:a,x:i,y:s}=T(e),{lastNoteTypeUsed:r,filterId:o}=p.default.AnnotationsStore.getState();let d;d=o&&r!==o?u.default.noteTypeExists(t,o)?o:void 0:u.default.noteTypeExists(t,r)?r:void 0;const l={_id:`newAnnotation${(0,c.getRandomString)()}`,x:i,y:s,text:"",type:d};p.default.dispatcher.dispatch({type:n.default.CREATE_ANNOTATION,pid:t,sid:a,annotation:l})},addDot(e){const{pid:t,sid:a,uid:i,dot:s,source:r,syncWithApi:o=!1}=T(e);let c,f;i&&({userId:c,username:f}=p.default.UserStore.getState());let S=!1,h=!1;if(o){const e=u.default.getBarrel({bid:t}),[{note:a}]=s.comments;S=(0,l.isThereAnyMentionedUser)(e.users,a),h=(0,d.hasImage)(a)}p.default.dispatcher.dispatch({type:n.default.ADD_DOT,pid:t,sid:a,uid:i,userId:c,username:f,dot:s,hasMention:S,hasImage:h,source:r,syncWithApi:o})},addAnnotation(e){const{pid:t,sid:a,uid:i,annotation:s,syncWithApi:r=!1}=T(e);let o,c;i&&({userId:o,username:c}=p.default.UserStore.getState());let f=!1,S=!1;if(r){const{text:e}=s,a=u.default.getBarrel({bid:t});f=(0,l.isThereAnyMentionedUser)(a.users,e,!0),S=(0,d.hasImage)(e)}p.default.dispatcher.dispatch({type:n.default.ADD_ANNOTATION,pid:t,sid:a,uid:i,userId:o,username:c,annotation:s,hasMention:f,hasImage:S,syncWithApi:r})},hideAnnotationFirstTimeLanding(){p.default.dispatcher.dispatch({type:n.default.HIDE_ANNOTATION_LANDING})},updateDot(e){var t,a;const{pid:s,sid:r,did:o,dotData:d,syncWithApi:l=!1}=T(e);let c;if(l){let e;t=null!==(a=i.default.getDot({pid:s,sid:r,did:o}))&&void 0!==a?a:{},({_id:e}=t),c=O(t,["_id"])}p.default.dispatcher.dispatch({type:n.default.UPDATE_DOT,pid:s,sid:r,did:o,dotData:d,oldDotData:c,syncWithApi:l})},updateAnnotation(e){const{pid:t,sid:a,atid:i,annotationData:s}=T(e);p.default.dispatcher.dispatch({type:n.default.UPDATE_ANNOTATION,pid:t,sid:a,atid:i,annotationData:s})},updateDotColor(e){const{pid:t,sid:a,did:s,color:r,syncWithApi:o=!1}=T(e);let l;if(o){const e=i.default.getDot({pid:t,sid:a,did:s});l=O(e.color,[])}p.default.dispatcher.dispatch({type:n.default.UPDATE_DOT_COLOR,pid:t,sid:a,did:s,color:r,oldColor:l,colorName:(0,d.getColorName)(r),syncWithApi:o})},updateAnnotationType(e){const{pid:t,sid:a,atid:s,newType:r,syncWithApi:o=!1}=T(e);let d;const l=i.default.getAnnotation({pid:t,sid:a,atid:s});if(o){d=null==l?void 0:l.type;if(!u.default.noteTypeExists(t,r))return}p.default.dispatcher.dispatch({type:n.default.UPDATE_ANNOTATION_TYPE,pid:t,sid:a,atid:s,componentSourceId:null==l?void 0:l.componentSourceId,newType:r,oldType:d,syncWithApi:o})},changeAnnotationFilter(e){var t;const{pid:a,statusFilter:i="All"}=T(e),{_id:s}=null!==(t=u.default.findNoteTypeByName(a,i))&&void 0!==t?t:{};p.default.dispatcher.dispatch({type:n.default.CHANGE_ANNOTATION_FILTER,statusFilter:i,filterId:"All"===i?void 0:s,noteType:u.default.findNoteType(a,s)})},deleteAnnotationType(e){const{pid:t,sid:a,atid:s,syncWithApi:r=!1}=T(e);let o;const d=i.default.getAnnotation({pid:t,sid:a,atid:s});r&&(o=null==d?void 0:d.type),p.default.dispatcher.dispatch({type:n.default.DELETE_ANNOTATION_TYPE,pid:t,sid:a,atid:s,componentSourceId:null==d?void 0:d.componentSourceId,oldType:o,syncWithApi:r})},updateDotPosition(e){var t;const{pid:a,sid:s,did:r,x:o,y:d,syncWithApi:l=!1}=T(e);let c,u;l&&({x:c,y:u}=null!==(t=i.default.getDot({pid:a,sid:s,did:r}))&&void 0!==t?t:{}),p.default.dispatcher.dispatch({type:n.default.UPDATE_DOT_POSITION,pid:a,sid:s,did:r,x:o,y:d,oldX:c,oldY:u,syncWithApi:l})},updateAnnotationPosition(e){const{pid:t,sid:a,atid:s,x:r,y:o,originalX:d,originalY:l,syncWithApi:c=!1}=T(e);let u,f;const S=i.default.getAnnotation({pid:t,sid:a,atid:s});c&&({x:u,y:f}=null!=S?S:{}),p.default.dispatcher.dispatch({type:n.default.UPDATE_ANNOTATION_POSITION,pid:t,sid:a,atid:s,componentSourceId:null==S?void 0:S.componentSourceId,x:r,y:o,originalX:d,originalY:l,oldX:u,oldY:f,syncWithApi:c})},updateDotStatus(e){var t;const{pid:a,sid:s,did:r,status:o,statusFilter:d,syncWithApi:l=!1,source:c="Screen"}=T(e);let u;l&&({status:u}=null!==(t=i.default.getDot({pid:a,sid:s,did:r}))&&void 0!==t?t:{}),p.default.dispatcher.dispatch({type:n.default.UPDATE_DOT_STATUS,pid:a,sid:s,did:r,status:o,oldStatus:u,statusFilter:d,syncWithApi:l,source:c})},removeDot(e){const{pid:t,sid:a,did:s,note:r,syncWithApi:o=!1}=T(e);let d;o&&(d=i.default.getDot({pid:t,sid:a,did:s})),p.default.dispatcher.dispatch({type:n.default.REMOVE_DOT,pid:t,sid:a,did:s,note:r,removedDot:d,syncWithApi:o})},removeAnnotation(e){const{pid:t,sid:a,atid:s,text:r,syncWithApi:o=!1}=T(e);let d;const l=i.default.getAnnotation({pid:t,sid:a,atid:s});o&&(d=l),p.default.dispatcher.dispatch({type:n.default.REMOVE_ANNOTATION,pid:t,sid:a,atid:s,componentSourceId:null==l?void 0:l.componentSourceId,text:r,removedAnnotation:d,syncWithApi:o})},unlinkAnnotation(e){const{pid:t,sid:a,atid:s,x:r,y:o,newAnnotation:d,syncWithApi:l=!1}=T(e),c=i.default.getAnnotation({pid:t,sid:a,atid:s});p.default.dispatcher.dispatch({type:n.default.UNLINK_ANNOTATION,pid:t,sid:a,atid:s,x:r,y:o,newAnnotation:d,unlinkedAnnotation:c,syncWithApi:l})},createComment(e){const{pid:t,sid:a,did:s,note:r,hasReaction:o,syncWithApi:f=!1,source:S="Screen"}=T(e),h=`newComment${(0,c.getRandomString)()}`,{user:{_id:E,email:g,username:O,emotar:m,avatar:_}}=u.default.findUser({bid:t}),b=Date.now(),C={_id:h,author:{_id:E,email:g,username:O,emotar:m,avatar:_},note:r,created:b,updated:b};let A,y=!1,I=!1;if(f){const e=u.default.getBarrel({bid:t}),{comments:n}=i.default.getDot({pid:t,sid:a,did:s}),o=n.map((e=>{var t;return null===(t=e.author)||void 0===t?void 0:t._id})).lastIndexOf(Zeplin.user._id)+1,c=n.slice(o);y=(0,l.isThereAnyMentionedUser)(e.users,r),A=c.some((e=>{var t;return(null===(t=e.author)||void 0===t?void 0:t._id)!==Zeplin.user._id&&e.note.includes(`@${Zeplin.user.username}`)})),I=(0,d.hasImage)(r)}p.default.dispatcher.dispatch({type:n.default.CREATE_COMMENT,pid:t,sid:a,did:s,comment:C,hasReaction:o,toMention:A,hasMention:y,hasImage:I,syncWithApi:f,source:S})},addComment(e){const{pid:t,sid:a,uid:i,did:s,comment:r}=T(e);let o,d;i&&({userId:o,username:d}=p.default.UserStore.getState()),p.default.dispatcher.dispatch({type:n.default.ADD_COMMENT,pid:t,sid:a,uid:i,userId:o,username:d,did:s,comment:r})},updateComment(e){var t,a,s;const{pid:r,sid:o,uid:d,did:l,cmid:c,commentData:f,syncWithApi:S=!1}=T(e);let h,E,g,m;if(S){let e;t=null!==(a=i.default.getComment({pid:r,sid:o,did:l,cmid:c}))&&void 0!==a?a:{},({_id:e}=t),h=O(t,["_id"])}d&&(({userId:E,username:g}=p.default.UserStore.getState()),({user:m}=null!==(s=u.default.findUser({bid:r,uid:d}))&&void 0!==s?s:{})),p.default.dispatcher.dispatch({type:n.default.UPDATE_COMMENT,pid:r,sid:o,uid:d,author:m,userId:E,username:g,did:l,cmid:c,commentData:f,oldCommentData:h,syncWithApi:S})},updateAnnotationText(e){var t,a;const{pid:s,sid:r,uid:o,atid:d,annotationData:l,syncWithApi:c=!1}=T(e);let f;const S=i.default.getAnnotation({pid:s,sid:r,atid:d});if(c){let e;t=null!=S?S:{},({_id:e}=t),f=O(t,["_id"])}let h,E,g;o&&(({userId:h,username:E}=p.default.UserStore.getState()),({user:g}=null!==(a=u.default.findUser({bid:s,uid:o}))&&void 0!==a?a:{})),p.default.dispatcher.dispatch({type:n.default.UPDATE_ANNOTATION_TEXT,pid:s,sid:r,uid:o,creator:g,userId:h,username:E,atid:d,componentSourceId:null==S?void 0:S.componentSourceId,annotationData:l,oldAnnotationData:f,syncWithApi:c})},removeComment(e){const{pid:t,sid:a,did:s,cmid:r,syncWithApi:o=!1}=T(e);let d;o&&(d=i.default.getComment({pid:t,sid:a,did:s,cmid:r})),p.default.dispatcher.dispatch({type:n.default.REMOVE_COMMENT,pid:t,sid:a,did:s,cmid:r,removedComment:d,syncWithApi:o})},openDotMenu(){p.default.dispatcher.dispatch({type:n.default.OPEN_DOT_MENU})},showNotes(){p.default.dispatcher.dispatch({type:n.default.SHOW_NOTES})},hideNotes(){p.default.dispatcher.dispatch({type:n.default.HIDE_NOTES})},showFlowLinks(){p.default.dispatcher.dispatch({type:n.default.SHOW_FLOW_LINKS})},hideFlowLinks(){p.default.dispatcher.dispatch({type:n.default.HIDE_FLOW_LINKS})},getFlows({screenId:e,barrelId:t}){p.default.dispatcher.dispatch({type:n.default.GET_FLOWS,screenId:e,barrelId:t})},changeSidebarTab(e){p.default.dispatcher.dispatch({type:n.default.CHANGE_SIDEBAR_TAB,selectedSidebarTab:e})},changeScreenSidebarWidth(e){p.default.dispatcher.dispatch({type:n.default.CHANGE_SCREEN_SIDEBAR_WIDTH,screenSidebarWidth:e})},getVersions(){const{screenId:e}=p.default.ScreenStore.getState();p.default.dispatcher.dispatch({type:n.default.GET_VERSIONS,screenId:e})},setVersions(e){const{pid:t,sid:a,versions:i,totalVersionCount:s,allowedVersionCount:r}=T(e);i.forEach((e=>{var t;null!==(t=e.commit)&&void 0!==t||(e.commit={message:"",color:(0,d.getColorValueByName)("yellow"),author:e.creator})}));let{versionId:o}=p.default.ScreenStore.getState();i.some((({_id:e})=>e===o))||(o=i[0]._id),p.default.dispatcher.dispatch({type:n.default.SET_VERSIONS,pid:t,sid:a,versions:i,totalVersionCount:s,allowedVersionCount:r,versionId:o})},setVersionId(e){var t,a;const{barrelId:s}=p.default.BarrelStore.getState(),{screenId:r}=p.default.ScreenStore.getState(),{versions:[{_id:o=null}]=[{}]}=null!==(t=i.default.getScreen())&&void 0!==t?t:{},d=null!=e?e:o,l=d===o,c=!l&&E.default.isOnboardingHighlightScreen(r),f=c&&E.default.shouldHighlightOnboardingVersions(),{onboardingType:S}=null!==(a=u.default.getBarrel())&&void 0!==a?a:{};p.default.dispatcher.dispatch({type:n.default.SET_VERSION_ID,barrelId:s,screenId:r,versionId:d,latestVersionSelected:l,isOnboardingScreenOldVersion:c,shouldCompleteVersionsOnboarding:f,onboardingType:S})},setSnapshot(e){const{pid:t,sid:a,vid:i,snapshot:s}=T(e);p.default.dispatcher.dispatch({type:n.default.SET_SNAPSHOT,pid:t,sid:a,vid:i,snapshot:s})},getAssetStats({screenId:e,isOptimizedAssets:t,snapshot:a,assets:i,barrelId:s,selectedAsset:r,versionId:o}){p.default.dispatcher.dispatch({type:n.default.GET_ASSET_STATS,screenId:e,isOptimizedAssets:t,snapshot:a,assets:i,barrelId:s,selectedAsset:r,versionId:o})},showVersions(){var e;const{totalVersionCount:t}=i.default.getScreen(),a=!t,s=E.default.shouldHighlightOnboardingVersions(),{onboardingType:r}=null!==(e=u.default.getBarrel())&&void 0!==e?e:{};p.default.dispatcher.dispatch({type:n.default.SHOW_VERSIONS,loadingVersions:a,screenVersionsLastSeen:m.setCurrentDate(),screenLastOpened:m.setCurrentDate(),isVersionsHighlighted:s,onboardingType:r})},hideVersions(){p.default.dispatcher.dispatch({type:n.default.HIDE_VERSIONS,screenVersionsLastSeen:m.setCurrentDate(),screenLastOpened:m.setCurrentDate()})},toggleVersions(){const{totalVersionCount:e}=i.default.getScreen(),t=!e;p.default.dispatcher.dispatch({type:n.default.TOGGLE_VERSIONS,loadingVersions:t,screenVersionsLastSeen:m.setCurrentDate(),screenLastOpened:m.setCurrentDate()})},enableVersionsCompactMode(){p.default.dispatcher.dispatch({type:n.default.ENABLE_VERSIONS_COMPACT_MODE})},disableVersionsCompactMode(){p.default.dispatcher.dispatch({type:n.default.DISABLE_VERSIONS_COMPACT_MODE})},changeVersionsSidebarWidth(e){p.default.dispatcher.dispatch({type:n.default.CHANGE_VERSIONS_SIDEBAR_WIDTH,versionsSidebarWidth:e})},addVersion(e){var t;const{pid:a,sid:s,version:r,syncWithApi:o=!1}=T(e),l=u.default.getBarrel({bid:a});if((null==l?void 0:l.dataStage)!==g.default.Complete)return;const c=i.default.getScreen({pid:a,sid:s});if(!c)return;if(!r.creator.fullName){const e=u.default.findUser({bid:a,uid:r.creator._id});e&&(r.creator=Object.assign(Object.assign({},r.creator),{fullName:e.user.fullName}))}let f;null!==(t=r.commit)&&void 0!==t||(r.commit={message:"",color:(0,d.getColorValueByName)("yellow"),author:r.creator});const{versions:S,allowedVersionCount:h}=c;S.length>h&&(f=S[S.length-1]);let{versionId:E,latestVersionSelected:O}=p.default.ScreenStore.getState();(O||f&&f._id===E)&&(O=!0,E=r._id),p.default.dispatcher.dispatch({type:n.default.ADD_VERSION,pid:a,sid:s,version:r,poppedVersion:f,syncWithApi:o,versionId:E,latestVersionSelected:O,screenVersionsLastSeen:this.updateTimeForAddVersion(s,"screenVersionsLastSeen"),screenLastOpened:this.updateTimeForAddVersion(s,"screenLastOpened")})},updateCommitColor(e){const{pid:t,sid:a,vid:s,color:r,syncWithApi:o=!1}=T(e);let d;if(o){const e=i.default.getVersion({sid:a,vid:s});d=O(e.commit.color,[])}p.default.dispatcher.dispatch({type:n.default.UPDATE_COMMIT_COLOR,pid:t,sid:a,vid:s,color:r,oldColor:d,syncWithApi:o})},updateCommitMessage(e){const{pid:t,sid:a,vid:s,message:r,syncWithApi:o=!1}=T(e);let d;if(o){d=i.default.getVersion({sid:a,vid:s}).commit.message}p.default.dispatcher.dispatch({type:n.default.UPDATE_COMMIT_MESSAGE,pid:t,sid:a,vid:s,message:r,oldMessage:d,syncWithApi:o})},removeVersion(e){const{pid:t,sid:a,vid:s,syncWithApi:r=!1}=T(e);let o;r&&(o=i.default.getVersion({sid:a,vid:s}));let{versionId:d}=p.default.ScreenStore.getState();const{latestVersionSelected:l}=p.default.ScreenStore.getState(),c=s===d;c&&l?({versions:[,{_id:d}]}=i.default.getScreen({sid:a})):c&&({versions:[{_id:d}]}=i.default.getScreen({sid:a})),p.default.dispatcher.dispatch({type:n.default.REMOVE_VERSION,pid:t,sid:a,vid:s,removedVersion:o,removingCurrentVersion:c,syncWithApi:r,versionId:d})},setSourceFile({versionId:e,sourceFile:t}){p.default.dispatcher.dispatch({type:n.default.SET_SOURCE_FILE,versionId:e,sourceFile:t})},hideComponentVariantsOnboardingHintbox(){p.default.dispatcher.dispatch({type:n.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_HINTBOX})},hideImageProcessingHintbox(){p.default.dispatcher.dispatch({type:n.default.HIDE_IMAGE_PROCESSING_HINTBOX})},renameScreenVariant(e){const{pid:t,vgid:a,svid:i,name:s,syncWithApi:r}=T(e);let o;if(r){const{variantGroups:e}=u.default.getBarrel({bid:t}),{screens:n}=e.find((({_id:e})=>e===a));o=n.find((({id:e})=>e===i)).variantName}p.default.dispatcher.dispatch({type:n.default.RENAME_SCREEN_VARIANT,pid:t,vgid:a,svid:i,name:s,oldName:o,syncWithApi:r})},reorderScreenVariant(e){const{pid:t,vgid:a,svid:i,index:s,syncWithApi:r}=T(e);let o;if(r){const{variantGroups:e}=u.default.getBarrel({bid:t}),{screens:n}=e.find((({_id:e})=>e===a));o=n.findIndex((({id:e})=>e===i))}p.default.dispatcher.dispatch({type:n.default.REORDER_SCREEN_VARIANT,pid:t,vgid:a,svid:i,index:s,oldIndex:o,syncWithApi:r})},removeScreenVariant(e){const{pid:t,vgid:a,svid:s,syncWithApi:r}=T(e),{variantGroups:o}=u.default.getBarrel({bid:t});if(!o)return;const{screens:d}=o.find((({_id:e})=>e===a));let l,c;r&&(c=d.find((({id:e})=>e===s)),l=d.findIndex((({id:e})=>e===s)));const{screenId:f}=p.default.ScreenStore.getState();if(s===f){const e=d[0].id===s?d[1].id:d[0].id;i.default.navigateToScreen(e)}p.default.dispatcher.dispatch({type:n.default.REMOVE_SCREEN_VARIANT,pid:t,vgid:a,svid:s,oldIndex:l,oldScreenVariant:c,syncWithApi:r})},addScreenVariant(e){const{pid:t,vgid:a,screenVariant:i,index:s}=T(e);p.default.dispatcher.dispatch({type:n.default.ADD_SCREEN_VARIANT,pid:t,vgid:a,screenVariant:i,index:s})},selectScreenVariant(e){const{pid:t,svid:a,usingKeyboardShortcut:i}=T(e);p.default.dispatcher.dispatch({type:n.default.SELECT_SCREEN_VARIANT,pid:t,svid:a,usingKeyboardShortcut:i})},changeComponentsFilter(e){const{screenId:t}=p.default.ScreenStore.getState();p.default.dispatcher.dispatch({type:n.default.CHANGE_COMPONENTS_FILTER,filter:e,screenId:t})},setLastOpenDates(e,{screenVersionsLastSeen:t,screenLastOpened:a}){p.default.dispatcher.dispatch({type:n.default.SET_LAST_OPEN_DATES,pid:e,screenVersionsLastSeen:t,screenLastOpened:a})},updateDotPopupRemarkType(e){const{pid:t,sid:a,atid:s,did:o,annotation:l,dot:c,remarkType:f,textContent:E}=T(e),{dotPopupRemarkType:g}=p.default.ScreenStore.getState();if(g===f)return;let O=E;const m=u.default.getBarrel({bid:t}),_=g===S.default.Annotation?"_id":"username",b=(0,h.userRegexFn)(m.users,_,"g");let C;if(b.test(null!=E?E:"")&&(O=(0,h.transformMentionData)(m.users,b,_,E)),f===S.default.Dot){const{x:e,y:t}=l,a=i.default.getDots(),{lastNoteColorUsed:n}=p.default.DotsStore.getState();C={_id:"newDot",name:(null==a?void 0:a.length)?String(parseInt(a[a.length-1].name,10)+1):"1",x:e,y:t,color:(0,d.getColorValueByName)(n),status:r.default.OPEN,comments:[]}}else{const{x:e,y:a}=c,{lastNoteTypeUsed:n,filterId:i}=p.default.AnnotationsStore.getState();let s;s=i&&n!==i?u.default.noteTypeExists(t,i)?i:void 0:u.default.noteTypeExists(t,n)?n:void 0;C={_id:"newAnnotation",x:e,y:a,text:"",type:s}}p.default.dispatcher.dispatch({type:n.default.UPDATE_DOTPOPUP_REMARK_TYPE,pid:t,sid:a,atid:s,did:o,remark:C,remarkType:f,textContent:O})},changeAnnotationConfigFilter(e){const{annotationId:t,filterId:a,statusFilter:s}=p.default.AnnotationsStore.getState();let r=t;if(t){const n=i.default.getAnnotation({atid:t}),o=u.default.findUser();(0,d.checkAnnotationFilter)(n,s,a,e,o.user)||(r=null)}p.default.dispatcher.dispatch({type:n.default.CHANGE_ANNOTATION_CONFIG_FILTER,annotationId:r,configFilter:e})},notifyAssetsTabOpened(){var e;const t=E.default.shouldHighlightOnboardingAssets(),{onboardingType:a}=null!==(e=u.default.getBarrel())&&void 0!==e?e:{};p.default.dispatcher.dispatch({type:n.default.NOTIFY_ASSETS_TAB_OPENED,shouldCompleteAssetsOnboarding:t,onboardingType:a})},setOnboardingStep({step:e}){p.default.dispatcher.dispatch({type:n.default.SET_ONBOARDING_STEP,step:e})},completeOnboardingStep({step:e}){var t;const{onboardingType:a}=null!==(t=u.default.getBarrel())&&void 0!==t?t:{};p.default.dispatcher.dispatch({type:n.default.COMPLETE_ONBOARDING_STEP,step:e,onboardingType:a})},setOnboardingInfoVisiblity({visible:e}){p.default.dispatcher.dispatch({type:n.default.SET_ONBOARDING_INFO_VISIBILITY,visible:e})},hideOnboardingFlowHintbox(){p.default.dispatcher.dispatch({type:n.default.HIDE_ONBOARDING_FLOW_HINTBOX})},enterStageMode(){const{pid:e,sid:t}=T();p.default.dispatcher.dispatch({pid:e,sid:t,type:n.default.ENTER_STAGE_MODE})},leaveStageMode(){const{pid:e,sid:t}=T();p.default.dispatcher.dispatch({pid:e,sid:t,type:n.default.LEAVE_STAGE_MODE})},showStageComments(){p.default.dispatcher.dispatch({type:n.default.SHOW_STAGE_COMMENTS})},hideStageComments(){p.default.dispatcher.dispatch({type:n.default.HIDE_STAGE_COMMENTS})},hideStageModeFirstTimeLanding(){p.default.dispatcher.dispatch({type:n.default.HIDE_STAGE_MODE_FIRST_TIME_LANDING})},shareStageModeScreenUrl({url:e}){p.default.dispatcher.dispatch({type:n.default.SHARE_STAGE_MODE_SCREEN_URL,url:e,syncWithApi:!0})},closeStageModeSidebar(){p.default.dispatcher.dispatch({type:n.default.CLOSE_STAGE_MODE_SIDEBAR})},applyStageModeHistoryOperation({operation:e}){p.default.dispatcher.dispatch({type:n.default.APPLY_STAGE_MODE_HISTORY_OPERATION,operation:e})},flashStageModeHotspots(){p.default.dispatcher.dispatch({type:n.default.FLASH_STAGE_MODE_HOTSPOTS})},flashStageModeHotspotsDone(){p.default.dispatcher.dispatch({type:n.default.FLASH_STAGE_MODE_HOTSPOTS_DONE})}},_=m},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(737),i=a(264),s=a(1052),r=a(789);function o(){const{screenId:e}=i.default.ScreenStore.getState();return e?{sid:e,date:new Date}:{}}function d(){var e;const{screenId:t}=i.default.ScreenStore.getState();if(!t)return{};const{screenVersionsLastSeen:a}=i.default.BarrelStore.getState();return{sid:t,date:null!==(e=null==a?void 0:a[t])&&void 0!==e?e:new Date}}const l={getOpenScreenData:function(e,t,a,l,c,u,p){var f,S,h,E,g;let O;O=p?null===(f=null==p?void 0:p.screens)||void 0===f?void 0:f.find((t=>t._id===e)):r.default.getScreen({sid:e});const{barrelId:T}=i.default.BarrelStore.getState(),m=s.default.isOnboardingHighlightScreen(e),{onboardingType:_}=null!==(S=n.default.getBarrel())&&void 0!==S?S:{},b={barrelId:T,screenId:e,dotId:a,commentId:l,annotationId:c,stageMode:u,isOnboardingHighlightScreen:m,onboardingType:_};if(O){const{versions:[a]}=O;let n,i;t?(n=r.default.getVersion({sid:e,vid:t}),i=t,Object.assign(b,{versionsVisible:!0})):(n=a,i=null==n?void 0:n._id),u||Object.assign(b,{stageModeHistoryCount:0});const s=a._id===i,{visibleScreens:o}=null!==(h=r.default.getFilteredScreens(p))&&void 0!==h?h:{};if(!o)return;const d=!o.some((t=>t._id===e));Object.assign(b,{versionId:i,latestVersionSelected:s,loadingSnapshot:!n||!("layers"in n.snapshot),processingSnapshotTiles:"processing"===(null===(g=null===(E=null==n?void 0:n.snapshot)||void 0===E?void 0:E.tileInfo)||void 0===g?void 0:g.status),loadingVersions:!O.totalVersionCount,shouldResetDashboardFilters:d})}const{versionsVisible:C}=i.default.ScreenStore.getState();return Object.assign(Object.assign({},b),{screenVersionsLastSeen:C?o():d(),screenLastOpened:o()})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(264),i=a(737),s=a(789),r=a(1053);function o(){var e;if(!i.default.isOnboardingProject())return null;const t=null===(e=i.default.getProject().screens)||void 0===e?void 0:e.find((e=>e.onboardingHighlighted));return t?t._id:null}function d(e){if(!e)return!1;return e===o()}function l(){const e=o();if(!e)return null;const t=i.default.getProject(),a=s.default.getDots({pid:t._id,sid:e});if(!(null==a?void 0:a.length))return null;const n=a.find((e=>"1"===e.name));return n||null}function c(){var e;const{onboardingType:t}=null!==(e=i.default.getBarrel())&&void 0!==e?e:{};if(t===r.default.Figma)return!0;const{onboardingAssetsCompleted:a}=n.default.BarrelStore.getState();return a}function u(){const{onboardingDotCompleted:e}=n.default.BarrelStore.getState();return!l()||e}function p(){const{onboardingLayerCompleted:e,onboardingVersionsCompleted:t}=n.default.BarrelStore.getState(),a=c(),i=u();return e&&i&&t&&a}function f(){const{onboardingLayerCompleted:e,onboardingVersionsCompleted:t}=n.default.BarrelStore.getState(),a=c(),i=u();return e?i?a?t?null:"versions":"assets":"dot":"layer"}function S(){const{screenId:e}=n.default.ScreenStore.getState(),t=d(e),a=f();return t&&"layer"===a}const h={getOnboardingHighlightScreenId:o,isOnboardingHighlightScreen:d,getDashboardOnboardingHintboxType:function(){var e;const t=i.default.findUser().role;if(i.default.isOnboardingProject()){const{onboardingHighlightScreenOpened:t}=n.default.BarrelStore.getState(),{onboardingType:a}=null!==(e=i.default.getBarrel())&&void 0!==e?e:{};if(a===r.default.Figma)return"highlight";const{dashboardOnboardingEndingHintboxHidden:s}=n.default.DashboardStore.getState();return s?null:p()?"ending":t?"dropOff":"highlight"}const{registeredAt:a,shouldDisplayDashboardOnboardingHintbox:s}=n.default.UserStore.getState(),{config:o}=n.default.AppStore.getState(),d=new Date(o.minRegistrationDateToShowOnboarding)<new Date(a),l=["owner","king"].includes(t);return d&&s&&!l?"invited":null},getOnboardingHighlightDot:l,getNextOnboardingStep:f,shouldHighlightOnboardingLayer:S,shouldHighlightOnboardingDot:function(){const{screenOnboardingStep:e,screenId:t}=n.default.ScreenStore.getState();return d(t)&&"dot"===e},shouldHighlightOnboardingAssets:function(){const{screenOnboardingStep:e,screenId:t}=n.default.ScreenStore.getState();return d(t)&&"assets"===e},shouldHighlightOnboardingVersions:function(){const{screenOnboardingStep:e,screenId:t}=n.default.ScreenStore.getState();return d(t)&&"versions"===e},getScreenOnboardingHintboxType:function(){var e;const{screenId:t}=n.default.ScreenStore.getState();if(!d(t))return null;if(S())return"layer";if(!p())return"highlight";const{onboardingType:a}=null!==(e=i.default.getBarrel())&&void 0!==e?e:{};if(a===r.default.Figma)return"ending";const{screenOnboardingFlowHintboxHidden:s}=n.default.ScreenStore.getState();return s?null:"flow"},isScreenOnboardingCompleted:p}},,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(284),i=a(737),s=a(7),r=a(123),o=a(108),d=a(106),l=a(1056),c=a(264),u=a(738),p=a(798),f=a(1051),S=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const h=24;function E(e={}){var t,a;const n=null!==(t=e.bid)&&void 0!==t?t:c.default.BarrelStore.getState().barrelId,i=null!==(a=e.barrelType)&&void 0!==a?a:c.default.BarrelStore.getState().barrelType;return Object.assign(Object.assign({},e),{bid:n,barrelType:i})}function g(e){const t=i.default.getBarrel();if(!t)return!1;const{barrelType:a,selectedView:n}=c.default.BarrelStore.getState(),{selectedStyleguideSection:o}=c.default.StyleguideStore.getState();return!i.default.isUserRestricted()&&!u.default.isOrganizationFrozen()&&function(e,t){var a,n,i,s;return e._id===t||!!(null===(a=e.ancestors)||void 0===a?void 0:a.includes(t))||(null===(n=e.styleguideLink)||void 0===n?void 0:n.styleguide._id)===t||!!(null===(s=null===(i=e.styleguideLink)||void 0===i?void 0:i.styleguide.ancestors)||void 0===s?void 0:s.includes(t))}(t,e)&&(a===r.default.STYLEGUIDE||n===s.ProjectViewTypes.STYLEGUIDE)&&"components"===o}const O={reset(e={}){c.default.dispatcher.dispatch(Object.assign({type:n.default.RESET},e))},load(e){c.default.dispatcher.dispatch(Object.assign({type:n.default.LOAD},e))},loadIntermediate(e){var t,a;const{sid:i,vid:s,did:r,cmid:o,atid:d}=e.screenData,l=f.default.getOpenScreenData(i,s,r,o,d,!1,null===(a=null===(t=null==e?void 0:e.barrelData)||void 0===t?void 0:t.data)||void 0===a?void 0:a.project);c.default.dispatcher.dispatch(Object.assign(Object.assign({type:n.default.LOAD_INTERMEDIATE},e),{openScreenData:l}))},setOrganizationId({oid:e}){c.default.dispatcher.dispatch({type:n.default.SET_ORGANIZATION_ID,oid:e})},addToSlack(e){const{bid:t,barrelType:a}=E(e),{name:s}=i.default.getBarrel({bid:t});c.default.dispatcher.dispatch({type:n.default.ADD_TO_SLACK,bid:t,barrelType:a,name:s})},authenticateSlackIntegration(e){c.default.dispatcher.dispatch({type:n.default.AUTHENTICATE_SLACK_INTEGRATION,bid:e})},authenticatingSlackIntegrationFailed(e){c.default.dispatcher.dispatch({type:n.default.AUTHENTICATE_SLACK_INTEGRATION_FAILED,bid:e})},authenticatedSlackIntegration({bid:e,barrelType:t,integration:a,events:i}){const{barrelId:s}=c.default.BarrelStore.getState();c.default.dispatcher.dispatch({type:n.default.AUTHENTICATED_SLACK_INTEGRATION,bid:e,barrelType:t,integration:a,events:i,openPreferences:s===e})},add({oid:e,oseid:t,index:a,barrel:i,barrelType:s,addedWithCopy:r=!1,syncWithApi:o=!1}){c.default.dispatcher.dispatch({type:n.default.ADD,oid:e,oseid:t,index:a,barrel:i,barrelType:s,addedWithCopy:r,syncWithApi:o})},activate(e){const{bid:t,barrelType:a,syncWithApi:i=!1}=E(e);let s=[t];if(a===r.default.STYLEGUIDE){const{styleguides:e}=c.default.StyleguidesDataStore.getState();s=(0,l.getStyleguideAndItsDescendants)(e,t)}c.default.dispatcher.dispatch({type:n.default.ACTIVATE,bid:t,barrelType:a,affectedIds:s,syncWithApi:i})},archive(e){const{bid:t,barrelType:a,uid:s,syncWithApi:o=!1}=E(e),{barrelId:d,organizationId:u}=c.default.BarrelStore.getState(),{name:p}=i.default.getBarrel({bid:t});let f=[t];if(a===r.default.STYLEGUIDE){const{styleguides:e}=c.default.StyleguidesDataStore.getState();f=(0,l.getStyleguideAndItsDescendants)(e,t)}const S=c.default.UserStore.getState().userId,h=i.default.findUser({bid:t,uid:s});c.default.dispatcher.dispatch({type:n.default.ARCHIVE,bid:t,barrelType:a,currentBid:d,affectedIds:f,name:p,uid:s,currentUserId:S,user:h,organizationId:u,syncWithApi:o})},remove(e){const{bid:t,barrelType:a,uid:s,syncWithApi:o=!1}=E(e),{barrelId:d}=c.default.BarrelStore.getState(),l=i.default.getBarrel({bid:t}),p=i.default.findBarrelOrganizationId(t),f=a===r.default.PROJECT?u.default.findProjectOrganizationSectionId(t):null,S=c.default.UserStore.getState().userId,h=i.default.findUser({bid:t,uid:s});c.default.dispatcher.dispatch({type:n.default.REMOVE,oid:p,oseid:f,bid:t,barrelType:a,currentBid:d,oldBarrel:l,uid:s,currentUserId:S,user:h,syncWithApi:o})},copy(e){const{bid:t,barrelName:a,barrelType:s,options:r,syncWithApi:o=!1}=E(e),d=i.default.findBarrelOrganizationId(t);c.default.dispatcher.dispatch({type:n.default.COPY,bid:t,oid:d,barrelName:a,barrelType:s,options:r,syncWithApi:o})},updateName(e){const{bid:t,barrelType:a,name:s,syncWithApi:r=!1}=E(e);let o;r&&({name:o}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.UPDATE_NAME,bid:t,barrelType:a,name:s,oldName:o,syncWithApi:r})},updateDescription(e){const{bid:t,barrelType:a,description:s,syncWithApi:r=!1}=E(e);let o;r&&({description:o}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.UPDATE_DESCRIPTION,bid:t,barrelType:a,description:s,oldDescription:o,syncWithApi:r})},updateDensityScale(e){const{bid:t,barrelType:a,densityScale:s,syncWithApi:r=!1}=E(e);let o;r&&({densityScale:o}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.UPDATE_DENSITY_SCALE,bid:t,barrelType:a,densityScale:s,oldDensityScale:o,syncWithApi:r})},updateThumbnail(e){const{bid:t,barrelType:a,thumbnail:s,syncWithApi:r=!1}=E(e);let o;r&&({thumbnail:o}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.UPDATE_THUMBNAIL,bid:t,barrelType:a,thumbnail:s,oldThumbnail:o,syncWithApi:r})},addIntegration(e){const{bid:t,intype:a,integration:i,syncWithApi:s=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.ADD_INTEGRATION,bid:t,intype:a,integration:i,syncWithApi:s})},removeIntegration(e){const{bid:t,barrelType:a,intype:s,inid:r,syncWithApi:o=!1}=E(e),d=i.default.getBarrel({bid:t});let l;o&&(l=d.integration[s].find((({_id:e})=>e===r)));const u=1===d.integration.slacks.length;c.default.dispatcher.dispatch({type:n.default.REMOVE_INTEGRATION,bid:t,barrelType:a,intype:s,inid:r,removedIntegration:l,syncWithApi:o,isLastSlackIntegration:u})},toggleScene(e){const{bid:t,barrelType:a,accessibility:s,syncWithApi:r=!1}=E(e);let o;r&&({public:o}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.TOGGLE_SCENE,bid:t,barrelType:a,accessibility:s,oldAccessibility:o,syncWithApi:r})},enableScene(){O.toggleScene({accessibility:!0,syncWithApi:!0})},unshareScene(){O.toggleScene({accessibility:!1,syncWithApi:!0})},addMembers(e){const{bid:t,barrelType:a,members:i,syncWithApi:s=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.ADD_MEMBERS,bid:t,barrelType:a,members:i,syncWithApi:s})},updateUserRole(e){const{bid:t,barrelType:a,uid:s,role:r,syncWithApi:o=!1}=E(e);let d;if(o){const e=i.default.getBarrel({bid:t});({role:d}=e.findUser(s))}c.default.dispatcher.dispatch({type:n.default.UPDATE_USER_ROLE,bid:t,barrelType:a,uid:s,role:r,oldRole:d,syncWithApi:o})},updateUserData(e){const{bid:t,uid:a,userData:s,syncWithApi:r=!1}=E(e);let o;if(r){const e=i.default.getBarrel({bid:t});({user:o}=e.findUser(a))}c.default.dispatcher.dispatch({type:n.default.UPDATE_USER_DATA,bid:t,uid:a,userData:s,oldUserData:o,syncWithApi:r})},transferOwnership(e){const{bid:t,barrelType:a,uid:i,syncWithApi:s=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.TRANSFER_OWNERSHIP,syncWithApi:s,bid:t,barrelType:a,uid:i})},ownershipTransferred(e){const{bid:t,barrelType:a,uid:i}=E(e),{organizationId:s}=c.default.BarrelStore.getState(),o=c.default.UserStore.getState().userId;let d;if(a===r.default.STYLEGUIDE){const{styleguides:e}=c.default.StyleguidesDataStore.getState();d=(0,l.getStyleguideAndItsDescendants)(e,t)}c.default.dispatcher.dispatch({type:n.default.OWNERSHIP_TRANSFERRED,toOrganization:!1,fromUserId:o,targetId:i,oid:s,bid:t,affectedIds:d})},removeMember(e){var t;const{bid:a,uid:s,mid:r,barrelType:o,syncWithApi:d=!1}=E(e),l=i.default.findBarrelOrganizationId(a),{restricted:p}=null!==(t=u.default.getOrganizationProfile(l))&&void 0!==t?t:{},f="user"!==l?u.default.findProjectOrganizationSectionId(a):null,{barrelId:S}=c.default.BarrelStore.getState(),h=c.default.UserStore.getState().userId,g=(p||"user"===l)&&r===h,O=i.default.findUser({bid:a,uid:s});let T,m;g?T=i.default.getBarrel({bid:a}):m=i.default.findUser({bid:a,uid:r}),c.default.dispatcher.dispatch({type:n.default.REMOVE_MEMBER,oid:l,bid:a,uid:s,mid:r,oseid:f,barrelType:o,currentBid:S,currentUserId:h,removingUser:O,shouldRemoveBarrel:g,removedBarrel:T,removedMember:m,syncWithApi:d})},addColor(e){const{bid:t,barrelType:a,color:s,syncWithApi:r=!1}=E(e);let l=s;if(r){const e=i.default.getBarrel({bid:t}),{id:a=`newColor${(0,d.getRandomString)(h)}`,name:n=e.getColorName(new o.default(s))}=s;l=Object.assign(Object.assign({},s),{name:n,_id:a})}c.default.dispatcher.dispatch({type:n.default.ADD_COLOR,bid:t,barrelType:a,color:l,syncWithApi:r})},addMultipleColors(e){const t=E(e),{bid:a,barrelType:s,syncWithApi:r=!1}=t;let{colors:l}=t;if(r){const e=i.default.getBarrel({bid:a});l=l.map((t=>{var a;const n=t.name?t.name:e.getColorName(new o.default(t)),i=null!==(a=t.id)&&void 0!==a?a:`newColor${(0,d.getRandomString)()}`;return Object.assign(Object.assign({},t),{name:n,_id:i})}))}c.default.dispatcher.dispatch({type:n.default.ADD_MULTIPLE_COLORS,bid:a,barrelType:s,colors:l,syncWithApi:r})},updateColor(e){const{bid:t,barrelType:a,cid:s,colorData:r,syncWithApi:o=!1}=E(e);let d;if(o){const e=i.default.getBarrel({bid:t});d=S(e.findColorById(s),[])}c.default.dispatcher.dispatch({type:n.default.UPDATE_COLOR,bid:t,barrelType:a,cid:s,colorData:r,oldColorData:d,syncWithApi:o})},removeColor(e){const{bid:t,barrelType:a,cid:s,syncWithApi:r=!1}=E(e);let o;if(r){o=i.default.getBarrel({bid:t}).findColorById(s)}c.default.dispatcher.dispatch({type:n.default.REMOVE_COLOR,bid:t,barrelType:a,cid:s,removedColor:o,syncWithApi:r})},removeAllColors(e){const{bid:t,barrelType:a,syncWithApi:s=!1}=E(e);let r;if(s){r=i.default.getBarrel({bid:t}).colors}c.default.dispatcher.dispatch({type:n.default.REMOVE_ALL_COLORS,bid:t,barrelType:a,colorsToRemove:r,syncWithApi:s})},migrateColors(e){const{bid:t,barrelType:a,colorsToUpdate:s,colorsToAdd:r,hasLinkedStyleguideColor:o,syncWithApi:d=!1}=e,l={};if(d){const e=i.default.getBarrel({bid:t});Object.keys(s).forEach((t=>{const a=e.findColorById(t);l[t]=a}))}c.default.dispatcher.dispatch({type:n.default.MIGRATE_COLORS,bid:t,barrelType:a,colorsToUpdate:s,oldDataOfColorsToUpdate:l,colorsToAdd:r,hasLinkedStyleguideColor:o,syncWithApi:d})},updateColorOrder(e){const{bid:t,barrelType:a,cid:i,to:s,revertTo:r,syncWithApi:o=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.UPDATE_COLOR_ORDER,bid:t,barrelType:a,cid:i,to:s,revertTo:r,syncWithApi:o})},addTextStyle(e){const{bid:t,barrelType:a,textStyle:s,syncWithApi:r=!1}=E(e);let o=s;if(r){const e=i.default.getBarrel({bid:t}),{id:a=`newTextStyle${(0,d.getRandomString)(h)}`,name:n=e.getTextStyleName()}=s;o=Object.assign(Object.assign({},s),{name:n,_id:a})}c.default.dispatcher.dispatch({type:n.default.ADD_TEXT_STYLE,bid:t,barrelType:a,textStyle:o,syncWithApi:r})},addMultipleTextStyles(e){const t=E(e),{bid:a,barrelType:s,syncWithApi:r=!1}=t;let{textStyles:o}=t;if(r){const e=i.default.getBarrel({bid:a});o=o.map((t=>{var a;const n=t.name?t.name:e.getTextStyleName(),i=null!==(a=t.id)&&void 0!==a?a:`newTextStyle${(0,d.getRandomString)(h)}`;return Object.assign(Object.assign({},t),{name:n,_id:i})}))}c.default.dispatcher.dispatch({type:n.default.ADD_MULTIPLE_TEXT_STYLES,bid:a,barrelType:s,textStyles:o,syncWithApi:r})},updateTextStyle(e){const{bid:t,barrelType:a,tsid:s,textStyleData:r,syncWithApi:o=!1}=E(e);let d;if(o){const e=i.default.getBarrel({bid:t});d=S(e.findTextStyleById(s),[])}c.default.dispatcher.dispatch({type:n.default.UPDATE_TEXT_STYLE,bid:t,barrelType:a,tsid:s,textStyleData:r,oldTextStyleData:d,syncWithApi:o})},removeTextStyle(e){const{bid:t,barrelType:a,tsid:s,syncWithApi:r=!1}=E(e);let o;if(r){o=i.default.getBarrel({bid:t}).findTextStyleById(s)}c.default.dispatcher.dispatch({type:n.default.REMOVE_TEXT_STYLE,bid:t,barrelType:a,tsid:s,removedTextStyle:o,syncWithApi:r})},removeAllTextStyles(e){const{bid:t,barrelType:a,syncWithApi:s=!1}=E(e);let r;if(s){r=i.default.getBarrel({bid:t}).textStyles}c.default.dispatcher.dispatch({type:n.default.REMOVE_ALL_TEXT_STYLES,bid:t,barrelType:a,textStylesToRemove:r,syncWithApi:s})},addSpacingSection(e){const{bid:t,barrelType:a,spacingSection:i,syncWithApi:s=!1}=E(e);let r=i;if(s){const{_id:e=(0,d.getRandomString)(h)}=i;r=Object.assign(Object.assign({},i),{_id:e})}c.default.dispatcher.dispatch({type:n.default.ADD_SPACING_SECTION,bid:t,barrelType:a,spacingSection:r,syncWithApi:s})},updateSpacingSection(e){const{bid:t,barrelType:a,ssid:s,updatedSpacingSection:r,syncWithApi:o=!1}=E(e);let d={};if(o){d=i.default.getBarrel({bid:t}).findSpacingSectionById(s)}c.default.dispatcher.dispatch({type:n.default.UPDATE_SPACING_SECTION,bid:t,barrelType:a,ssid:s,updatedSpacingSection:r,oldSpacingSection:d,syncWithApi:o})},removeSpacingSection(e){const{bid:t,barrelType:a,ssid:s,syncWithApi:r=!1}=E(e);let o;if(r){o=i.default.getBarrel({bid:t}).findSpacingSectionById(s)}c.default.dispatcher.dispatch({type:n.default.REMOVE_SPACING_SECTION,bid:t,barrelType:a,ssid:s,removedSpacingSection:o,syncWithApi:r})},addSpacingToken(e){const{bid:t,barrelType:a,ssid:i,spacingToken:s,isBaseToken:r=!1,syncWithApi:o=!1}=E(e);let l=s;if(o){const{_id:e=(0,d.getRandomString)(h)}=s;l=Object.assign(Object.assign({},s),{_id:e})}c.default.dispatcher.dispatch({type:n.default.ADD_SPACING_TOKEN,bid:t,barrelType:a,ssid:i,isBaseToken:r,spacingToken:l,syncWithApi:o})},updateSpacingToken(e){const{bid:t,barrelType:a,ssid:s,sptid:r,updatedSpacingToken:o,syncWithApi:d=!1}=E(e),l=i.default.getBarrel({bid:t}),{baseTokenId:u}=l.findSpacingSectionById(s),p=u===r;let f={};d&&(f=l.findSpacingTokenInsideSectionById(s,r)),c.default.dispatcher.dispatch({type:n.default.UPDATE_SPACING_TOKEN,bid:t,barrelType:a,ssid:s,sptid:r,isBaseToken:p,updatedSpacingToken:o,oldSpacingToken:f,syncWithApi:d})},removeSpacingToken(e){const{bid:t,barrelType:a,ssid:s,sptid:r,syncWithApi:o=!1}=E(e),d=i.default.getBarrel({bid:t}),{baseTokenId:l}=d.findSpacingSectionById(s),u=l===r;let p;o&&(p=d.findSpacingTokenInsideSectionById(s,r)),c.default.dispatcher.dispatch({type:n.default.REMOVE_SPACING_TOKEN,bid:t,barrelType:a,ssid:s,sptid:r,removedSpacingToken:p,isBaseToken:u,syncWithApi:o})},updateRemPreferences(e){const{bid:t,barrelType:a,updatedRemPreferences:s,isRevert:r=!1,syncWithApi:o=!1}=E(e);let d={};if(o){d=i.default.getBarrel({bid:t}).remPreferences}c.default.dispatcher.dispatch({type:n.default.UPDATE_REM_PREFERENCES,bid:t,barrelType:a,updatedRemPreferences:s,oldRemPreferences:d,isRevert:r,syncWithApi:o})},addComponent(e){const{bid:t,csids:a,component:i}=E(e);c.default.dispatcher.dispatch({type:n.default.ADD_COMPONENT,bid:t,csids:a,component:i})},updateComponent(e){const{bid:t,barrelType:a,csids:s,coid:r,componentData:o,syncWithApi:d=!1}=E(e);let l;if(d){const e=i.default.getBarrel({bid:t});l=S(e.findComponentById(r),[])}c.default.dispatcher.dispatch({type:n.default.UPDATE_COMPONENT,bid:t,barrelType:a,csids:s,coid:r,shouldFetchSnapshot:g(t),componentData:o,oldComponentData:l,syncWithApi:d})},setComponentSnapshot({bid:e,csids:t,coid:a,vid:i,snapshot:s}){c.default.dispatcher.dispatch({type:n.default.SET_COMPONENT_SNAPSHOT,bid:e,csids:t,coid:a,vid:i,snapshot:s})},setMultipleComponentSnapshots(e){const{bid:t,componentSnapshotPayloads:a}=E(e);c.default.dispatcher.dispatch({type:n.default.SET_MULTIPLE_COMPONENT_SNAPSHOTS,bid:t,componentSnapshotPayloads:a})},removeComponents(e){const{bid:t,barrelType:a,sectionComponents:s,syncWithApi:r=!1}=E(e),o=[];if(r){const e=i.default.getBarrel({bid:t});s.forEach((({coids:t})=>{t.forEach((t=>{const a=e.findComponentById(t);a&&o.push(a)}))}))}c.default.dispatcher.dispatch({type:n.default.REMOVE_COMPONENTS,bid:t,barrelType:a,sectionComponents:s,oldComponents:o,syncWithApi:r})},removeComponent(e){const{bid:t,barrelType:a,csids:s,coid:r,syncWithApi:o=!1}=E(e);let d;if(o){d=i.default.getBarrel({bid:t}).findComponentById(r)}c.default.dispatcher.dispatch({type:n.default.REMOVE_COMPONENT,bid:t,barrelType:a,csids:s,coid:r,oldComponent:d,syncWithApi:o})},addComponentVersion(e){const{bid:t,barrelType:a,csids:i,coid:s,componentVersion:r}=E(e);c.default.dispatcher.dispatch({type:n.default.ADD_COMPONENT_VERSION,bid:t,barrelType:a,csids:i,coid:s,shouldFetchSnapshot:g(t),componentVersion:r})},addComponentSection(e){const{bid:t,barrelType:a,csids:i,componentSection:s,isCreateGroup:r=!1,syncWithApi:o=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.ADD_COMPONENT_SECTION,bid:t,barrelType:a,csids:i,componentSection:s,isCreateGroup:r,syncWithApi:o})},updateComponentSection(e){const{bid:t,barrelType:a,csids:s,componentSectionData:r,isComponentGroup:o=!1,syncWithApi:d=!1}=E(e);let l;if(d){const e=i.default.getBarrel({bid:t});l=S(e.findComponentSection(s),[])}c.default.dispatcher.dispatch({type:n.default.UPDATE_COMPONENT_SECTION,bid:t,barrelType:a,csids:s,componentSectionData:r,oldComponentSectionData:l,isComponentGroup:o,syncWithApi:d})},mergeComponentSection(e){const{bid:t,barrelType:a,csids:s,tcsids:r,flatten:o,index:d,syncWithApi:l=!1}=E(e);let u,p=r,f=o;if(l){const e=i.default.getBarrel({bid:t});if(u=e.findComponentSection(s),1===s.length)f=!0,p=[e.componentSections[0]._id];else{const t=s.slice(0,s.length-1),a=e.findComponentSection(t),n=a.componentSections.indexOf(u);let i=a.componentSections[n-1];i||(i=a),f="default"===i.name,p=i.idPath}}c.default.dispatcher.dispatch({type:n.default.MERGE_COMPONENT_SECTION,bid:t,barrelType:a,csids:s,tcsids:p,flatten:f,index:d,oldComponentSection:u,syncWithApi:l})},removeComponentSection(e){const{bid:t,csids:a}=E(e);c.default.dispatcher.dispatch({type:n.default.REMOVE_COMPONENT_SECTION,bid:t,csids:a})},removeComponentSections(e){const{bid:t,componentSections:a}=E(e);c.default.dispatcher.dispatch({type:n.default.REMOVE_COMPONENT_SECTIONS,bid:t,componentSections:a})},updateComponentSectionsOrder(e){const{bid:t,barrelType:a,componentSections:i,syncWithApi:s=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.UPDATE_COMPONENT_SECTIONS_ORDER,bid:t,barrelType:a,componentSections:i,syncWithApi:s})},updateComponentsOrder(e){const{bid:t,barrelType:a,components:s,syncWithApi:r=!1}=E(e);if(r){const e=i.default.getBarrel({bid:t});s.forEach((t=>{var a;null!==(a=t.to)&&void 0!==a||(t.to=e.findComponentSection(t.tcsid).components.length)}))}c.default.dispatcher.dispatch({type:n.default.UPDATE_COMPONENTS_ORDER,bid:t,barrelType:a,components:s,syncWithApi:r})},changeSelectedView(e,t={}){const{barrelType:a}=E({});c.default.dispatcher.dispatch({type:n.default.CHANGE_SELECTED_VIEW,selectedView:e,barrelType:a,viewUpdate:t})},updateWorkflowStatus(e){const{barrelType:t,bid:a,workflowStatus:s,syncWithApi:r=!1}=E(e),o=r?i.default.getBarrel({bid:a}).workflowStatus:{};c.default.dispatcher.dispatch({type:n.default.UPDATE_WORKFLOW_STATUS,barrelType:t,bid:a,workflowStatus:s,oldWorkflowStatusData:o,syncWithApi:r})},updateWorkflowStatuses({bids:e,workflowStatus:t,syncWithApi:a=!1}){const s=e.map((e=>{const{barrelType:t,bid:n}=E({bid:e});return{bid:n,barrelType:t,oldWorkflowStatusData:a?i.default.getBarrel({bid:n}).workflowStatus:{}}}));c.default.dispatcher.dispatch({type:n.default.UPDATE_WORKFLOW_STATUSES,statusUpdatedBarrels:s,workflowStatus:t,syncWithApi:a})},deleteWorkflowStatus(e){const{barrelType:t,bid:a,syncWithApi:s=!1}=E(e),r=s?i.default.getBarrel({bid:a}).workflowStatus:{};c.default.dispatcher.dispatch({type:n.default.DELETE_WORKFLOW_STATUS,barrelType:t,bid:a,oldWorkflowStatusData:r,syncWithApi:s})},deleteWorkflowStatuses({bids:e,syncWithApi:t=!1}){const a=e.map((e=>{const{barrelType:a,bid:n}=E({bid:e});return{bid:n,barrelType:a,oldWorkflowStatusData:t?i.default.getBarrel({bid:n}).workflowStatus:{}}}));c.default.dispatcher.dispatch({type:n.default.DELETE_WORKFLOW_STATUSES,statusDeletedBarrels:a,syncWithApi:t})},setAssetExportTarget(e){c.default.dispatcher.dispatch({type:n.default.SET_ASSET_EXPORT_TARGET,assetExportTarget:e})},changeAssetName(e){const{bid:t,component:a,screen:i,containerId:s,versionId:r,assetId:o,name:d,source:l}=E(e);c.default.dispatcher.dispatch({type:n.default.CHANGE_ASSET_NAME,bid:t,component:a,screen:i,containerId:s,versionId:r,assetId:o,name:d,source:l})},changeAssetDensityScalePref(e,t){const{bid:a}=E();c.default.dispatcher.dispatch({type:n.default.CHANGE_ASSET_DENSITY_SCALE_PREF,bid:a,format:e,assetDensityScalePrefsOfFormat:t})},changeAssetNamingConvention(e){const{bid:t}=E();c.default.dispatcher.dispatch({type:n.default.CHANGE_ASSET_NAMING_CONVENTION,bid:t,assetNamingConvention:e})},toggleSVGOptimization(e){const{bid:t}=E();c.default.dispatcher.dispatch({type:n.default.TOGGLE_SVG_OPTIMIZATION,bid:t,showOptimizedSVG:e})},togglePNGOptimization(e){const{bid:t}=E();c.default.dispatcher.dispatch({type:n.default.TOGGLE_PNG_OPTIMIZATION,bid:t,showOptimizedPNG:e})},toggleJPGOptimization(e){const{bid:t}=E();c.default.dispatcher.dispatch({type:n.default.TOGGLE_JPG_OPTIMIZATION,bid:t,showOptimizedJPG:e})},goToDashboard(){const{selectedView:e}=c.default.BarrelStore.getState();if(e===s.ProjectViewTypes.DASHBOARD)return;const{bid:t}=E(),{tagFilter:a}=c.default.DashboardStore.getState();c.default.dispatcher.dispatch({type:n.default.GO_TO_DASHBOARD,bid:t,tagFilter:a})},goToStyleguide(){const{selectedView:e}=c.default.BarrelStore.getState();if(e===s.ProjectViewTypes.STYLEGUIDE)return;const{bid:t}=E();c.default.dispatcher.dispatch({type:n.default.GO_TO_STYLEGUIDE,bid:t})},goToFlow({pid:e,flid:t}={}){const{bid:a}=E({bid:e});c.default.dispatcher.dispatch({type:n.default.GO_TO_FLOW,pid:a,flid:null!=t?t:p.default.getFirstFlowId(a)})},changeExportTarget(){c.default.dispatcher.dispatch({type:n.default.CHANGE_EXPORT_TARGET})},openExportTarget(){c.default.dispatcher.dispatch({type:n.default.OPEN_EXPORT_TARGET})},downloadAsset({containerName:e,assets:t,assetId:a,format:s,toastContainer:r,source:o}){const{barrelId:d,assetDensityScalePrefs:l,assetNamingConvention:u,showOptimizedSVG:p,showOptimizedPNG:f,showOptimizedJPG:S}=c.default.BarrelStore.getState(),{type:h}=i.default.getBarrel({bid:d});c.default.dispatcher.dispatch({type:n.default.DOWNLOAD_ASSET,barrelId:d,assetDensityScalePrefs:l,assetNamingConvention:u,showOptimizedSVG:p,showOptimizedPNG:f,showOptimizedJPG:S,platform:h,containerName:e,assets:t,assetId:a,format:s,toastContainer:r,source:o})},downloadMultipleAsset({containerName:e,assets:t,assetList:a,toastContainer:s,source:r}){const{barrelId:o,assetDensityScalePrefs:d,assetNamingConvention:l,showOptimizedSVG:u,showOptimizedPNG:p,showOptimizedJPG:f}=c.default.BarrelStore.getState(),{type:S}=i.default.getBarrel({bid:o});c.default.dispatcher.dispatch({type:n.default.DOWNLOAD_MULTIPLE_ASSET,barrelId:o,assetDensityScalePrefs:d,assetNamingConvention:l,showOptimizedSVG:u,showOptimizedPNG:p,showOptimizedJPG:f,platform:S,containerName:e,assets:t,assetList:a,toastContainer:s,source:r})},exportCode(e){const{bid:t,resourceType:a,source:s,exportObjects:r,extensionId:o}=E(e),{name:d,type:l}=i.default.getBarrel({bid:t});c.default.dispatcher.dispatch({type:n.default.EXPORT_CODE,barrelName:d,platform:l,resourceType:a,source:s,exportObjects:r,extensionId:o})},copyCode({code:e,toastContainer:t,platform:a,extensionId:i,source:s}){c.default.dispatcher.dispatch({type:n.default.COPY_CODE,code:e,toastContainer:t,platform:a,extensionId:i,source:s})},hideNoVectorAssetInfo(){c.default.dispatcher.dispatch({type:n.default.HIDE_NO_VECTOR_ASSET_INFO})},hideDensityMismatchWarning(){c.default.dispatcher.dispatch({type:n.default.HIDE_DENSITY_MISMATCH_WARNING})},hideSourceFileInfo(){c.default.dispatcher.dispatch({type:n.default.HIDE_SOURCE_FILE_INFO})},dismissFlowLinkInfo(){c.default.dispatcher.dispatch({type:n.default.DISMISS_FLOW_LINK_INFO})},dismissNoResourceInfo(){const{bid:e}=E();c.default.dispatcher.dispatch({type:n.default.DISMISS_NO_RESOURCE_INFO,bid:e})},hideSlackReconnectionAuntie(){const{bid:e}=E();c.default.dispatcher.dispatch({type:n.default.HIDE_SLACK_RECONNECTION_AUNTIE,bid:e})},openJumpToPopup(){c.default.dispatcher.dispatch({type:n.default.OPEN_JUMP_TO_POPUP})},closeJumpToPopup(){c.default.dispatcher.dispatch({type:n.default.CLOSE_JUMP_TO_POPUP})},copyComponentSectionWebLink(e){const{bid:t,barrelType:a,seid:i}=E(e);c.default.dispatcher.dispatch({type:n.default.COPY_COMPONENT_SECTION_WEB_LINK,bid:t,barrelType:a,seid:i})},copyComponentSectionAppURI(e){const{bid:t,barrelType:a,cseid:i}=E(e);c.default.dispatcher.dispatch({type:n.default.COPY_COMPONENT_SECTION_APP_URI,bid:t,barrelType:a,cseid:i})},fetchComponentSectionShortLink(e){const{bid:t,barrelType:a,seid:i}=E(e);c.default.dispatcher.dispatch({type:n.default.FETCH_COMPONENT_SECTION_SHORT_LINK,bid:t,barrelType:a,seid:i})},join(e){const{bid:t,barrelType:a,actionSource:i,mixpanelSource:s}=E(e);c.default.dispatcher.dispatch({type:n.default.JOIN,bid:t,barrelType:a,actionSource:i,mixpanelSource:s,syncWithApi:!0})},stopLoadingJoin(e){const{barrelType:t}=E(e);c.default.dispatcher.dispatch({type:n.default.STOP_JOIN_LOADING,barrelType:t})},enableDevMode(){const{bid:e,barrelType:t}=E(),{styleguideLink:a,ancestors:s}=i.default.getBarrel({bid:e});c.default.dispatcher.dispatch({type:n.default.ENABLE_DEV_MODE,bid:e,barrelType:t,styleguideLink:a,ancestors:s})},disableDevMode(){c.default.dispatcher.dispatch({type:n.default.DISABLE_DEV_MODE})},reloadLocalConnectedComponents(){const{bid:e,barrelType:t}=E(),{styleguideLink:a,ancestors:s}=i.default.getBarrel({bid:e});c.default.dispatcher.dispatch({type:n.default.RELOAD_LOCAL_CONNECTED_COMPONENTS,bid:e,barrelType:t,styleguideLink:a,ancestors:s})},setLocalConnectedComponents(e){const{bid:t,localConnectedComponents:a}=E(e);c.default.dispatcher.dispatch({type:n.default.SET_LOCAL_CONNECTED_COMPONENTS,bid:t,localConnectedComponents:a})},setConnectedComponentsLocalWorkspace(e){const{bid:t,workspace:a}=E(e);c.default.dispatcher.dispatch({type:n.default.SET_CONNECTED_COMPONENTS_LOCAL_WORKSPACE,bid:t,workspace:a})},getConnectedComponentsEditorInfo(){const{bid:e}=E();c.default.dispatcher.dispatch({type:n.default.GET_CONNECTED_COMPONENTS_EDITOR_INFO,bid:e})},setConnectedComponentsEditorInfo(e){c.default.dispatcher.dispatch({type:n.default.SET_CONNECTED_COMPONENTS_EDITOR_INFO,editorInfo:e})},setConnectedComponentsEditorPreference(e,t){c.default.dispatcher.dispatch({type:n.default.SET_CONNECTED_COMPONENTS_EDITOR_PREFERENCE,extension:e,editor:t})},setConnectedComponentsWorkspacePath(e){c.default.dispatcher.dispatch({type:n.default.SET_CONNECTED_COMPONENTS_WORKSPACE_PATH,workspacePath:e})},selectConnectedComponentsWorkspaceFolder(){const{bid:e}=E();c.default.dispatcher.dispatch({type:n.default.SELECT_CONNECTED_COMPONENTS_WORKSPACE_FOLDER,bid:e})},openComponentFileInEditor(e,t){const{bid:a}=E();c.default.dispatcher.dispatch({type:n.default.OPEN_COMPONENT_FILE_IN_EDITOR,bid:a,filePath:e,editor:t})},moveResourcesRequest(e){const{bid:t,barrelType:a,resourceType:s,resources:r,targetStyleguideId:o}=E(e);let d;i.default.getBarrel({bid:o}).densityScale||({densityScale:d}=i.default.getBarrel({bid:t})),c.default.dispatcher.dispatch({type:n.default.MOVE_RESOURCES_REQUEST,bid:t,barrelType:a,densityScale:d,targetStyleguideId:o,resourceType:s,resources:r,syncWithApi:!0})},moveResourcesSuccess(e){const{bid:t,barrelType:a,resourceType:i,resources:s,targetStyleguideId:r}=E(e);c.default.dispatcher.dispatch({type:n.default.MOVE_RESOURCES_SUCCESS,bid:t,barrelType:a,resourceType:i,resources:s,targetStyleguideId:r})},moveResourcesFail(){c.default.dispatcher.dispatch({type:n.default.MOVE_RESOURCES_FAIL})},attachJiraIssue(e){const{bid:t,jira:a}=E(e);c.default.dispatcher.dispatch({type:n.default.ATTACH_JIRA_ISSUE,bid:t,jira:a})},removeJiraIssueAttachment(e){const{bid:t,aid:a}=E(e);c.default.dispatcher.dispatch({type:n.default.REMOVE_JIRA_ISSUE_ATTACHMENT,bid:t,aid:a})},updateConnectedComponents(e){const{bid:t,connectedComponents:a}=E(e);c.default.dispatcher.dispatch({type:n.default.UPDATE_CONNECTED_COMPONENTS,bid:t,connectedComponents:a})},deleteConnectedComponents(e){const{bid:t,barrelType:a,oldStorybookUrl:i,syncWithApi:s=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.DELETE_CONNECTED_COMPONENTS,bid:t,barrelType:a,oldStorybookUrl:i,syncWithApi:s})},createConnectedComponentItem(e){const{bid:t,barrelType:a,connectedComponentItem:s,syncWithApi:r=!1}=E(e),o=i.default.getBarrel({bid:t});let l=s;if(r){const{_id:e=(0,d.getRandomString)(h)}=s;l=Object.assign(Object.assign({},s),{_id:e})}c.default.dispatcher.dispatch({type:n.default.CREATE_CONNECTED_COMPONENT_ITEM,bid:t,barrelType:a,barrel:o,connectedComponentItem:l,syncWithApi:r})},updateConnectedComponentItem(e){const{bid:t,barrelType:a,itemId:i,payload:s,syncWithApi:r=!1}=E(e);c.default.dispatcher.dispatch({type:n.default.UPDATE_CONNECTED_COMPONENT_ITEM,bid:t,barrelType:a,itemId:i,payload:s,syncWithApi:r})},deleteConnectedComponentItem(e){const{bid:t,barrelType:a,itemId:s,syncWithApi:r=!1}=E(e),o=i.default.getBarrel({bid:t});let d;r&&(d=o.connectedComponents.find((({_id:e})=>e===s))),c.default.dispatcher.dispatch({type:n.default.DELETE_CONNECTED_COMPONENT_ITEM,bid:t,barrelType:a,barrel:o,itemId:s,oldConnectedComponentItem:d,syncWithApi:r})},loadVisibleComponents(e){const{bid:t,barrelType:a,componentIds:i,isRestrictedView:s}=E(e);c.default.dispatcher.dispatch({type:n.default.LOAD_VISIBLE_COMPONENTS,bid:t,barrelType:a,componentIds:i,isRestrictedView:s})},hideFlowNewBadge(){c.default.dispatcher.dispatch({type:n.default.HIDE_FLOW_NEW_BADGE})},markStageModeNewBadgeMenuAsSeen(){c.default.dispatcher.dispatch({type:n.default.MARK_STAGE_MODE_NEW_BADGE_MENU_AS_SEEN})},markFlowsNewBadgeMenuAsSeen(){c.default.dispatcher.dispatch({type:n.default.MARK_FLOWS_NEW_BADGE_MENU_AS_SEEN})},setSelectedComponents(e){c.default.dispatcher.dispatch({type:n.default.SET_SELECTED_COMPONENTS,selectedComponents:e})},clearSelectedComponents(){c.default.dispatcher.dispatch({type:n.default.CLEAR_COMPONENT_SELECTION})}},T=O},,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(264),i=a(351),s=a(737),r=a(106),o=a(397),d=a(1061);function l(e={}){var t,a;const i=null!==(t=e.bid)&&void 0!==t?t:n.default.BarrelStore.getState().barrelId,s=null!==(a=e.barrelType)&&void 0!==a?a:n.default.BarrelStore.getState().barrelType;return Object.assign(Object.assign({},e),{bid:i,barrelType:s})}const c={updateState(e){n.default.dispatcher.dispatch({type:i.default.UPDATE_STATE,update:e})},changeLeftSidebarWidth(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_LEFT_SIDEBAR_WIDTH,leftSidebarWidth:e})},changeRightSidebarWidth(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_RIGHT_SIDEBAR_WIDTH,rightSidebarWidth:e})},changeSortType(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_SORT_TYPE,sortType:e})},changeComponentFilterValue(e){n.default.dispatcher.dispatch({type:i.default.CHANGE_COMPONENT_FILTER_VALUE,filterValue:e})},changeSelectedNavigatorId({selectedStyleguideSection:e,selectedNavigatorId:t,highlightScrolledSection:a}){n.default.dispatcher.dispatch({type:i.default.CHANGE_SELECTED_NAVIGATOR_ID,selectedStyleguideSection:e,selectedNavigatorId:t,highlightScrolledSection:a})},expandSections(e){n.default.dispatcher.dispatch({type:i.default.EXPAND_SECTIONS,seids:e})},collapseSections(e){n.default.dispatcher.dispatch({type:i.default.COLLAPSE_SECTIONS,seids:e})},collapseAllSections(){const e=d.default.getExpandedSectionIds();e.length&&n.default.dispatcher.dispatch({type:i.default.COLLAPSE_ALL_SECTIONS,seids:e})},highlightColors(e){n.default.dispatcher.dispatch({type:i.default.HIGHLIGHT_COLORS,cids:e})},unhighlightColor({cid:e}){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_COLOR,cid:e})},highlightTextStyles(e){n.default.dispatcher.dispatch({type:i.default.HIGHLIGHT_TEXT_STYLES,tsids:e})},unhighlightTextStyle({tsid:e}){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_TEXT_STYLE,tsid:e})},highlightSpacingTokens(e){n.default.dispatcher.dispatch({type:i.default.HIGHLIGHT_SPACING_TOKENS,sptids:e})},unhighlightSpacingToken(e){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_SPACING_TOKEN,sptid:e})},sectionScrolled(){n.default.dispatcher.dispatch({type:i.default.SECTION_SCROLLED})},changeSelection({selectionComponentId:e,selection:t,collapsedSections:a,updateCollapsedSections:r}){const{selectionComponentId:d}=n.default.StyleguideStore.getState();if(e&&e!==d&&e!==t._id){const t=s.default.getStyleguidesData({barrelStore:n.default.BarrelStore,styleguidesDataStore:n.default.StyleguidesDataStore,projectsDataStore:n.default.ProjectsDataStore}),{component:a}=(0,o.findComponentById)(t,e)||{};if(!a)return;const{latestVersion:{snapshot:{assets:r=[]}}}=a;if(r.find((e=>"snapshot"===e.layerId)))return void n.default.dispatcher.dispatch({type:i.default.CHANGE_SELECTION,selectionComponentId:e,selection:a})}n.default.dispatcher.dispatch({type:i.default.CHANGE_SELECTION,selectionComponentId:e,selection:t,collapsedSections:a,updateCollapsedSections:r})},hideSuggestedColors({barrelId:e,barrelType:t,colors:a=[],syncWithApi:s=!1}){n.default.dispatcher.dispatch({type:i.default.HIDE_SUGGESTED_COLORS,barrelId:e,barrelType:t,colors:a,syncWithApi:s})},hideSuggestedTextStyles({barrelId:e,barrelType:t,textStyles:a=[],syncWithApi:s=!1}){n.default.dispatcher.dispatch({type:i.default.HIDE_SUGGESTED_TEXT_STYLES,barrelId:e,barrelType:t,textStyles:a,syncWithApi:s})},openMoveResourcesPopup({resources:e,resourceType:t,targetNode:a}){n.default.dispatcher.dispatch({type:i.default.OPEN_MOVE_RESOURCES_POPUP,resources:e,resourceType:t,targetNode:a})},closeMoveResourcesPopup(){n.default.dispatcher.dispatch({type:i.default.CLOSE_MOVE_RESOURCES_POPUP})},selectMoveResourcesTargetStyleguide({targetStyleguide:e}){n.default.dispatcher.dispatch({type:i.default.SELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE,targetStyleguide:e})},deselectMoveResourcesTargetStyleguide(){n.default.dispatcher.dispatch({type:i.default.DESELECT_MOVE_RESOURCES_TARGET_STYLEGUIDE})},convertSectionToVariantSection(e){const{bid:t,barrelType:a,csid:s,syncWithApi:r=!1}=l(e);n.default.dispatcher.dispatch({type:i.default.CONVERT_SECTION_TO_VARIANT_SECTION,bid:t,barrelType:a,csid:s,syncWithApi:r})},convertVariantSectionToSection(e){const{bid:t,barrelType:a,csid:s,syncWithApi:r=!1}=l(e);n.default.dispatcher.dispatch({type:i.default.CONVERT_VARIANT_SECTION_TO_SECTION,bid:t,barrelType:a,csid:s,syncWithApi:r})},createComponentVariantProperty(e){const{bid:t,barrelType:a,csid:s,componentVariantProperty:o={},syncWithApi:d=!1}=l(e);let c=o;if(d){const{_id:e=`newVariant${(0,r.getRandomString)()}`,name:t="",values:a=[]}=o;c={_id:e,name:t,values:a}}n.default.dispatcher.dispatch({type:i.default.CREATE_COMPONENT_VARIANT_PROPERTY,bid:t,barrelType:a,csid:s,componentVariantProperty:c,syncWithApi:d})},addComponentVariantProperty(e){const{bid:t,barrelType:a,csid:s,componentVariantProperty:r,syncWithApi:o=!1}=l(e);n.default.dispatcher.dispatch({type:i.default.ADD_COMPONENT_VARIANT_PROPERTY,bid:t,barrelType:a,csid:s,componentVariantProperty:r,syncWithApi:o})},updateComponentVariantProperty(e){const{bid:t,barrelType:a,csid:s,vpid:r,data:o}=l(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_COMPONENT_VARIANT_PROPERTY,bid:t,barrelType:a,csid:s,vpid:r,data:o})},updateComponentVariantPropertyName(e){const{bid:t,barrelType:a,csid:r,vpid:o,name:d,syncWithApi:c=!1}=l(e);let u;if(c){const e=s.default.getBarrel({bid:t}).findComponentSection([r]);({name:u}=e.variant.properties.find((({_id:e})=>e===o)))}n.default.dispatcher.dispatch({type:i.default.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME,bid:t,barrelType:a,csid:r,vpid:o,name:d,oldName:u,syncWithApi:c})},updateComponentVariantPropertyValues(e){const{bid:t,barrelType:a,csid:r,vpid:o,values:d,syncWithApi:c=!1}=l(e);let u;if(c){const e=s.default.getBarrel({bid:t}).findComponentSection([r]);({values:u}=e.variant.properties.find((({_id:e})=>e===o)))}n.default.dispatcher.dispatch({type:i.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES,bid:t,barrelType:a,csid:r,vpid:o,values:d,oldValues:u,syncWithApi:c})},updateComponentVariantPropertiesOrder(e){const{bid:t,barrelType:a,csid:r,properties:o,syncWithApi:d=!1}=l(e);let c;if(d){const e=s.default.getBarrel({bid:t}).findComponentSection([r]);c=o.map((({_id:t})=>{const a=e.variant.properties.findIndex((e=>e._id===t));return{_id:t,to:a}}))}n.default.dispatcher.dispatch({type:i.default.UPDATE_COMPONENT_VARIANT_PROPERTIES_ORDER,bid:t,barrelType:a,csid:r,properties:o,oldProperties:c,syncWithApi:d})},updateComponentVariantPropertyValue(e){const{bid:t,barrelType:a,csid:s,vpid:r,coid:o,value:d,syncWithApi:c=!1}=l(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUE,bid:t,barrelType:a,csid:s,vpid:r,coid:o,value:d,syncWithApi:c})},setComponentVariantData(e){const{bid:t,barrelType:a,csid:s,name:r,sectionVariant:o,components:d,userConvertedSectionIntoVariant:c=!1}=l(e);n.default.dispatcher.dispatch({type:i.default.SET_COMPONENT_VARIANT_DATA,bid:t,barrelType:a,csid:s,name:r,sectionVariant:o,components:d,userConvertedSectionIntoVariant:c})},removeComponentVariantProperty(e){const{bid:t,barrelType:a,csid:r,vpid:o,syncWithApi:d=!1}=l(e);let c;if(d){c=s.default.getBarrel({bid:t}).findComponentSection([r]).variant.properties.find((({_id:e})=>e===o))}n.default.dispatcher.dispatch({type:i.default.REMOVE_COMPONENT_VARIANT_PROPERTY,bid:t,barrelType:a,csid:r,vpid:o,removedComponentVariantProperty:c,syncWithApi:d})},removeComponentVariantData(e){const{bid:t,barrelType:a,csid:s}=l(e);n.default.dispatcher.dispatch({type:i.default.REMOVE_COMPONENT_VARIANT_DATA,bid:t,barrelType:a,csid:s})},createComponentSectionVariantGroups(e){const{bid:t,barrelType:a,csid:s,vpid:r}=l(e);n.default.dispatcher.dispatch({type:i.default.CREATE_COMPONENT_SECTION_VARIANT_GROUPS,bid:t,barrelType:a,csid:s,vpid:r,syncWithApi:!0})},groupComponentsByVariantProperty(e){const{bid:t,barrelType:a,csid:s,components:r,componentSections:o}=l(e);n.default.dispatcher.dispatch({type:i.default.GROUP_COMPONENTS_BY_VARIANT_PROPERTY,bid:t,barrelType:a,csid:s,components:r,componentSections:o})},hideComponentVariantsOnboardingDialog(){n.default.dispatcher.dispatch({type:i.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_DIALOG})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(737),i=a(264);function s(){const e=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore}),t=[];return e.forEach((({componentSections:e})=>{e.forEach((e=>{"default"!==e.name&&t.push(e._id)}))})),t}const r={getCollapsableSectionIds:s,getCollapsedSectionIds:function(){const{collapsedSections:e}=i.default.StyleguideStore.getState();return s().filter((t=>e[t]))},getExpandedSectionIds:function(){const{collapsedSections:e}=i.default.StyleguideStore.getState();return s().filter((t=>!e[t]))}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(325),i=a(264),s=a(738);const r={getProjectsSuccess({projects:e,oid:t}){i.default.dispatcher.dispatch({type:n.default.GET_PROJECTS_SUCCESS,projects:e,oid:t})},requestProject(e){i.default.dispatcher.dispatch({type:n.default.REQUEST_PROJECT,pid:e})},getProjectRequest(){i.default.dispatcher.dispatch({type:n.default.GET_PROJECT_REQUESTED})},getProjectSuccess({project:e}){const{userId:t}=i.default.UserStore.getState();i.default.dispatcher.dispatch({type:n.default.GET_PROJECT_SUCCESS,project:e,userId:t})},getProjectFailed(e){i.default.dispatcher.dispatch({type:n.default.GET_PROJECT_FAILED,error:e})},createProjectRequest({oid:e,platform:t,oseid:a,onLimitError:s}){i.default.dispatcher.dispatch({type:n.default.CREATE_PROJECT_REQUEST,oid:e,platform:t,oseid:a,syncWithApi:!0,onLimitError:s})},createProjectFinalize(){i.default.dispatcher.dispatch({type:n.default.CREATE_PROJECT_FINALIZE})},updateProject({pid:e,data:t}){i.default.dispatcher.dispatch({type:n.default.UPDATE_PROJECT,pid:e,data:t})},initTransferOwnership({pid:e,fromUserId:t,targetId:a,toOrganization:s,oid:r,canChangePlanAtTarget:o}){i.default.dispatcher.dispatch({type:n.default.INIT_TRANSFER_OWNERSHIP,pid:e,fromUserId:t,targetId:a,toOrganization:s,oid:r,canChangePlanAtTarget:o,syncWithApi:!0})},transferOwnership({bid:e,fromUserId:t,targetId:a,toOrganization:r,oid:o,users:d}){const l=s.default.findProjectOrganizationSectionId(e);i.default.dispatcher.dispatch({type:n.default.TRANSFER_OWNERSHIP,bid:e,fromUserId:t,targetId:a,toOrganization:r,oid:o,users:d,oseid:l})},inviteUser({container:e,pid:t,users:a,oid:s}){i.default.dispatcher.dispatch({type:n.default.INVITE_USER,container:e,pid:t,users:a,oid:s})},createSampleProjectRequest(){i.default.dispatcher.dispatch({type:n.default.CREATE_SAMPLE_PROJECT_REQUEST,syncWithApi:!0})},createSampleProjectFinalize(){i.default.dispatcher.dispatch({type:n.default.CREATE_SAMPLE_PROJECT_FINALIZE})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(369),i=a(264);const s={init(){i.default.dispatcher.dispatch({type:n.default.INIT})},load(e,t){i.default.dispatcher.dispatch({type:n.default.LOAD,inid:e,events:t,barrelType:i.default.BarrelStore.getState().barrelType})},open(e,t){i.default.dispatcher.dispatch({type:n.default.OPEN,inid:e,channelName:t})},close(){i.default.dispatcher.dispatch({type:n.default.CLOSE})},updateEventGroup(e,t){i.default.dispatcher.dispatch({type:n.default.UPDATE_EVENT_GROUP,eventGroup:e,checked:t})},eventGroupUpdated(e,t){i.default.dispatcher.dispatch({type:n.default.EVENT_GROUP_UPDATED,inid:e,eventGroup:t})},eventGroupUpdateFailed(e,t){i.default.dispatcher.dispatch({type:n.default.EVENT_GROUP_UPDATE_FAILED,inid:e,eventGroup:t})},addIntegrationEvent({bid:e,intype:t,inid:a,event:s}){const{barrelId:r}=i.default.BarrelStore.getState();"slacks"===t&&e===r&&i.default.dispatcher.dispatch({type:n.default.EVENT_UPDATED,inid:a,event:s,enabled:!0})},removeIntegrationEvent({bid:e,intype:t,inid:a,event:s}){const{barrelId:r}=i.default.BarrelStore.getState();"slacks"===t&&e===r&&i.default.dispatcher.dispatch({type:n.default.EVENT_UPDATED,inid:a,event:s,enabled:!1})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(380),i=a(264);const s={getTeamsIntegration(e,t){i.default.dispatcher.dispatch({type:n.default.GET_TEAMS_INTEGRATION,barrelType:e,barrelId:t})},setTeamsIntegration(e){i.default.dispatcher.dispatch({type:n.default.SET_TEAMS_INTEGRATION,channels:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(737),i=a(264),s=a(395);const r={setStories(e){i.default.dispatcher.dispatch({type:s.default.SET_STORIES,stories:e})},updateUrl(e){i.default.dispatcher.dispatch({type:s.default.UPDATE_URL,url:e})},updateStory(e,t){const a=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore});i.default.dispatcher.dispatch({type:s.default.UPDATE_STORY,storyId:e,styleguidesData:a,payload:t})},deleteStory(e){i.default.dispatcher.dispatch({type:s.default.DELETE_STORY,storyId:e})},updateSelectedStoryPath(e){i.default.dispatcher.dispatch({type:s.default.UPDATE_SELECTED_STORY_PATH,selectedStoryPath:e})},addStoryConnectedComponent(e,t){const a=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore});i.default.dispatcher.dispatch({type:s.default.ADD_STORY_CONNECTED_COMPONENT,storyPath:e,styleguidesData:a,connectedComponent:t})},removeStoryConnectedComponent(e,t){const a=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore});i.default.dispatcher.dispatch({type:s.default.REMOVE_STORY_CONNECTED_COMPONENT,storyPath:e,styleguidesData:a,connectedComponent:t})},updateForUpdateConnectedComponents(e){const t=n.default.getBarrel();if(e!==(null==t?void 0:t._id))return;const a=n.default.getStyleguidesData({barrelStore:i.default.BarrelStore,styleguidesDataStore:i.default.StyleguidesDataStore,projectsDataStore:i.default.ProjectsDataStore});i.default.dispatcher.dispatch({type:s.default.UPDATE_FOR_UPDATE_CONNECTED_COMPONENTS,bid:e,styleguidesData:a})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(357),i=a(264);const s={open(e,t){const{selectedLayer:a}=i.default.ScreenStore.getState();i.default.dispatcher.dispatch({type:n.default.OPEN,coid:e,sourceLayerId:a&&a._id,variantPopupSource:t})},close(){i.default.dispatcher.dispatch({type:n.default.CLOSE})},selectLayer(e){const{layer:t,componentId:a,screenId:s}=e;i.default.dispatcher.dispatch({type:n.default.SELECT_LAYER,layer:t,componentId:a,screenId:s})},enterLayer(e){i.default.dispatcher.dispatch({type:n.default.ENTER_LAYER,layer:e})},leaveLayer(){i.default.dispatcher.dispatch({type:n.default.LEAVE_LAYER})},deselectLayer(){i.default.dispatcher.dispatch({type:n.default.DESELECT_LAYER})},changeVariant({coid:e,variantChangeValueSource:t,isState:a}){i.default.dispatcher.dispatch({type:n.default.CHANGE_VARIANT,coid:e,variantChangeValueSource:t,isState:a})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(392),i=a(264);const s={requestEmojis(e){i.default.dispatcher.dispatch({type:n.default.RequestEmojis,pid:e})},addEmojis(e,t){i.default.dispatcher.dispatch({type:n.default.AddEmojis,pid:e,response:t})},emojisError(e){i.default.dispatcher.dispatch({type:n.default.EmojisError,pid:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var n=a(264),i=a(285),s=a(104),r=a(737),o=a(789),d=a(798),l=a(1069),c=a(416),u=a(106),p=a(337),f=a(1054),S=a(185),h=a(359),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function g(e={}){if(!e.pid){const{barrelId:t}=n.default.BarrelStore.getState();t&&(e.pid=t)}if(!e.flid){const{currentFlowId:t}=n.default.FlowStore.getState();t&&(e.flid=t)}if(!e.did){const t=n.default.FlowStore.getState().dotId;t&&(e.did=t)}return e}const O={loadFlow(e){const{pid:t,flow:a,complete:s}=g(e);n.default.dispatcher.dispatch({type:i.default.LOAD_FLOW,pid:t,flow:a,complete:s})},loadFlows(e){const{pid:t,flows:a}=g(e);n.default.dispatcher.dispatch({type:i.default.LOAD_FLOWS,pid:t,flows:a})},setCurrentFlow(e){const{pid:t,flid:a}=g(e);n.default.dispatcher.dispatch({type:i.default.SET_CURRENT_FLOW,pid:t,flid:a})},createFlowRequest(e){const{pid:t,nodes:a}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_FLOW_REQUEST,pid:t,nodes:a})},addTextLabelNode(e){const{pid:t,flid:a,node:s,syncWithApi:r=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_TEXT_LABEL_NODE,pid:t,flid:a,node:s,syncWithApi:r})},addShapeNode(e){const{pid:t,flid:a,node:s,syncWithApi:r=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_SHAPE_NODE,pid:t,flid:a,node:s,syncWithApi:r})},addNodesToFlowRequest(e){const{pid:t,flid:a,nodes:s,from:r,undoAction:o=l.default.Skip}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_NODES_TO_FLOW_REQUEST,pid:t,flid:a,nodes:s,from:r,undoAction:o,syncWithApi:!0})},addNodesToFlowSuccess(e){const{pid:t,flid:a,nodes:s,connectors:r,from:o,undoAction:d=l.default.Skip,nodeIdMap:c,connectorIdMap:u}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_NODES_TO_FLOW_SUCCESS,pid:t,flid:a,nodes:s,connectors:r,from:o,undoAction:d,nodeIdMap:c,connectorIdMap:u})},deleteFlowNodes(e){var t;const{pid:a,flid:s,nodeIds:r,screenCount:o,labelCount:c,shapeCount:u,undoAction:p=l.default.Skip,syncWithApi:f=!1}=g(e),S=d.default.getFlow(a,s);if(!S)return;const h=S.nodes.filter((e=>r.includes(e._id))),E=null===(t=S.connectors)||void 0===t?void 0:t.filter((({start:e,end:t})=>r.includes(e.node)||r.includes(t.node)));n.default.dispatcher.dispatch({type:i.default.DELETE_FLOW_NODES,pid:a,flid:s,nodeIds:r,deletedNodes:h,deletedConnectors:E,screenCount:o,labelCount:c,shapeCount:u,undoAction:p,syncWithApi:f})},createConnector(e){const{pid:t,flid:a,connector:s,undoAction:r=l.default.Skip,syncWithApi:o=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_CONNECTOR,pid:t,flid:a,connector:s,undoAction:r,syncWithApi:o})},createConnectors(e){const{pid:t,flid:a,connectors:s,connectorIdMap:r}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_CONNECTORS,pid:t,flid:a,connectors:s,connectorIdMap:r})},updateConnector(e){const{pid:t,flid:a,conid:s,connector:r}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR,pid:t,flid:a,conid:s,connector:r})},updateConnectorLineType(e){var t,a;const{pid:s,flid:r,conid:o,lineType:c,undoAction:u=l.default.Skip,syncWithApi:p=!1}=g(e);let f;if(p){const e=d.default.getFlow(s,r);({type:f}=null!==(a=null===(t=e.connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o)))&&void 0!==a?a:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LINE_TYPE,pid:s,flid:r,conid:o,lineType:c,oldLineType:f,undoAction:u,syncWithApi:p})},updateConnectorEndStyle(e){var t;const{pid:a,flid:s,conid:r,endStyle:o,undoAction:c=l.default.Skip,syncWithApi:u=!1}=g(e);let p;if(u){const e=null===(t=d.default.getFlow(a,s).connectors)||void 0===t?void 0:t.find((({_id:e})=>e===r));e&&({end:{style:p}}=e)}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_END_STYLE,pid:a,flid:s,conid:r,endStyle:o,oldEndStyle:p,undoAction:c,syncWithApi:u})},updateConnectorColor(e){var t,a;const{pid:s,flid:r,conid:o,color:c,undoAction:u=l.default.Skip,syncWithApi:p=!1}=g(e);let f;if(p){const e=d.default.getFlow(s,r);({color:f}=null!==(a=null===(t=e.connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o)))&&void 0!==a?a:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_COLOR,pid:s,flid:r,conid:o,color:c,oldColor:f,undoAction:u,syncWithApi:p})},updateConnectorPoints(e){var t,a;const{pid:s,flid:r,conid:o,start:c,end:u,undoAction:p=l.default.Skip,syncWithApi:f=!1}=g(e);let S,h;if(f){const e=d.default.getFlow(s,r);({start:S,end:h}=null!==(a=null===(t=e.connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o)))&&void 0!==a?a:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_POINTS,pid:s,flid:r,conid:o,start:c,end:u,oldStart:S,oldEnd:h,undoAction:p,syncWithApi:f})},updateConnectorLineTrajectory(e){var t,a;const{pid:s,flid:r,conid:o,points:c,undoAction:u=l.default.Skip,syncWithApi:p=!1}=g(e);let f;if(p){const e=d.default.getFlow(s,r);({lineTrajectory:f}=null!==(a=null===(t=e.connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o)))&&void 0!==a?a:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LINE_TRAJECTORY,pid:s,flid:r,conid:o,points:c,oldPoints:f,undoAction:u,syncWithApi:p})},addConnectorLabel(e){const{pid:t,flid:a,conid:s,label:r,undoAction:o=l.default.Skip,syncWithApi:d=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_CONNECTOR_LABEL,pid:t,flid:a,conid:s,label:r,undoAction:o,syncWithApi:d})},updateConnectorLabel(e){const{pid:t,flid:a,conid:s,label:r}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LABEL,pid:t,flid:a,conid:s,label:r})},updateConnectorLabelText(e){var t,a;const{pid:s,flid:r,conid:o,text:c,undoAction:u=l.default.Skip,syncWithApi:p=!1}=g(e);let f;if(p){const e=null===(t=d.default.getFlow(s,r).connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o));f=null===(a=null==e?void 0:e.label)||void 0===a?void 0:a.text}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LABEL_TEXT,pid:s,flid:r,conid:o,text:c,oldText:f,undoAction:u,syncWithApi:p})},updateConnectorLabelWidth(e){var t,a,s;const{pid:r,flid:o,conid:c,width:u,undoAction:p=l.default.Skip,syncWithApi:f=!1}=g(e);let S;if(f){const e=null===(t=d.default.getFlow(r,o).connectors)||void 0===t?void 0:t.find((({_id:e})=>e===c));S=null!==(s=null===(a=null==e?void 0:e.label)||void 0===a?void 0:a.width)&&void 0!==s?s:null}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LABEL_WIDTH,pid:r,flid:o,conid:c,width:u,oldWidth:S,undoAction:p,syncWithApi:f})},updateConnectorLabelPosition(e){var t,a;const{pid:s,flid:r,conid:o,position:c,undoAction:u=l.default.Skip,syncWithApi:p=!1}=g(e);let f;if(p){const e=null===(t=d.default.getFlow(s,r).connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o));f=null===(a=null==e?void 0:e.label)||void 0===a?void 0:a.position}n.default.dispatcher.dispatch({type:i.default.UPDATE_CONNECTOR_LABEL_POSITION,pid:s,flid:r,conid:o,position:c,oldPosition:f,undoAction:u,syncWithApi:p})},deleteConnectorLabel(e){var t,a;const{pid:s,flid:r,conid:o,undoAction:c=l.default.Skip,syncWithApi:u=!1}=g(e);let p;if(u){const e=d.default.getFlow(s,r);({label:p}=null!==(a=null===(t=e.connectors)||void 0===t?void 0:t.find((({_id:e})=>e===o)))&&void 0!==a?a:{})}n.default.dispatcher.dispatch({type:i.default.DELETE_CONNECTOR_LABEL,pid:s,flid:r,conid:o,deletedLabel:p,undoAction:c,syncWithApi:u})},deleteConnectors(e){var t;const{pid:a,flid:s,connectorIds:r,undoAction:o=l.default.Skip,syncWithApi:c=!1}=g(e);let u;if(c){u=null===(t=d.default.getFlow(a,s).connectors)||void 0===t?void 0:t.filter((({_id:e})=>r.includes(e)))}n.default.dispatcher.dispatch({type:i.default.DELETE_CONNECTORS,pid:a,flid:s,connectorIds:r,deletedConnectors:u,undoAction:o,syncWithApi:c})},updateFlowNode(e){const{pid:t,flid:a,noid:s,node:r}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW_NODE,pid:t,flid:a,noid:s,node:r})},updateVariantGroupNode(e){var t;const{pid:a,flid:s,noid:r,defaultVariant:o,undoAction:c=l.default.Skip,syncWithApi:u=!1}=g(e);let p,f;if(u){const e=d.default.getFlow(a,s);({defaultVariant:p}=e.nodes.find((({_id:e})=>e===r))),f=null===(t=e.connectors)||void 0===t?void 0:t.filter((({start:e,end:t})=>r===e.node||r===t.node))}n.default.dispatcher.dispatch({type:i.default.UPDATE_VARIANT_GROUP_NODE,pid:a,flid:s,noid:r,defaultVariant:o,oldDefaultVariant:p,deletedConnectors:f,undoAction:c,syncWithApi:u})},updateNodeText(e){const{pid:t,flid:a,noid:s,text:r,undoAction:o=l.default.Skip,syncWithApi:c=!1}=g(e);let u;if(c){const e=d.default.getFlow(t,a);({text:u}=e.nodes.find((({_id:e})=>e===s)))}n.default.dispatcher.dispatch({type:i.default.UPDATE_NODE_TEXT,pid:t,flid:a,noid:s,text:r,oldText:u,undoAction:o,syncWithApi:c})},updateNodeWidth(e){const{pid:t,flid:a,noid:s,width:r,undoAction:o=l.default.Skip,syncWithApi:c=!1}=g(e);let u;if(c){const e=d.default.getFlow(t,a);({width:u=null}=e.nodes.find((({_id:e})=>e===s)))}n.default.dispatcher.dispatch({type:i.default.UPDATE_NODE_WIDTH,pid:t,flid:a,noid:s,width:r,oldWidth:u,undoAction:o,syncWithApi:c})},updateNodeHeight(e){const{pid:t,flid:a,noid:s,height:r,undoAction:o=l.default.Skip,syncWithApi:c=!1}=g(e);let u;if(c){const e=d.default.getFlow(t,a);({height:u=null}=e.nodes.find((({_id:e})=>e===s)))}n.default.dispatcher.dispatch({type:i.default.UPDATE_NODE_HEIGHT,pid:t,flid:a,noid:s,height:r,oldHeight:u,undoAction:o,syncWithApi:c})},updateFlowNodesPosition(e){const{pid:t,flid:a,nodes:s,connectors:r,undoAction:o=l.default.Skip,distributeAxis:c,syncWithApi:u=!1}=g(e);let p,f;if(u){const e=d.default.getFlow(t,a);p=e.nodes.filter((e=>s.some((({_id:t})=>t===e._id)))).map((({_id:e,position:t})=>({_id:e,position:t}))),f=(e.connectors||[]).filter((e=>s.some((({_id:t})=>t===e.start.node))||s.some((({_id:t})=>t===e.end.node)))).map((e=>({_id:e._id,lineTrajectory:e.lineTrajectory||[]})))}n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW_NODES_POSITION,pid:t,flid:a,nodes:s,oldNodes:p,connectors:r,oldConnectors:f,undoAction:o,distributeAxis:c,syncWithApi:u})},updateFlowNodeName(e){const{pid:t,flid:a,noid:s,nodeType:r,node:o}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW_NODE_NAME,pid:t,flid:a,noid:s,nodeType:r,node:o})},updateFlowNodeScreenVersion(e){const{pid:t,flid:a,noid:s,node:r}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW_NODE_SCREEN_VERSION,pid:t,flid:a,noid:s,node:r})},updateFlowNodeType(e){const{pid:t,flid:a,noid:s,node:r}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW_NODE_TYPE,pid:t,flid:a,noid:s,node:r})},updateLastConnectorEndStyleUsed(e){const{pid:t,style:a}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_LAST_CONNECTOR_END_STYLE_USED,pid:t,style:a})},updateLastConnectorColorUsed(e){const{pid:t,colorName:a}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_LAST_CONNECTOR_COLOR_USED,pid:t,colorName:a})},updateLastShapeColorUsed(e){const{pid:t,colorName:a}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_LAST_SHAPE_COLOR_USED,pid:t,colorName:a})},inputGroupName(e){const{fgid:t,name:a}=e;n.default.dispatcher.dispatch({type:i.default.INPUT_GROUP_NAME,fgid:t,name:a})},updateGroupName(e){const{pid:t,flid:a,fgid:s,name:r,syncWithApi:o=!1}=g(e);let l;if(o){const e=d.default.getFlow(t,a);({name:l}=e.groups.find((e=>e._id===s))||{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_GROUP_NAME,pid:t,flid:a,fgid:s,name:r,oldName:l,syncWithApi:o})},updateGroupColor(e){const{pid:t,flid:a,fgid:s,color:r,syncWithApi:o=!1}=g(e);let l;if(o){const e=d.default.getFlow(t,a);({color:l}=e.groups.find((e=>e._id===s))||{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_GROUP_COLOR,pid:t,flid:a,fgid:s,color:r,oldColor:l,syncWithApi:o})},removeNodesFromGroup(e){const{pid:t,flid:a,fgid:s,nodeIds:r,syncWithApi:o=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.REMOVE_NODES_FROM_GROUP,pid:t,flid:a,fgid:s,nodeIds:r,syncWithApi:o})},addNodesToGroup(e){const{pid:t,flid:a,fgid:s,nodeIds:r,fromGroup:o,syncWithApi:d=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.ADD_NODES_TO_GROUP,pid:t,flid:a,fgid:s,nodeIds:r,fromGroup:o,syncWithApi:d})},updateGroupOrder(e){const{pid:t,flid:a,fgids:s,index:r,oldIndex:o,syncWithApi:d=!1}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_GROUP_ORDER,pid:t,flid:a,fgids:s,index:r,oldIndex:o,syncWithApi:d})},deleteGroups(e){const{pid:t,flid:a,fgids:s,syncWithApi:r=!1}=g(e),o=d.default.getFlow(t,a);if(!o)return;const l=o.groups.filter((e=>s.includes(e._id)));n.default.dispatcher.dispatch({type:i.default.DELETE_GROUPS,pid:t,flid:a,fgids:s,deletedGroups:l,syncWithApi:r})},setSelectedNodes(e){n.default.dispatcher.dispatch({type:i.default.SET_SELECTED_NODES,nodeIds:e})},createGroupsStart(e){const{pid:t,flid:a,groups:s}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_GROUPS_START,pid:t,flid:a,groups:s})},createGroupsRequest(e){const{pid:t,flid:a,groups:s,currentGroupIds:r}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_GROUPS_REQUEST,pid:t,flid:a,groups:s,currentGroupIds:r})},createGroupsSuccess(e){const{pid:t,flid:a,createdGroupIds:s,currentGroupIds:r}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_GROUPS_SUCCESS,pid:t,flid:a,createdGroupIds:s,currentGroupIds:r})},centerGroup(e){n.default.dispatcher.dispatch({type:i.default.CENTER_GROUP,fgid:e})},setDimensions({width:e,height:t}){n.default.dispatcher.dispatch({type:i.default.SET_DIMENSIONS,width:e,height:t})},changePosition(e){const{flid:t,position:a}=g(e);n.default.dispatcher.dispatch({type:i.default.CHANGE_POSITION,flid:t,position:a})},changeZoomLevel(e){var t,a,s,r;const{flid:o,zoomLevel:d,zoomOrigin:l}=g(e),{width:c,height:u,positions:{[o]:p},zoomLevels:{[o]:f}}=n.default.FlowStore.getState(),S=null!==(t=null==l?void 0:l.x)&&void 0!==t?t:c/2,h=null!==(a=null==l?void 0:l.y)&&void 0!==a?a:u/2,E={x:S-(null!==(s=S-(null==p?void 0:p.x))&&void 0!==s?s:0)/f*d,y:h-(null!==(r=h-(null==p?void 0:p.y))&&void 0!==r?r:0)/f*d};n.default.dispatcher.dispatch({type:i.default.SET_ZOOM_LEVEL,flid:o,zoomLevel:d,position:E})},zoomIn(){var e;const{flid:t}=g(),{zoomLevels:{[t]:a}}=n.default.FlowStore.getState(),i=c.ZOOM_LEVELS[c.ZOOM_LEVELS.length-1],s=null!==(e=c.ZOOM_LEVELS.find((e=>e>a)))&&void 0!==e?e:i;this.changeZoomLevel({zoomLevel:s})},zoomOut(){var e;const{flid:t}=g(),{zoomLevels:{[t]:a}}=n.default.FlowStore.getState(),[i]=c.ZOOM_LEVELS,s=null!==(e=[...c.ZOOM_LEVELS].reverse().find((e=>e<a)))&&void 0!==e?e:i;this.changeZoomLevel({zoomLevel:s})},resetZoom(){this.changeZoomLevel({zoomLevel:c.ZOOM_LEVEL_DEFAULT})},exportAsPDF(){const{name:e}=r.default.getBarrel(),{fullName:t,email:a}=n.default.UserStore.getState();n.default.dispatcher.dispatch({type:i.default.EXPORT_AS_PDF,projectName:e,username:null!=t?t:a})},pdfExportFinished(){n.default.dispatcher.dispatch({type:i.default.PDF_EXPORT_FINISHED})},enableAddShapeMode(e,t=!1){const{pid:a}=g();n.default.dispatcher.dispatch({type:i.default.ENABLE_ADD_SHAPE_MODE,pid:a,addShapeMode:e,creatingFromEmptyView:t})},disableAddShapeMode(){n.default.dispatcher.dispatch({type:i.default.DISABLE_ADD_SHAPE_MODE})},disableCreatingFromEmptyView(){n.default.dispatcher.dispatch({type:i.default.DISABLE_CREATING_FROM_EMPTY_VIEW})},navigateToScreen(e){const{pid:t,sid:a,flid:r,inNewTab:d}=g(e),l=(0,s.urlResolve)("project-flow",{url:{pid:t,flid:r}});d||o.default.navigateToScreen(a),n.default.dispatcher.dispatch({type:i.default.NAVIGATE_TO_SCREEN,pid:t,sid:a,flowUrl:l,inNewTab:d})},createBoardStart(e){const{pid:t,name:a,flid:s}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_BOARD_START,pid:t,flid:s,name:a})},createBoardRequest(e){const{pid:t,flid:a,name:s}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_BOARD_REQUEST,pid:t,flid:a,name:s})},createBoardSuccess(e){const{pid:t,flow:a,currentFlowId:s}=g(e);n.default.dispatcher.dispatch({type:i.default.CREATE_BOARD_SUCCESS,pid:t,flow:a,currentFlowId:s})},deleteBoard(e){const{pid:t,flid:a,syncWithApi:s=!1}=g(e),{flows:{[t]:r}}=n.default.FlowStore.getState();r&&r[a]&&n.default.dispatcher.dispatch({type:i.default.DELETE_BOARD,pid:t,flid:a,deletedFlow:r[a],syncWithApi:s})},updateBoardName(e){const{pid:t,flid:a,name:s,syncWithApi:r=!1}=g(e);let o;r&&(o=d.default.getFlow(t,a).name),n.default.dispatcher.dispatch({type:i.default.UPDATE_BOARD_NAME,pid:t,flid:a,name:s,oldName:o,syncWithApi:r})},updateBoardOrder(e){const{pid:t,flows:a,index:s,oldIndex:r,syncWithApi:o=!1}=g(e),{flows:{[t]:d}}=n.default.FlowStore.getState();d&&n.default.dispatcher.dispatch({type:i.default.UPDATE_BOARD_ORDER,pid:t,flows:a,index:s,oldIndex:r,syncWithApi:o})},transferGroupsToAnotherFlow(e){var t,a;const{pid:s,flid:r,targetFlid:o,groups:l,syncWithApi:c=!1}=g(e),u=d.default.getFlow(s,r);if(!u)return;const p=(null===(t=u.groups)||void 0===t?void 0:t.filter((({_id:e})=>l.includes(e))))||[],f=p.flatMap((({nodes:e})=>e.map((e=>u.nodes.find((({_id:t})=>e===t)))))),S=f.map((({_id:e})=>e)),h=(null===(a=u.connectors)||void 0===a?void 0:a.filter((({start:e,end:t})=>S.includes(e.node)||S.includes(t.node))))||[];n.default.dispatcher.dispatch({type:i.default.TRANSFER_GROUPS_TO_ANOTHER_FLOW,pid:s,flid:r,targetFlid:o,groups:l,transferredNodes:f,transferredGroups:p,transferredConnectors:h,syncWithApi:c})},updateTransferredData(e){const{pid:t,flid:a,nodes:s,groups:r,connectors:o}=g(e);n.default.dispatcher.dispatch({type:i.default.UPDATE_TRANSFERRED_DATA,pid:t,flid:a,nodes:s,groups:r,connectors:o})},transferNodesToAnotherFlow(e){var t,a,s;const{pid:r,flid:o,targetFlid:l,nodes:c,syncWithApi:u=!1}=g(e),p=d.default.getFlow(r,o),f=d.default.getFlow(r,l);if(!p||!f)return;const S=(null===(t=p.nodes)||void 0===t?void 0:t.filter((({_id:e})=>c.includes(e))))||[],h=(null===(a=p.connectors)||void 0===a?void 0:a.filter((({start:e,end:t})=>c.includes(e.node)||c.includes(t.node))))||[],E=(null===(s=p.groups)||void 0===s?void 0:s.filter((({nodes:e})=>e.every((e=>c.includes(e))))))||[];n.default.dispatcher.dispatch({type:i.default.TRANSFER_NODES_TO_ANOTHER_FLOW,pid:r,flid:o,targetFlid:l,nodes:c,transferredNodes:S,transferredConnectors:h,transferredGroups:E,syncWithApi:u})},copyGroupLink(e){const{content:t,toastContainer:a,linkType:s}=e;n.default.dispatcher.dispatch({type:i.default.COPY_GROUP_LINK,content:t,toastContainer:a,linkType:s})},copyBoardLink(e){const{content:t,toastContainer:a,linkType:s}=e;n.default.dispatcher.dispatch({type:i.default.COPY_BOARD_LINK,content:t,toastContainer:a,linkType:s})},updateShapeColor(e){var t;const{pid:a,flid:s,noid:r,color:o,undoAction:c=l.default.Skip,syncWithApi:u=!1}=g(e);let p;if(u){const e=d.default.getFlow(a,s);({color:p}=null!==(t=e.nodes.find((({_id:e})=>e===r)))&&void 0!==t?t:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_SHAPE_COLOR,pid:a,flid:s,noid:r,color:o,oldColor:p,undoAction:c,syncWithApi:u})},updateShapeType(e){var t;const{pid:a,flid:s,noid:r,shapeType:o,undoAction:c=l.default.Skip,syncWithApi:u=!1}=g(e);let p;if(u){const e=d.default.getFlow(a,s);({shapeType:p}=null!==(t=e.nodes.find((({_id:e})=>e===r)))&&void 0!==t?t:{})}n.default.dispatcher.dispatch({type:i.default.UPDATE_SHAPE_TYPE,pid:a,flid:s,noid:r,shapeType:o,oldShapeType:p,undoAction:c,syncWithApi:u})},updateFlow({pid:e,flid:t,flow:a}){n.default.dispatcher.dispatch({type:i.default.UPDATE_FLOW,pid:e,flid:t,flow:a})},enableNoteMode(){n.default.dispatcher.dispatch({type:i.default.ENABLE_NOTE_MODE})},disableNoteMode(){n.default.dispatcher.dispatch({type:i.default.DISABLE_NOTE_MODE})},showNotes(){n.default.dispatcher.dispatch({type:i.default.SHOW_NOTES})},hideNotes(){n.default.dispatcher.dispatch({type:i.default.HIDE_NOTES})},createNote(e){const{pid:t,flid:a,x:s,y:r,clientX:o,clientY:l}=g(e),c=d.default.getDots(),{lastNoteColorUsed:S}=n.default.FlowStore.getState(),h={_id:`newDot${(0,u.getRandomString)()}`,name:(null==c?void 0:c.length)?String(parseInt(c[c.length-1].name,10)+1):"1",x:s,y:r,color:(0,p.getColorValueByName)(S),status:f.default.OPEN,comments:[],createdAt:Date.toString()};n.default.dispatcher.dispatch({type:i.default.CREATE_NOTE,pid:t,flid:a,dot:h,dotPosition:{x:s,y:r},clientPosition:{x:o,y:l}})},selectDot({dotId:e,commentId:t,position:a}){const{dotId:s}=n.default.DotsStore.getState();s!==e&&n.default.dispatcher.dispatch({type:i.default.SELECT_DOT,dotId:e,commentId:t,position:a})},updateDot(e){var t,a;const{pid:s,flid:r,did:o,dotData:l,syncWithApi:c=!1}=g(e);let u;if(c){let e;t=null!==(a=d.default.getDot({pid:s,flid:r,did:o}))&&void 0!==a?a:{},({_id:e}=t),u=E(t,["_id"])}n.default.dispatcher.dispatch({type:i.default.UPDATE_DOT,pid:s,flid:r,did:o,dotData:l,oldDotData:u,syncWithApi:c})},saveNote(e){const{pid:t,flid:a,did:s,note:r}=g(e);n.default.dispatcher.dispatch({type:i.default.SAVE_NOTE,pid:t,flid:a,did:s,note:r})},removeDot(e){const{pid:t,flid:a,did:s,note:r,syncWithApi:o=!1}=g(e);let l;o&&(l=d.default.getDot({pid:t,flid:a,did:s})),n.default.dispatcher.dispatch({type:i.default.REMOVE_DOT,pid:t,flid:a,did:s,note:r,removedDot:l,syncWithApi:o})},closeDotPopup(){n.default.dispatcher.dispatch({type:i.default.CLOSE_DOT_POPUP})},createComment(e){const{pid:t,flid:a,did:s,note:o,hasReaction:l,syncWithApi:c=!1,source:f="Flows"}=g(e),h=`newComment${(0,u.getRandomString)()}`,{user:{_id:E,email:O,username:T,fullName:m,avatar:_,emotar:b}}=r.default.findUser({bid:t}),C=Date.now(),A={_id:h,createdBy:{_id:E,email:O,username:T,fullName:m,emotar:b,avatar:_},note:o,createdAt:C,updatedAt:C};let y,I=!1,N=!1;if(c){const e=r.default.getBarrel({bid:t}),{comments:n}=d.default.getDot({pid:t,flid:a,did:s}),i=n.map((e=>{var t;return null===(t=e.createdBy)||void 0===t?void 0:t._id})).lastIndexOf(Zeplin.user._id)+1,l=n.slice(i);I=(0,S.isThereAnyMentionedUser)(e.users,o),y=l.some((e=>{var t;return(null===(t=e.createdBy)||void 0===t?void 0:t._id)!==Zeplin.user._id&&e.note.includes(`@${Zeplin.user.username}`)})),N=(0,p.hasImage)(o)}n.default.dispatcher.dispatch({type:i.default.CREATE_COMMENT,pid:t,flid:a,did:s,comment:A,hasReaction:l,toMention:y,hasMention:I,hasImage:N,syncWithApi:c,source:f})},addComment(e){const{pid:t,flid:a,uid:s,did:r,comment:o}=g(e);let d,l;s&&({userId:d,username:l}=n.default.UserStore.getState()),n.default.dispatcher.dispatch({type:i.default.ADD_COMMENT,pid:t,flid:a,did:r,uid:s,userId:d,username:l,comment:o})},updateComment(e){var t,a,s;const{pid:o,flid:l,uid:c,did:u,cmid:p,commentData:f,syncWithApi:S=!1}=g(e);let h,O,T,m;if(S){let e;t=null!==(a=d.default.getComment({pid:o,flid:l,did:u,cmid:p}))&&void 0!==a?a:{},({_id:e}=t),h=E(t,["_id"])}c&&(({userId:O,username:T}=n.default.UserStore.getState()),({user:m}=null!==(s=r.default.findUser({bid:o,uid:c}))&&void 0!==s?s:{})),n.default.dispatcher.dispatch({type:i.default.UPDATE_COMMENT,pid:o,flid:l,did:u,uid:c,author:m,userId:O,username:T,cmid:p,commentData:f,oldCommentData:h,syncWithApi:S})},removeComment(e){const{pid:t,flid:a,did:s,cmid:r,syncWithApi:o=!1}=g(e);let l;o&&(l=d.default.getComment({pid:t,flid:a,did:s,cmid:r})),n.default.dispatcher.dispatch({type:i.default.REMOVE_COMMENT,pid:t,flid:a,did:s,cmid:r,removedComment:l,syncWithApi:o})},addDot(e){const{pid:t,flid:a,uid:s,dot:o,source:d="Flows",syncWithApi:l=!1}=g(e);let c,u;s&&({userId:c,username:u}=n.default.UserStore.getState());let f=!1,h=!1;if(l){const e=r.default.getBarrel({bid:t}),[{note:a}]=o.comments;f=(0,S.isThereAnyMentionedUser)(e.users,a),h=(0,p.hasImage)(a)}n.default.dispatcher.dispatch({type:i.default.ADD_DOT,pid:t,flid:a,uid:s,userId:c,username:u,dot:o,hasMention:f,hasImage:h,source:d,syncWithApi:l})},unhighlightComment(e){n.default.dispatcher.dispatch({type:i.default.UNHIGHLIGHT_COMMENT,cmid:e})},setDots(e){const{pid:t,flid:a,dots:s}=g(e);s.forEach((e=>{var t;null!==(t=e.status)&&void 0!==t||(e.status=f.default.OPEN)}));let{statusFilter:r,colorFilter:o,dotId:d,highlightedDots:l}=n.default.DotsStore.getState();if(d){const e=s.find((({_id:e})=>e===d));e?[r,o]=[e.status,null]:d=null}else if(l.length>1){const e=s.some((e=>e.status===h.default.Open&&l.includes(e._id)));e&&r!==h.default.Open?[r,o]=[h.default.Open,null]:e||r===h.default.Resolved||([r,o]=[h.default.Resolved,null])}n.default.dispatcher.dispatch({type:i.default.SET_DOTS,pid:t,flid:a,dots:s,dotId:d,colorFilter:o,statusFilter:r})},changeDotFilter({status:e,color:t}){let{dotId:a}=n.default.DotsStore.getState();if(a){const n=d.default.getDot({did:a}),i=r.default.findUser();(0,p.checkFlowDotFilter)(n,e,t,i.user)||(a=null)}n.default.dispatcher.dispatch({type:i.default.CHANGE_DOT_FILTER,dotId:a,status:e,color:t})},openDot(e){const{pid:t,flid:a,dotId:s,commentId:r,position:o,stagePosition:d}=g(e),{dotId:l}=n.default.DotsStore.getState();l!==s&&n.default.dispatcher.dispatch({type:i.default.OPEN_DOT,pid:t,flid:a,dotId:s,commentId:r,position:o,stagePosition:d})},updateDotStatus(e){var t;const{pid:a,flid:s,did:r,status:o,statusFilter:l,syncWithApi:c=!1,source:u="Flow"}=g(e);let p;c&&({status:p}=null!==(t=d.default.getDot({pid:a,flid:s,did:r}))&&void 0!==t?t:{}),n.default.dispatcher.dispatch({type:i.default.UPDATE_DOT_STATUS,pid:a,flid:s,did:r,status:o,oldStatus:p,statusFilter:l,syncWithApi:c,source:u})},updateDotColor(e){const{pid:t,flid:a,did:s,color:r,syncWithApi:o=!1}=g(e);let l;if(o){const e=d.default.getDot({pid:t,flid:a,did:s});l=E(e.color,[])}n.default.dispatcher.dispatch({type:i.default.UPDATE_DOT_COLOR,pid:t,flid:a,did:s,color:r,oldColor:l,colorName:(0,p.getColorName)(r),syncWithApi:o})}}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.Add="add",e.Skip="skip",e.Drop="drop"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.HEADER="Header",e.LAYER_DETAIL="Layer detail",e.SHORTCUT="Shortcut",e.NOTE="Note"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";function n(e,{remove:t=!0}={}){if("apiData"in Zeplin&&e in Zeplin.apiData){const a=Zeplin.apiData[e];return t&&delete Zeplin.apiData[e],a}}a.r(t),a.d(t,{fetchEmbeddedData:()=>n})},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{loadSuggestedResourcesIfNeeded:()=>r});var n=a(120),i=a(264),s=a(576);function r(e,t){i.default.VersionImportsStore.getState().suggestedResourcesByBarrel[e]||n[t].getSuggestedResources(Zeplin.user._id,e).then((({colors:t,textStyles:a})=>{t?s.default.suggestedRemoteColorsFileReceived({bid:e,fileName:t}):s.default.suggestedRemoteColorsReceived({bid:e,colors:[]}),a?s.default.suggestedRemoteTextStylesFileReceived({bid:e,fileName:a}):s.default.suggestedRemoteTextStylesReceived({bid:e,textStyles:[]})}))}},,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{goToLastOrganizationWorkspace:()=>L,registerWorkspaceRouteHandlers:()=>j});a(75),a(652);var n=a(120),i=a(79),s=a(13),r=a(434),o=a(264),d=a(263),l=a(794),c=a(327),u=a(739),p=a(324),f=a(738),S=a(737),h=(a(1080),a(1082)),E=a(91),g=a(104),O=a(1074),T=a(262),m=a(7),_=a(123),b=a(1048),C=a(1083);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){const{focusedBarrels:t}=o.default.OrganizationStore.getState();return t&&t[e]?t[e]:n.getOrganizationMemberFocusedBarrels(e,Zeplin.user._id)}function P(e,t){const a=[(0,h.getOrganizations)(),(0,h.getOrganization)(e),(0,h.getOrganizationSections)(e,t),N(e),s.organizationPrefs.get(e,"dialogDismissStates"),(0,h.getStyleguides)(e)];return Promise.all(a).then((([t,a,{sections:n,partialProjects:i,archivedProjectIds:s,restrictedMemberProjectIds:r},o,d,l])=>{const c=o.map((({barrelType:e,barrel:t,barrelId:a,unpinned:n})=>({barrelType:e,barrelId:t?t._id:a,unpinned:n})));let u=o.filter((e=>e&&e.barrel&&"Project"===e.barrelType)).map((e=>e.barrel));return i&&(u=u.concat(i)),{oid:e,organization:y(y({},a),{},{sections:n}),focusedBarrels:c,dialogDismissParams:d,styleguides:l,projects:u,organizations:t,archivedProjectIds:s,restrictedMemberProjectIds:r}}))}const D={onChangeSelectedOrganization({oid:e}){const{selectedTab:t}=o.default.SpaceStore.getState(),a="user"===e?t:`workspace-${t}`,n=(0,g.urlResolve)(a,{url:{oid:e}});setTimeout((()=>{r.default.history.push(n)}),4),s.userPrefs.set("lastOrganization",e),(0,E.sendGAPageView)({title:"Space - Zeplin"})},onChangeTab({tab:e}){const{selectedOrganizationId:t}=o.default.SpaceStore.getState(),a="user"===t?e:`workspace-${e}`,n=(0,g.urlResolve)(a,{url:{oid:t}});setTimeout((()=>{r.default.history.push(n)}),4),mixpanel.master.track(`Opened ${t?"organization":"all"} ${e}`),(0,E.sendGAPageView)({title:"Space - Zeplin"})},onChangeFilterValue({filterValue:e}){const{selectedOrganizationId:t,selectedTab:a}=o.default.SpaceStore.getState(),n=new URLSearchParams(location.search);e?n.set("q",e):n.delete("q");const i=Object.fromEntries(n),s="user"===t?a:`workspace-${a}`;let r;r="user"===t?{query:i}:{url:{oid:t},query:i},setTimeout((()=>{history.replaceState(r,"Zeplin - Workspace",(0,g.urlResolve)(s,r))}),4)},onChangeProjectSelectedSortType({oid:e,sortType:t}){"user"===e?s.userPrefs.set("projectSortType",t):s.organizationPrefs.set(e,"projectSortType",t)},onSetStyleguidesTabVisited(){s.userPrefs.set("styleguidesTabVisited",!0)},onToggleSectionState({oid:e,oseids:t},{shouldCollapse:a}){s.organizationPrefs.get(e,"collapsedSections").then((n=>{t.forEach((e=>{n[e]=a})),s.organizationPrefs.set(e,"collapsedSections",n)}))},onPostponeOfferReminder({nextDate:e}){s.userPrefs.set("offerReminderNextDate",e)}},R={onGetOrganizations({organizations:e}){e&&e.forEach((e=>{(0,O.subscribeToOrganizationChannel)(e._id)}))},onAddOrganization({organization:e}){(0,O.subscribeToOrganizationChannel)(e._id),n.getOrganizationMemberProfile(e._id,Zeplin.user._id).then((t=>{u.default.addOrganizationProfile(t,e._id)})).catch(i.handleError)},resetSortTypeAndFilters(e){if(!e.syncWithApi)return;new URLSearchParams(location.search).get("q")&&D.onChangeFilterValue({filterValue:""}),s.organizationPrefs.get(e.oid,"projectSortType").then((t=>{t!==m.SortTypes.SECTIONS&&s.organizationPrefs.set(e.oid,"projectSortType",m.SortTypes.SECTIONS)}))}};const v=/^(?:\/workspace\/([\da-f]{24}))?\/(projects|styleguides)?$/i;async function L(){const e=new URL(location.href);if(v.test(e.pathname)){const[,t="user",a=m.WorkspaceTabs.PROJECTS]=e.pathname.match(v),n=await s.userPrefs.get("lastOrganization");if(!sessionStorage.getItem("accountCaptureInfo")&&n&&"user"!==n&&"user"===t){const t=Object.fromEntries(e.searchParams),i=(0,g.urlResolve)(`workspace-${a}`,{url:{oid:n},query:t});history.replaceState(null,null,i)}}}function j(){o.default.dispatcher.register((e=>{switch(e.type){case c.default.CHANGE_SELECTED_TAB:D.onChangeTab(e);break;case c.default.CHANGE_FILTER_VALUE:D.onChangeFilterValue(e);break;case c.default.CHANGE_PROJECT_SELECTED_SORT_TYPE:D.onChangeProjectSelectedSortType(e);break;case c.default.CHANGE_SELECTED_ORGANIZATION:D.onChangeSelectedOrganization(e);break;case c.default.SET_STYLEGUIDES_TAB_VISITED:D.onSetStyleguidesTabVisited();break;case c.default.EXPAND_SECTIONS:D.onToggleSectionState(e,{shouldCollapse:!1});break;case c.default.COLLAPSE_SECTIONS:D.onToggleSectionState(e,{shouldCollapse:!0});break;case c.default.POSTPONE_OFFER_REMINDER:D.onPostponeOfferReminder(e)}})),o.default.dispatcher.register((e=>{switch(e.type){case d.default.LOAD_WORKSPACE_DATA:R.onGetOrganizations(e);break;case p.default.ADD_ORGANIZATION:R.onAddOrganization(e);break;case p.default.ADD_PROJECT_SECTION:case p.default.UPDATE_PROJECT_ORDER:R.resetSortTypeAndFilters(e)}}))}r.default.route(v,(async function(e){(0,E.sendGAPageView)({title:"Space - Zeplin"}),(0,b.hideSubscriptionStatusBanners)();const{match:[t="user",a=m.WorkspaceTabs.PROJECTS],query:{q:[d=""]=[],pid:c=[],stid:u=[],oseid:[p]=[],seid:[S]=[p],newProject:O,newStyleguide:_}}=e,{filterValue:A,selectedTab:I,selectedOrganizationId:N}=o.default.SpaceStore.getState(),R=await s.userPrefs.get("workspaceLastFilteredAt"),v=R&&Date.now()-R<=9e5;let L=d;t===N&&I===a&&!d&&A&&v&&(L=A,D.onChangeFilterValue({filterValue:A}));const j=[...c,...u],{barrelId:U}=o.default.BarrelStore.getState();0===j.length&&U&&j.push(U);const{styleguidesTabVisited:w,pinnedBarrelOnce:k,offerReminderNextDate:M}=await s.userPrefs.getAll(),V="user"===t?await s.userPrefs.get("projectSortType"):await s.organizationPrefs.get(t,"projectSortType"),F="user"===t?{}:await s.organizationPrefs.get(t,"collapsedSections");let G;F[S]&&(F[S]=!1,s.organizationPrefs.set(t,"collapsedSections",F)),a===m.WorkspaceTabs.PROJECTS&&O?G=m.DialogTypes.CREATE_PROJECT:a===m.WorkspaceTabs.STYLEGUIDES&&_&&(G=m.DialogTypes.CREATE_STYLEGUIDE),l.default.updatePageState({selectedOrganizationId:t,selectedTab:a,filterValue:L,selectedWorkflowStatusFilter:"All",highlightedBarrels:j,scrollToHighlightedBarrel:!!j.length,highlightedSection:S,collapsedSections:F,selectedProjectSortType:S?m.SortTypes.SECTIONS:V,styleguidesTabVisited:w,pinnedBarrelOnce:k,visibleDialogType:G,offerReminderNextDate:M}),T.default.setPage("workspace");const B=await function(e,t,a){return("user"===e?h.fetchPersonalWorkspaceData:P)(e,a).catch((e=>{i.handleError(e,{dialogCallback(){r.default.history.replace((0,g.urlResolve)(t))}})}))}(t,a,S);let x={};"user"!==t&&(x={organization:y({},B.organization)});const{allProjectsLoaded:W}=o.default.OrganizationStore.getState();W[t]||T.default.loadWorkspaceData(y(y(y({},B),x),{},{workspaceMainDataLoading:!0})),requestIdleCallback((()=>{const e=[W[t]?(0,h.getProjects)(t):n.getProjects("user"===t?null:t)];"user"!==t&&e.push(function(e){const t=f.default.getOrganization(e);return t&&t.members?{_id:t._id,members:t.members}:n.getOrganizationMembersWithoutDetails(e)}(t)),Promise.all(e).then((async([e,a])=>{let s=e;a&&a.members&&(s=(0,C.getPopulatedOrganizationProjectsWithMembers)(a.members,e),x.organization=y(y({},x.organization),a));const r=await async function(e,t){const{organizationProfiles:a}=o.default.OrganizationStore.getState();if(e.every((({_id:e})=>a[e])))return a;const s=e.map((({_id:e})=>a[e]||n.getOrganizationMemberProfile(e,t)));try{return(await Promise.all(s)).reduce(((t,a,n)=>(t[e[n]._id]=a,t)),{})}catch(r){i.handleError(r)}}(B.organizations,Zeplin.user._id);T.default.loadWorkspaceData(y(y(y({},B),x),{},{organizationProfiles:r,projects:s,workspaceMainDataLoading:!1,allProjectsLoaded:{[t]:!0}}))}))}))})),r.default.addPrevention(/\/(project|styleguide)\/([\da-f]{24})/i,(function(e){const{page:t}=o.default.AppStore.getState();if("workspace"!==t)return!1;const{match:[a=_.default.PROJECT,n="user"],ev:i}=e;if("user"===n)return!1;if(i.target.closest(".markdown"))return!1;const{userId:s}=o.default.UserStore.getState();if(!S.default.getBarrel({bid:n}).users.some((({user:e})=>e._id===s)))return!0;if(a===_.default.PROJECT){const{selectedProjects:e}=o.default.ProjectSelectionStore.getState();return e.length>0}return!1}))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var n=a(120),i=a(79),s=a(76),r=a(6),o=a(123),d=a(1074),l=a(1062),c=a(325),u=a(264),p=a(1081),f=a(326),S=a(1055),h=a(263),E=a(7),g=a(5),O=a(185),T=a(340),m=a(104),_=a(434),b=a(652),C=a(404),A=a(737),y=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};const I=g.supports.webviews;const N={project:{create:n.createProject,get:n.getProject,inviteUser:n.inviteProjectUser,transferOwnership:n.transferProjectOwnership},styleguide:{create:n.createStyleguide,get:n.getStyleguide,inviteUser:n.inviteStyleguideUser,transferOwnership:n.transferStyleguideOwnership}},P={project:{transferOwnership:l.default.transferOwnership,createBarrelFinalize:l.default.createProjectFinalize},styleguide:{transferOwnership:p.default.transferOwnership,createBarrelFinalize:p.default.createStyleguideFinalize}},D=e=>{const t=`${e}s`;return{onGetBarrels(a){const n=a[t];n&&(n.forEach((({_id:t})=>(0,d.subscribeToBarrelChannel)(e,t))),I&&n.length&&function(e,t){r.default.ipcRenderer.sendToHost(`preload-${e}`,(0,m.urlResolve)(e,{url:{bid:t.slice().sort(T.sortBy.updated)[0]._id}}))}(e,n))},onCreateBarrelRequest(t){const{oid:a,oseid:n,platform:s,onLimitError:r}=t;N[e].create(t).then((({_id:t})=>(mixpanel.master.track(`Created ${e}`,{Type:(0,O.getPlatformString)(s),[`${e}_id`]:t}),N[e].get(t).then((i=>{P[e].createBarrelFinalize(),S.default.add({barrel:i,oid:a,oseid:n,barrelType:e}),_.default.history.push((0,m.urlResolve)(e,{url:{bid:t}}))}))))).catch((t=>{P[e].createBarrelFinalize(),i.handleError(t,{clientErrorHandler:{402:r,default:i.handleError}})}))},onTransferOwnership({bid:t,fromUserId:a,targetId:n,toOrganization:r,oid:d,canChangePlanAtTarget:l}){N[e].transferOwnership(t,n,r).then((()=>{P[e].transferOwnership({bid:t,fromUserId:a,targetId:n,toOrganization:r,oid:d})})).catch((a=>{i.handleError(a,{clientErrorHandler:{402(){if(l)(0,b.showPlanChooserOverlay)({source:`Workspace, Reached ${e} limit`,oid:!!r&&n,upgradeTrigger:e===o.default.PROJECT?E.PlanUpgradeTrigger.PROJECT_LIMIT:E.PlanUpgradeTrigger.STYLEGUIDE_LIMIT});else{let a=r?`Your workspace reached the ${e} limit. Contact the workspace Admins to upgrade your plan.`:`Your team member reached the ${e} limit.`;a+=' Click “Learn more" below for more details.';const n=A.default.getBarrel({bid:t});s.create({title:`Transferring ownership ${n?`of "${n.name}" `:""}failed`,message:a,done:{name:"LEARN MORE",cb:()=>{(0,C.openLink)(e===o.default.PROJECT?"https://zpl.io/article/transfer-project":"https://zpl.io/article/transferring-styleguides")}},cancel:{name:"OK"}})}},default:i.handleError}})}))}}},R={onCreateSampleProject(){n.createSampleProject().then((({project:e})=>{S.default.add({barrel:e,oid:"user",barrelType:o.default.PROJECT,syncWithApi:!1,addedWithCopy:!0}),A.default.navigateToBarrel(o.default.PROJECT,e._id)})).catch(i.handleError).finally((()=>{l.default.createSampleProjectFinalize()}))}},v={onParentSelect({stid:e,parent:t,oldParent:a}){n.updateStyleguideParent(e,t).then((()=>{mixpanel.master.track((a?"Changed":"Added")+" styleguide parent")})).catch((t=>{a?p.default.selectParent({stid:e,parent:a}):p.default.removeParent({stid:e}),i.handleError(t)}))},onParentRemove({stid:e,oldParent:t}){n.removeStyleguideParent(e).then((()=>{mixpanel.master.track("Removed styleguide parent")})).catch((a=>{p.default.selectParent({stid:e,parent:t}),i.handleError(a)}))}};function L(e){const{type:t,syncWithApi:a,pid:n,stid:i}=e,s=y(e,["type","syncWithApi","pid","stid"]);return Object.assign({bid:null!=n?n:i},s)}function j(){u.default.dispatcher.register((e=>{const t=D(o.default.PROJECT);switch(e.type){case c.default.GET_PROJECTS_SUCCESS:case h.default.LOAD_WORKSPACE_DATA:t.onGetBarrels(L(e))}if(e.syncWithApi)switch(e.type){case c.default.CREATE_PROJECT_REQUEST:t.onCreateBarrelRequest(L(e));break;case c.default.INIT_TRANSFER_OWNERSHIP:t.onTransferOwnership(L(e));break;case c.default.CREATE_SAMPLE_PROJECT_REQUEST:R.onCreateSampleProject()}})),u.default.dispatcher.register((e=>{const t=D(o.default.STYLEGUIDE);switch(e.type){case f.default.GET_STYLEGUIDES_SUCCESS:case h.default.LOAD_WORKSPACE_DATA:t.onGetBarrels(L(e))}if(e.syncWithApi)switch(e.type){case f.default.CREATE_STYLEGUIDE_REQUEST:t.onCreateBarrelRequest(L(e));break;case f.default.INIT_TRANSFER_OWNERSHIP:t.onTransferOwnership(L(e));break;case f.default.SELECT_PARENT:v.onParentSelect(e);break;case f.default.REMOVE_PARENT:v.onParentRemove(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(326),i=a(264),s=a(1056);const r={getStyleguidesSuccess({styleguides:e,oid:t}){i.default.dispatcher.dispatch({type:n.default.GET_STYLEGUIDES_SUCCESS,styleguides:e,oid:t})},getStyleguideRequest(){i.default.dispatcher.dispatch({type:n.default.GET_STYLEGUIDE_REQUESTED})},getStyleguideSuccess({styleguide:e}){const{userId:t}=i.default.UserStore.getState();i.default.dispatcher.dispatch({type:n.default.GET_STYLEGUIDE_SUCCESS,styleguide:e,userId:t})},getStyleguideFailed(e){i.default.dispatcher.dispatch({type:n.default.GET_STYLEGUIDE_FAILED,error:e})},createStyleguideRequest({oid:e,platform:t,parent:a,onLimitError:s}){i.default.dispatcher.dispatch({type:n.default.CREATE_STYLEGUIDE_REQUEST,oid:e,platform:t,parent:a,syncWithApi:!0,onLimitError:s})},createStyleguideFinalize(){i.default.dispatcher.dispatch({type:n.default.CREATE_STYLEGUIDE_FINALIZE})},transferOwnership({bid:e,fromUserId:t,targetId:a,toOrganization:r,oid:o,users:d}){const{styleguides:l}=i.default.StyleguidesDataStore.getState(),c=(0,s.getStyleguideAndItsDescendants)(l,e);i.default.dispatcher.dispatch({type:n.default.TRANSFER_OWNERSHIP,bid:e,affectedIds:c,fromUserId:t,targetId:a,toOrganization:r,oid:o,users:d})},initTransferOwnership({stid:e,fromUserId:t,targetId:a,toOrganization:s,oid:r,canChangePlanAtTarget:o}){i.default.dispatcher.dispatch({type:n.default.INIT_TRANSFER_OWNERSHIP,stid:e,fromUserId:t,targetId:a,toOrganization:s,oid:r,canChangePlanAtTarget:o,syncWithApi:!0})},updateStyleguide({stid:e,data:t}){i.default.dispatcher.dispatch({type:n.default.UPDATE_STYLEGUIDE,stid:e,data:t})},inviteUser({container:e,stid:t,users:a,oid:s}){i.default.dispatcher.dispatch({type:n.default.INVITE_USER,container:e,stid:t,users:a,oid:s})},selectParent({stid:e,parent:t,oldParent:a,syncWithApi:s=!1}){i.default.dispatcher.dispatch({type:n.default.SELECT_PARENT,stid:e,parent:t,oldParent:a,syncWithApi:s})},removeParent({stid:e,oldParent:t,syncWithApi:a=!1}){i.default.dispatcher.dispatch({type:n.default.REMOVE_PARENT,stid:e,oldParent:t,syncWithApi:a})},selectParentRequest({stid:e,parent:t,syncWithApi:a}){i.default.dispatcher.dispatch({type:n.default.SELECT_PARENT_REQUEST,stid:e,parent:t,syncWithApi:a})},selectParentSuccess({stid:e,parent:t,styleguides:a}){i.default.dispatcher.dispatch({type:n.default.SELECT_PARENT_SUCCESS,stid:e,parent:t,styleguides:a})},selectParentFailed(){i.default.dispatcher.dispatch({type:n.default.SELECT_PARENT_FAILED})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{getOrganizationProfile:()=>o,getOrganizations:()=>d,getOrganization:()=>l,getOrganizationMembersWithoutDetailsIfNeeded:()=>c,getFocusedBarrels:()=>u,getProjects:()=>p,getStyleguides:()=>f,getOrganizationSections:()=>S,fetchPersonalWorkspaceData:()=>h});a(1080);var n=a(120),i=a(738),s=a(264),r=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};function o(e,t){var a;const{organizationProfiles:i}=s.default.OrganizationStore.getState();return null!==(a=i[e])&&void 0!==a?a:n.getOrganizationMemberProfile(e,t)}function d(){const{organizations:e}=s.default.OrganizationStore.getState();return e.length?Promise.resolve(e):n.getOrganizations()}function l(e){const t=i.default.getOrganization(e);return t&&t.complete?Promise.resolve(t):n.getOrganization(e).then((e=>Object.assign(Object.assign({},e),{complete:!0})))}function c(e){const t=i.default.getOrganization(e);if(!t||!t.members)return n.getOrganizationMembersWithoutDetails(e)}function u(e,t){const{focusedBarrels:a}=s.default.OrganizationStore.getState();return a&&a[e]?Promise.resolve(a[e]):n.getOrganizationMemberFocusedBarrels(e,t)}function p(e){const t=i.default.getOrganizationProjects(e);return t?Promise.resolve(t):n.getProjects("user"===e?null:e)}function f(e){const t=i.default.getOrganizationStyleguides(e);return t?Promise.resolve(t):n.getStyleguides("user"===e?null:e)}function S(e,t){const a=i.default.getOrganization(e);return a&&a.complete&&a.sections?Promise.resolve({sections:a.sections}):n.getOrganizationSections(e,t)}function h(){return r(this,void 0,void 0,(function*(){return{oid:"user",organization:null,focusedBarrels:null,dialogDismissParams:null,projects:yield p("user"),styleguides:yield f("user"),organizations:yield d()}}))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var n=a(1085),i=a(1092),s=a(1096),r=a(1080),o=a(1103),d=a(1108),l=a(1110),c=a(1112),u=a(1118),p=a(1123),f=a(1126),S=a(1130),h=a(1134),E=a(1136),g=a(1138),O=a(1139),T=a(1149),m=a(1151),_=a(1152),b=a(1156),C=a(1162),A=a(1165),y=a(1167),I=a(1171),N=a(1175),P=a(1177),D=a(1181),R=a(1184),v=a(1191),L=a(1194),j=a(1198),U=a(264),w=a(268);function k(){(0,n.default)(),(0,i.default)(),(0,s.default)(),(0,r.default)(),(0,o.default)(),(0,d.default)(),(0,l.default)(),(0,c.default)(),(0,u.default)(),(0,p.default)(),(0,f.default)(),(0,S.default)(),(0,h.default)(),(0,E.default)(),(0,g.default)(),(0,O.default)(),(0,T.default)(),(0,m.default)(),(0,_.default)(),(0,b.default)(),(0,C.default)(),(0,A.default)(),(0,y.default)(),(0,I.default)(),(0,N.default)(),(0,P.default)(),(0,D.default)(),(0,R.default)(),(0,v.default)(),(0,L.default)(),(0,j.default)(),w.default&&U.default.dispatcher.register((e=>{w.default.send(e,U.default.getCombinedState())}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1086),i=a(1090),s=a(1091);function r(){(0,n.default)(),(0,i.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(279),i=a(796),s=a(280),r=a(120),o=a(1050),d=a(789),l=a(1087),c=a(738),u=a(264),p=a(1062),f=a(737),S=a(1067),h=a(1088),E=a(1089),g=a(331),O=a(124),T=a(798),m=a(1068),_=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const b={selected({activity:e,options:{reselect:t}}){var a;return _(this,void 0,void 0,(function*(){const n=i.default.getCategory(e);if(t||s.default.Note!==n)return;const c=e.events[0].project._id,{projectsEmojis:h,loadingProjectIds:E,errorProjectIds:_}=u.default.EmojisStore.getState();if(h[c]||(0,g.union)(E,_).includes(c)||setTimeout((()=>S.default.requestEmojis(c))),(null===(a=f.default.getProject({pid:c}))||void 0===a?void 0:a.dataStage)!==O.default.Complete){setTimeout(p.default.getProjectRequest);try{const[e,t]=yield Promise.all([r.getProject(c),r.getProjectComponentSections(c)]),a=Object.assign(Object.assign({},e),t);p.default.getProjectSuccess({project:a})}catch(b){return void p.default.getProjectFailed(b)}}if(n===s.default.Note&&e.events[0].screen){const t=e.events[0].screen._id;if(d.default.getDots({pid:c,sid:t}))return void setTimeout((()=>l.default.setDotsLoaded(e)));r.getDots(c,t).then((({dots:e=[]})=>{o.default.setDots({pid:c,sid:t,dots:e})})).finally((()=>l.default.setDotsLoaded(e)))}else if(n===s.default.Note&&e.events[0].flow){const t=e.events[0].flow._id;if(T.default.getDots({pid:c,flid:t}))return void setTimeout((()=>l.default.setDotsLoaded(e)));r.getProjectFlowDots(c,t).then((e=>{m.default.setDots({pid:c,flid:t,dots:e})})).finally((()=>l.default.setDotsLoaded(e)))}}))},requestRelatedUsers({oid:e}){"user"===e||c.default.getOrganizationProfile(e).restricted?u.default.UserStore.getState().acquaintances||setTimeout(E.fetchAcquaintances):c.default.getOrganizationMembers(e)||setTimeout((()=>(0,h.fetchOrganizationMembers)(e)))}};function C(){u.default.dispatcher.register((e=>{switch(e.type){case n.default.Select:b.selected(e);break;case n.default.RequestRelatedUsers:b.requestRelatedUsers(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(279),i=a(264),s=a(123);const r={select(e,t){const{selectedId:a,selectedEventIds:s}=i.default.ActivitiesViewStore.getState(),r=!a,o=a===e._id&&s.every((e=>t.includes(e)))&&t.length===s.length;i.default.dispatcher.dispatch({type:n.default.Select,activity:e,eventIds:t,options:{reselect:o,autoSelect:r}})},setDotsLoaded(e){i.default.dispatcher.dispatch({type:n.default.SetDotsLoaded,activity:e})},selectCategory(e){i.default.ActivitiesViewStore.getState().category!==e&&i.default.dispatcher.dispatch({type:n.default.SelectCategory,category:e})},selectAllBarrels(){"all"!==i.default.ActivitiesViewStore.getState().barrelSelection.type&&i.default.dispatcher.dispatch({type:n.default.SelectAllBarrels})},selectBarrel(e,t,a){const{barrelSelection:r}=i.default.ActivitiesViewStore.getState();(r.type!==t||r.id!==e||r.type!==s.default.STYLEGUIDE&&r.isPinned!==a)&&i.default.dispatcher.dispatch({type:n.default.SelectBarrel,id:e,isPinned:a,barrelType:t})},setProjectsWithUpdatesOnly(e){i.default.dispatcher.dispatch({type:n.default.SetProjectsWithUpdatesOnly,projectsWithUpdatesOnly:e})},load(e){i.default.dispatcher.dispatch({type:n.default.Load,data:e})},selectNoteStatusFilter(e){i.default.ActivitiesViewStore.getState().noteStatusFilter!==e&&i.default.dispatcher.dispatch({type:n.default.SelectNoteStatusFilter,noteStatusFilter:e})},selectColor(e){i.default.ActivitiesViewStore.getState().color!==e&&i.default.dispatcher.dispatch({type:n.default.SelectColor,color:e})},selectMember(e){i.default.ActivitiesViewStore.getState().memberId!==e&&i.default.dispatcher.dispatch({type:n.default.SelectMember,memberId:e})},selectSection(e){i.default.ActivitiesViewStore.getState().sectionId!==e&&i.default.dispatcher.dispatch({type:n.default.SelectSection,sectionId:e})},requestRelatedUsers(e){i.default.dispatcher.dispatch({type:n.default.RequestRelatedUsers,oid:e})},setSidebarWidth(e){i.default.dispatcher.dispatch({type:n.default.SetSidebarWidth,sidebarWidth:e})},saveListScrollData(e){e&&"activities"===i.default.AppStore.getState().page||i.default.dispatcher.dispatch({type:n.default.SaveListScrollData,listScrollData:e})},selectTermsUpdate(){i.default.dispatcher.dispatch({type:n.default.SelectTermsUpdate})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{fetchOrganizationMembers:()=>s});var n=a(120),i=a(739);function s(e){return i.default.organizationMembersRequested(e),n.getOrganizationMembers(e).then(i.default.getOrganizationMembersSuccess).catch((t=>i.default.getOrganizationMembersFailed(e,t)))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{fetchAcquaintances:()=>s});var n=a(120),i=a(651);function s(){return i.default.acquaintancesRequested(),n.getUserAcquaintances().then((({acquaintances:e})=>i.default.setAcquaintances(e))).catch(i.default.getAcquaintancesFailed)}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(264),i=a(279),s=a(104),r=a(434),o=a(123),d=a(280),l=a(796);const c={selected({activity:e,options:{reselect:t,autoSelect:a}}){a||t||c.trackItemClick(e)},updateUrl(){const{selectedOrganizationId:e,category:t,barrelSelection:a,projectsWithUpdatesOnly:i,noteStatusFilter:l,color:c,memberId:u,sectionId:p}=n.default.ActivitiesViewStore.getState(),f="user"!==e?e:null,S=f?"workspace-activities":"activities",h=t!==d.default.All?t:null,E=a.type===o.default.PROJECT?a.id:null,g=a.type===o.default.STYLEGUIDE?a.id:null,O=i?"true":"false";r.default.history.replace((0,s.urlResolve)(S,{url:{oid:f},query:{category:h,pid:E,stid:g,updatedOnly:O,status:l,color:c,member:u,section:p}}))},trackItemClick(e){l.default.trackEventWithFilterDetails("Clicked notification",{Mention:l.default.hasMention(e),Source:"Notifications page"})},trackFilteredNotificationsChange(){l.default.trackEventWithFilterDetails("Filtered notifications")},trackTermsUpdateSelected(){mixpanel.master.track("Viewed user terms")}};function u(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.Select:c.selected(e);break;case i.default.SelectColor:case i.default.SelectNoteStatusFilter:case i.default.SelectMember:case i.default.SelectSection:case i.default.SelectAllBarrels:case i.default.SelectBarrel:case i.default.SetProjectsWithUpdatesOnly:case i.default.SelectCategory:c.trackFilteredNotificationsChange(),c.updateUrl();break;case i.default.Load:c.updateUrl();break;case i.default.SelectTermsUpdate:c.trackTermsUpdateSelected()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(279),i=a(13),s=a(264);const r={setSidebarWidth({sidebarWidth:e}){i.userPrefs.set("activitiesSidebarWidth",e)},setProjectsWithUpdatesOnly({projectsWithUpdatesOnly:e}){i.userPrefs.set("activitiesShowProjectsWithUpdatesOnly",e)}};function o(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.SetSidebarWidth:r.setSidebarWidth(e);break;case n.default.SetProjectsWithUpdatesOnly:r.setProjectsWithUpdatesOnly(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1093),i=a(1095);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(264),i=a(289),s=a(1094),r=a(291),o=a(120),d=a(79),l=a(104),c=a(340),u=a(122);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h={handleFetchConnectedAppsData(){Promise.all([(0,o.getAuthorizedApplications)(),...r.OFFICIAL_APPS.map((({_id:e})=>(0,o.getAppStatus)(e)))]).then((([e,...t])=>{const a=e.slice().sort(c.sortBy.authorized);s.default.getConnectedAppsDataSuccess({authorizedApplications:a,officialApps:r.OFFICIAL_APPS.reduce(((e,a,n)=>f(f({},e),{},{[a._id]:f(f({},a),{},{token:null,status:t[n]?r.appStatus.CONNECTED:r.appStatus.UNCONNECTED})})),{})})})).catch((e=>{if(e.status===u.default.STATUS.PRECONDITION_FAILED)return s.default.getConnectedAppsDataSuccess({authorizedApplications:[],zeplinCLIConnected:!1,zemConnected:!1});d.handleError(e)}))},handleRevokeAuthorizedApplication({authorizedApplication:e,toastContainer:t}){const{_id:a}=e;(r.OFFICIAL_APPS.some((e=>e._id===a))?o.revokeAppToken:o.revokeAuthorizedApplication)(a).then((()=>{s.default.revokeAuthorizedApplicationSuccess({authorizedApplication:e,toastContainer:t})})).catch((e=>{s.default.revokeAuthorizedApplicationFailure(),d.handleError(e)}))},handleFetchDeveloperData(){Promise.all([(0,o.getOwnedApplications)(),(0,o.getPersonalAccessTokens)()]).then((([e,t])=>{const a=e.slice().sort(c.sortBy.updated),n=t.slice().sort(c.sortBy.created);s.default.getDeveloperDataSuccess({ownedApplications:a,personalAccessTokens:n})})).catch((e=>{if(e.status===u.default.STATUS.PRECONDITION_FAILED)return s.default.getDeveloperDataSuccess({ownedApplications:[],personalAccessTokens:[]});d.handleError(e)}))},handleFetchApplication({appId:e}){const{fetchedApplicationIds:t,ownedApplications:a}=n.default.AppsStore.getState(),i=a.find((t=>t._id===e));if(t.includes(e))return setTimeout((()=>{s.default.getApplicationSuccess(i)}));(0,o.getOwnedApplication)(e).then(s.default.getApplicationSuccess).catch(d.handleError)},handleCreateApplication({application:e}){(0,o.createApplication)(e).then(s.default.createApplicationSuccess).catch((e=>{s.default.createApplicationFailure(),d.handleError(e)}))},handleUpdateApplication({appId:e,application:t}){(0,o.updateApplication)(e,t).then((()=>s.default.updateApplicationSuccess({appId:e,application:t}))).catch((e=>{s.default.updateApplicationFailure(),d.handleError(e)}))},handleDeleteApplication({application:e,toastContainer:t}){(0,o.deleteApplication)(e._id).then((()=>s.default.deleteApplicationSuccess({application:e,toastContainer:t}))).catch((e=>{s.default.deleteApplicationFailure(),d.handleError(e)}))},handleCreatePersonalAccessToken({name:e,hasAdminAccess:t}){(0,o.createPersonalAccessToken)({name:e,hasAdminAccess:t}).then(s.default.createPersonalAccessTokenSuccess).catch((e=>{s.default.createPersonalAccessTokenFailure(),d.handleError(e)}))},handleDeletePersonalAccessToken({personalAccessToken:e,toastContainer:t}){(0,o.deletePersonalAccessToken)(e._id).then((()=>{s.default.deletePersonalAccessTokenSuccess({personalAccessToken:e,toastContainer:t})})).catch((e=>{s.default.deletePersonalAccessTokenFailure(),d.handleError(e)}))},handleRenamePersonalAccessToken({tokenId:e,name:t,oldName:a}){(0,o.renamePersonalAccessToken)(e,t).catch((t=>{s.default.renamePersonalAccessToken({tokenId:e,name:a}),d.handleError(t)}))},handleConnectOfficialApp({appId:e}){const t={client_id:e,response_type:"token",redirect_uri:(0,l.urlResolve)("profile-connected-apps"),scope:"read write delete"},a=`/oauth/authorize?${(0,l.joinUrlParams)(t)}`,n=`/oauthRedirectUrl?authUrl=${encodeURIComponent(a)}`;fetch(n).then((e=>e.text())).then((t=>{const a=new URL(t).searchParams.get("access_token");a&&s.default.connectOfficialAppSuccess({appId:e,token:a})})).catch((t=>{s.default.connectOfficialAppFailure({appId:e}),d.handleError(t)}))}};function E(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.GET_CONNECTED_APPS_DATA_REQUEST:h.handleFetchConnectedAppsData(e);break;case i.default.GET_DEVELOPER_DATA_REQUEST:h.handleFetchDeveloperData(e);break;case i.default.GET_APPLICATION_REQUEST:h.handleFetchApplication(e);break;case i.default.CREATE_PERSONAL_ACCESS_TOKEN_REQUEST:h.handleCreatePersonalAccessToken(e);break;case i.default.CREATE_APPLICATION_REQUEST:h.handleCreateApplication(e);break;case i.default.UPDATE_APPLICATION_REQUEST:h.handleUpdateApplication(e);break;case i.default.DELETE_APPLICATION_REQUEST:h.handleDeleteApplication(e);break;case i.default.DELETE_PERSONAL_ACCESS_TOKEN_REQUEST:h.handleDeletePersonalAccessToken(e);break;case i.default.REVOKE_AUTHORIZED_APPLICATION_REQUEST:h.handleRevokeAuthorizedApplication(e);break;case i.default.RENAME_PERSONAL_ACCESS_TOKEN:h.handleRenamePersonalAccessToken(e);break;case i.default.CONNECT_OFFICIAL_APP_REQUEST:h.handleConnectOfficialApp(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(289);const s={getConnectedAppsData(){n.default.dispatcher.dispatch({type:i.default.GET_CONNECTED_APPS_DATA_REQUEST})},getConnectedAppsDataSuccess({authorizedApplications:e,officialApps:t}){n.default.dispatcher.dispatch({type:i.default.GET_CONNECTED_APPS_DATA_SUCCESS,authorizedApplications:e,officialApps:t})},getDeveloperData(){n.default.dispatcher.dispatch({type:i.default.GET_DEVELOPER_DATA_REQUEST})},getDeveloperDataSuccess({ownedApplications:e,personalAccessTokens:t}){n.default.dispatcher.dispatch({type:i.default.GET_DEVELOPER_DATA_SUCCESS,ownedApplications:e,personalAccessTokens:t})},getApplication(e){n.default.dispatcher.dispatch({type:i.default.GET_APPLICATION_REQUEST,appId:e})},getApplicationSuccess(e){n.default.dispatcher.dispatch({type:i.default.GET_APPLICATION_SUCCESS,application:e})},revokeAuthorizedApplication({authorizedApplication:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.REVOKE_AUTHORIZED_APPLICATION_REQUEST,authorizedApplication:e,toastContainer:t})},revokeAuthorizedApplicationSuccess({authorizedApplication:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.REVOKE_AUTHORIZED_APPLICATION_SUCCESS,authorizedApplication:e,toastContainer:t})},revokeAuthorizedApplicationFailure(){n.default.dispatcher.dispatch({type:i.default.REVOKE_AUTHORIZED_APPLICATION_FAILURE})},deletePersonalAccessToken({personalAccessToken:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.DELETE_PERSONAL_ACCESS_TOKEN_REQUEST,personalAccessToken:e,toastContainer:t})},deletePersonalAccessTokenSuccess({personalAccessToken:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.DELETE_PERSONAL_ACCESS_TOKEN_SUCCESS,personalAccessToken:e,toastContainer:t})},deletePersonalAccessTokenFailure(){n.default.dispatcher.dispatch({type:i.default.DELETE_PERSONAL_ACCESS_TOKEN_FAILURE})},createPersonalAccessToken({name:e,hasAdminAccess:t}){n.default.dispatcher.dispatch({type:i.default.CREATE_PERSONAL_ACCESS_TOKEN_REQUEST,name:e,hasAdminAccess:t})},createPersonalAccessTokenSuccess(e){n.default.dispatcher.dispatch({type:i.default.CREATE_PERSONAL_ACCESS_TOKEN_SUCCESS,personalAccessToken:e})},createPersonalAccessTokenFailure(){n.default.dispatcher.dispatch({type:i.default.CREATE_PERSONAL_ACCESS_TOKEN_FAILURE})},createApplication(e){n.default.dispatcher.dispatch({type:i.default.CREATE_APPLICATION_REQUEST,application:e})},createApplicationSuccess(e){n.default.dispatcher.dispatch({type:i.default.CREATE_APPLICATION_SUCCESS,application:e})},createApplicationFailure(){n.default.dispatcher.dispatch({type:i.default.CREATE_APPLICATION_FAILURE})},updateApplication({appId:e,application:t}){n.default.dispatcher.dispatch({type:i.default.UPDATE_APPLICATION_REQUEST,appId:e,application:t})},updateApplicationSuccess({appId:e,application:t}){n.default.dispatcher.dispatch({type:i.default.UPDATE_APPLICATION_SUCCESS,appId:e,application:t})},updateApplicationFailure(){n.default.dispatcher.dispatch({type:i.default.UPDATE_APPLICATION_FAILURE})},deleteApplication({application:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.DELETE_APPLICATION_REQUEST,application:e,toastContainer:t})},deleteApplicationSuccess({application:e,toastContainer:t}){n.default.dispatcher.dispatch({type:i.default.DELETE_APPLICATION_SUCCESS,application:e,toastContainer:t})},deleteApplicationFailure(){n.default.dispatcher.dispatch({type:i.default.DELETE_APPLICATION_FAILURE})},renamePersonalAccessToken({tokenId:e,name:t,oldName:a}){n.default.dispatcher.dispatch({type:i.default.RENAME_PERSONAL_ACCESS_TOKEN,tokenId:e,name:t,oldName:a})},connectOfficialApp({appId:e}){n.default.dispatcher.dispatch({type:i.default.CONNECT_OFFICIAL_APP_REQUEST,appId:e})},connectOfficialAppSuccess({appId:e,token:t}){n.default.dispatcher.dispatch({type:i.default.CONNECT_OFFICIAL_APP_SUCCESS,appId:e,token:t})},connectOfficialAppFailure({appId:e}){n.default.dispatcher.dispatch({type:i.default.CONNECT_OFFICIAL_APP_FAILURE,appId:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(289),s=a(410);const r={handleRevokeAuthorizedApplication({authorizedApplication:e,toastContainer:t}){(0,s.default)({text:`App “${e.name}” revoked`,container:t,source:"connectedAppsTab"}),mixpanel.master.track("Revoked access to Zeplin app",{"App ID":e._id})},handleDeletePersonalAccessToken({personalAccessToken:e,toastContainer:t}){(0,s.default)({text:`Token “${e.name}” deleted`,container:t,source:"developerTab"}),mixpanel.master.track("Deleted personal access token")},handleDeleteApplication({application:e,toastContainer:t}){(0,s.default)({text:`App “${e.name}” deleted`,container:t,source:"developerTab"}),mixpanel.master.track("Deleted Zeplin app")},handleCreateApplication(){mixpanel.master.track("Created Zeplin app")},handleCreatePersonalAccessToken(){mixpanel.master.track("Created personal access token")}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.REVOKE_AUTHORIZED_APPLICATION_SUCCESS:r.handleRevokeAuthorizedApplication(e);break;case i.default.DELETE_PERSONAL_ACCESS_TOKEN_SUCCESS:r.handleDeletePersonalAccessToken(e);break;case i.default.CREATE_APPLICATION_SUCCESS:r.handleCreateApplication(e);break;case i.default.CREATE_PERSONAL_ACCESS_TOKEN_SUCCESS:r.handleCreatePersonalAccessToken(e);break;case i.default.DELETE_APPLICATION_SUCCESS:r.handleDeleteApplication(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(1097),i=a(1099),s=a(1100),r=a(1102);function o(){(0,n.default)(),(0,r.default)(),(0,s.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(264),i=a(284),s=a(1055),r=a(794),o=a(1060),d=a(1065),l=a(1098),c=a(737),u=a(185),p=a(332),f=a(123),S=a(7),h=a(79),E=a(80),g=a(81),O=a(120),T=a(76),m=a(652);const _={project:O.project,styleguide:O.styleguide},b={[S.RESOURCE_TYPE.COLORS]:"updateColorsStyleguide",[S.RESOURCE_TYPE.TEXT_STYLES]:"updateTextStylesStyleguide",[S.RESOURCE_TYPE.COMPONENTS]:"updateComponentSectionsStyleguide"},C={[S.RESOURCE_TYPE.COLORS]:"Moved colors to styleguide",[S.RESOURCE_TYPE.TEXT_STYLES]:"Moved text styles to styleguide",[S.RESOURCE_TYPE.COMPONENTS]:"Moved components to styleguide"},A={handleActivate({bid:e,barrelType:t}){_[t].activate(e).catch((t=>{(0,h.handleError)(t),s.default.archive({bid:e})}))},handleArchive({bid:e,barrelType:t}){_[t].archive(e).catch((a=>{(0,h.handleError)(a),s.default.activate({bid:e,barrelType:t})}))},handleRemove({bid:e,oid:t,oseid:a,barrelType:n,oldBarrel:i}){_[n].delete(e).catch((e=>{(0,h.handleError)(e),s.default.add({barrel:i,oid:t,oseid:a,barrelType:n})}))},handleCopy({bid:e,oid:t,barrelName:a,barrelType:n,options:i}){const o={withUsers:i.users};n===f.default.PROJECT&&(o.withDots=i.notes,o.withVersions=i.versions,o.withFlows=i.flows),_[n].copy(e,o).then((({async:e,barrel:i,order:{sectionId:o,index:d}={}})=>{e?r.default.openDialog(S.DialogTypes.ASYNC_COPY_BARREL,{barrelName:a}):s.default.add({barrel:i,barrelType:n,oid:t,oseid:o,index:d,addedWithCopy:!0})})).catch((e=>{if(r.default.closeDialog(),402===e.status)return(0,m.showPlanChooserOverlay)({oid:t,source:"Flows",upgradeTrigger:S.PlanUpgradeTrigger.FLOW_PROJECT_LIMIT});(0,h.handleError)(e)}))},handleUpdateName({bid:e,barrelType:t,name:a,oldName:n}){_[t].updateName(e,a).catch((a=>{(0,h.handleError)(a),s.default.updateName({bid:e,barrelType:t,name:n})}))},handleUpdateDescription({bid:e,barrelType:t,description:a,oldDescription:n}){_[t].updateDescription(e,a).catch((a=>{(0,h.handleError)(a),s.default.updateDescription({bid:e,barrelType:t,description:n})}))},handleUpdateDensityScale({bid:e,barrelType:t,densityScale:a,oldDensityScale:n}){_[t].updateDensityScale(e,a).catch((a=>{(0,h.handleError)(a),s.default.updateDensityScale({bid:e,barrelType:t,densityScale:n})}))},handleUpdateThumbnail({bid:e,barrelType:t,thumbnail:a,oldThumbnail:n}){_[t].updateThumbnail(e,a).catch((a=>{(0,h.handleError)(a),s.default.updateThumbnail({bid:e,barrelType:t,thumbnail:n})}))},handleRemoveIntegration({bid:e,barrelType:t,intype:a,inid:n,removedIntegration:i}){_[t].deleteIntegration(e,a,n).catch((n=>{(0,h.handleError)(n),s.default.addIntegration({bid:e,barrelType:t,intype:a,integration:i})}))},handleToggleScene({bid:e,barrelType:t,accessibility:a,oldAccessibility:n}){_[t].updateAccessibility(e,a).catch((t=>{(0,h.handleError)(t),s.default.toggleScene({bid:e,accessibility:n})}))},handleAddMembers(){},handleJoin({bid:e,barrelType:t,actionSource:a}){_[t].inviteUser(e).then((n=>{const i=[l.default.PREVIEW_DIALOG,l.default.SPACE_CARD].includes(a),r=[l.default.PREVIEW_PAGE].includes(a);i&&c.default.navigateToBarrel(t,e),r&&(s.default.reset(),c.default.reloadCurrentPage()),s.default.addMembers({bid:e,barrelType:t,members:[n]})})).catch((e=>{(0,h.handleError)(e)})).finally((()=>{s.default.stopLoadingJoin({barrelType:t})}))},handleUpdateUserRole({bid:e,barrelType:t,uid:a,role:n,oldRole:i}){_[t].updateUserRole(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.updateUserRole({bid:e,uid:a,role:i})}))},handleTransferOwnership({bid:e,barrelType:t,uid:a}){_[t].transferOwnership(e,a).then((()=>{s.default.ownershipTransferred({bid:e,barrelType:t,uid:a})})).catch(h.handleError)},handleRemoveMember({oid:e,bid:t,barrelType:a,mid:n,shouldRemoveBarrel:i,removedBarrel:r,removedMember:o}){_[a].removeUser(t,n).catch((n=>{(0,h.handleError)(n),i?s.default.add({oid:e,barrelType:a,barrel:r}):s.default.addMembers({bid:t,barrelType:a,members:[o]})}))},handleAddColor({bid:e,barrelType:t,color:a}){const n=a._id,i=Object.assign({},a);delete i._id,delete i.id,_[t].createColor(e,i).then((({_id:t})=>{const a=Object.assign(Object.assign({},i),{_id:t});s.default.updateColor({bid:e,cid:n,colorData:a})})).catch((t=>{(0,h.handleError)(t),s.default.removeColor({bid:e,cid:n})}))},handleUpdateColorOrder({bid:e,barrelType:t,cid:a,to:n,revertTo:i}){_[t].updateColorsOrder(e,{colors:[{_id:a,to:n}]}).catch((t=>{(0,h.handleError)(t),s.default.updateColorOrder({bid:e,cid:a,to:i})}))},handleAddMultipleColors({bid:e,barrelType:t,colors:a}){const n=[],i=a.map((a=>{const i=Object.assign({},a);return delete i._id,delete i.id,n.push(i),_[t].createColor(e,i)})).map((e=>e.catch((e=>e))));Promise.all(i).then((t=>{t.forEach(((t,i)=>{const r=n[i],o=a[i]._id;if(t instanceof E.default||t instanceof g.default)return(0,h.handleError)(t),void s.default.removeColor({bid:e,cid:o});const{_id:d}=t,l=Object.assign(Object.assign({},r),{_id:d});s.default.updateColor({bid:e,cid:o,colorData:l})}))}))},handleUpdateColor({bid:e,barrelType:t,cid:a,colorData:n,oldColorData:i}){_[t].updateColor(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.updateColor({bid:e,cid:a,colorData:i})}))},handleRemoveColor({bid:e,barrelType:t,cid:a,removedColor:n}){var i;(null===(i=null==n?void 0:n.id)||void 0===i?void 0:i.startsWith("newColor"))||_[t].deleteColor(e,a).catch((t=>{(0,h.handleError)(t),s.default.addColor({bid:e,color:n})}))},handleRemoveAllColors({bid:e,barrelType:t,colorsToRemove:a}){const n=a.map((({id:e})=>e));_[t].deleteAllColors(e,{colors:n}).catch((t=>{(0,h.handleError)(t),s.default.addMultipleColors({bid:e,colors:a})}))},handleMigrateColors({bid:e,barrelType:t,colorsToUpdate:a,oldDataOfColorsToUpdate:n,colorsToAdd:i}){Object.keys(a).forEach((i=>{const s=a[i];this.handleUpdateColor({bid:e,barrelType:t,cid:i,colorData:{sourceId:s.sourceId,name:s.name,r:s.r,g:s.g,b:s.b,a:s.a},oldColorData:n[i]})})),this.handleAddMultipleColors({bid:e,barrelType:t,colors:i})},handleAddTextStyle({bid:e,barrelType:t,textStyle:a}){const n=a._id,i=Object.assign({},a);delete i._id,delete i.id,delete i.fontFamily,delete i.fontStretch,delete i.fontStyle,delete i.fontWeight,_[t].createTextStyle(e,i).then((({_id:t})=>{const a=Object.assign(Object.assign({},i),{_id:t});s.default.updateTextStyle({bid:e,tsid:n,textStyleData:a})})).catch((t=>{(0,h.handleError)(t),s.default.removeTextStyle({bid:e,tsid:n})}))},handleAddMultipleTextStyles({bid:e,barrelType:t,textStyles:a}){const n=[],i=a.map((a=>{const i=Object.assign({},a);return delete i._id,delete i.id,delete i.fontFamily,delete i.fontStretch,delete i.fontStyle,delete i.fontWeight,n.push(i),_[t].createTextStyle(e,i)})).map((e=>e.catch((e=>e))));Promise.all(i).then((t=>{t.forEach(((t,i)=>{const r=n[i],o=a[i]._id;if(t instanceof E.default||t instanceof g.default)return(0,h.handleError)(t),void s.default.removeTextStyle({bid:e,tsid:o});const{_id:d}=t,l=Object.assign(Object.assign({},r),{_id:d});s.default.updateTextStyle({bid:e,tsid:o,textStyleData:l})}))}))},handleUpdateTextStyle({bid:e,barrelType:t,tsid:a,textStyleData:n,oldTextStyleData:i}){_[t].updateTextStyle(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.updateTextStyle({bid:e,tsid:a,textStyleData:i})}))},handleRemoveTextStyle({bid:e,barrelType:t,tsid:a,removedTextStyle:n}){var i;(null===(i=null==n?void 0:n.id)||void 0===i?void 0:i.startsWith("newTextStyle"))||_[t].deleteTextStyle(e,a).catch((t=>{(0,h.handleError)(t),s.default.addTextStyle({bid:e,textStyle:n})}))},handleRemoveAllTextStyles({bid:e,barrelType:t,textStylesToRemove:a}){const n=a.map((({id:e})=>e));_[t].deleteAllTextStyles(e,{textStyles:n}).catch((t=>{(0,h.handleError)(t),s.default.addMultipleTextStyles({bid:e,textStyles:a})}))},handleAddSpacingSection({bid:e,barrelType:t,spacingSection:a}){const n=a._id,i=Object.assign({},a);delete i._id,_[t].createSpacingSection(e,i).then((({_id:t})=>{s.default.updateSpacingSection({bid:e,ssid:n,updatedSpacingSection:Object.assign(Object.assign({},i),{_id:t})})})).catch((t=>{(0,h.handleError)(t),s.default.removeSpacingSection({bid:e,ssid:n})}))},handleUpdateSpacingSection({bid:e,barrelType:t,ssid:a,updatedSpacingSection:n,oldSpacingSection:i}){_[t].updateSpacingSection(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.updateSpacingSection({bid:e,ssid:a,updatedSpacingSection:i})}))},handleRemoveSpacingSection({bid:e,barrelType:t,ssid:a,removedSpacingSection:n}){_[t].deleteSpacingSection(e,a).catch((t=>{(0,h.handleError)(t),s.default.addSpacingSection({bid:e,spacingSection:n})}))},handleAddSpacingToken({bid:e,barrelType:t,ssid:a,spacingToken:n}){const i=n._id,r=Object.assign({},n);delete r._id,_[t].createSpacingToken(e,a,r).then((({_id:t})=>{s.default.updateSpacingToken({bid:e,ssid:a,sptid:i,updatedSpacingToken:Object.assign(Object.assign({},r),{_id:t})})})).catch((t=>{(0,h.handleError)(t),s.default.removeSpacingToken({bid:e,ssid:a,sptid:i})}))},handleUpdateSpacingToken({bid:e,barrelType:t,ssid:a,sptid:n,updatedSpacingToken:i,oldSpacingToken:r}){_[t].updateSpacingToken(e,a,n,i).catch((t=>{(0,h.handleError)(t),s.default.updateSpacingToken({bid:e,ssid:a,sptid:n,updatedSpacingToken:r})}))},handleRemoveSpacingToken({bid:e,barrelType:t,ssid:a,sptid:n,isBaseToken:i,removedSpacingToken:r}){_[t].deleteSpacingToken(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.addSpacingToken({bid:e,ssid:a,isBaseToken:i,spacingToken:r})}))},handleUpdateRemPreferences({bid:e,barrelType:t,updatedRemPreferences:a,oldRemPreferences:n}){_[t].updateRemPreferences(e,a).catch((t=>{(0,h.handleError)(t),s.default.updateRemPreferences({bid:e,updatedRemPreferences:n})}))},handleUpdateComponent({bid:e,barrelType:t,csids:a,coid:n,componentData:i,oldComponentData:r}){_[t].updateComponent(e,a,n,i).catch((t=>{(0,h.handleError)(t),s.default.updateComponent({bid:e,csids:a,coid:n,componentData:r})}))},handleRemoveComponent({bid:e,barrelType:t,csids:a,coid:n,oldComponent:i}){_[t].deleteComponent(e,a,n).then((({variantSection:a})=>{if(a){const{_id:n,variant:i}=a;o.default.setComponentVariantData({bid:e,barrelType:t,csid:n,sectionVariant:i})}})).catch((t=>{(0,h.handleError)(t),s.default.addComponent({bid:e,csids:a,component:i})}))},handleRemoveComponents({bid:e,barrelType:t,sectionComponents:a,oldComponents:n}){const i=a.map((({coids:e,csid:t})=>({coids:e,csid:t.split(",")[0]})));_[t].deleteComponents(e,i).then((({variantSections:a})=>{null==a||a.forEach((a=>{const{_id:n,name:i,variant:s,components:r}=a;o.default.setComponentVariantData({bid:e,barrelType:t,csid:n,name:i,sectionVariant:s,components:r})}))})).catch((t=>{(0,h.handleError)(t),n&&a.forEach((({csid:t,coids:a})=>{a.forEach((a=>{const i=n.find((e=>e._id===a));s.default.addComponent({bid:e,csids:[t],component:i})}))}))}))},handleUpdateComponentSection({bid:e,barrelType:t,csids:a,componentSectionData:n,oldComponentSectionData:i}){_[t].updateComponentSection(e,a,n).catch((t=>{(0,h.handleError)(t),s.default.updateComponentSection({bid:e,csids:a,componentSectionData:i})}))},handleMergeComponentSection({bid:e,barrelType:t,csids:a,tcsids:n,flatten:i,oldComponentSection:r}){_[t].mergeComponentSection(e,a,n,i).catch((t=>{(0,h.handleError)(t),i||r.componentSections.forEach((t=>{s.default.removeComponentSection({bid:e,csids:t.idPath})}));(i?(0,u.collectComponents)([r]):r.components).forEach((t=>{s.default.removeComponent({bid:e,csids:n,coid:t._id})})),s.default.addComponentSection({bid:e,csids:a,componentSection:r})}))},handleMoveResourcesRequest({bid:e,barrelType:t,densityScale:a,resourceType:n,resources:i,targetStyleguideId:r}){let o=Promise.resolve();n===S.RESOURCE_TYPE.COMPONENTS&&a&&(o=_[f.default.STYLEGUIDE].updateDensityScale(r,a));const d=b[n],l=i.map((e=>e._id));o.then((()=>_[t][d](e,r,l))).then((()=>{mixpanel.master.track(C[n]),s.default.moveResourcesSuccess({resourceType:n,resources:i,bid:e,barrelType:t,targetStyleguideId:r})})).catch((e=>{(0,h.handleError)(e),s.default.moveResourcesFail()}))},updateComponentsOrder({bid:e,barrelType:t,components:a}){const n={components:a.map((e=>({coid:e.coid,csid:e.csid.join("/"),tcsid:e.tcsid.join("/"),to:e.to})))};_[t].updateComponentsOrder(e,n).then((({variantSections:a})=>{null==a||a.forEach((a=>{const{_id:n,name:i,variant:s,components:r}=a;o.default.setComponentVariantData({bid:e,barrelType:t,csid:n,name:i,sectionVariant:s,components:r})}))})).catch((t=>{const n="Reordering components failed";(0,h.handleError)(t,{fallbackHandler:()=>{T.create({title:n})},serverErrorHandler:()=>{T.create({title:n,message:t.message})}});const i=a.map((e=>({coid:e.coid,csid:e.tcsid,tcsid:e.csid,sourceIndex:e.to,to:e.sourceIndex})));s.default.updateComponentsOrder({bid:e,components:i})}))},addComponentSection({bid:e,barrelType:t,csids:a,componentSection:n}){const i={index:n.index,name:n.name,components:n.components.map((e=>({coid:e.coid,csid:e.csid.join("/")})))};_[t].addComponentSection(e,a,i).then((({_id:n,variantSections:i})=>{s.default.updateComponentSection({bid:e,csids:a.concat(p.TEMPORARY_COMPONENT_SECTION_ID),componentSectionData:{_id:n,csids:a.concat(n),newSection:!1}}),i&&i.forEach((a=>{const{_id:n,name:i,variant:s,components:r}=a;o.default.setComponentVariantData({bid:e,barrelType:t,csid:n,name:i,sectionVariant:s,components:r})}))})).catch((t=>{(0,h.handleError)(t);const i=n.components.map((e=>({coid:e.coid,csid:a.concat(p.TEMPORARY_COMPONENT_SECTION_ID),tcsid:e.csid,to:e.index})));s.default.updateComponentsOrder({bid:e,components:i}),s.default.removeComponentSection({bid:e,csids:a.concat(p.TEMPORARY_COMPONENT_SECTION_ID)})}))},handleUpdateComponentSectionsOrder({bid:e,barrelType:t,componentSections:a}){const n={componentSections:a.map((e=>{const t={csid:e.csid.join("/"),to:e.to};return e.tcsid&&(t.tcsid=e.tcsid.join("/")),t}))};_[t].updateComponentSectionsOrder(e,n).then((({variantSections:a})=>{a&&a.forEach((a=>{const{_id:n,name:i,variant:s,components:r}=a;o.default.setComponentVariantData({bid:e,barrelType:t,csid:n,name:i,sectionVariant:s,components:r})}))})).catch((t=>{(0,h.handleError)(t);const n=a.map((e=>({csid:e.csid,to:e.sourceIndex})));s.default.updateComponentSectionsOrder({bid:e,componentSections:n})}))},handleUpdateWorkflowStatus({barrelType:e,bid:t,workflowStatus:{_id:a},oldWorkflowStatusData:n}){_[e].updateWorkflowStatus([t],a).catch((e=>{(0,h.handleError)(e),s.default.updateWorkflowStatus({bid:t,workflowStatus:n})}))},handleUpdateWorkflowStatuses({statusUpdatedBarrels:e,workflowStatus:{_id:t}}){e.forEach((({barrelType:e,bid:a,oldWorkflowStatusData:n})=>{_[e].updateWorkflowStatus([a],t).catch((e=>{(0,h.handleError)(e),s.default.updateWorkflowStatus({bid:a,workflowStatus:n})}))}))},handleDeleteWorkflowStatus({barrelType:e,bid:t,oldWorkflowStatusData:a}){_[e].deleteWorkflowStatus([t]).catch((e=>{(0,h.handleError)(e),s.default.updateWorkflowStatus({bid:t,workflowStatus:a})}))},handleDeleteWorkflowStatuses({statusDeletedBarrels:e}){e.forEach((({barrelType:e,bid:t,oldWorkflowStatusData:a})=>{_[e].deleteWorkflowStatus([t]).catch((e=>{(0,h.handleError)(e),s.default.updateWorkflowStatus({bid:t,workflowStatus:a})}))}))},handleDeleteConnectedComponents({barrelType:e,bid:t,oldStorybookUrl:a}){_[e].deleteConnectedComponents(t).then((()=>{d.default.setStories([]),s.default.updateConnectedComponents({bid:t,connectedComponents:[]})})).catch((()=>{d.default.updateUrl(a)}))},handleCreateConnectedComponentItem({barrelType:e,bid:t,connectedComponentItem:a}){var n;const i=a._id,r=Object.assign({},a);delete r._id;const[o]=a.links||[],l=null===(n=null==o?void 0:o.metadata)||void 0===n?void 0:n.storybook;_[e].createConnectedComponentItem(t,r).then((e=>{s.default.updateConnectedComponentItem({itemId:i,payload:e}),l&&d.default.addStoryConnectedComponent(`${l.kind}/${l.story}`,e)})).catch((()=>{s.default.deleteConnectedComponentItem({itemId:i}),l&&d.default.removeStoryConnectedComponent(`${l.kind}/${l.story}`,a)}))},handleDeleteConnectedComponentItem({barrelType:e,bid:t,itemId:a,oldConnectedComponentItem:n}){_[e].deleteConnectedComponentItem(t,a).catch((()=>{var e;s.default.createConnectedComponentItem({connectedComponentItem:n});const[t]=n.links||[],a=null===(e=null==t?void 0:t.metadata)||void 0===e?void 0:e.storybook;a&&d.default.addStoryConnectedComponent(`${a.kind}/${a.story}`,n)}))}};function y(){n.default.dispatcher.register((e=>{if(e.syncWithApi)switch(e.type){case i.default.ACTIVATE:A.handleActivate(e);break;case i.default.ARCHIVE:A.handleArchive(e);break;case i.default.REMOVE:A.handleRemove(e);break;case i.default.COPY:A.handleCopy(e);break;case i.default.UPDATE_NAME:A.handleUpdateName(e);break;case i.default.UPDATE_DESCRIPTION:A.handleUpdateDescription(e);break;case i.default.UPDATE_DENSITY_SCALE:A.handleUpdateDensityScale(e);break;case i.default.UPDATE_THUMBNAIL:A.handleUpdateThumbnail(e);break;case i.default.REMOVE_INTEGRATION:A.handleRemoveIntegration(e);break;case i.default.TOGGLE_SCENE:A.handleToggleScene(e);break;case i.default.ADD_MEMBERS:A.handleAddMembers();break;case i.default.UPDATE_USER_ROLE:A.handleUpdateUserRole(e);break;case i.default.TRANSFER_OWNERSHIP:A.handleTransferOwnership(e);break;case i.default.REMOVE_MEMBER:A.handleRemoveMember(e);break;case i.default.ADD_COLOR:A.handleAddColor(e);break;case i.default.UPDATE_COLOR_ORDER:A.handleUpdateColorOrder(e);break;case i.default.ADD_MULTIPLE_COLORS:A.handleAddMultipleColors(e);break;case i.default.UPDATE_COLOR:A.handleUpdateColor(e);break;case i.default.REMOVE_COLOR:A.handleRemoveColor(e);break;case i.default.REMOVE_ALL_COLORS:A.handleRemoveAllColors(e);break;case i.default.MIGRATE_COLORS:A.handleMigrateColors(e);break;case i.default.ADD_TEXT_STYLE:A.handleAddTextStyle(e);break;case i.default.ADD_MULTIPLE_TEXT_STYLES:A.handleAddMultipleTextStyles(e);break;case i.default.UPDATE_TEXT_STYLE:A.handleUpdateTextStyle(e);break;case i.default.REMOVE_TEXT_STYLE:A.handleRemoveTextStyle(e);break;case i.default.REMOVE_ALL_TEXT_STYLES:A.handleRemoveAllTextStyles(e);break;case i.default.ADD_SPACING_SECTION:A.handleAddSpacingSection(e);break;case i.default.UPDATE_SPACING_SECTION:A.handleUpdateSpacingSection(e);break;case i.default.REMOVE_SPACING_SECTION:A.handleRemoveSpacingSection(e);break;case i.default.ADD_SPACING_TOKEN:A.handleAddSpacingToken(e);break;case i.default.UPDATE_SPACING_TOKEN:A.handleUpdateSpacingToken(e);break;case i.default.REMOVE_SPACING_TOKEN:A.handleRemoveSpacingToken(e);break;case i.default.UPDATE_REM_PREFERENCES:A.handleUpdateRemPreferences(e);break;case i.default.UPDATE_COMPONENT_SECTION:A.handleUpdateComponentSection(e);break;case i.default.MERGE_COMPONENT_SECTION:A.handleMergeComponentSection(e);break;case i.default.UPDATE_COMPONENT:A.handleUpdateComponent(e);break;case i.default.REMOVE_COMPONENT:A.handleRemoveComponent(e);break;case i.default.REMOVE_COMPONENTS:A.handleRemoveComponents(e);break;case i.default.JOIN:A.handleJoin(e);break;case i.default.MOVE_RESOURCES_REQUEST:A.handleMoveResourcesRequest(e);break;case i.default.UPDATE_COMPONENTS_ORDER:A.updateComponentsOrder(e);break;case i.default.ADD_COMPONENT_SECTION:A.addComponentSection(e);break;case i.default.UPDATE_COMPONENT_SECTIONS_ORDER:A.handleUpdateComponentSectionsOrder(e);break;case i.default.UPDATE_WORKFLOW_STATUS:A.handleUpdateWorkflowStatus(e);break;case i.default.UPDATE_WORKFLOW_STATUSES:A.handleUpdateWorkflowStatuses(e);break;case i.default.DELETE_WORKFLOW_STATUS:A.handleDeleteWorkflowStatus(e);break;case i.default.DELETE_WORKFLOW_STATUSES:A.handleDeleteWorkflowStatuses(e);break;case i.default.DELETE_CONNECTED_COMPONENTS:A.handleDeleteConnectedComponents(e);break;case i.default.CREATE_CONNECTED_COMPONENT_ITEM:A.handleCreateConnectedComponentItem(e);break;case i.default.DELETE_CONNECTED_COMPONENT_ITEM:A.handleDeleteConnectedComponentItem(e)}}))}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.CONTEXT_MENU="contextMenu",e.ACTIVITIES="activities",e.SPACE_CARD="spaceCard",e.PREVIEW_DIALOG="previewDialog",e.PREVIEW_PAGE="previewPage"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(284),i=a(1055),s=a(264),r=a(6),o=a(76),d=a(5),l=a(106),c=a(104),u=a(404),p=a(123),f=a(120),S=a(125),h=a(79),E=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};function g(e){const t=`${e}-workspace-path`;r.default.ipcRenderer.removeAllListeners(t),r.default.ipcRenderer.once(t,((e,t)=>{i.default.setConnectedComponentsWorkspacePath(t)}))}const O={addToSlackNewFlow({bid:e,barrelType:t}){const{config:a}=s.default.AppStore.getState();if(!a)return;const{slack:{oauthURL:n,clientId:d,scopes:g}}=a,O=(0,l.getRandomString)(),T=(0,c.urlResolve)("redeemSlackCode",{query:t===p.default.PROJECT?{pid:e}:{stid:e}}),m={scope:g,client_id:d,redirect_uri:T,state:O},_=new URL(n);_.search=new URLSearchParams(m),r.default.ipcRenderer.once("redeem-slack-code",((a,n,s)=>E(this,void 0,void 0,(function*(){if(O===s)try{i.default.authenticateSlackIntegration(e);const a=yield t===p.default.PROJECT?(0,f.authProjectSlack)(e,n,T):(0,f.authStyleguideSlack)(e,n,T);yield(0,S.checkResponseError)(a);const{integration:s}=yield a.json(),[r]=s.slacks;if(!r)return void i.default.authenticatingSlackIntegrationFailed(e);const{events:o}=yield t===p.default.PROJECT?(0,f.getProjectIntegrationEvents)(e,r._id):(0,f.getStyleguideIntegrationEvents)(e,r._id);i.default.authenticatedSlackIntegration({bid:e,barrelType:t,integration:r,events:o})}catch(a){i.default.authenticatingSlackIntegrationFailed(e),(0,h.handleError)(a)}else o.create({title:"Could not connect project to Slack",message:"State mismatch, please try again later or let us know: support@zeplin.io"})})))),(0,u.openLink)(_.toString())},addToSlack({bid:e,barrelType:t,name:a}){r.default.ipcRenderer.send("add-to-slack",{id:e,barrelType:t,name:a})},getConnectedComponentsEditorInfo({bid:e}){!function(){const e="editor-info";r.default.ipcRenderer.removeAllListeners(e),r.default.ipcRenderer.once(e,((e,t)=>{i.default.setConnectedComponentsEditorInfo(t)}))}(),r.default.ipcRenderer.send("query-editor-info",{bid:e})},setConnectedComponentsEditorPreference({extension:e,editor:t}){r.default.ipcRenderer.send("set-default-editor",{extension:e,editor:t})},selectConnectedComponentsWorkspaceFolder({bid:e}){g(e),r.default.ipcRenderer.send("select-connected-components-workspace-folder",{bid:e})},openComponentFileInEditor({bid:e,filePath:t,editor:a}){g(e),r.default.ipcRenderer.send("open-file-in-editor",{bid:e,filePath:t,editor:a})}};function T(){d.isWindowsApp&&s.default.dispatcher.register((e=>{switch(e.type){case n.default.ADD_TO_SLACK:d.supports.newSlackIntegrationFlow?O.addToSlackNewFlow(e):O.addToSlack(e);break;case n.default.GET_CONNECTED_COMPONENTS_EDITOR_INFO:O.getConnectedComponentsEditorInfo(e);break;case n.default.SET_CONNECTED_COMPONENTS_EDITOR_PREFERENCE:O.setConnectedComponentsEditorPreference(e);break;case n.default.SELECT_CONNECTED_COMPONENTS_WORKSPACE_FOLDER:O.selectConnectedComponentsWorkspaceFolder(e);break;case n.default.OPEN_COMPONENT_FILE_IN_EDITOR:O.openComponentFileInEditor(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var n=a(284),i=a(1055),s=a(737),r=a(264),o=a(185),d=a(104),l=a(106),c=a(814),u=a(404),p=a(1074),f=a(76),S=a(815),h=a(123),E=a(5),g=a(108),O=a(434),T=a(11),m=a(120),_=a(1101),b=a(17),C=a(808);function A(e){return e?(0,b.getUserDisplayName)(e.user):""}const y={handleGoToDashboard({bid:e,tagFilter:t}){const a=(0,d.getTagQueryParams)(t),n=(0,d.urlResolve)("project-dashboard",{url:{pid:e},query:a});O.default.history.push(n)},handleGoToStyleguide({bid:e}){const t=(0,d.urlResolve)("project-styleguide",{url:{bid:e}});O.default.history.push(t)},handleAdd({barrel:e,barrelType:t}){(0,p.subscribeToBarrelChannel)(t,e._id)},handleGoToFlow({pid:e,flid:t}){const a=t?(0,d.urlResolve)("project-flow",{url:{pid:e,flid:t}}):(0,d.urlResolve)("project-flow-empty",{url:{pid:e}});O.default.history.push(a)},handleArchive({barrelType:e,bid:t,currentBid:a,affectedIds:n,name:i,uid:r,currentUserId:o,user:d,organizationId:l,syncWithApi:c}){if(c&&mixpanel.master.track(`Archived ${e}`,{[`${e}_id`]:t}),a&&n.includes(a)){if(!c&&r!==o){const e=A(d),t=d?`${e} archived “${i}”.`:`“${i}” is archived.`,a="You won’t be able to access its resources from now on."+(d?`\nIf you think this is a mistake, please contact ${e}.`:"");f.create({title:t,message:a})}s.default.navigateToWorkspace({oid:l,barrelType:e})}},handleRemove({bid:e,currentBid:t,barrelType:a,oldBarrel:n,uid:i,currentUserId:r,user:o,oid:d,syncWithApi:l}){if((0,p.unsubscribeFromBarrelChannel)(a,e),l&&mixpanel.master.track(`Deleted ${a}`,{[`${a}_id`]:e}),e===t){if(!l&&i!==r){const e=A(o),{name:t}=n,a=o?`${e} deleted “${t}”.`:`“${t}” is deleted.`,i="You won’t be able to access its resources from now on."+(o?`\nIf you think this is a mistake, please contact ${e}.`:"");f.create({title:a,message:i})}s.default.navigateToWorkspace({oid:d,barrelType:a})}},handleRemoveMember({bid:e,uid:t,barrelType:a,currentBid:n,currentUserId:i,removingUser:r,shouldRemoveBarrel:o,removedBarrel:d,oid:l,syncWithApi:c}){if(o){if((0,p.unsubscribeFromBarrelChannel)(a,e),!c&&t!==i&&e===n){const e=A(r),{name:t}=d,a=r?`${e} removed you from “${t}”.`:`You’re removed from “${t}”.`,n="You won’t be able to access its resources from now on."+(r?`\nIf you think this is a mistake, please contact ${e}.`:"");f.create({title:a,message:n})}e===n&&s.default.navigateToWorkspace({oid:l,barrelType:a})}},handleDownloadAsset({barrelId:e,assetDensityScalePrefs:t,assetNamingConvention:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,platform:r,containerName:d,assets:l,assetId:u,format:p,toastContainer:f,source:S}){(0,c.downloadAsset)({barrelId:e,platform:r,containerName:d,assets:l,assetId:u,format:p,assetDensityScalePrefs:t,assetNamingConvention:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,toastContainer:f}),(0,m.createIntercomUserTag)((0,o.getDeveloperString)(r));const h="all"!==u&&(l.find((e=>e._id===u))||{}).autoExported;mixpanel.master.track("Downloaded asset",{Format:p,Source:S,"Is Auto Exported":h}),setTimeout((()=>C.default.triggerSurvey("Downloaded assets")))},handleDownloadMultipleAsset({barrelId:e,assetDensityScalePrefs:t,assetNamingConvention:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,platform:r,containerName:d,assets:l,assetList:u,toastContainer:p,source:f}){(0,c.downloadMultipleAsset)({barrelId:e,platform:r,containerName:d,assets:l,assetList:u,assetDensityScalePrefs:t,assetNamingConvention:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,toastContainer:p}),(0,m.createIntercomUserTag)((0,o.getDeveloperString)(r));const S=u.some((({assetId:e})=>(l.find((t=>t._id===e))||{}).autoExported));mixpanel.master.track("Downloaded asset",{Source:f,Count:u.length,"Has Auto Exported":S}),setTimeout((()=>C.default.triggerSurvey("Downloaded assets")))},handleExportCode({barrelName:e,platform:t,resourceType:a,source:n,exportObjects:i,extensionId:s}){(0,c.exportCode)({resourceType:a,barrelName:e,exportObjects:i});const{extensions:d}=r.default.ExtensionsStore.getState(),l=d.find((({_id:e})=>e===s));(0,m.createIntercomUserTag)((0,o.getDeveloperString)(t)),mixpanel.master.track("Downloaded code snippet",{Source:n,"Extension ID":l._id,"Extension Name":l.name})},handleCopyCode({code:e,toastContainer:t,platform:a,extensionId:n,source:i}){(0,u.copyContent)({content:e,toastContainer:t});const{extensions:s}=r.default.ExtensionsStore.getState(),d=s.find((({_id:e})=>e===n));mixpanel.master.track("Copied code snippet",{Source:i,"Extension ID":d._id,"Extension Name":d.name}),(0,m.createIntercomUserTag)((0,o.getDeveloperString)(a))},handleOpenExportTarget(){S.openExportTarget()},handleChangeExportTarget(){S.changeExportTarget()},handleCopyComponentSectionWebLink({bid:e,barrelType:t,seid:a}){const n=t===h.default.PROJECT?"project-styleguide-components":"styleguide-components",i=document.querySelector(`.${t}`),s=(0,d.urlResolve)(n,{url:{bid:e},query:{seid:a}});(0,u.copyContent)({content:(0,_.getShortlink)(s),toastContainer:i})},handleCopyComponentSectionAppURI({bid:e,barrelType:t,cseid:a}){const n=t===h.default.PROJECT?"pid":"stid",i=document.querySelector(`.${t}`),s=`${T.ZPL_PROTOCOL}//components?${n}=${e}&cseid=${a}`;(0,u.copyContent)({content:s,toastContainer:i})},fetchComponentSectionShortLink({bid:e,barrelType:t,seid:a}){const n=t===h.default.PROJECT?"project-styleguide-components":"styleguide-components",i=(0,d.urlResolve)(n,{url:{bid:e},query:{seid:a}});(0,_.fetchShortlink)(i)},addToSlack({bid:e,barrelType:t}){const{config:a}=r.default.AppStore.getState();if(E.isWindowsApp||!a)return;const n=(0,l.getRandomString)();localStorage.setItem("slackState",n);const{slack:{oauthURL:i,clientId:s,scopes:o}}=a,c=t===h.default.PROJECT?{pid:e}:{stid:e},p={scope:o,client_id:s,redirect_uri:(0,d.urlResolve)("huggingSlack",{query:c}),state:n},f=new URL(i);f.search=new URLSearchParams(p),(0,u.openLink)(f.toString(),{inNewTab:!1})},trackEnableLocalConfiguration(){mixpanel.master.track("Enabled local configuration for connected components")},fetchLocalConnectedComponents({bid:e,barrelType:t,styleguideLink:a,ancestors:n}){if(t===h.default.PROJECT){if((0,m.getProjectLocalConnectedComponents)(e).then((t=>{i.default.setLocalConnectedComponents(Object.assign({bid:e},t))})),!a)return;const{status:t,styleguide:n}=a;if("active"!==t)return;const s=[n._id,...n.ancestors];return void Promise.all(s.map((e=>(0,m.getStyleguideLocalConnectedComponents)(e)))).then((e=>{e.forEach(((e,t)=>{i.default.setLocalConnectedComponents(Object.assign({bid:s[t]},e))}))}))}const s=[e,...n];Promise.all(s.map((e=>(0,m.getStyleguideLocalConnectedComponents)(e)))).then((e=>{e.forEach(((e,t)=>{i.default.setLocalConnectedComponents(Object.assign({bid:s[t]},e))}))}))},handleAddSpacingSection(){mixpanel.master.track("Created spacing section")},handleUpdateSpacingSection({updatedSpacingSection:e}){e.name&&mixpanel.master.track("Changed spacing section name",{Name:e.name}),Object.prototype.hasOwnProperty.call(e,"description")&&mixpanel.master.track("Changed spacing section description")},handleAddSpacingToken(){mixpanel.master.track("Created spacing token")},handleUpdateSpacingToken({isBaseToken:e,updatedSpacingToken:t}){const{token:a,value:n,color:i}=t;e&&mixpanel.master.track("Changed base token"),a&&mixpanel.master.track("Changed spacing token name"),Object.prototype.hasOwnProperty.call(t,"value")&&mixpanel.master.track("Changed spacing token value",{Value:n}),i&&mixpanel.master.track("Changed spacing token color",{Color:new g.default(i).toHexString()})},handleUpdateRemPreferences({updatedRemPreferences:e,isRevert:t}){const{status:a,useForFontSizes:n,useForMeasurements:i,remRootFontSize:s}=e,r={};t&&mixpanel.master.track("Reverted rem settings"),a&&(r["Is Enabled"]="enabled"===a),Object.prototype.hasOwnProperty.call(e,"useForFontSizes")&&(r["Use for Font Size"]=n),Object.prototype.hasOwnProperty.call(e,"useForMeasurements")&&(r["Use for Measurements"]=i),s&&(r["Root Font Size"]=s),mixpanel.master.track("Changed rem settings",r)},handleUpdateWorkflowStatus({bid:e,workflowStatus:t}){mixpanel.master.track("Set project status",{Name:t.name,Color:t.color.toHexString(),project_id:e})},handleUpdateWorkflowStatuses({workflowStatus:e,statusUpdatedBarrels:t}){t.forEach((({bid:a})=>{mixpanel.master.track("Set project status",{Name:e.name,Color:e.color.toHexString(),"Project Count":t.length,project_id:a})}))},handleDeleteWorkflowStatus({bid:e}){mixpanel.master.track("Remove project status",{project_id:e})},handleDeleteWorkflowStatuses({statusDeletedBarrels:e}){e.forEach((({bid:t})=>{mixpanel.master.track("Remove project status",{"Project Count":e.length,project_id:t})}))},handleUpdateDescription({barrelType:e}){mixpanel.master.track("Changed description",{Target:(0,l.uppercaseFirst)(e)})},handleUpdateComponent({componentData:{description:e}}){e&&mixpanel.master.track("Changed description",{Target:"Component"})},handleActivate({barrelType:e,bid:t}){mixpanel.master.track(`Activated ${e}`,{[`${e}_id`]:t})},handleChangeAssetName({source:e}){mixpanel.master.track("Changed asset name",{Source:e})},handleAddColor(){mixpanel.master.track("Created color")},handleAddComponentSection({isCreateGroup:e}){e?mixpanel.master.track("Created component group"):mixpanel.master.track("Created component section")},handleAddTextStyle(){mixpanel.master.track("Created text style")},handleRemoveColor(){mixpanel.master.track("Deleted color")},handleMergeComponentSection(){mixpanel.master.track("Deleted component section")},handleRemoveSpacingSection(){mixpanel.master.track("Deleted spacing section")},handleRemoveSpacingToken(){mixpanel.master.track("Deleted spacing token")},handleRemoveTextStyle(){mixpanel.master.track("Deleted text style")},handleToggleSVGOptimization({showOptimizedSVG:e}){mixpanel.master.track((e?"Enabled":"Disabled")+" display optimized SVGs")},handleTogglePNGOptimization({showOptimizedPNG:e}){mixpanel.master.track((e?"Enabled":"Disabled")+" display optimized PNGs")},handleToggleJPGOptimization({showOptimizedJPG:e}){mixpanel.master.track((e?"Enabled":"Disabled")+" display optimized JPGs")},handleJoin({barrelType:e,mixpanelSource:t}){mixpanel.master.track(`Joined ${e}`,{Source:t})},handleUpdateComponentsOrder(){mixpanel.master.track("Reordered component")},handleUpdateComponentSection({componentSectionData:{name:e,description:t},isComponentGroup:a}){e&&(a?mixpanel.master.track("Renamed component group"):mixpanel.master.track("Renamed component section")),t&&mixpanel.master.track("Changed description",{Target:"Component section"})},handleChangeAssetNamingConvention({assetNamingConvention:e}){mixpanel.master.track("Selected asset naming convention",{Convention:e})},handleToggleScene({accessibility:e}){e?mixpanel.master.track("Shared project"):mixpanel.master.track("Unshared project")},handleAddMembers({barrelType:e}){"project"===e&&setTimeout((()=>C.default.triggerSurvey("Invited member to a project")))}};function I(){r.default.dispatcher.register((e=>{switch(e.type){case n.default.GO_TO_DASHBOARD:y.handleGoToDashboard(e);break;case n.default.GO_TO_STYLEGUIDE:y.handleGoToStyleguide(e);break;case n.default.GO_TO_FLOW:y.handleGoToFlow(e);break;case n.default.ADD:y.handleAdd(e);break;case n.default.ARCHIVE:y.handleArchive(e);break;case n.default.REMOVE:y.handleRemove(e);break;case n.default.REMOVE_MEMBER:y.handleRemoveMember(e);break;case n.default.DOWNLOAD_ASSET:y.handleDownloadAsset(e);break;case n.default.DOWNLOAD_MULTIPLE_ASSET:y.handleDownloadMultipleAsset(e);break;case n.default.EXPORT_CODE:y.handleExportCode(e);break;case n.default.COPY_CODE:y.handleCopyCode(e);break;case n.default.OPEN_EXPORT_TARGET:y.handleOpenExportTarget();break;case n.default.CHANGE_EXPORT_TARGET:y.handleChangeExportTarget();break;case n.default.COPY_COMPONENT_SECTION_WEB_LINK:y.handleCopyComponentSectionWebLink(e);break;case n.default.COPY_COMPONENT_SECTION_APP_URI:y.handleCopyComponentSectionAppURI(e);break;case n.default.FETCH_COMPONENT_SECTION_SHORT_LINK:y.fetchComponentSectionShortLink(e);break;case n.default.ADD_TO_SLACK:y.addToSlack(e);break;case n.default.ENABLE_DEV_MODE:y.trackEnableLocalConfiguration();break;case n.default.RELOAD_LOCAL_CONNECTED_COMPONENTS:y.fetchLocalConnectedComponents(e);break;case n.default.ADD_SPACING_SECTION:e.syncWithApi&&y.handleAddSpacingSection();break;case n.default.UPDATE_SPACING_SECTION:e.syncWithApi&&y.handleUpdateSpacingSection(e);break;case n.default.ADD_SPACING_TOKEN:e.syncWithApi&&y.handleAddSpacingToken();break;case n.default.UPDATE_SPACING_TOKEN:e.syncWithApi&&y.handleUpdateSpacingToken(e);break;case n.default.UPDATE_REM_PREFERENCES:e.syncWithApi&&y.handleUpdateRemPreferences(e);break;case n.default.UPDATE_WORKFLOW_STATUS:e.syncWithApi&&y.handleUpdateWorkflowStatus(e);break;case n.default.UPDATE_WORKFLOW_STATUSES:e.syncWithApi&&y.handleUpdateWorkflowStatuses(e);break;case n.default.DELETE_WORKFLOW_STATUS:e.syncWithApi&&y.handleDeleteWorkflowStatus(e);break;case n.default.DELETE_WORKFLOW_STATUSES:e.syncWithApi&&y.handleDeleteWorkflowStatuses(e);break;case n.default.UPDATE_DESCRIPTION:e.syncWithApi&&y.handleUpdateDescription(e);break;case n.default.UPDATE_COMPONENT:e.syncWithApi&&y.handleUpdateComponent(e);break;case n.default.ACTIVATE:e.syncWithApi&&y.handleActivate(e);break;case n.default.CHANGE_ASSET_NAME:y.handleChangeAssetName(e);break;case n.default.ADD_COLOR:e.syncWithApi&&y.handleAddColor();break;case n.default.ADD_COMPONENT_SECTION:e.syncWithApi&&y.handleAddComponentSection(e);break;case n.default.ADD_TEXT_STYLE:e.syncWithApi&&y.handleAddTextStyle();break;case n.default.REMOVE_COLOR:e.syncWithApi&&y.handleRemoveColor();break;case n.default.MERGE_COMPONENT_SECTION:e.syncWithApi&&y.handleMergeComponentSection();break;case n.default.REMOVE_SPACING_SECTION:e.syncWithApi&&y.handleRemoveSpacingSection();break;case n.default.REMOVE_SPACING_TOKEN:e.syncWithApi&&y.handleRemoveSpacingToken();break;case n.default.REMOVE_TEXT_STYLE:e.syncWithApi&&y.handleRemoveTextStyle();break;case n.default.TOGGLE_SVG_OPTIMIZATION:y.handleToggleSVGOptimization(e);break;case n.default.TOGGLE_PNG_OPTIMIZATION:y.handleTogglePNGOptimization(e);break;case n.default.TOGGLE_JPG_OPTIMIZATION:y.handleToggleJPGOptimization(e);break;case n.default.JOIN:y.handleJoin(e);break;case n.default.UPDATE_COMPONENTS_ORDER:e.syncWithApi&&y.handleUpdateComponentsOrder();break;case n.default.UPDATE_COMPONENT_SECTION:e.syncWithApi&&y.handleUpdateComponentSection(e);break;case n.default.CHANGE_ASSET_NAMING_CONVENTION:y.handleChangeAssetNamingConvention(e);break;case n.default.TOGGLE_SCENE:e.syncWithApi&&y.handleToggleScene(e);break;case n.default.ADD_MEMBERS:e.syncWithApi&&y.handleAddMembers(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{fetchShortlink:()=>r,getShortlink:()=>o,hasShortlink:()=>d,fetchLongLink:()=>l,getLongLinkFromCache:()=>c});var n=a(120),i=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const s={};function r(e,t){var a;return i(this,void 0,void 0,(function*(){try{return null!==(a=s[e])&&void 0!==a?a:s[e]=yield n.generateShortlink(e,t)}catch(i){return e}}))}function o(e){var t;return null!==(t=s[e])&&void 0!==t?t:e}function d(e){return Boolean(s[e])}function l(e){return i(this,void 0,void 0,(function*(){const t=c(e);if(t)return t;const a=e.toString(),i=yield n.getLongURL(a);return s[i]=a,i}))}function c(e){return t=s,a=e.toString(),Object.keys(t).find((e=>t[e]===a));var t,a}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(284),s=a(13);const r={changeAssetName:({bid:e,containerId:t,assetId:a,name:n})=>s.barrelPrefs.get(e,t,"assetNames").then(((i={})=>(null===n?delete i[a]:i[a]=n,s.barrelPrefs.set(e,t,"assetNames",i)))),setAssetDensityScalePrefs:({bid:e,format:t,assetDensityScalePrefsOfFormat:a})=>s.barrelPrefs.get(e,"assetDensityScalePrefs").then((n=>s.barrelPrefs.set(e,"assetDensityScalePrefs",Object.assign(Object.assign({},n),{[t]:a})))),changeAssetNamingConvention:({bid:e,assetNamingConvention:t})=>s.barrelPrefs.set(e,"assetNamingConvention",t),toggleSVGOptimization:({bid:e,showOptimizedSVG:t})=>s.barrelPrefs.set(e,"showOptimizedSVG",t),togglePNGOptimization:({bid:e,showOptimizedPNG:t})=>s.barrelPrefs.set(e,"showOptimizedPNG",t),toggleJPGOptimization:({bid:e,showOptimizedJPG:t})=>s.barrelPrefs.set(e,"showOptimizedJPG",t),dismissNoResourceInfo:({bid:e})=>s.barrelPrefs.set(e,"noResourceInfoDismissed",!0),markSlackReconnectionAuntieAsSeen:({bid:e})=>s.barrelPrefs.set(e,"slackReconnectionAuntieSeen",!0),hideNoVectorAssetInfo:()=>s.userPrefs.set("noVectorAssetInfoHidden",!0),hideDensityMismatchWarning:()=>s.userPrefs.set("densityMismatchWarningHidden",!0),hideSourceFileInfo:()=>s.userPrefs.set("sourceFileInfoHidden",!0),dismissFlowLinkInfo:()=>s.userPrefs.set("flowLinkInfoDismissed",!0),enableDevMove:()=>sessionStorage.setItem("connectedComponentsDevModeEnabled","true"),disableDevMode:()=>sessionStorage.setItem("connectedComponentsDevModeEnabled","false"),setConnectedComponentsLocalWorkspace:({bid:e,workspace:t})=>s.barrelPrefs.set(e,"connectedComponentsLocalWorkspace",t),hideFlowNewBadge(){s.userPrefs.set("shouldDisplayFlowNewBadge",!1)},markFlowsNewBadgeMenuAsSeen(){s.userPrefs.set("flowsNewBadgeMenuSeen",!0)},markStageModeNewBadgeMenuAsSeen(){s.userPrefs.set("stageModeNewBadgeMenuSeen",!0)}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CHANGE_ASSET_NAME:r.changeAssetName(e);break;case i.default.CHANGE_ASSET_DENSITY_SCALE_PREF:r.setAssetDensityScalePrefs(e);break;case i.default.CHANGE_ASSET_NAMING_CONVENTION:r.changeAssetNamingConvention(e);break;case i.default.TOGGLE_SVG_OPTIMIZATION:r.toggleSVGOptimization(e);break;case i.default.TOGGLE_PNG_OPTIMIZATION:r.togglePNGOptimization(e);break;case i.default.TOGGLE_JPG_OPTIMIZATION:r.toggleJPGOptimization(e);break;case i.default.DISMISS_NO_RESOURCE_INFO:r.dismissNoResourceInfo(e);break;case i.default.HIDE_SLACK_RECONNECTION_AUNTIE:r.markSlackReconnectionAuntieAsSeen(e);break;case i.default.HIDE_NO_VECTOR_ASSET_INFO:r.hideNoVectorAssetInfo();break;case i.default.HIDE_DENSITY_MISMATCH_WARNING:r.hideDensityMismatchWarning();break;case i.default.HIDE_SOURCE_FILE_INFO:r.hideSourceFileInfo();break;case i.default.DISMISS_FLOW_LINK_INFO:r.dismissFlowLinkInfo();break;case i.default.ENABLE_DEV_MODE:r.enableDevMove();break;case i.default.DISABLE_DEV_MODE:r.disableDevMode();break;case i.default.SET_CONNECTED_COMPONENTS_LOCAL_WORKSPACE:r.setConnectedComponentsLocalWorkspace(e);break;case i.default.HIDE_FLOW_NEW_BADGE:r.hideFlowNewBadge();break;case i.default.MARK_FLOWS_NEW_BADGE_MENU_AS_SEEN:r.markFlowsNewBadgeMenuAsSeen();break;case i.default.MARK_STAGE_MODE_NEW_BADGE_MENU_AS_SEEN:r.markStageModeNewBadgeMenuAsSeen()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1104),i=a(1106),s=a(1107);function r(){(0,i.default)(),(0,s.default)(),(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(287),i=a(1105),s=a(264),r=a(1050),o=a(120),d=a(79),l=a(1072),c=a(737);const u={handleCreateSection({pid:e,section:t}){const{_id:a,name:n,screens:s,parent:r}=t,{sections:l}=c.default.getBarrel(),u=l.findIndex((({_id:e})=>e===a)),p=(l[u].path||[]).length;let f=0;for(let i=0;i<u;i++){const e=(l[i].path||[]).length;e===p?f++:e<p&&(f=0)}o.createSection(e,{name:n,screens:s,index:f,parent:r}).then((t=>{i.default.updateSection({pid:e,seid:a,sectionData:t})})).catch((t=>{(0,d.handleError)(t),i.default.removeSection({pid:e,seid:a})}))},handleConvertTagToSection({pid:e,section:t,index:a,defaultSectionId:n,oldDefaultSectionScreens:s}){const{_id:l,name:c,screens:u}=t;o.createSection(e,{name:c,screens:u,index:a}).then((t=>{i.default.updateSection({pid:e,seid:l,sectionData:t,highlight:!0}),r.default.removeTag({pid:e,tag:c,syncWithApi:!0})})).catch((t=>{(0,d.handleError)(t),i.default.updateSection({pid:e,seid:n,sectionData:{screens:s}})}))},handleRenameSection({pid:e,seid:t,name:a,oldName:n,onError:s}){o.updateSection(e,t,{name:a}).catch((a=>{i.default.renameSection({pid:e,seid:t,name:n}),(0,d.handleError)(a,{dialogCallback:s})}))},handleUpdateSectionDescription({pid:e,seid:t,description:a,oldDescription:n,onError:s}){o.updateSection(e,t,{description:a}).catch((a=>{i.default.updateSectionDescription({pid:e,seid:t,description:n}),(0,d.handleError)(a,{dialogCallback:s})}))},handleUpdateSectionOrder({pid:e,seid:t,parent:a,oldIndex:n,oldParent:s}){const{sections:r}=c.default.getBarrel(),l=r.findIndex((({_id:e})=>e===t)),u=(r[l].path||[]).length;let p=0;for(let i=0;i<l;i++){const e=(r[i].path||[]).length;e===u?p++:e<u&&(p=0)}o.updateSectionOrder(e,{sections:[t],to:p,parent:a}).catch((a=>{(0,d.handleError)(a),i.default.updateSectionOrder({pid:e,seid:t,index:n,parent:s})}))},handleRemoveSection({pid:e,seid:t,index:a,removedSection:n}){t.startsWith("newSectionFrom")||o.deleteSection(e,t).catch((t=>{(0,d.handleError)(t),i.default.addSection({pid:e,section:n,index:a})}))},handleUpdateScreenOrderV2({pid:e,items:t,targetIndex:a,targetSectionId:n,oldIndices:s}){o.updateSectionScreensV2({pid:e,seid:n,index:a,items:t}).catch((a=>{(0,d.handleError)(a);for(const[n,{sourceSectionId:r,sourceIndex:o}]of(0,l.default)(t,s))i.default.updateScreenOrderV2({pid:e,items:[n],targetSectionId:r,targetIndex:o})}))},handleCreateVariantGroup({pid:e,vgid:t,screens:a}){const n=a.map((({id:e})=>e));o.createVariantGroup(e,n).then((a=>{i.default.updateVariantGroup({pid:e,vgid:t,variantGroupData:a})})).catch((a=>{(0,d.handleError)(a),i.default.deleteVariantGroup({pid:e,vgid:t})}))},handleDeleteScreens({pid:e,items:t,removedScreensInfo:a,removedVariantGroups:n}){o.deleteScreens(e,t).catch((t=>{(0,d.handleError)(t),a.forEach((({screen:t,seid:a,index:n})=>{r.default.addScreen({pid:e,screen:t,seid:a,index:n})})),n.forEach((t=>{i.default.createVariantGroup({pid:e,vgid:t._id,variantGroupName:t.name,screens:t.screens})}))}))},handleDetachVariantGroup({pid:e,vgid:t,oldVariantGroup:a}){o.detachVariantGroup(e,t).catch((e=>{(0,d.handleError)(e);const{_id:t,name:n,screens:s}=a;i.default.createVariantGroup({vgid:t,variantGroupName:n,screens:s})}))},handleAddScreensToVariantGroup({pid:e,vgid:t,screens:a,oldVariantGroup:n}){const s=a.map((({id:e})=>e));o.addScreensToVariantGroup(e,t,s).then((a=>{i.default.updateVariantGroup({pid:e,vgid:t,variantGroupData:a})})).catch((a=>{(0,d.handleError)(a),i.default.updateVariantGroup({pid:e,vgid:t,variantGroupData:n})}))},handleRenameScreenVariantGroup({pid:e,vgid:t,name:a,oldName:n}){o.updateVariantGroupName(e,t,a).catch((a=>{(0,d.handleError)(a),i.default.renameVariantGroup({pid:e,vgid:t,name:n})}))}};function p(){s.default.dispatcher.register((e=>{if(e.syncWithApi)switch(e.type){case n.default.CREATE_SECTION:u.handleCreateSection(e);break;case n.default.CONVERT_TAG_TO_SECTION:u.handleConvertTagToSection(e);break;case n.default.RENAME_SECTION:u.handleRenameSection(e);break;case n.default.UPDATE_SECTION_DESCRIPTION:u.handleUpdateSectionDescription(e);break;case n.default.UPDATE_SECTION_ORDER:u.handleUpdateSectionOrder(e);break;case n.default.REMOVE_SECTION:u.handleRemoveSection(e);break;case n.default.UPDATE_SCREEN_ORDER_V2:u.handleUpdateScreenOrderV2(e);break;case n.default.CREATE_VARIANT_GROUP:u.handleCreateVariantGroup(e);break;case n.default.ADD_SCREENS_TO_VARIANT_GROUP:u.handleAddScreensToVariantGroup(e);break;case n.default.RENAME_VARIANT_GROUP:u.handleRenameScreenVariantGroup(e);break;case n.default.DELETE_SCREENS:u.handleDeleteScreens(e);break;case n.default.DETACH_VARIANT_GROUP:u.handleDetachVariantGroup(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(264),i=a(737),s=a(287),r=a(789),o=a(106),d=a(124);function l(e={}){var t;const a=null!==(t=e.pid)&&void 0!==t?t:n.default.BarrelStore.getState().barrelId;return Object.assign(Object.assign({},e),{pid:a})}const c={changeSortType(e){n.default.dispatcher.dispatch({type:s.default.CHANGE_SORT_TYPE,sortType:e})},toggleFixedThumbnailSize(){n.default.dispatcher.dispatch({type:s.default.TOGGLE_FIXED_THUMBNAIL_SIZE})},changeSidebarWidth(e){n.default.dispatcher.dispatch({type:s.default.CHANGE_SIDEBAR_WIDTH,sidebarWidth:e})},changeTagFilter(e){n.default.dispatcher.dispatch({type:s.default.CHANGE_TAG_FILTER,tagFilter:e})},expandSections(e){n.default.dispatcher.dispatch({type:s.default.EXPAND_SECTIONS,seids:e})},collapseSections(e){n.default.dispatcher.dispatch({type:s.default.COLLAPSE_SECTIONS,seids:e})},downloadScreens(e,t){n.default.dispatcher.dispatch({type:s.default.DOWNLOAD_SCREENS,screens:e,fileName:t})},downloadScreen(e){const t=r.default.getScreen({sid:e});c.downloadScreens([t],t.name)},downloadScreensOfTag(e){const{screens:t}=i.default.getBarrel(),a=t.filter((({tags:t})=>null==t?void 0:t.includes(e)));c.downloadScreens(a,`${e}.zip`)},downloadScreensOfVariantGroup(e){const{variantGroups:t}=i.default.getBarrel(),a=t.find((({_id:t})=>e===t));if(a){const e=a.screens.map((({id:e})=>r.default.getScreen({sid:e})));c.downloadScreens(e,`${a.name}.zip`)}},unhighlightScreen(e){n.default.dispatcher.dispatch({type:s.default.UNHIGHLIGHT_SCREEN,sid:e})},downloadScreensOfSection(e){const{sections:t,screens:a}=i.default.getBarrel(),n=t.find((t=>t._id===e)),s=n.screens.map((e=>a.find((t=>t._id===e))));c.downloadScreens(s,`${n.name}.zip`)},highlightSection(e){const{seid:t,sectionsToExpand:a}=l(e);n.default.dispatcher.dispatch({type:s.default.HIGHLIGHT_SECTION,seid:t,sectionsToExpand:a})},unhighlightSection(){n.default.dispatcher.dispatch({type:s.default.UNHIGHLIGHT_SECTION})},splitSection(e){const{sections:t}=i.default.getBarrel(),a=t.find((({screens:t})=>t.includes(e))),n=a.screens.indexOf(e),s=t.findIndex((({_id:e})=>e===a._id)),r=a.screens.slice(n),d=t.filter((({path:e})=>(e||[]).includes(a._id))).length,l={_id:`newSectionFromSplit${(0,o.getRandomString)()}`,name:"Untitled section",screens:r};a.parent&&(l.parent=a.parent,l.path=a.path),this.addSection({section:l,index:s+d+1})},addSection(e){const{pid:t,section:a,index:i,syncWithApi:r=!1}=l(e);n.default.dispatcher.dispatch({type:s.default.ADD_SECTION,pid:t,section:a,index:i,syncWithApi:r})},createSection(e){const{pid:t,seid:a,name:r,source:o}=l(e),{sections:d}=i.default.getBarrel(),c=d.find((({_id:e})=>e===a)),u=Object.assign(Object.assign({},c),{name:r});n.default.dispatcher.dispatch({type:s.default.CREATE_SECTION,pid:t,section:u,source:o,syncWithApi:!0})},convertTagToSection(e){const{pid:t,tag:a}=l(e),{screens:r,sections:d}=i.default.getBarrel(),[c]=d,u=r.filter((({tags:e})=>null==e?void 0:e.includes(a))).map((({_id:e})=>e)),p=[...c.screens],f={_id:`newSectionFromTag${(0,o.getRandomString)()}`,name:a,screens:u};n.default.dispatcher.dispatch({type:s.default.CONVERT_TAG_TO_SECTION,pid:t,section:f,index:1,defaultSectionId:c._id,oldDefaultSectionScreens:p,syncWithApi:!0})},updateSection(e){const{pid:t,seid:a,sectionData:i,highlight:r=!1}=l(e);n.default.dispatcher.dispatch({type:s.default.UPDATE_SECTION,pid:t,seid:a,sectionData:i,highlight:r})},renameSection(e){var t;const{pid:a,seid:r,name:o,onError:d,syncWithApi:c=!1}=l(e);let u;if(c){const{sections:e}=i.default.getBarrel();({name:u="Untitled section"}=null!==(t=e.find((({_id:e})=>e===r)))&&void 0!==t?t:{})}n.default.dispatcher.dispatch({type:s.default.RENAME_SECTION,pid:a,seid:r,name:o,oldName:u,onError:d,syncWithApi:c})},updateSectionDescription(e){var t;const{pid:a,seid:r,description:o,onError:d,syncWithApi:c=!1}=l(e);let u;if(c){const{sections:e}=i.default.getBarrel();({description:u=""}=null!==(t=e.find((({_id:e})=>e===r)))&&void 0!==t?t:{})}n.default.dispatcher.dispatch({type:s.default.UPDATE_SECTION_DESCRIPTION,pid:a,seid:r,description:o,oldDescription:u,onError:d,syncWithApi:c})},updateSectionOrder(e){const{pid:t,seid:a,index:r,parent:o,syncWithApi:d=!1,source:c}=l(e);let u,p;if(d){const{sections:e}=i.default.getBarrel();u=e.findIndex((({_id:e})=>e===a)),p=e[u].parent}n.default.dispatcher.dispatch({type:s.default.UPDATE_SECTION_ORDER,pid:t,seid:a,index:r,parent:o,oldIndex:u,oldParent:p,syncWithApi:d,source:c})},removeSection(e){const{pid:t,seid:a,syncWithApi:r=!1}=l(e);let o,d;if(r){const{sections:e}=i.default.getBarrel({bid:t});o=e.findIndex((({_id:e})=>e===a)),d=e[o]}n.default.dispatcher.dispatch({type:s.default.REMOVE_SECTION,pid:t,seid:a,index:o,removedSection:d,syncWithApi:r})},updateScreenOrder(e){const{pid:t,screens:a,targetSectionId:r,targetIndex:o,syncWithApi:c=!1}=l(e),u=i.default.getBarrel({bid:t});if(u.dataStage!==d.default.Complete)return;const{sections:p}=u;let f;c&&(f=a.map((e=>{const{_id:t,screens:a}=p.find((t=>t.screens.includes(e)));return{sourceSectionId:t,sourceIndex:a.findIndex((t=>t===e))}})));let S=o;if(void 0===o){const{screens:{length:e}}=p.find((({_id:e})=>e===r));S=e}n.default.dispatcher.dispatch({type:s.default.UPDATE_SCREEN_ORDER,pid:t,screens:a,targetSectionId:r,targetIndex:S,oldIndices:f,syncWithApi:c})},updateScreenOrderV2(e){const{pid:t,items:a,targetSectionId:r,targetIndex:o,syncWithApi:c=!1}=l(e),u=i.default.getBarrel({bid:t});if(u.dataStage!==d.default.Complete)return;const{sections:p,variantGroups:f}=u;let S;c&&(S=a.map((({_id:e,type:t})=>{let a=e;if("variantGroup"===t){const t=f.find((({_id:t})=>t===e));a=t.screens[0].id}const{_id:n,screens:i}=p.find((({screens:e})=>e.includes(a)));return{sourceSectionId:n,sourceIndex:i.findIndex((e=>e===a))}})));let h=o;if(void 0===o){const{screens:{length:e}}=p.find((({_id:e})=>e===r));h=e}n.default.dispatcher.dispatch({type:s.default.UPDATE_SCREEN_ORDER_V2,pid:t,items:a,targetSectionId:r,targetIndex:h,oldIndices:S,syncWithApi:c})},createVariantGroup(e){const{pid:t,vgid:a,screens:i,variantGroupName:r,shouldOrder:o=!1,syncWithApi:d=!1}=l(e);n.default.dispatcher.dispatch({type:s.default.CREATE_VARIANT_GROUP,pid:t,vgid:a,screens:i,variantGroupName:r,shouldOrder:o,syncWithApi:d})},addScreensToVariantGroup(e){const{pid:t,vgid:a,screens:r,shouldOrder:o=!1,syncWithApi:d=!1}=l(e);let c;if(d){const{variantGroups:e}=i.default.getBarrel({bid:t});c=e.find((({_id:e})=>e===a))}n.default.dispatcher.dispatch({type:s.default.ADD_SCREENS_TO_VARIANT_GROUP,pid:t,vgid:a,screens:r,oldVariantGroup:c,shouldOrder:o,syncWithApi:d})},updateVariantGroup(e){const{pid:t,vgid:a,variantGroupData:o,syncWithApi:d=!1}=l(e);let c;if(d){const{variantGroups:e}=i.default.getBarrel({bid:t});c=e.find((({_id:e})=>e===a))}const u=r.default.getScreens({pid:t,sids:o.screens.map((({id:e})=>e))}).reduce(((e,{_id:t,name:a,versions:n})=>{const[i]=n,{_id:s,snapshot:{width:r,height:o,url:d}}=i;return e[t]={name:a,latestVersion:{_id:s,fullSnapshotUrl:i.fullSnapshotUrl,snapshot:{width:r,height:o,url:d}}},e}),{});n.default.dispatcher.dispatch({type:s.default.UPDATE_VARIANT_GROUP,pid:t,vgid:a,variantGroupData:o,oldVariantGroupData:c,variantScreensData:u,syncWithApi:d})},renameVariantGroup(e){const{pid:t,vgid:a,name:r,syncWithApi:o=!1}=l(e);let d;if(o){const{variantGroups:e}=i.default.getBarrel({bid:t});d=e.find((({_id:e})=>e===a)).name}n.default.dispatcher.dispatch({type:s.default.RENAME_VARIANT_GROUP,pid:t,vgid:a,name:r,oldName:d,syncWithApi:o})},deleteScreens(e){const{pid:t,items:a,uid:o,syncWithApi:d=!1}=l(e),{screenId:c}=n.default.ScreenStore.getState(),u=a.find((e=>"screen"===e.type&&e._id===c));if(c&&u){const e=i.default.getVariantGroupOfScreen(c);if(e){const{screens:t}=e,a=t[0].id===c?t[1].id:t[0].id;r.default.navigateToScreen(a)}}const p=a.filter((e=>"screen"===e.type)).map((e=>{let a,n,i;if((d||u)&&(a=r.default.getScreen({pid:t,sid:e._id}),d)){const a=r.default.getSectionOfScreen({pid:t,sid:e._id});n=null==a?void 0:a._id,i=null==a?void 0:a.screens.indexOf(e._id)}return{screen:a,seid:n,index:i}})).filter((e=>e.screen)),f=a.filter((e=>"variantGroup"===e.type)).map((e=>{const{variantGroups:a=[]}=i.default.getBarrel({bid:t});return a.find((({_id:t})=>e._id===t))})).filter(Boolean);let S;if(f.forEach((e=>{e.screens.forEach((e=>{const a=r.default.getScreen({pid:t,sid:e.id});if(a){let n,i;if(d){const a=r.default.getSectionOfScreen({pid:t,sid:e.id});n=null==a?void 0:a._id,i=null==a?void 0:a.screens.indexOf(e.id)}p.push({screen:a,seid:n,index:i})}}))})),o){S=i.default.getBarrel({bid:t}).findUser(o)}n.default.dispatcher.dispatch({type:s.default.DELETE_SCREENS,pid:t,items:a,removingCurrentScreen:u,removedScreensInfo:p,removedVariantGroups:f,user:S,syncWithApi:d})},deleteVariantGroup(e){const{pid:t,vgid:a,uid:r,screens:o=null,syncWithApi:d=!1}=l(e),{screenId:c}=n.default.ScreenStore.getState();let u,p,f;if(c){const{variantGroups:e=[]}=i.default.getBarrel({bid:t});p=e.find((({_id:e})=>a===e)),u=null==p?void 0:p.screens.some((({id:e})=>e===c))}if(r){f=i.default.getBarrel({bid:t}).findUser(r)}n.default.dispatcher.dispatch({type:s.default.DELETE_VARIANT_GROUP,pid:t,vgid:a,screens:o,user:f,removingCurrentScreen:u,removedVariantGroup:p,syncWithApi:d})},hideScreenVariantsOnboarding(){n.default.dispatcher.dispatch({type:s.default.HIDE_SCREEN_VARIANTS_ONBOARDING})},hideNestedScreenSectionsOnboarding(){n.default.dispatcher.dispatch({type:s.default.HIDE_NESTED_SCREEN_SECTIONS_ONBOARDING})},detachVariantGroup(e){const{pid:t,vgid:a,syncWithApi:r=!1}=l(e);let o;if(r){const{variantGroups:e}=i.default.getBarrel({bid:t});o=e.find((({_id:e})=>e===a))}n.default.dispatcher.dispatch({type:s.default.DETACH_VARIANT_GROUP,pid:t,vgid:a,oldVariantGroup:o,syncWithApi:r})},hideOnboardingEndingHintbox(){n.default.dispatcher.dispatch({type:s.default.HIDE_ONBOARDING_ENDING_HINTBOX})},setSelectedScreens(e){n.default.dispatcher.dispatch({type:s.default.SET_SELECTED_SCREENS,sids:e})},clearScreenSelection(){n.default.dispatcher.dispatch({type:s.default.CLEAR_SCREEN_SELECTION})}},u=c},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(264),i=a(287),s=a(104),r=a(814),o=a(7),d=a(808),l=a(737);const c={changeURL({tagFilter:e}){const{barrelId:t,selectedView:a}=n.default.BarrelStore.getState();if(a!==o.ProjectViewTypes.DASHBOARD)return;const{tags:i,untagged:r}=e,d=r?{untagged:"true"}:{tag:i};history.replaceState({},"",(0,s.urlResolve)("project-dashboard",{url:{pid:t},query:d}))},downloadScreens({screens:e,fileName:t}){(0,r.downloadScreens)(e,t)},createSection({section:{path:e},source:t}){mixpanel.master.track("Created screen section",{Source:t,Level:`L${(e||[]).length+1}`}),setTimeout((()=>d.default.triggerSurvey("Created screen section")))},convertTagToSection(){mixpanel.master.track("Converted tag to section")},removeSection({removedSection:e}){mixpanel.master.track("Deleted screen section",{Level:`L${(e.path||[]).length+1}`})},updateScreenOrder(){mixpanel.master.track("Reordered screen")},renameSection({seid:e}){const{sections:t}=l.default.getBarrel(),{path:a}=t.find((({_id:t})=>t===e))||{};mixpanel.master.track("Renamed screen section",{Level:`L${(a||[]).length+1}`})},changeSortType({sortType:e}){mixpanel.master.track("Sorted screens",{Type:e})},createVariantGroup(){mixpanel.master.track("Created screen variants",{Type:"Create"})},addToVariantGroup(){mixpanel.master.track("Created screen variants",{Type:"Add to"})},hideScreenVariantsOnboarding(){mixpanel.master.track("Dismissed screen variants prompt")},hideNestedScreenSectionsOnboarding(){mixpanel.master.track("Dismissed nested sections prompt")},updateSectionOrder({oldParent:e,parent:t,source:a}){const{sections:n}=l.default.getBarrel(),{path:i}=n.find((({_id:t})=>t===e))||{},{path:s}=n.find((({_id:e})=>e===t))||{},r=e?(i||[]).length+2:1,o=t?(s||[]).length+2:1;mixpanel.master.track("Reordered screen section",{"From Level":`L${r}`,"To Level":`L${o}`,Source:a})},setSelectedScreens({sids:e}){e.length>1&&mixpanel.master.track("Selected multiple screens")}};function u(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CHANGE_TAG_FILTER:c.changeURL(e);break;case i.default.DOWNLOAD_SCREENS:c.downloadScreens(e);break;case i.default.CREATE_SECTION:c.createSection(e);break;case i.default.CONVERT_TAG_TO_SECTION:c.convertTagToSection();break;case i.default.REMOVE_SECTION:e.syncWithApi&&c.removeSection(e);break;case i.default.UPDATE_SCREEN_ORDER:e.syncWithApi&&c.updateScreenOrder();break;case i.default.RENAME_SECTION:c.renameSection(e);break;case i.default.CHANGE_SORT_TYPE:c.changeSortType(e);break;case i.default.CREATE_VARIANT_GROUP:c.createVariantGroup();break;case i.default.ADD_SCREENS_TO_VARIANT_GROUP:c.addToVariantGroup();break;case i.default.HIDE_SCREEN_VARIANTS_ONBOARDING:c.hideScreenVariantsOnboarding();break;case i.default.HIDE_NESTED_SCREEN_SECTIONS_ONBOARDING:c.hideNestedScreenSectionsOnboarding();break;case i.default.SET_SELECTED_SCREENS:c.setSelectedScreens(e);break;case i.default.UPDATE_SECTION_ORDER:e.syncWithApi&&c.updateSectionOrder(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(13),i=a(284),s=a(287),r=a(264);const o={saveFixedThumbnailSize(){const{barrelId:e}=r.default.BarrelStore.getState(),{fixedThumbnailSize:t}=r.default.DashboardStore.getState();n.barrelPrefs.set(e,"fixedThumbnailSize",t)},saveSidebarWidth({sidebarWidth:e}){const{barrelId:t}=r.default.BarrelStore.getState();n.barrelPrefs.set(t,"dashboardSidebarWidth",e)},toggleSectionState(e,{shouldCollapse:t}){if(!e)return;const{barrelId:a}=r.default.BarrelStore.getState();n.barrelPrefs.get(a,"collapsedSections").then((i=>{e.forEach((e=>{i[e]=t})),n.barrelPrefs.set(a,"collapsedSections",i)}))},hideScreenVariantsOnboarding:()=>n.userPrefs.set("screenVariantsOnboardingSeen",!0),hideNestedScreenSectionsOnboarding:()=>n.userPrefs.set("nestedScreenSectionsOnboardingSeen",!0),hideOnboardingEndingHintbox(){const{barrelId:e}=r.default.BarrelStore.getState();n.barrelPrefs.set(e,"dashboardOnboardingEndingHintboxHidden",!0)}};function d(){r.default.dispatcher.register((e=>{switch(e.type){case s.default.TOGGLE_FIXED_THUMBNAIL_SIZE:o.saveFixedThumbnailSize();break;case s.default.CHANGE_SIDEBAR_WIDTH:o.saveSidebarWidth(e);break;case s.default.EXPAND_SECTIONS:o.toggleSectionState(e.seids,{shouldCollapse:!1});break;case s.default.COLLAPSE_SECTIONS:o.toggleSectionState(e.seids,{shouldCollapse:!0});break;case s.default.HIDE_SCREEN_VARIANTS_ONBOARDING:o.hideScreenVariantsOnboarding();break;case s.default.HIDE_NESTED_SCREEN_SECTIONS_ONBOARDING:o.hideNestedScreenSectionsOnboarding();break;case i.default.CHANGE_SELECTED_VIEW:o.toggleSectionState(e.viewUpdate.sectionsToExpand,{shouldCollapse:!1});break;case s.default.HIGHLIGHT_SECTION:o.toggleSectionState(e.sectionsToExpand,{shouldCollapse:!1});break;case s.default.HIDE_ONBOARDING_ENDING_HINTBOX:o.hideOnboardingEndingHintbox()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(390),i=a(120),s=a(264),r=a(1109);const o={requestDotStates({parameters:e}){i.getDotStates(e).then((t=>r.default.addDotStates(e,t))).catch((()=>r.default.dotStatesError(e)))}};function d(){s.default.dispatcher.register((e=>{if(e.type===n.default.RequestDotStates)o.requestDotStates(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(390),i=a(264);const s={requestDotStates(e){i.default.dispatcher.dispatch({type:n.default.RequestDotStates,parameters:e})},addDotStates(e,t){i.default.dispatcher.dispatch({type:n.default.AddDotStates,parameters:e,response:t})},dotStatesError(e){i.default.dispatcher.dispatch({type:n.default.DotStatesError,parameters:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1111);function i(){(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(392),i=a(120),s=a(264),r=a(1067),o=a(284);const d={requestEmojis({pid:e}){i.getProjectSlackIntegrationEmojis(e).then((t=>r.default.addEmojis(e,t))).catch((()=>r.default.emojisError(e)))},handleRemoveIntegration({bid:e,isLastSlackIntegration:t}){t||d.requestEmojis({pid:e})}};function l(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.RequestEmojis:d.requestEmojis(e);break;case o.default.REMOVE_INTEGRATION:d.handleRemoveIntegration(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(1113),i=a(1114),s=a(1115),r=a(1117);function o(){(0,n.default)(),(0,i.default)(),(0,s.default)(),(0,r.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(297),i=a(1049),s=a(264),r=a(79),o=a(120);const d={project:o.project,styleguide:o.styleguide},l={async handleRemove({bid:e,barrelType:t,eid:a,removedExtension:n,local:s}){if(!s)try{await d[t].removeExtension(e,a),mixpanel.master.track("Removed extension",{"Extension ID":a,"Extension Name":n.name})}catch(o){(0,r.handleError)(o),i.default.add({bid:e,extension:n})}}};function c(){s.default.dispatcher.register((e=>{if(e.syncWithApi&&e.type===n.default.REMOVE)l.handleRemove(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(297),i=a(1049),s=a(264),r=a(298),o=a(79),d=a(120);const l={project:d.project,styleguide:d.styleguide},c={async handleInit({bid:e,barrelType:t,enabledExtensions:a}){try{const n=await l[t].getExtensions(e),s=await Promise.all(n.map((a=>new r.WebappExtension(a).load(e,t))));let o=a;null===o&&(o=n.filter((e=>e.default)).map((e=>e._id))||[]),i.default.loadExtensions({bid:e,extensions:s,enabledExtensions:o})}catch(n){(0,o.handleError)(n)}},async handleLoad({bid:e,barrelType:t,uid:a,eid:n}){try{const s=await l[t].addExtension(e,n),o=new r.WebappExtension(s);await o.load(e,t),i.default.add({bid:e,uid:a,extension:o})}catch(s){(0,o.handleError)(s),i.default.remove({bid:e,eid:n})}}};function u(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.INIT:c.handleInit(e);break;case n.default.LOAD:c.handleLoad(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(297),i=a(264),s=a(1116);const r={handleRemove({removedExtension:e}){e.terminate()},handleAdd({local:e}){e&&mixpanel.master.track("Added local extension")},handleOpenSettings({isOnboardingProject:e,onboardingType:t}){e&&(0,s.default)("Extension Setup",t)}};function o(){i.default.dispatcher.register((e=>{switch(e.type){case n.default.REMOVE:r.handleRemove(e);break;case n.default.ADD:r.handleAdd(e);break;case n.default.OPEN_SETTINGS:r.handleOpenSettings(e)}}))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(297),i=a(264),s=a(13);const r={async handleEnable({bid:e,eid:t}){const a=await s.barrelPrefs.get(e,"extensions")||[];s.barrelPrefs.set(e,"extensions",a.concat(t))},async handleDisable({bid:e,eid:t}){const a=(await s.barrelPrefs.get(e,"extensions")||[]).filter((e=>e!==t));return s.barrelPrefs.set(e,"extensions",a)},handleLoadExtensions({bid:e,enabledExtensions:t}){s.barrelPrefs.set(e,"extensions",t)}};function o(){i.default.dispatcher.register((e=>{switch(e.type){case n.default.ADD:case n.default.ENABLE:r.handleEnable(e);break;case n.default.DISABLE:case n.default.REMOVE:r.handleDisable(e);break;case n.default.LOAD_EXTENSIONS:r.handleLoadExtensions(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1119),i=a(1121),s=a(1122);function r(){(0,n.default)(),(0,i.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(321),i=a(1120),s=a(264),r=a(76),o=a(104),d=a(652),l=a(79),c=a(120);function u(e,t,a){(0,l.handleError)(e,{clientErrorHandler:{402(){r.create({title:`Can’t move ${t} to “${a}”`,message:e.message})},default:l.handleError}})}function p(e,t,a){(0,l.handleError)(e,{clientErrorHandler:{402(){r.create({title:"Please upgrade your plan first",message:"Looks like you reached your project limit, upgrade now to create more!",cancel:{name:"CANCEL"},done:{name:"SEE PLANS",cb:()=>(0,d.showPlanChooserOverlay)({source:t,oid:a})}})},default:l.handleError}})}function f({tpid:e,sourceDensityScale:t,targetDensityScale:a}){return a?Promise.resolve():c.updateProjectDensityScale(e,t)}function S(e){const{barrelId:t,resources:[a],target:n,densityScale:i,platform:s}=e;switch(n.type){case"create":!async function({barrelId:e,oid:t,platform:a,densityScale:n,section:i}){const{name:s}=i;let r,d;try{({_id:r,densityScale:d}=await c.createProject({oid:t,platform:a,densityScale:n,name:s}))}catch(l){return void p(l,"Move section to a new project, Reached project limit",t)}try{await f({tpid:r,sourceDensityScale:n,targetDensityScale:d}),await c.transferSection(e,i._id,r),window.location.assign((0,o.urlResolve)("project",{url:{bid:r}}))}catch(l){u(l,"section","a new project")}}({barrelId:t,oid:n.oid,platform:s,densityScale:i,section:a});break;case"project":!async function({barrelId:e,target:t,densityScale:a,section:n}){const i=t.pid,s=a,r=t.densityScale;try{await f({tpid:i,sourceDensityScale:s,targetDensityScale:r}),await c.transferSection(e,n._id,i);const t=(0,o.urlResolve)("project",{url:{bid:i},query:{seid:n._id}});window.location.assign(t)}catch(d){u(d,"section",t.name)}}({barrelId:t,target:n,densityScale:i,section:a})}}const h={move(e){const[{type:t}]=e.resources;switch(t){case"screen":case"variantGroup":!async function(e){const{barrelId:t,resources:a,target:n,target:{type:s,oid:r},densityScale:d,platform:l}=e;let S,h;const E="create"===s?"a new project":`"${n.name}"`;switch(s){case"create":try{({_id:S,densityScale:h}=await c.createProject({oid:r,platform:l,densityScale:d}))}catch(g){return p(g,"Move screen to a new project, Reached project limit",r),void i.default.close()}break;case"project":({pid:S,densityScale:h}=n)}try{await f({tpid:S,sourceDensityScale:d,targetDensityScale:h});const e=a.map((e=>({_id:e._id,type:e.type})));await c.moveScreen(t,S,e);const n="variantGroup"===a[0].type?a[0].screens[0].id:a[0].id;window.location.assign((0,o.urlResolve)("project",{url:{bid:S},query:{sid:n}}))}catch(g){u(g,"screen",E)}}(e);break;case"section":S(e)}}};function E(){s.default.dispatcher.register((e=>{if(e.syncWithApi&&e.type===n.default.MOVE)h.move(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(321),i=a(264);const s={open({targetNode:e,resources:t}){i.default.dispatcher.dispatch({type:n.default.OPEN,targetNode:e,resources:t})},close(){i.default.dispatcher.dispatch({type:n.default.CLOSE})},move({barrelId:e,resources:t,target:a,densityScale:s,platform:r}){i.default.dispatcher.dispatch({type:n.default.MOVE,barrelId:e,resources:t,target:a,densityScale:s,platform:r,syncWithApi:!0})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(321),i=a(264),s=a(738),r=a(79),o=a(120),d=a(1062),l=a(739),c=a(1083);const u={getProjects(e){s.default.getOrganizationProjects(e)||("user"===e?o.getProjects().then((t=>{d.default.getProjectsSuccess({projects:t,oid:e})})).catch(r.handleError):Promise.all([o.getProjects(e),o.getOrganizationMembersWithoutDetails(e)]).then((([t,a])=>{const n=(0,c.getPopulatedOrganizationProjectsWithMembers)(a.members,t);l.default.getOrganizationMembersSuccess(a),d.default.getProjectsSuccess({projects:n,oid:e})})).catch(r.handleError))},getOrganizationsProjects(){const{organizationId:e}=i.default.BarrelStore.getState(),{organizations:t}=i.default.OrganizationStore.getState();t.length&&t.filter((({_id:t})=>t!==e)).forEach((({_id:e})=>this.getProjects(e)))}};function p(){i.default.dispatcher.register((e=>{if(e.type===n.default.OPEN)u.getOrganizationsProjects()}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(321),i=a(264);const s={move({resources:e}){const[t]=e,{type:a}=t;"screen"===a?mixpanel.master.track("Moved screens to project"):"section"===a&&mixpanel.master.track("Moved section to project",{Level:`L${(t.path||[]).length+1}`})}};function r(){i.default.dispatcher.register((e=>{if(e.type===n.default.MOVE)e.syncWithApi&&s.move(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1124),i=a(1125);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(795),i=a(281),s=a(279),r=a(120),o=a(264),d=a(796);const l={onMarkAllAsRead({notifications:e}){const t=e.flatMap((({events:e})=>e)).map((({_id:e})=>e));(0,r.updateNotificationEventsReadStatus)(t,!0).catch((()=>n.default.restoreReadStatus(e)))},onSetEventReadStatus(e,t,a){const i=e._id,s=e.events.filter((({_id:e})=>t.includes(e))),o=d.default.areEventsRead(s);(0,r.updateNotificationEventsReadStatus)(t,a).catch((()=>n.default.setEventReadStatusOffline(i,t,o)))},onSelect({activity:e,eventIds:t,options:{autoSelect:a}}){if(a)return;const n=e.events.filter((({_id:e})=>t.includes(e)));d.default.areEventsRead(n)||this.onSetEventReadStatus(e,t,!0)}};function c(){o.default.dispatcher.register((e=>{switch(e.type){case i.default.MarkAllAsRead:l.onMarkAllAsRead(e);break;case i.default.SetEventReadStatus:l.onSetEventReadStatus(e.notification,e.eventIds,e.markedAsRead);break;case s.default.Select:l.onSelect(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(281),i=a(796),s=a(264);const r={onMarkAllAsRead(){i.default.trackEventWithFilterDetails("Marked all notifications as read")},onSetEventReadStatus({markedAsRead:e}){e||i.default.trackEventWithFilterDetails("Marked notification as unread")}};function o(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.MarkAllAsRead:r.onMarkAllAsRead();break;case n.default.SetEventReadStatus:r.onSetEventReadStatus(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1127),i=a(1128),s=a(1129);function r(){(0,n.default)(),(0,i.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(120),i=a(79),s=a(410),r=a(739),o=a(324),d=a(264),l=a(1062),c=a(1081),u=a(332);let p=!1;const f={getBarrels({oid:e}){Promise.all([n.getProjects(e),n.getStyleguides(e)]).then((([t,a])=>{l.default.getProjectsSuccess({oid:e,projects:t}),c.default.getStyleguidesSuccess({oid:e,styleguides:a})})).catch(i.handleError)},requestInvitation({id:e,container:t}){p?(0,s.default)({text:"Already sent!",container:t,source:"requestOrganizationInvitation"}):n.requestOrganizationInvitation(e).then((()=>{p=!0,(0,s.default)({text:"Invitation sent!",container:t,source:"requestOrganizationInvitation"})})).catch(i.handleError)},addBarrelToFocus({oid:e,mid:t,bid:a,barrelType:s,poppedBarrel:o,syncWithApi:d}){d&&n.addBarrelToOrganizationMemberFocus({oid:e,mid:t,bid:a,barrelType:s}).then((()=>{r.default.addBarrelToFocusSuccess()})).catch((e=>{r.default.removeBarrelFromFocus({mid:t,bid:a,poppedBarrel:o}),i.handleError(e)}))},removeBarrelFromFocus({oid:e,mid:t,bid:a,barrelType:s,syncWithApi:o}){o&&n.removeBarrelFromOrganizationMemberFocus({oid:e,mid:t,bid:a,barrelType:s}).then((()=>{r.default.unpinBarrelFromFocusSuccess({bid:a})})).catch((e=>{r.default.addBarrelToFocus({bid:a,barrelType:s}),i.handleError(e)}))},unpinBarrelFromFocus({oid:e,mid:t,bid:a,barrelType:s,syncWithApi:o}){o&&n.removeBarrelFromOrganizationMemberFocus({oid:e,mid:t,bid:a,barrelType:s}).then((()=>{r.default.unpinBarrelFromFocusSuccess({bid:a})})).catch((t=>{r.default.repinBarrelToFocus({oid:e,bid:a}),i.handleError(t)}))},addOrganizationWorkflowStatus({oid:e,workflowStatusData:{_id:t,name:a,color:s},syncWithApi:o}){o&&n.addOrganizationWorkflowStatus(e,{name:a,color:s}).then((({_id:e})=>{r.default.updateOrganizationWorkflowStatus({workflowStatusId:t,workflowStatusData:{_id:e,name:a,color:s}})})).catch((e=>{r.default.deleteOrganizationWorkflowStatus({workflowStatusId:t}),i.handleError(e)}))},updateOrganizationWorkflowStatus({oid:e,workflowStatusId:t,workflowStatusData:a,oldWorkflowStatusData:s,syncWithApi:o=!0}){o&&n.updateOrganizationWorkflowStatus(e,t,a).catch((e=>{r.default.updateOrganizationWorkflowStatus({workflowStatusId:t,workflowStatusData:{_id:t,name:s.name,color:s.color}}),i.handleError(e)}))},deleteOrganizationWorkflowStatus({oid:e,workflowStatusId:t,oldWorkflowStatusData:a,syncWithApi:s}){s&&n.deleteOrganizationWorkflowStatus(e,t).catch((e=>{r.default.addOrganizationWorkflowStatus({workflowStatusData:a}),i.handleError(e)}))},addProjectSection({oid:e,index:t,sectionData:{name:a,description:s,projects:o},oldIndices:d=[],syncWithApi:l}){l&&n.createOrganizationSection({oid:e,index:t,name:a,description:s,projects:o}).then((({_id:t})=>{r.default.updateProjectSection({oid:e,oseid:u.TEMPORARY_PROJECT_SECTION_ID,sectionData:{_id:t,newSection:!1}})})).catch((t=>{i.handleError(t),d.forEach((({pid:t,oseid:a,index:n})=>{r.default.updateProjectOrder({oid:e,oseid:a,index:n,projects:[t],shouldCalculateActualIndex:!0})})),r.default.removeProjectSection({oid:e,oseid:u.TEMPORARY_PROJECT_SECTION_ID})}))},removeProjectSection({oid:e,oseid:t,oldSectionIndex:a,oldSectionData:s,syncWithApi:o}){o&&n.deleteOrganizationSection(e,t).catch((t=>{i.handleError(t),r.default.addProjectSection({oid:e,index:a,sectionData:s,shouldCalculateActualIndex:!0})}))},updateProjectSection({oid:e,oseid:t,sectionData:a,oldSectionData:s,syncWithApi:o}){o&&n.updateOrganizationSection(Object.assign({oid:e,oseid:t},a)).catch((a=>{r.default.updateProjectSection({oid:e,oseid:t,sectionData:s}),i.handleError(a)}))},handleUpdateProjectSectionOrder({oid:e,oseid:t,index:a,oldSectionIndex:s,syncWithApi:o}){o&&n.updateOrganizationSectionsOrder(e,a,[t]).catch((a=>{i.handleError(a),r.default.updateProjectSectionOrder({oid:e,oseid:t,index:s,shouldCalculateActualIndex:!0})}))},handleUpdateProjectOrder({oid:e,oseid:t,index:a,projects:s,oldIndices:o=[],syncWithApi:d}){d&&n.updateOrganizationSectionProjects(e,t,a,s).catch((t=>{i.handleError(t),o.forEach((({pid:t,oseid:a,index:n})=>{r.default.updateProjectOrder({oid:e,projects:[t],oseid:a,index:n,shouldCalculateActualIndex:!0})}))}))},addSectionLink({oid:e,oseid:t,linkData:{_id:a,title:s,url:o},syncWithApi:d}){d&&n.createOrganizationSectionLink(e,t,s,o).then((({_id:n})=>{r.default.updateSectionLink({oid:e,oseid:t,oselid:a,linkData:{_id:n,title:s,url:o}})})).catch((n=>{i.handleError(n),r.default.removeSectionLink({oid:e,oseid:t,oselid:a})}))},updateSectionLink({oid:e,oseid:t,oselid:a,linkData:{title:s,url:o},oldLink:d,syncWithApi:l}){l&&n.updateOrganizationSectionLink({oid:e,oseid:t,oselid:a,title:s,url:o}).catch((n=>{i.handleError(n),r.default.updateSectionLink({oid:e,oseid:t,oselid:a,linkData:d})}))},removeSectionLink({oid:e,oseid:t,oselid:a,oldLink:s,syncWithApi:o}){o&&n.deleteOrganizationSectionLink(e,t,a).catch((a=>{i.handleError(a),r.default.addSectionLink({oid:e,oseid:t,linkData:s})}))},updateOrganizationSubscription({oid:e,plan:t,oldPlan:a,isReactivation:o,toastContainer:d,onSuccess:l,onError:c,syncWithApi:u}){if(!u)return;(o?n.createOrganizationSubscription:n.updateOrganizationSubscription)(e,{plan:t}).then((a=>{a||((0,s.default)({text:"Plan Updated",source:"planChooserDialog",container:d}),l(e,t))})).catch((t=>{c&&c(),i.handleError(t),r.default.updateOrganizationSubscription({oid:e,plan:a})}))}};function S(){d.default.dispatcher.register((e=>{switch(e.type){case o.default.GET_BARRELS:f.getBarrels(e);break;case o.default.REQUEST_INVITE:f.requestInvitation(e);break;case o.default.ADD_BARREL_TO_FOCUS:f.addBarrelToFocus(e);break;case o.default.REMOVE_BARREL_FROM_FOCUS:f.removeBarrelFromFocus(e);break;case o.default.UNPIN_BARREL_FROM_FOCUS:f.unpinBarrelFromFocus(e);break;case o.default.ADD_ORGANIZATION_WORKFLOW_STATUS:f.addOrganizationWorkflowStatus(e);break;case o.default.UPDATE_ORGANIZATION_WORKFLOW_STATUS:f.updateOrganizationWorkflowStatus(e);break;case o.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:f.deleteOrganizationWorkflowStatus(e);break;case o.default.UPDATE_PROJECT_SECTION_ORDER:f.handleUpdateProjectSectionOrder(e);break;case o.default.UPDATE_PROJECT_ORDER:f.handleUpdateProjectOrder(e);break;case o.default.ADD_PROJECT_SECTION:f.addProjectSection(e);break;case o.default.REMOVE_PROJECT_SECTION:f.removeProjectSection(e);break;case o.default.UPDATE_PROJECT_SECTION:f.updateProjectSection(e);break;case o.default.ADD_SECTION_LINK:f.addSectionLink(e);break;case o.default.UPDATE_SECTION_LINK:f.updateSectionLink(e);break;case o.default.REMOVE_SECTION_LINK:f.removeSectionLink(e);break;case o.default.UPDATE_ORGANIZATION_SUBSCRIPTION:f.updateOrganizationSubscription(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(324),i=a(264);const s={addBarrelToFocusSuccess(){mixpanel.master.track("Pinned project")},unpinBarrelFromFocusSuccess(){mixpanel.master.track("Unpinned project")},onHitPinLimit({focusCountLimit:e,pinnedAnyway:t}){mixpanel.master.track("Hit pin limit",{"Pin Limit":e,"Pinned Anyway":t})},onAddOrganizationWorkflowStatus({workflowStatusData:e}){mixpanel.master.track("Created status",{Name:e.name,Color:e.color.toHexString()})},onUpdateOrganizationWorkflowStatus({workflowStatusData:e,oldWorkflowStatusData:t}){Object.prototype.hasOwnProperty.call(e,"name")?mixpanel.master.track("Changed status name",{Name:e.name,Color:t.color.toHexString(),"From Name":t.name}):Object.prototype.hasOwnProperty.call(e,"color")&&mixpanel.master.track("Changed status color",{Name:t.name,Color:e.color.toHexString(),"From Color":t.color.toHexString()})},onDeleteOrganizationWorkflowStatus({oldWorkflowStatusData:e}){mixpanel.master.track("Removed status",{Name:e.name,Color:e.color.toHexString()})},onAddProjectSection({sectionData:{projects:e}}){mixpanel.master.track("Created project section",{"Is Empty":0===e.length,"Project Count":e.length})},onRemoveProjectSection(){mixpanel.master.track("Disbanded project section")},onAddSectionLink(){mixpanel.master.track("Added link to project section")},onRemoveSectionLink(){mixpanel.master.track("Removed link from project section")},onUpdateProjectOrder({isDefaultSection:e,projects:t}){mixpanel.master.track(e?"Removed project from section":"Moved project to section",{"Project Count":t.length})},onUpdateProjectSection({sectionData:{name:e,description:t}}){e&&mixpanel.master.track("Renamed project section"),t&&mixpanel.master.track("Changed description",{Target:"Project section"})},onUpdateSectionLink(){mixpanel.master.track("Updated project section link")},updateProjectSectionOrder({source:e}){mixpanel.master.track("Reordered project section",{Source:e})}};function r(){i.default.dispatcher.register((e=>{switch(e.type){case n.default.ADD_BARREL_TO_FOCUS_SUCCESS:s.addBarrelToFocusSuccess();break;case n.default.UNPIN_BARREL_FROM_FOCUS_SUCCESS:s.unpinBarrelFromFocusSuccess();break;case n.default.HIT_PIN_LIMIT:s.onHitPinLimit(e);break;case n.default.ADD_ORGANIZATION_WORKFLOW_STATUS:e.syncWithApi&&s.onAddOrganizationWorkflowStatus(e);break;case n.default.UPDATE_ORGANIZATION_WORKFLOW_STATUS:e.syncWithApi&&s.onUpdateOrganizationWorkflowStatus(e);break;case n.default.DELETE_ORGANIZATION_WORKFLOW_STATUS:e.syncWithApi&&s.onDeleteOrganizationWorkflowStatus(e);break;case n.default.ADD_PROJECT_SECTION:e.syncWithApi&&s.onAddProjectSection(e);break;case n.default.REMOVE_PROJECT_SECTION:e.syncWithApi&&s.onRemoveProjectSection();break;case n.default.ADD_SECTION_LINK:e.syncWithApi&&s.onAddSectionLink();break;case n.default.REMOVE_SECTION_LINK:e.syncWithApi&&s.onRemoveSectionLink();break;case n.default.UPDATE_PROJECT_ORDER:e.syncWithApi&&s.onUpdateProjectOrder(e);break;case n.default.UPDATE_PROJECT_SECTION:e.syncWithApi&&s.onUpdateProjectSection(e);break;case n.default.UPDATE_SECTION_LINK:e.syncWithApi&&s.onUpdateSectionLink();break;case n.default.UPDATE_PROJECT_SECTION_ORDER:e.syncWithApi&&s.updateProjectSectionOrder(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(324),i=a(264),s=a(13);const r={addBarrelToFocusSuccess(){s.userPrefs.set("pinnedBarrelOnce",!0)},updateDialogDismissStates({oid:e,dialogDismissParams:t}){if(t)for(const[a,n]of Object.entries(t))s.organizationPrefs.set(e,"dialogDismissStates",a,n)}};function o(){i.default.dispatcher.register((e=>{switch(e.type){case n.default.ADD_BARREL_TO_FOCUS_SUCCESS:r.addBarrelToFocusSuccess();break;case n.default.ADD_PROJECT_SECTION:case n.default.UPDATE_PROJECT_ORDER:case n.default.UPDATE_PROJECT_SECTION_ORDER:r.updateDialogDismissStates(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1131),i=a(1133);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(1132),s=a(334),r=a(120),o=a(79);const d={handleUpdateSeats({oid:e,body:t}){(0,r.updateOrganizationSeats)(e,t).then(i.default.updateSeatsSuccess).catch((e=>{i.default.updateSeatsFailure(),o.handleError(e)}))},handleCancelScheduledSeatsUpdate({oid:e,cancelledScheduledSeatsUpdate:t}){(0,r.cancelOrganizationScheduledSeatsUpdate)(e).then(i.default.cancelScheduledSeatsUpdateSuccess).catch((e=>{i.default.cancelScheduledSeatsUpdateFailure(t),o.handleError(e)}))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case s.default.UPDATE_SEATS_REQUEST:d.handleUpdateSeats(e);break;case s.default.CANCEL_SCHEDULED_SEATS_UPDATE_REQUEST:d.handleCancelScheduledSeatsUpdate(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(334),i=a(264);const s={reset(){i.default.dispatcher.dispatch({type:n.default.RESET})},updateSeats(e,t){i.default.dispatcher.dispatch({type:n.default.UPDATE_SEATS_REQUEST,oid:e,body:t})},updateSeatsSuccess(e){i.default.dispatcher.dispatch({type:n.default.UPDATE_SEATS_SUCCESS,reservedSeatCount:e})},updateSeatsFailure(){i.default.dispatcher.dispatch({type:n.default.UPDATE_SEATS_FAILURE})},getScheduledSeatsUpdate(e){i.default.dispatcher.dispatch({type:n.default.GET_SCHEDULED_SEATS_UPDATE_REQUEST,oid:e})},getScheduledSeatsUpdateSuccess(e){i.default.dispatcher.dispatch({type:n.default.GET_SCHEDULED_SEATS_UPDATE_SUCCESS,scheduledSeatsUpdate:e})},cancelScheduledSeatsUpdate(e){const{scheduledSeatsUpdate:t}=i.default.OrganizationBillingStore.getState();i.default.dispatcher.dispatch({type:n.default.CANCEL_SCHEDULED_SEATS_UPDATE_REQUEST,oid:e,cancelledScheduledSeatsUpdate:t})},cancelScheduledSeatsUpdateSuccess(){i.default.dispatcher.dispatch({type:n.default.CANCEL_SCHEDULED_SEATS_UPDATE_SUCCESS})},cancelScheduledSeatsUpdateFailure(e){i.default.dispatcher.dispatch({type:n.default.CANCEL_SCHEDULED_SEATS_UPDATE_FAILURE,cancelledScheduledSeatsUpdate:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(264),i=a(1132),s=a(334),r=a(120);const o={handleGetScheduledSeatsUpdate({oid:e}){(0,r.getOrganizationScheduledSeatsUpdate)(e).then(i.default.getScheduledSeatsUpdateSuccess)}};function d(){n.default.dispatcher.register((e=>{if(e.type===s.default.GET_SCHEDULED_SEATS_UPDATE_REQUEST)o.handleGetScheduledSeatsUpdate(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(293),i=a(1135),s=a(264),r=a(120),o=a(79),d=a(295),l=a(124);const c={onProjectLink({project:e,styleguide:t,syncWithApi:a}){const{userId:n}=s.default.UserStore.getState(),c=(0,d.default)(e,n),u=e._id;(a?(0,r.updateProjectStyleguideLink)(u,t._id):Promise.resolve()).then((()=>{a&&mixpanel.master.track("Linked project to styleguide");const{styleguides:e}=s.default.StyleguidesDataStore.getState(),n=[];return e[t._id]&&e[t._id].dataStage===l.default.Complete||n.push(t._id),c&&t.ancestors.forEach((t=>{e[t]&&e[t].dataStage===l.default.Complete||n.push(t)})),Promise.all(n.map((e=>(0,r.getStyleguide)(e,{projectId:u}))))})).then((a=>{i.default.linkProjectToStyleguideSuccess({project:e,styleguide:t,styleguides:a})})).catch((e=>{i.default.unlinkProjectFromStyleguide({pid:u,styleguide:t}),o.handleError(e)}))},onProjectUnlink({pid:e,styleguide:t}){(0,r.removeProjectStyleguideLink)(e).catch((a=>{const{projects:{[e]:n}}=s.default.ProjectsDataStore.getState();i.default.linkProjectToStyleguide({project:n,styleguide:t}),o.handleError(a)}))}};function u(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.UNLINK_PROJECT:e.syncWithApi&&c.onProjectUnlink(e);break;case n.default.LINK_PROJECT_REQUEST:c.onProjectLink(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(293),i=a(264);const s={linkProjectToStyleguideRequest({project:e,styleguide:t,syncWithApi:a=!1}){i.default.dispatcher.dispatch({type:n.default.LINK_PROJECT_REQUEST,project:e,styleguide:t,syncWithApi:a})},linkProjectToStyleguideSuccess({project:e,styleguide:t,styleguides:a}){i.default.dispatcher.dispatch({type:n.default.LINK_PROJECT_SUCCESS,project:e,styleguide:t,styleguides:a})},linkProjectToStyleguide({project:e,styleguide:t}){i.default.dispatcher.dispatch({type:n.default.LINK_PROJECT,project:e,styleguide:t})},unlinkProjectFromStyleguide({pid:e,styleguide:t,syncWithApi:a}){i.default.dispatcher.dispatch({type:n.default.UNLINK_PROJECT,pid:e,styleguide:t,syncWithApi:a})},updateProjectStyleguideLink({pid:e,data:t}){i.default.dispatcher.dispatch({type:n.default.UPDATE_PROJECT_STYLEGUIDE_LINK,pid:e,data:t})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(325),i=a(264),s=a(1137);const r={requestProject({pid:e}){setTimeout((()=>(0,s.fetchProject)(e)))}};function o(){i.default.dispatcher.register((e=>{if(e.type===n.default.REQUEST_PROJECT)r.requestProject(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{fetchProject:()=>s});var n=a(1062),i=a(120);function s(e){return n.default.getProjectRequest(),i.getProject(e).then((e=>n.default.getProjectSuccess({project:e}))).catch(n.default.getProjectFailed)}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(262),i=a(13),s=a(5),r=a(264),o=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const d={updatePrefs(){i.userPrefs.set("recentlyLoadedBarrels",r.default.RecentlyLoadedBarrelsStore.getState())}};function l(){return o(this,void 0,void 0,(function*(){if(!s.isWindowsApp)return;const{projects:e,styleguides:t}=yield i.userPrefs.get("recentlyLoadedBarrels");n.default.initRecentlyLoadedBarrels({projects:e,styleguides:t}),r.default.RecentlyLoadedBarrelsStore.addListener((()=>{d.updatePrefs()}))}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(1140),i=a(1141),s=a(1142),r=a(1147),o=a(1148);function d(){(0,n.default)(),(0,i.default)(),(0,s.default)(),(0,r.default)(),(0,o.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var n=a(286),i=a(1050),s=a(120),r=a(79),o=a(1105),d=a(264),l=a(737),c=a(789),u=a(1101),p=a(13),f=a(337),S=a(404),h=a(354),E=a(348),g=a(11);const O={handleUpdateDescription({pid:e,sid:t,description:a,oldDescription:n}){s.updateScreen(e,t,{description:a}).catch((a=>{(0,r.handleError)(a),i.default.updateDescription({pid:e,sid:t,description:n})}))},handleUpdateName({pid:e,sid:t,name:a,oldName:n,onError:o}){s.updateScreen(e,t,{name:a}).catch((a=>{i.default.updateName({pid:e,sid:t,name:n}),(0,r.handleError)(a,{dialogCallback:o})}))},handleRemoveScreen:({pid:e,seid:t,index:a,sid:n,removedScreen:o})=>s.deleteScreens(e,[{type:"screen",_id:n}]).catch((n=>{(0,r.handleError)(n),i.default.addScreen({pid:e,seid:t,index:a,screen:o})})),handleUpdateTags({pid:e,updates:t}){s.updateScreensTags(e,t).then((()=>{const{tagFilter:{tags:e,untagged:t},highlightedScreens:a}=d.default.DashboardStore.getState();if(t||!e.length)return;const{tags:n}=l.default.getBarrel(),i=[...new Set(a.map((e=>c.default.getScreen({sid:e}))).reduce(((e,{tags:t=[]})=>e.concat(t)),[]))],s=e.filter((e=>n.includes(e)&&(!a.length||i.includes(e))));s.length!==e.length&&o.default.changeTagFilter({tags:s,untagged:t})})).catch((a=>{(0,r.handleError)(a);const n=t.map((({_id:e,operation:t,tags:a})=>({_id:e,tags:a,operation:t===h.default.Add?h.default.Remove:h.default.Add})));i.default.updateTags({pid:e,updates:n})}))},handleUpdateCommitColor({pid:e,sid:t,vid:a,color:n,oldColor:o}){s.updateCommitColor(e,t,a,n).catch((n=>{(0,r.handleError)(n),i.default.updateCommitColor({pid:e,sid:t,vid:a,color:o})}))},handleUpdateCommitMessage({pid:e,sid:t,vid:a,message:n,oldMessage:o}){s.updateCommitMessage(e,t,a,n).catch((n=>{(0,r.handleError)(n),i.default.updateCommitMessage({pid:e,sid:t,vid:a,message:o})}))},handleRemoveVersion({pid:e,sid:t,vid:a,removedVersion:n}){s.deleteVersion(e,t,a).then((()=>{i.default.getVersions()})).catch((a=>{(0,r.handleError)(a),i.default.addVersion({pid:e,sid:t,version:n})}))},handleAddDot({pid:e,sid:t,dot:a,hasMention:n,hasImage:o,source:d="Screen"}){const{_id:l,x:c,y:u,color:S,comments:h}=a;s.createDot(e,t,{x:c,y:u,color:S,comments:h}).then((a=>{const s=(0,f.getColorName)(S);p.barrelPrefs.set(e,"lastNoteColorUsed",s),i.default.updateDot({pid:e,sid:t,did:l,dotData:a}),mixpanel.master.track("Added note",{"Is Reply":!1,"Is Reaction Reply":!1,"Is Reply To Mention":!1,"Has Mention":n,"Has Image":o,Source:d})})).catch((a=>{(0,r.handleError)(a),i.default.removeDot({pid:e,sid:t,did:l})}))},handleUpdateDotColor({pid:e,sid:t,did:a,color:n,oldColor:o}){s.updateDot(e,t,a,{color:n}).then((()=>{const t=(0,f.getColorName)(n);p.barrelPrefs.set(e,"lastNoteColorUsed",t),mixpanel.master.track("Changed dot color")})).catch((n=>{(0,r.handleError)(n),i.default.updateDotColor({pid:e,sid:t,did:a,color:o})}))},handleUpdateDotPosition({pid:e,sid:t,did:a,x:n,y:o,oldX:d,oldY:l}){s.updateDot(e,t,a,{x:n,y:o}).catch((n=>{(0,r.handleError)(n),i.default.updateDotPosition({pid:e,sid:t,did:a,x:d,y:l})}))},handleUpdateDotStatus({pid:e,sid:t,did:a,status:n,oldStatus:o,source:d}){s.updateDot(e,t,a,{status:n}).then((()=>{mixpanel.master.track(("open"===n?"Reopened":"Resolved")+" note",{Source:d})})).catch((n=>{(0,r.handleError)(n),i.default.updateDotStatus({pid:e,sid:t,did:a,status:o})}))},handleRemoveDot({pid:e,sid:t,did:a,removedDot:n}){s.deleteDot(e,t,a).then((()=>{mixpanel.master.track("Deleted dot")})).catch((a=>{(0,r.handleError)(a),i.default.addDot({pid:e,sid:t,dot:n})}))},handleCreateComment({pid:e,sid:t,did:a,hasReaction:n,comment:o,toMention:d,hasMention:l,hasImage:c,source:u}){const{_id:p,note:f}=o;s.createDotComment(e,t,a,f).then((s=>{i.default.updateComment({pid:e,sid:t,did:a,cmid:p,commentData:s}),mixpanel.master.track("Added note",{"Is Reply":!0,"Is Reaction Reply":n,"Is Reply To Mention":d,"Has Mention":l,"Has Image":c,Source:u})})).catch((n=>{(0,r.handleError)(n),i.default.removeComment({pid:e,sid:t,did:a,cmid:p})}))},handleUpdateComment({pid:e,sid:t,did:a,cmid:n,commentData:o,oldCommentData:d}){const{note:l}=o,{note:c}=d;l!==c&&s.updateDotCommentNote(e,t,a,n,l).then((()=>{mixpanel.master.track("Edited comment")})).catch((s=>{(0,r.handleError)(s),i.default.updateComment({pid:e,sid:t,did:a,cmid:n,commentData:d})}))},handleRemoveComment({pid:e,sid:t,did:a,cmid:n,removedComment:o}){s.deleteComment(e,t,a,n).then((()=>{mixpanel.master.track("Deleted comment")})).catch((n=>{(0,r.handleError)(n),i.default.addComment({pid:e,sid:t,did:a,comment:o})}))},handleRenameScreenVariant({pid:e,vgid:t,svid:a,name:n,oldName:o}){s.updateVariantGroupScreenVariantName(e,t,a,n).catch((n=>{(0,r.handleError)(n),i.default.renameScreenVariant({pid:e,vgid:t,svid:a,name:o})}))},handleReorderScreenVariant({pid:e,vgid:t,svid:a,index:n,oldIndex:o}){s.updateVariantGroupScreensOrder(e,t,a,n).catch((n=>{(0,r.handleError)(n),i.default.reorderScreenVariant({pid:e,vgid:t,svid:a,index:o})}))},handleRemoveScreenVariant({pid:e,vgid:t,svid:a,oldScreenVariant:n,oldIndex:o}){s.removeScreenFromVariantGroup(e,t,a).catch((a=>{(0,r.handleError)(a),i.default.addScreenVariant({pid:e,vgid:t,screenVariant:n,index:o})}))},handleUpdateAnnotationPosition({pid:e,sid:t,atid:a,componentSourceId:n,x:o,y:d,oldX:l,oldY:c}){(n?s.updateComponentAnnotation(e,a,"coordinates",{x:o,y:d}):s.updateAnnotation(e,t,a,"coordinates",{x:o,y:d})).catch((n=>{(0,r.handleError)(n),i.default.updateAnnotationPosition({pid:e,sid:t,atid:a,x:l,y:c})}))},handleUpdateAnnotationText({pid:e,sid:t,atid:a,componentSourceId:n,annotationData:o,oldAnnotationData:d}){const{text:l}=o,{text:c}=d;if(l===c)return;(n?s.updateComponentAnnotation(e,a,"text",{text:l}):s.updateAnnotation(e,t,a,"text",{text:l})).catch((n=>{(0,r.handleError)(n),i.default.updateAnnotationText({pid:e,sid:t,atid:a,annotationData:d})}))},handleUpdateAnnotationType({pid:e,sid:t,atid:a,componentSourceId:n,newType:o,oldType:d}){if(!o||o===d)return;(n?s.updateComponentAnnotation(e,a,"type",{type:o}):s.updateAnnotation(e,t,a,"type",{type:o})).then((()=>{p.barrelPrefs.set(e,"lastNoteTypeUsed",o)})).catch((n=>{(0,r.handleError)(n),i.default.updateAnnotationType({pid:e,sid:t,atid:a,newType:d})}))},handleDeleteAnnotationType({pid:e,sid:t,atid:a,componentSourceId:n,oldType:o}){(n?s.deleteComponentAnnotationType(e,a):s.deleteAnnotationType(e,t,a)).then((()=>{p.barrelPrefs.set(e,"lastNoteTypeUsed",E.default.None._id)})).catch((n=>{(0,r.handleError)(n),i.default.updateAnnotationType({pid:e,sid:t,atid:a,newType:o})}))},handleRemoveAnnotation({pid:e,sid:t,atid:a,componentSourceId:n,removedAnnotation:o}){(n?s.deleteComponentAnnotation(e,a):s.deleteAnnotation(e,t,a)).catch((a=>{(0,r.handleError)(a),i.default.addAnnotation({pid:e,sid:t,annotation:o})}))},handleAddAnnotation({pid:e,sid:t,annotation:a,hasMention:n,hasImage:o}){const{_id:d,x:c,y:u,text:f,type:S,componentSourceId:h,componentName:g,styleguideComponent:O}=a;(h?s.createComponentAnnotation(e,t,{x:c,y:u,text:f,type:S,componentSourceId:h}):s.createAnnotation(e,t,{x:c,y:u,text:f,type:S})).then((a=>{var s;const r=null!==(s=a.type)&&void 0!==s?s:E.default.None._id;p.barrelPrefs.set(e,"lastNoteTypeUsed",r),i.default.updateAnnotation({pid:e,sid:t,atid:d,annotationData:a});const c=l.default.findNoteType(e,a.type),u=Object.assign({"Has Mention":n,"Has Image":o,Source:"Screen","Is Linked":!!h,"Component Name":h?g:void 0},h?{"Component Type":O?"Styleguide":"Non-styleguide"}:{});mixpanel.master.track("Added annotation",c._id!==E.default.None._id?Object.assign(Object.assign({},u),{"Type ID":c._id,"Type Name":c.name}):u)})).catch((a=>{(0,r.handleError)(a),i.default.removeAnnotation({pid:e,sid:t,atid:d})}))},handleUnlinkAnnotation({pid:e,sid:t,atid:a,x:n,y:o,unlinkedAnnotation:d}){s.unlinkComponentAnnotation(e,t,a,{x:n,y:o}).then((n=>{i.default.updateAnnotation({pid:e,sid:t,atid:a,annotationData:n}),mixpanel.master.track("Unlinked annotation")})).catch((n=>{(0,r.handleError)(n),i.default.removeAnnotation({pid:e,sid:t,atid:a}),i.default.addAnnotation({pid:e,sid:t,annotation:d})}))},handleShareStageModeScreenUrl({url:e}){(0,u.fetchShortlink)(e).then((e=>{const t=`${g.STAGE_SHORTLINK_URL}${new URL(e).pathname}`;(0,S.copyContent)({content:t})}))}};function T(){d.default.dispatcher.register((e=>{if(e.syncWithApi)switch(e.type){case n.default.UPDATE_DESCRIPTION:O.handleUpdateDescription(e);break;case n.default.UPDATE_NAME:O.handleUpdateName(e);break;case n.default.REMOVE_SCREEN:O.handleRemoveScreen(e);break;case n.default.UPDATE_TAGS:O.handleUpdateTags(e);break;case n.default.UPDATE_COMMIT_COLOR:O.handleUpdateCommitColor(e);break;case n.default.UPDATE_COMMIT_MESSAGE:O.handleUpdateCommitMessage(e);break;case n.default.REMOVE_VERSION:O.handleRemoveVersion(e);break;case n.default.ADD_DOT:O.handleAddDot(e);break;case n.default.UPDATE_DOT_COLOR:O.handleUpdateDotColor(e);break;case n.default.UPDATE_DOT_POSITION:O.handleUpdateDotPosition(e);break;case n.default.UPDATE_DOT_STATUS:O.handleUpdateDotStatus(e);break;case n.default.REMOVE_DOT:O.handleRemoveDot(e);break;case n.default.CREATE_COMMENT:O.handleCreateComment(e);break;case n.default.UPDATE_COMMENT:O.handleUpdateComment(e);break;case n.default.REMOVE_COMMENT:O.handleRemoveComment(e);break;case n.default.RENAME_SCREEN_VARIANT:O.handleRenameScreenVariant(e);break;case n.default.REORDER_SCREEN_VARIANT:O.handleReorderScreenVariant(e);break;case n.default.REMOVE_SCREEN_VARIANT:O.handleRemoveScreenVariant(e);break;case n.default.UPDATE_ANNOTATION_POSITION:O.handleUpdateAnnotationPosition(e);break;case n.default.UPDATE_ANNOTATION_TEXT:O.handleUpdateAnnotationText(e);break;case n.default.REMOVE_ANNOTATION:O.handleRemoveAnnotation(e);break;case n.default.UPDATE_ANNOTATION_TYPE:O.handleUpdateAnnotationType(e);break;case n.default.DELETE_ANNOTATION_TYPE:O.handleDeleteAnnotationType(e);break;case n.default.ADD_ANNOTATION:O.handleAddAnnotation(e);break;case n.default.UNLINK_ANNOTATION:O.handleUnlinkAnnotation(e);break;case n.default.SHARE_STAGE_MODE_SCREEN_URL:O.handleShareStageModeScreenUrl(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(6),i=a(5),s=a(1050),r=a(286),o=a(264),d=a(284);const l={querySourceFile(e){n.default.ipcRenderer.removeAllListeners(`${e}:sourceFile`),n.default.ipcRenderer.once(`${e}:sourceFile`,((t,a)=>{s.default.setSourceFile({versionId:e,sourceFile:a})})),n.default.ipcRenderer.send("query-source-file",e)},openSourceFile(e){e&&n.default.ipcRenderer.send("open-item",e)},openSourceFolder(e){e&&n.default.ipcRenderer.send("show-item-in-folder",e)},openPopout({pid:e,name:t,width:a,height:i,url:s}){n.default.ipcRenderer.send("open-popout",{name:t,width:a,height:i,url:s},e)}};function c(){o.default.dispatcher.register((e=>{if(i.isWindowsApp)switch(e.type){case d.default.LOAD_INTERMEDIATE:return l.querySourceFile(e.openScreenData.versionId);case r.default.OPEN_SCREEN:case r.default.SET_VERSION_ID:l.querySourceFile(e.versionId);break;case r.default.OPEN_SOURCE_FILE:l.openSourceFile(e.path);break;case r.default.OPEN_SOURCE_FOLDER:l.openSourceFolder(e.path);break;case r.default.OPEN_POPOUT:l.openPopout(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var n=a(120),i=a(1143),s=a(79),r=a(123),o=a(331),d=a(397),l=a(1144),c=a(1145),u=a(1055),p=a(737),f=a(1068),S=a(264),h=a(738),E=a(284),g=a(357),O=a(1050),T=a(1146),m=a(286),_=a(789),b=a(1051),C=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const A=300;let y,I,N,P;const D={getSnapshot({barrelId:e,screenId:t,versionId:a}){var i;clearTimeout(y);const r=_.default.getScreen();if(!r)return;const o=_.default.getVersion();h.default.isOrganizationFrozen()||(null===(i=null==o?void 0:o.snapshot)||void 0===i?void 0:i.layers)?setTimeout((()=>{var n;const i=null!==(n=null==o?void 0:o.snapshot)&&void 0!==n?n:{},{fetchedScreens:s}=S.default.ScreenComponentsDataStore.getState();s.has(r._id)||(T.default.getVirtualComponentsStats({barrelId:e,screenId:t,versionId:a}),T.default.getComponentsStats({barrelId:e,screenId:t})),O.default.setSnapshot({pid:e,sid:t,vid:a,snapshot:i})}),4):y=setTimeout((()=>{((null==o?void 0:o.fullSnapshotUrl)?n.fetchSnapshot(o.fullSnapshotUrl):n.getSnapshot(e,t,a)).then((e=>{const t=(0,l.createArtboardLayer)(r.name,e);return e.layers.unshift(t),(0,l.preprocessLayers)(e.layers),e})).catch(s.handleError).then(((n={})=>{(null==o?void 0:o.snapshot.tileInfo)&&(n.tileInfo=o.snapshot.tileInfo),this.handleScreenSnapshotAssets({barrelId:e,screenId:t,versionId:a,snapshot:n}),T.default.getVirtualComponentsStats({barrelId:e,screenId:t,versionId:a}),T.default.getComponentsStats({barrelId:e,screenId:t})}))}),A)},getIntermediateSnapshot(e){var t,a,i;clearTimeout(y);const{sid:r,vid:o,did:d,cmid:c,atid:u}=e.screenData,{barrelId:f}=e.barrelData.barrel,{screenId:S,versionId:E}=b.default.getOpenScreenData(r,o,d,c,u,!1,e.barrelData.data.project),g=null===(t=e.barrelData.data.project.screens)||void 0===t?void 0:t.find((e=>e._id===S));if(!g)return;const T=g.versions,m=E||(null===(a=T[0])||void 0===a?void 0:a._id),_=m?T.find((e=>e._id===m)):T[0];p.default.isUserRestricted()||h.default.isOrganizationFrozen()||(null===(i=null==_?void 0:_.snapshot)||void 0===i?void 0:i.layers)?setTimeout((()=>{var e;const t=null!==(e=null==_?void 0:_.snapshot)&&void 0!==e?e:{};O.default.setSnapshot({pid:f,sid:S,vid:m,snapshot:t})}),4):y=setTimeout((()=>{((null==_?void 0:_.fullSnapshotUrl)?n.fetchSnapshot(_.fullSnapshotUrl):n.getSnapshot(f,S,m)).then((e=>{const t=(0,l.createArtboardLayer)(g.name,e);return e.layers.unshift(t),(0,l.preprocessLayers)(e.layers),e})).catch(s.handleError).then(((e={})=>{(null==_?void 0:_.snapshot.tileInfo)&&(e.tileInfo=_.snapshot.tileInfo),this.handleScreenSnapshotAssets({barrelId:f,screenId:S,versionId:m,snapshot:e})}))}),A)},getSnapshotOfNewVersion({pid:e,sid:t,version:{_id:a,fullSnapshotUrl:i,snapshot:{tileInfo:s}}}){return C(this,void 0,void 0,(function*(){const{barrelId:r}=S.default.BarrelStore.getState();if(r!==e)return;const{screenId:o}=S.default.ScreenStore.getState();if(o!==t)return;if(p.default.isUserRestricted()||h.default.isOrganizationFrozen())return;const d=_.default.getScreen();if(d)try{const e=yield n.fetchSnapshot(i),t=(0,l.createArtboardLayer)(d.name,e);s&&(e.tileInfo=s),e.layers.unshift(t),(0,l.preprocessLayers)(e.layers),this.handleScreenSnapshotAssets({barrelId:r,screenId:o,versionId:a,snapshot:e}),T.default.getVirtualComponentsStats({barrelId:r,screenId:o,versionId:a}),T.default.getComponentsStats({barrelId:r,screenId:o})}catch(c){}}))},getDots({barrelId:e,screenId:t,dotId:a}){clearTimeout(I);if(_.default.getDots()){const{highlightedComments:e}=S.default.DotsStore.getState();a&&setTimeout((()=>{O.default.selectDot({dotId:a,commentId:e})}),4)}else I=setTimeout((()=>{n.getDots(e,t).then((({dots:a=[]})=>{O.default.setDots({pid:e,sid:t,dots:a})}))}),A)},getAnnotations({barrelId:e,screenId:t,annotationId:a}){clearTimeout(P);_.default.getAnnotations()?a&&setTimeout((()=>{O.default.selectAnnotation({annotationId:a})}),4):P=setTimeout((()=>{n.getAnnotations(e,t).then((({annotations:a=[]})=>{O.default.setAnnotations({pid:e,sid:t,annotations:a})}))}),A)},getVersions({screenId:e}){clearTimeout(N);const t=_.default.getScreen();if(!t)return;const{versions:a,totalVersionCount:i=1/0,allowedVersionCount:r=1/0}=t;if(!(a.length<r&&i>=r))return;const{barrelId:o}=S.default.BarrelStore.getState();N=setTimeout((()=>{n.getVersions(o,e).then((({versions:e=[],totalVersionCount:t,allowedVersionCount:n})=>(a.forEach((t=>{if(!("layers"in t.snapshot))return;const a=e.find((e=>t._id===e._id));a&&Object.assign(a.snapshot,t.snapshot)})),{versions:e,totalVersionCount:t,allowedVersionCount:n}))).catch((e=>((0,s.handleError)(e),{versions:a,totalVersionCount:i,allowedVersionCount:r}))).then((({versions:t,totalVersionCount:a,allowedVersionCount:n})=>{O.default.setVersions({pid:o,sid:e,versions:t,totalVersionCount:a,allowedVersionCount:n})}))}),A)},getSnapshotOfComponentVariant({coid:e}){return C(this,void 0,void 0,(function*(){const t=p.default.getStyleguidesData({barrelStore:S.default.BarrelStore,styleguidesDataStore:S.default.StyleguidesDataStore,projectsDataStore:S.default.ProjectsDataStore}),a=(0,d.findComponentById)(t,e),{barrelId:s,component:o}=a||{};if(!o)return;const{latestVersion:f}=o;if(f.snapshot.layers&&f.snapshot.layers.length>0)return;const h=[...o.idPath],E=h.pop(),g=p.default.getBarrel({bid:s});try{const e=yield n.fetchSnapshot(f.fullSnapshotUrl),t=(0,l.createArtboardLayer)(o.name,e);if(e.layers.unshift(t),(0,l.preprocessLayers)(e.layers),u.default.setComponentSnapshot({bid:g._id,csids:h,coid:E,vid:f._id,snapshot:(0,l.extendSnapshotWithGivenAssetState)(e,i.AssetStatState.loading)}),!e.assets)return;const a=Object.assign({},e);yield Promise.all(a.assets.map((e=>(0,l.addAssetStats)(g.id,o._id,a,e))));const d=p.default.getBarrel(),S=yield n[d.id===s?r.default.PROJECT:r.default.STYLEGUIDE].getComponentVersionAssets(s,h,E,f._id),O=(null==S?void 0:S.url)?(0,l.extendSnapshotWithGivenAssetState)(a,i.AssetStatState.loading):(0,l.extendSnapshotWithGivenAssetState)(a,i.AssetStatState.ready);if(u.default.setComponentSnapshot({bid:s,csids:h,coid:E,vid:f._id,snapshot:O}),null==S?void 0:S.url){const e=yield n.fetchAssets(S.url);if(e.length>0){yield Promise.all(e.map((e=>(0,l.addAssetStats)(g.id,E,a,e))));const t=e.map((e=>Object.assign(Object.assign({},e),{statState:i.AssetStatState.ready})));c.default.setComponentAssets({coid:E,assets:t})}u.default.setComponentSnapshot({bid:s,csids:h,coid:E,vid:f._id,snapshot:(0,l.extendSnapshotWithGivenAssetState)(a,i.AssetStatState.ready)})}}catch(O){u.default.setComponentSnapshot({bid:g._id,csids:h,coid:E,vid:f._id,snapshot:{}})}}))},handleScreenSnapshotAssets({barrelId:e,screenId:t,versionId:a,snapshot:s}){return C(this,void 0,void 0,(function*(){const r=Object.assign({},s);if(O.default.setSnapshot({pid:e,sid:t,vid:a,snapshot:(0,l.extendSnapshotWithGivenAssetState)(r,i.AssetStatState.loading)}),!s.assets)return;const o=yield n.getVersionAssets(e,t,a);if(null==o?void 0:o.url){const s=yield n.fetchAssets(o.url);if(s.length>0){const n=s.map((e=>Object.assign(Object.assign({},e),{statState:i.AssetStatState.empty})));c.default.setVersionAssets({pid:e,sid:t,vid:a,assets:n})}}else O.default.setSnapshot({pid:e,sid:t,vid:a,snapshot:(0,l.extendSnapshotWithGivenAssetState)(r,i.AssetStatState.empty)})}))},getAssetStats(e){const{screenId:t,snapshot:a,assets:n,selectedAsset:i}=e;if(t&&a&&n)return i?this.getSingleAssetStats(e):this.getAllAssetStats(e)},getSingleAssetStats({screenId:e,isOptimizedAssets:t,snapshot:a,assets:n,selectedAsset:s,barrelId:r,versionId:o}){return C(this,void 0,void 0,(function*(){if(!s||s.statState===i.AssetStatState.ready)return;const d=Object.assign({},a);if(yield(0,l.addAssetStats)(r,e,d,s),t){const t=n.map((e=>e._id===s._id?Object.assign(Object.assign({},e),{statState:i.AssetStatState.ready}):e));c.default.setVersionAssets({pid:r,sid:e,vid:o,assets:t})}else O.default.setSnapshot({pid:r,sid:e,vid:o,snapshot:(0,l.extendSnapshotWithGivenAssetState)(d,i.AssetStatState.ready,s._id)})}))},getAllAssetStats({screenId:e,isOptimizedAssets:t,snapshot:a,assets:n,barrelId:s,versionId:r}){return C(this,void 0,void 0,(function*(){if(null==n?void 0:n.every((({statState:e})=>e===i.AssetStatState.ready)))return;const o=Object.assign({},a);if(yield Promise.all(n.map((t=>t.statState===i.AssetStatState.ready?Promise.resolve():(0,l.addAssetStats)(s,e,o,t)))),t){const t=n.map((e=>Object.assign(Object.assign({},e),{statState:i.AssetStatState.ready})));c.default.setVersionAssets({pid:s,sid:e,vid:r,assets:t})}O.default.setSnapshot({pid:s,sid:e,vid:r,snapshot:(0,l.extendSnapshotWithGivenAssetState)(o,i.AssetStatState.ready)})}))},getFlows({barrelId:e,screenId:t}){return C(this,void 0,void 0,(function*(){clearTimeout(undefined);if(!_.default.getScreen({pid:e,sid:t}))return;const{flows:{[e]:a}}=S.default.FlowStore.getState(),i=(yield n.getScreenFlows(e,t)).map((({_id:e})=>e)),s=a?Object.entries(a).filter((([,e])=>e.connectors)).map((([e])=>e)):[],r=(0,o.difference)(i,s),d=yield Promise.all(r.map((t=>n.getProjectFlow(e,t))));f.default.loadFlows({pid:e,flows:d})}))}};function R(){S.default.dispatcher.register((e=>{switch(e.type){case E.default.LOAD_INTERMEDIATE:D.getIntermediateSnapshot(e),D.getVersions({screenId:e.screenData.sid});break;case m.default.OPEN_SCREEN:D.getSnapshot(e),D.getVersions(e),D.getDots(e),D.getFlows(e),D.getAnnotations(e);break;case m.default.GET_ASSET_STATS:D.getAssetStats(e);break;case m.default.GET_VERSIONS:D.getVersions(e);break;case m.default.GET_FLOWS:D.getFlows(e);break;case m.default.SET_VERSION_ID:D.getSnapshot(e);break;case m.default.ADD_VERSION:D.getSnapshotOfNewVersion(e);break;case g.default.OPEN:case g.default.CHANGE_VARIANT:D.getSnapshotOfComponentVariant(e)}}))}},,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(352),i=a(264);const s={setVersionAssets({pid:e,sid:t,vid:a,assets:s}){i.default.dispatcher.dispatch({type:n.default.SET_VERSION_ASSETS,pid:e,sid:t,vid:a,assets:s})},setComponentAssets({coid:e,assets:t}){i.default.dispatcher.dispatch({type:n.default.SET_COMPONENT_ASSETS,coid:e,assets:t})},setMultipleComponentAssets(e){i.default.dispatcher.dispatch({type:n.default.SET_MULTIPLE_COMPONENT_ASSETS,componentAssets:e})},updateVersionAssetOptimizedContents({vid:e,assets:t}){i.default.dispatcher.dispatch({type:n.default.UPDATE_VERSION_ASSET_OPTIMIZED_CONTENTS,vid:e,assets:t})},processVersionAssetContent({pid:e,sid:t,vid:a,vaid:s,vacid:r,ovacid:o}){i.default.dispatcher.dispatch({type:n.default.PROCESS_VERSION_ASSET_CONTENT_REQUEST,pid:e,sid:t,vid:a,vaid:s,vacid:r,ovacid:o})},processVersionAssetContentFailure({vid:e,vaid:t,vacid:a}){i.default.dispatcher.dispatch({type:n.default.PROCESS_VERSION_ASSET_CONTENT_FAILURE,vid:e,vaid:t,vacid:a})},updateComponentVersionAssetOptimizedContents({coid:e,assets:t}){i.default.dispatcher.dispatch({type:n.default.UPDATE_COMPONENT_VERSION_ASSET_OPTIMIZED_CONTENTS,coid:e,assets:t})},processComponentVersionAssetContent({barrelType:e,bid:t,csids:a,coid:s,vid:r,vaid:o,vacid:d,ovacid:l}){i.default.dispatcher.dispatch({type:n.default.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_REQUEST,barrelType:e,bid:t,csids:a,coid:s,vid:r,vaid:o,vacid:d,ovacid:l})},processComponentVersionAssetContentFailure({coid:e,vaid:t,vacid:a}){i.default.dispatcher.dispatch({type:n.default.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_FAILURE,coid:e,vaid:t,vacid:a})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(367),i=a(264);const s={getComponentsStats({barrelId:e,screenId:t}){i.default.dispatcher.dispatch({type:n.default.GET_COMPONENTS_STATS,barrelId:e,screenId:t})},getComponentsStatsComplete(){i.default.dispatcher.dispatch({type:n.default.GET_COMPONENTS_STATS_COMPLETE})},setComponentsStats({componentsStats:e}){i.default.dispatcher.dispatch({type:n.default.SET_COMPONENTS_STATS,componentsStats:e})},getVirtualComponentsStats({barrelId:e,screenId:t,versionId:a}){i.default.dispatcher.dispatch({type:n.default.GET_VIRTUAL_COMPONENTS_STATS,barrelId:e,screenId:t,versionId:a})},getVirtualComponentsStatsComplete(){i.default.dispatcher.dispatch({type:n.default.GET_VIRTUAL_COMPONENTS_STATS_COMPLETE})},setVirtualComponentsStats({virtualComponentsStats:e}){i.default.dispatcher.dispatch({type:n.default.SET_VIRTUAL_COMPONENTS_STATS,virtualComponentsStats:e})},setVirtualComponents({virtualComponents:e}){i.default.dispatcher.dispatch({type:n.default.SET_VIRTUAL_COMPONENTS,virtualComponents:e})},getStyleguideComponentDetail({pid:e,stid:t,linkedStid:a,csids:s}){i.default.dispatcher.dispatch({type:n.default.GET_STYLEGUIDE_COMPONENT_DETAIL,pid:e,stid:t,linkedStid:a,csids:s.slice(0,s.length-1),coid:s[s.length-1]})},getVirtualComponentDetail({pid:e,sourceId:t}){i.default.dispatcher.dispatch({type:n.default.GET_VIRTUAL_COMPONENT_DETAIL,pid:e,sourceId:t})},getComponentDetailComplete(){i.default.dispatcher.dispatch({type:n.default.GET_COMPONENT_DETAIL_COMPLETE})},setStyleguideComponentDetail(e){i.default.dispatcher.dispatch({type:n.default.SET_STYLEGUIDE_COMPONENT_DETAIL,componentDetail:e})},setVirtualComponentDetail(e){i.default.dispatcher.dispatch({type:n.default.SET_VIRTUAL_COMPONENT_DETAIL,virtualComponentDetail:e})},upsertVirtualComponents({pid:e,virtualComponents:t}){i.default.dispatcher.dispatch({type:n.default.UPSERT_VIRTUAL_COMPONENTS,pid:e,virtualComponents:t})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var n=a(338),i=a(104),s=a(404),r=a(410),o=a(76),d=a(434),l=a(287),c=a(1050),u=a(286),p=a(789),f=a(1052),S=a(357),h=a(264),E=a(363),g=a(17),O=a(348),T=a(354),m=a(284),_=a(13),b=a(1116),C=a(808);let A;const y={notify({pid:e,sid:t,uid:a,did:r,userId:o,username:l,comment:c}){if(a===o)return;const{_id:u,note:p,author:f}=c,S=(0,n.mentionRegexFn)(l);if(!f||!S.test(p))return;const h=(0,i.urlResolve)("project-screen",{url:{pid:e,sid:t},query:{did:r,cmid:u}});(0,s.notify)({title:`${f.username} mentioned you`,body:p,notifier:f,handler(){d.default.history.push(h)}})},selectDot({dotId:e,source:t="Note URL"}){e&&(mixpanel.master.track("Opened note",{Source:t}),setTimeout((()=>C.default.triggerSurvey("Opened comment"))))},warnScreenNotFound({barrelId:e,screenId:t}){p.default.getScreen({sid:t})||(o.create({title:"Screen not available anymore.",message:"It was probably deleted, please contact the owner."}),d.default.history.replace((0,i.urlResolve)("project-dashboard",{url:{pid:e}})))},warnScreensRemoval({pid:e,syncWithApi:t,removedScreensInfo:a,removingCurrentScreen:n,user:s}){var r;if(t||!n)return;const l=null===(r=a.find((({screen:e})=>e._id===n._id)))||void 0===r?void 0:r.screen;d.default.history.replace((0,i.urlResolve)("project-dashboard",{url:{pid:e}}));const{userId:c}=h.default.UserStore.getState();if(c===s.user._id)return;const u=s?(0,g.getUserDisplayName)(s.user):"Anonymous";o.create({title:`${u} deleted this screen`,message:`You won’t be able to access "${l.name}" from now on.`})},warnScreenRemoval({pid:e,syncWithApi:t,removedScreen:a,removingCurrentScreen:n,user:s}){if(t||!n)return;d.default.history.replace((0,i.urlResolve)("project-dashboard",{url:{pid:e}}));const{userId:r}=h.default.UserStore.getState();if(r===s.user._id)return;const l=s?(0,g.getUserDisplayName)(s.user):"Anonymous";o.create({title:`${l} deleted this screen`,message:`You won’t be able to access "${a.name}" from now on.`})},warnVariantGroupRemoval({pid:e,removedVariantGroup:t,removingCurrentScreen:a,user:n}){if(!a)return;d.default.history.replace((0,i.urlResolve)("project-dashboard",{url:{pid:e}}));const{userId:s}=h.default.UserStore.getState();if(s===n.user._id)return;const r=n?(0,g.getUserDisplayName)(n.user):"Anonymous";o.create({title:`${r} deleted this variant group`,message:`You won’t be able to access "${t.name}" from now on.`})},warnVersionRemoval({syncWithApi:e,removingCurrentVersion:t,poppedVersion:a}){if(e)return void mixpanel.master.track("Deleted version");if(!t&&!a)return;const n=t?"deleteScreenVersion":"createScreenVersion";(0,r.default)({text:"Displayed version is not available anymore.",container:document.querySelector("main"),source:n})},changeURLForVersionRemoval({pid:e,removingCurrentVersion:t}){if(!t)return;const{screenId:a}=h.default.ScreenStore.getState();history.replaceState({},"Projects - Screen - Zeplin",(0,i.urlResolve)("project-screen",{url:{pid:e,sid:a}}))},warnVersionNotFound({versionId:e}){const{versions:t,totalVersionCount:a}=p.default.getScreen(),n=t.some((({_id:t})=>t===e));a&&!n&&o.create({title:"Invalid version link",message:"It was either deleted or not accessible due to the limit, please contact the owner."})},updateDescription(){mixpanel.master.track("Changed description",{Target:"Screen"})},updateTags({updates:e,isScreen:t}){const a=e.some((({operation:e})=>e===T.default.Add)),n=e.some((({operation:e})=>e===T.default.Remove));a&&n?mixpanel.master.track("Renamed tag"):a?mixpanel.master.track("Tagged screen"):n&&(t?mixpanel.master.track("Removed tag"):mixpanel.master.track("Deleted tag"))},showVersions(){mixpanel.master.track("Visited app",{Location:"Screen version panel"})},openPopout(){mixpanel.master.track("Popped screen out")},updateSectionDescription(){mixpanel.master.track("Changed description",{Target:"Screen section"})},selectLayer({layer:{constraints:e,layout:t,_id:a},screenId:n,componentId:i}){mixpanel.master.track("Inspected layer",{Source:"Screen","Has Constraints":Boolean(e),"Has Auto Layout":Boolean(t),"Layer ID":a,"Screen ID":n,"Component ID":i})},componentVariantSelectLayer({layer:{constraints:e,layout:t,_id:a},componentId:n,screenId:i}){mixpanel.master.track("Inspected layer",{Source:"Component state","Has Constraints":Boolean(e),"Has Auto Layout":Boolean(t),"Layer ID":a,"Screen ID":i,"Component ID":n})},updateDotPosition(){mixpanel.master.track("Moved dot")},updateCommitColor(){mixpanel.master.track("Updated version color")},updateCommitMessage(){mixpanel.master.track("Updated version commit message")},selectScreenVariant({pid:e,svid:t,usingKeyboardShortcut:a}){const{stageMode:n}=h.default.ScreenStore.getState(),s=n?"project-screen-stage-mode":"project-screen";d.default.history.push((0,i.urlResolve)(s,{url:{pid:e,sid:t}})),mixpanel.master.track("Toggled between screen variants",{"Using Keyboard Shortcut":!!a})},changeComponentsFilter({filter:e,screenId:t}){let a="None";t&&(e===E.default.Show?a="All":e===E.default.ShowConnected?a="Connected components":e===E.default.ShowNotConnected&&(a="Components with no connection"),mixpanel.master.track("Highlighted components",{"Screen ID":t,Highlighted:a}))},selectAnnotation({annotationId:e,source:t,noteType:a,linkedAnnotation:n}){e&&(a&&a!==O.default.None?mixpanel.master.track("Opened annotation",{"Is Linked":n,"Type ID":a._id,"Type Name":a.name,Source:t}):mixpanel.master.track("Opened annotation",{"Is Linked":n,Source:t}),setTimeout((()=>C.default.triggerSurvey("Opened annotation"))))},changeAnnotationFilter({filterId:e,noteType:t}){e&&mixpanel.master.track("Filtered annotations",{"Type ID":t._id,"Type Name":t.name,Source:"Right panel"})},setAnnotations({annotationId:e,noteType:t}){if(e){const e=t&&t._id!==O.default.None._id;mixpanel.master.track("Opened annotation",e?{"Type ID":t._id,"Type Name":t.name,Source:"Annotation URL"}:{Source:"Annotation URL"}),setTimeout((()=>C.default.triggerSurvey("Opened annotation")))}},setAnnotationsForIntermediateLoading({annotationsDetails:{annotationId:e,noteType:t}}){if(e){const e=t&&t._id!==O.default.None._id;mixpanel.master.track("Opened annotation",e?{"Type ID":t._id,"Type Name":t.name,Source:"Annotation URL"}:{Source:"Annotation URL"})}},openOnboardingHighlightScreen({isOnboardingHighlightScreen:e,onboardingType:t}){e&&(0,b.default)("Highlighted Screen",t)},setOnboardingScreenOldVersion({isOnboardingScreenOldVersion:e,onboardingType:t}){e&&(0,b.default)("Previous Version",t)},handleNextScreenOnboardingStep(e){const{screenId:t}=h.default.ScreenStore.getState();if(!f.default.isOnboardingHighlightScreen(t)||!e)return;const a=f.default.getNextOnboardingStep(),{barrelId:n}=h.default.BarrelStore.getState();_.barrelPrefs.set(n,"screenOnboardingStep",a),clearTimeout(A),A=setTimeout((()=>{c.default.setOnboardingStep({step:a})}),5e3)},handleCancelOnboardingStepChange(){clearTimeout(A)},handleOnboardingDotEvent({shouldCompleteDotOnboarding:e,onboardingType:t}){e&&(0,b.default)("Highlighted Comment",t)},handleOnboardingVersionsPanelEvent({isVersionsHighlighted:e,onboardingType:t}){e&&(0,b.default)("Versions Panel",t)},handleOnboardingAssetsEvent({shouldCompleteAssetsOnboarding:e,onboardingType:t}){e&&(0,b.default)("Assets",t)},handleScreenOnboardingStepEvents({step:e,onboardingType:t}){switch(e){case"dot":this.handleOnboardingDotEvent({shouldCompleteDotOnboarding:!0,onboardingType:t});break;case"assets":this.handleOnboardingAssetsEvent({shouldCompleteAssetsOnboarding:!0,onboardingType:t});break;case"versions":this.handleOnboardingVersionsPanelEvent({isVersionsHighlighted:!0,onboardingType:t})}},handleAddDot({syncWithApi:e}){e&&setTimeout((()=>C.default.triggerSurvey("Added comment")))},handleAddAnnotation({syncWithApi:e}){e&&setTimeout((()=>C.default.triggerSurvey("Added annotation")))},handleEnterStageMode({pid:e,sid:t}){mixpanel.master.track("Enabled stage mode",{Source:"Keyboard shortcut"}),history.pushState({},"",(0,i.urlResolve)("project-screen-stage-mode",{url:{pid:e,sid:t}}))},handleLeaveStageMode({pid:e,sid:t}){history.pushState({},"",(0,i.urlResolve)("project-screen",{url:{pid:e,sid:t}}))},handleShareStageModeScreenUrl(){mixpanel.master.track("Copied stage mode link")}};function I(){h.default.dispatcher.register((e=>{switch(e.type){case u.default.OPEN_SCREEN:y.warnScreenNotFound(e),y.selectDot(e),y.openOnboardingHighlightScreen(e);break;case u.default.REMOVE_SCREEN:y.warnScreenRemoval(e);break;case l.default.DELETE_VARIANT_GROUP:y.warnVariantGroupRemoval(e);break;case l.default.DELETE_SCREENS:y.warnScreensRemoval(e);break;case u.default.SET_VERSION_ID:y.warnVersionNotFound(e),y.setOnboardingScreenOldVersion(e),y.handleNextScreenOnboardingStep(e.shouldCompleteVersionsOnboarding);break;case u.default.ADD_VERSION:y.warnVersionRemoval(e);break;case u.default.REMOVE_VERSION:y.warnVersionRemoval(e),y.changeURLForVersionRemoval(e);break;case u.default.ADD_DOT:{const{pid:t,sid:a,uid:n,userId:i,username:s,dot:{_id:r,comments:[o]}}=e;y.notify({pid:t,sid:a,uid:n,did:r,userId:i,username:s,comment:o}),y.handleAddDot(e);break}case u.default.SELECT_DOT:y.selectDot(e),y.handleOnboardingDotEvent(e),y.handleNextScreenOnboardingStep(e.shouldCompleteDotOnboarding);break;case u.default.ADD_COMMENT:y.notify(e);break;case u.default.UPDATE_COMMENT:{const{pid:t,sid:a,uid:n,author:i,userId:s,username:r,did:o,cmid:d,commentData:{note:l}}=e;y.notify({pid:t,sid:a,uid:n,did:o,userId:s,username:r,comment:{_id:d,note:l,author:i}});break}case u.default.UPDATE_DESCRIPTION:e.syncWithApi&&y.updateDescription();break;case u.default.UPDATE_TAGS:e.syncWithApi&&y.updateTags(e);break;case u.default.SHOW_VERSIONS:y.showVersions(),y.handleOnboardingVersionsPanelEvent(e);break;case u.default.OPEN_POPOUT:y.openPopout();break;case l.default.UPDATE_SECTION_DESCRIPTION:e.syncWithApi&&y.updateSectionDescription();break;case u.default.SELECT_LAYER:y.selectLayer(e),y.handleNextScreenOnboardingStep(e.shouldCompleteLayerOnboarding);break;case u.default.UPDATE_DOT_POSITION:y.updateDotPosition();break;case u.default.UPDATE_COMMIT_COLOR:e.syncWithApi&&y.updateCommitColor();break;case u.default.UPDATE_COMMIT_MESSAGE:e.syncWithApi&&y.updateCommitMessage();break;case S.default.SELECT_LAYER:y.componentVariantSelectLayer(e);break;case u.default.SELECT_SCREEN_VARIANT:y.selectScreenVariant(e);break;case u.default.CHANGE_COMPONENTS_FILTER:y.changeComponentsFilter(e);break;case u.default.SELECT_ANNOTATION:y.selectAnnotation(e);break;case u.default.CHANGE_ANNOTATION_FILTER:y.changeAnnotationFilter(e);break;case u.default.SET_ANNOTATIONS:y.setAnnotations(e);break;case m.default.LOAD_INTERMEDIATE:y.selectDot(e.openScreenData),y.openOnboardingHighlightScreen(e.openScreenData),y.setAnnotationsForIntermediateLoading(e);break;case u.default.NOTIFY_ASSETS_TAB_OPENED:y.handleOnboardingAssetsEvent(e),y.handleNextScreenOnboardingStep(e.shouldCompleteAssetsOnboarding);break;case u.default.SET_ONBOARDING_STEP:y.handleCancelOnboardingStepChange();break;case u.default.COMPLETE_ONBOARDING_STEP:y.handleScreenOnboardingStepEvents(e),y.handleNextScreenOnboardingStep(!0);break;case u.default.ADD_ANNOTATION:y.handleAddAnnotation(e);break;case u.default.ENTER_STAGE_MODE:y.handleEnterStageMode(e);break;case u.default.LEAVE_STAGE_MODE:y.handleLeaveStageMode(e);break;case u.default.SHARE_STAGE_MODE_SCREEN_URL:y.handleShareStageModeScreenUrl()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O,PREF_SAVE_DELAY:()=>l});var n=a(13),i=a(264),s=a(357),r=a(286),o=a(15),d=a(284);const l=1e3;let c,u,p,f,S,h,E;const g={saveNoteVisibility(){const{barrelId:e}=i.default.BarrelStore.getState(),{notesVisible:t}=i.default.ScreenStore.getState();clearTimeout(c),c=setTimeout((()=>n.barrelPrefs.set(e,"noteVisibility",t)),l)},saveNoteStatusFilter(e){const{statusFilter:t}=e;if(!t)return;const{barrelId:a}=i.default.BarrelStore.getState();clearTimeout(u),u=setTimeout((()=>{n.barrelPrefs.set(a,"noteStatusFilter",t)}),l)},saveNoteFilter(e){const{barrelId:t}=i.default.BarrelStore.getState(),{status:a,color:s}=e;clearTimeout(u),u=setTimeout((()=>{n.barrelPrefs.set(t,"noteStatusFilter",a),n.barrelPrefs.set(t,"noteColorFilter",s)}),l)},saveZoomLevel(){const{barrelId:e}=i.default.BarrelStore.getState(),{zoomLevel:t}=i.default.ScreenStore.getState();clearTimeout(p),p=setTimeout((()=>n.barrelPrefs.set(e,"zoomLevel",t)),l)},saveGridLayoutEnabled(){const{barrelId:e}=i.default.BarrelStore.getState(),{gridLayoutEnabled:t}=i.default.ScreenStore.getState();clearTimeout(f),f=setTimeout((()=>n.barrelPrefs.set(e,"gridLayoutEnabled",t)),l)},saveVersionsLastSeen({sid:e,date:t}){if(!e)return;clearTimeout(S);const{barrelId:a}=i.default.BarrelStore.getState();S=setTimeout((()=>{n.barrelPrefs.set(a,e,"versionsLastSeen",t)}),l)},saveScreenLastOpened({sid:e,date:t}){if(!e)return;const{barrelId:a}=i.default.BarrelStore.getState();n.barrelPrefs.set(a,e,"lastOpened",t)},saveDatesOnOpenScreen({sid:e,date:t},{sid:a,date:s}){if(!e||!a)return;const{barrelId:r}=i.default.BarrelStore.getState();n.barrelPrefs.set(r,a,"lastOpened",s),n.barrelPrefs.set(r,e,"versionsLastSeen",t)},saveScreenSidebarWidth(){const{barrelId:e}=i.default.BarrelStore.getState(),{screenSidebarWidth:t}=i.default.ScreenStore.getState();n.barrelPrefs.set(e,"screenSidebarWidth",t)},saveVersionsSidebarWidth(){const{barrelId:e}=i.default.BarrelStore.getState(),{versionsSidebarWidth:t}=i.default.ScreenStore.getState();n.barrelPrefs.set(e,"versionsSidebarWidth",t)},hideComponentVariantsOnboardingHintbox(){n.userPrefs.set("componentVariantsOnboardingHintboxSeen",!0)},hideAnnotationFirstTimeLanding(){n.userPrefs.set("annotationFirstTimeLandingHidden",!0)},setComponentVariantViewAsSeen(){n.userPrefs.set("componentVariantViewSeen",!0)},incrementNumberOfLayerComponentViews({shouldIncrementNumberOfLayerComponentViews:e,numberOfLayerComponentViews:t}){e&&n.userPrefs.set("numberOfLayerComponentViews",t+1)},saveLastOpenDates(e){const{pid:t,screenLastOpened:{sid:a,date:i},screenVersionsLastSeen:{sid:s,date:r}}=e;t&&(clearTimeout(h),h=setTimeout((()=>{a&&n.barrelPrefs.set(t,a,"lastOpened",i),s&&n.barrelPrefs.set(t,s,"versionsLastSeen",r)}),l))},saveLastUsedRemarkType(e,t){n.barrelPrefs.set(e,"lastRemarkTypeUsed",t),t===o.default.Annotation&&n.userPrefs.set("annotationFirstTimeLandingHidden",!0)},completeDotOnboarding({shouldCompleteDotOnboarding:e}){if(!e)return;const{barrelId:t}=i.default.BarrelStore.getState();n.barrelPrefs.set(t,"onboardingDotCompleted",!0)},completeVersionsOnboarding({shouldCompleteVersionsOnboarding:e}){if(!e)return;const{barrelId:t}=i.default.BarrelStore.getState();n.barrelPrefs.set(t,"onboardingVersionsCompleted",!0)},completeLayerOnboarding({shouldCompleteLayerOnboarding:e}){if(!e)return;const{barrelId:t}=i.default.BarrelStore.getState();n.barrelPrefs.set(t,"onboardingLayerCompleted",!0)},completeAssetsOnboarding({shouldCompleteAssetsOnboarding:e}){if(!e)return;const{barrelId:t}=i.default.BarrelStore.getState();n.barrelPrefs.set(t,"onboardingAssetsCompleted",!0)},completeScreenOnboardingStep({step:e}){switch(e){case"dot":this.completeDotOnboarding({shouldCompleteDotOnboarding:!0});break;case"assets":this.completeAssetsOnboarding({shouldCompleteAssetsOnboarding:!0});break;case"versions":this.completeVersionsOnboarding({shouldCompleteVersionsOnboarding:!0})}},saveAnnotationStatusFilter(e){const{barrelId:t}=i.default.BarrelStore.getState(),{configFilter:a}=e;clearTimeout(E),E=setTimeout((()=>{n.barrelPrefs.set(t,"annotationStatusFilter",a)}),l)},openOnboardingHighlightScreen({isOnboardingHighlightScreen:e}){if(!e)return;const{barrelId:t}=i.default.BarrelStore.getState();n.barrelPrefs.set(t,"onboardingHighlightScreenOpened",!0)},hideScreenOnboardingFlowHintbox(){const{barrelId:e}=i.default.BarrelStore.getState();n.barrelPrefs.set(e,"screenOnboardingFlowHintboxHidden",!0)},hideStageModeFirstTimeLanding(){n.userPrefs.set("stageModeFirstTimeLandingHidden",!0)}};function O(){i.default.dispatcher.register((e=>{switch(e.type){case d.default.LOAD_INTERMEDIATE:g.saveDatesOnOpenScreen(e.openScreenData.screenVersionsLastSeen,e.openScreenData.screenLastOpened),g.openOnboardingHighlightScreen(e.openScreenData);break;case r.default.SELECT_DOT:g.completeDotOnboarding(e);case r.default.SHOW_NOTES:case r.default.HIDE_NOTES:case r.default.ENABLE_NOTE_MODE:g.saveNoteVisibility();break;case r.default.UPDATE_DOT_STATUS:g.saveNoteStatusFilter(e);break;case r.default.CHANGE_DOT_FILTER:g.saveNoteFilter(e);break;case r.default.ZOOM_WITH_GESTURE:case r.default.ZOOM_WITH_WHEEL:case r.default.CHANGE_ZOOM_LEVEL:case r.default.RESET_ZOOM:case r.default.ZOOM_IN:case r.default.ZOOM_OUT:g.saveZoomLevel();break;case r.default.TOGGLE_GRID_LAYOUT:g.saveGridLayoutEnabled();break;case r.default.CHANGE_SCREEN_SIDEBAR_WIDTH:g.saveScreenSidebarWidth();break;case r.default.CHANGE_VERSIONS_SIDEBAR_WIDTH:g.saveVersionsSidebarWidth();break;case r.default.HIDE_VERSIONS:case r.default.TOGGLE_VERSIONS:case r.default.ADD_VERSION:case r.default.SHOW_VERSIONS:g.saveScreenLastOpened(e.screenLastOpened),g.saveVersionsLastSeen(e.screenVersionsLastSeen);break;case r.default.OPEN_SCREEN:g.saveDatesOnOpenScreen(e.screenVersionsLastSeen,e.screenLastOpened),g.openOnboardingHighlightScreen(e);break;case r.default.SET_VERSION_ID:g.completeVersionsOnboarding(e);break;case r.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_HINTBOX:g.hideComponentVariantsOnboardingHintbox();break;case r.default.HIDE_ANNOTATION_LANDING:case r.default.ADD_ANNOTATION:g.hideAnnotationFirstTimeLanding();break;case r.default.SELECT_ANNOTATION:g.saveNoteVisibility(),g.hideAnnotationFirstTimeLanding();break;case r.default.SELECT_LAYER:g.incrementNumberOfLayerComponentViews(e),g.completeLayerOnboarding(e);break;case s.default.OPEN:g.setComponentVariantViewAsSeen();break;case r.default.SET_LAST_OPEN_DATES:g.saveLastOpenDates(e);break;case r.default.UPDATE_DOTPOPUP_REMARK_TYPE:g.saveLastUsedRemarkType(e.pid,e.remarkType);break;case r.default.CREATE_NOTE:g.saveLastUsedRemarkType(e.pid,o.default.Dot),g.saveNoteVisibility();break;case r.default.CREATE_ANNOTATION:g.saveLastUsedRemarkType(e.pid,o.default.Annotation),g.saveNoteVisibility(),g.hideAnnotationFirstTimeLanding();break;case r.default.CHANGE_ANNOTATION_CONFIG_FILTER:g.saveAnnotationStatusFilter(e);break;case r.default.NOTIFY_ASSETS_TAB_OPENED:g.completeAssetsOnboarding(e);break;case r.default.COMPLETE_ONBOARDING_STEP:g.completeScreenOnboardingStep(e);break;case r.default.HIDE_ONBOARDING_FLOW_HINTBOX:g.hideScreenOnboardingFlowHintbox();break;case r.default.HIDE_STAGE_MODE_FIRST_TIME_LANDING:g.hideStageModeFirstTimeLanding()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1150);function i(){(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(120),i=a(264),s=a(367),r=a(1146),o=a(789),d=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const l={getComponentStats({barrelId:e,screenId:t}){return d(this,void 0,void 0,(function*(){try{const a=o.default.getScreenComponentIdsOfComponentsWithSourceIds({pid:e,sid:t});if(a.length){const t=yield n.getProjectComponentsStats(e,a);r.default.setComponentsStats({componentsStats:t})}}catch(a){}finally{setTimeout((()=>{r.default.getComponentsStatsComplete()}),0)}}))},getVirtualComponentStats({barrelId:e,screenId:t,versionId:a}){return d(this,void 0,void 0,(function*(){try{const i=yield n.getScreenVirtualComponents(e,t,a);r.default.setVirtualComponents({virtualComponents:i});const s=i.map((({sourceId:e})=>e));if(s.length){const t=yield n.getProjectVirtualComponentsStats(e,s);r.default.setVirtualComponentsStats({virtualComponentsStats:t})}}catch(i){}finally{setTimeout((()=>{r.default.getVirtualComponentsStatsComplete()}),0)}}))},getStyleguideComponentDetail({pid:e,stid:t,linkedStid:a,csids:i,coid:s}){return d(this,void 0,void 0,(function*(){try{const o=e===t?yield n.getLocalStyleguideComponentDetail(e,i,s):yield n.getGlobalStyleguideComponentDetail({pid:e,stid:t,linkedStid:a,csids:i,coid:s});r.default.setStyleguideComponentDetail(o)}finally{setTimeout((()=>{r.default.getComponentDetailComplete()}),0)}}))},getVirtualComponentDetail({pid:e,sourceId:t}){return d(this,void 0,void 0,(function*(){try{const a=yield n.getVirtualComponentDetail(e,t);r.default.setVirtualComponentDetail(a)}finally{setTimeout((()=>{r.default.getComponentDetailComplete()}),0)}}))},upsertVirtualComponent({pid:e,virtualComponents:t}){return d(this,void 0,void 0,(function*(){try{const a=t.map((({sourceId:e})=>e)),i=yield n.getProjectVirtualComponentsStats(e,a);r.default.setVirtualComponentsStats({virtualComponentsStats:i})}finally{setTimeout((()=>{r.default.getVirtualComponentsStatsComplete()}),0)}}))}};function c(){i.default.dispatcher.register((e=>{switch(e.type){case s.default.GET_COMPONENTS_STATS:l.getComponentStats(e);break;case s.default.GET_VIRTUAL_COMPONENTS_STATS:l.getVirtualComponentStats(e);break;case s.default.GET_STYLEGUIDE_COMPONENT_DETAIL:l.getStyleguideComponentDetail(e);break;case s.default.GET_VIRTUAL_COMPONENT_DETAIL:l.getVirtualComponentDetail(e);break;case s.default.UPSERT_VIRTUAL_COMPONENTS:l.upsertVirtualComponent(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(1063),i=a(369),s=a(264),r=a(79),o=a(370),d=a(76),l=a(120),c=a(737);const u={project:l.project,styleguide:l.styleguide},p={initChannel:e=>u[s.default.BarrelStore.getState().barrelType].getIntegrationEvents(c.default.getBarrel()._id,e).then((t=>n.default.load(e,t.events))),init(){c.default.getBarrel().integration.slacks.forEach((e=>{this.initChannel(e._id).catch((()=>{}))}))},initIfNecessary({inid:e,channelName:t}){e in s.default.SlackPreferencesStore.getState().eventGroupsByInid||this.showInitializationError(e,t)},showInitializationError(e,t){d.create({message:"Something went wrong while fetching Slack preferences.",done:{name:"TRY AGAIN",cb:()=>this.initChannel(e).then((()=>n.default.open(e,t))).catch((()=>this.showInitializationError(e,t)))}})},updateEventGroup({eventGroup:e,checked:t}){const a=s.default.SlackPreferencesStore.getState().inid;(t?this.addPreferenceGroup(a,e):this.deletePreferenceGroup(a,e)).then((()=>{n.default.eventGroupUpdated(a,e)})).catch((t=>{n.default.eventGroupUpdateFailed(a,e),r.handleError(t)}))},addPreferenceGroup(e,t){const{barrelId:a,barrelType:n}=s.default.BarrelStore.getState();return o.getEventsOfGroup(n,t).reduce(((t,i)=>t.then((()=>u[n].addIntegrationEvent(a,e,i)))),Promise.resolve())},deletePreferenceGroup(e,t){const{barrelId:a,barrelType:n}=s.default.BarrelStore.getState();return o.getEventsOfGroup(n,t).reduce(((t,i)=>t.then((()=>u[n].deleteIntegrationEvent(a,e,i)))),Promise.resolve())}};function f(){s.default.dispatcher.register((e=>{switch(e.type){case i.default.INIT:p.init();break;case i.default.OPEN:p.initIfNecessary(e);break;case i.default.UPDATE_EVENT_GROUP:p.updateEventGroup(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1153),i=a(1154),s=a(1155);function r(){(0,n.default)(),(0,i.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(327),i=a(264),s=a(1062),r=a(1081),o=a(79),d=a(120),l=a(7),c=a(123);const u={project:{get:d.getProject},styleguide:{get:d.getStyleguide}},p={project:{getRequest:s.default.getProjectRequest,getSuccess:s.default.getProjectSuccess,getFailed:s.default.getProjectFailed},styleguide:{getRequest:r.default.getStyleguideRequest,getSuccess:r.default.getStyleguideSuccess,getFailed:r.default.getStyleguideFailed}},f={onPreview({dialogType:e,dialogParams:{previewBarrelId:t}}){if(!t)return;const a=e===l.DialogTypes.PREVIEW_PROJECT?c.default.PROJECT:c.default.STYLEGUIDE,n=(a===c.default.PROJECT?i.default.ProjectsDataStore.getState().projects:i.default.StyleguidesDataStore.getState().styleguides)[t];if(n&&(n.screens||n.componentSections))return;const s=p[a];s.getRequest(),u[a].get(t).then((e=>{s.getSuccess({[a]:e})})).catch((e=>{s.getFailed(e),o.handleError(e)}))}};function S(){i.default.dispatcher.register((e=>{if(e.type===n.default.OPEN_DIALOG)setTimeout(f.onPreview,0,e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(327),i=a(264),s=a(104),r=a(7);const o={onWorkflowStatusFilterChange({workflowStatus:e}){mixpanel.master.track("Filtered by status",{Name:e.name,Color:e.color.toHexString()})},onUnhighlightBarrel(){const{selectedOrganizationId:e,selectedTab:t}=i.default.SpaceStore.getState(),a="user"===e?t:`workspace-${t}`,n={url:{oid:e}};setTimeout((()=>{history.replaceState(n,"Zeplin - Workspace",(0,s.urlResolve)(a,n))}),4)},onFilterValueChange({filterValue:e}){if(e){const{selectedTab:t,selectedProjectSortType:a}=i.default.SpaceStore.getState();mixpanel.master.track("Filtered by search term",{Source:"Workspace - "+(t===r.WorkspaceTabs.PROJECTS?"Projects":"Styleguides"),"Search Term":e,"Sorted By":a})}},onSetSelectedProjects({pids:e}){e.length>1&&mixpanel.master.track("Selected multiple projects")},onTrackBarrelClick({isFromPinArea:e,barrelId:t}){mixpanel.master.track("Navigated to project",{Source:e?"Pinned":void 0,project_id:t})}};function d(){i.default.dispatcher.register((e=>{switch(e.type){case n.default.CHANGE_WORKFLOW_STATUS_FILTER:return o.onWorkflowStatusFilterChange(e);case n.default.UNHIGHLIGHT_BARREL:return o.onUnhighlightBarrel();case n.default.CHANGE_FILTER_VALUE:return o.onFilterValueChange(e);case n.default.SET_SELECTED_PROJECTS:return o.onSetSelectedProjects(e);case n.default.TRACK_BARREL_CLICK:return o.onTrackBarrelClick(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(13),i=a(264),s=a(327);const r={handleFilterValueChange(){n.userPrefs.set("workspaceLastFilteredAt",Date.now())}};function o(){i.default.dispatcher.register((e=>{if(e.type===s.default.CHANGE_FILTER_VALUE)r.handleFilterValueChange()}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(1157),i=a(1158),s=a(1159),r=a(1160),o=a(1161);function d(){(0,n.default)(),(0,i.default)(),(0,s.default)(),(0,r.default)(),(0,o.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(351),i=a(1060),s=a(264),r=a(120),o=a(79);const d={project:r.project,styleguide:r.styleguide},l={handleConvertSectionToVariantSection({bid:e,barrelType:t,csid:a}){d[t].convertComponentSectionToVariantSection(e,a).then((({name:n,variant:s,components:r})=>{i.default.setComponentVariantData({bid:e,barrelType:t,csid:a,name:n,sectionVariant:s,components:r,userConvertedSectionIntoVariant:!0})})).catch(o.handleError)},handleConvertVariantSectionToSection({bid:e,barrelType:t,csid:a}){d[t].convertVariantSectionToComponentSection(e,a).then((()=>{i.default.removeComponentVariantData({bid:e,barrelType:t,csid:a})})).catch(o.handleError)},handleAddComponentVariantProperty({bid:e,barrelType:t,csid:a,componentVariantProperty:n}){const{_id:s,name:r}=n;d[t].createComponentSectionVariantProperty(e,a,r).then((({_id:n})=>{const o={_id:n,name:r};i.default.updateComponentVariantProperty({bid:e,barrelType:t,csid:a,vpid:s,data:o})})).catch((n=>{(0,o.handleError)(n),i.default.removeComponentVariantProperty({bid:e,barrelType:t,csid:a,vpid:s})}))},handleUpdateComponentVariantPropertyName({bid:e,barrelType:t,csid:a,vpid:n,name:s,oldName:r}){d[t].updateComponentSectionVariantProperty(e,a,n,{name:s}).catch((s=>{(0,o.handleError)(s),i.default.updateComponentVariantPropertyName({bid:e,barrelType:t,csid:a,vpid:n,name:r})}))},handleUpdateComponentVariantPropertyValues({bid:e,barrelType:t,csid:a,vpid:n,values:s,oldValues:r}){d[t].updateComponentSectionVariantProperty(e,a,n,{values:s}).catch((s=>{(0,o.handleError)(s),i.default.updateComponentVariantPropertyValues({bid:e,barrelType:t,csid:a,vpid:n,values:r})}))},handleUpdateComponentVariantPropertiesOrder({bid:e,barrelType:t,csid:a,properties:n,oldProperties:s}){d[t].updateComponentSectionVariantPropertiesOrder(e,a,{properties:n}).catch((n=>{(0,o.handleError)(n),i.default.updateComponentVariantPropertiesOrder({bid:e,barrelType:t,csid:a,properties:s})}))},handleUpdateComponentVariantPropertyValue({bid:e,barrelType:t,csid:a,vpid:n,coid:s,value:r}){d[t].updateComponentsVariantProperty(e,a,n,[s],r).then((({name:n,variant:s,components:r})=>{i.default.setComponentVariantData({bid:e,barrelType:t,csid:a,name:n,sectionVariant:s,components:r})})).catch(o.handleError)},handleRemoveComponentVariantProperty({bid:e,barrelType:t,csid:a,vpid:n,removedComponentVariantProperty:s}){d[t].deleteComponentSectionVariantProperty(e,a,n).catch((n=>{(0,o.handleError)(n),i.default.addComponentVariantProperty({bid:e,barrelType:t,csid:a,componentVariantProperty:s})}))},handleCreateComponentSectionVariantGroups({bid:e,barrelType:t,csid:a,vpid:n}){d[t].createComponentSectionVariantGroups(e,a,n).then((({components:n,componentSections:s})=>{i.default.groupComponentsByVariantProperty({bid:e,barrelType:t,csid:a,components:n,componentSections:s})})).catch(o.handleError)},handleHideSuggestedColors({barrelId:e,barrelType:t}){const{userId:a}=s.default.UserStore.getState();d[t].deleteSuggestedResources(a,e,"colors")},handleHideSuggestedTextStyles({barrelId:e,barrelType:t}){const{userId:a}=s.default.UserStore.getState();d[t].deleteSuggestedResources(a,e,"textStyles")}};function c(){s.default.dispatcher.register((e=>{if(e.syncWithApi)switch(e.type){case n.default.CONVERT_SECTION_TO_VARIANT_SECTION:l.handleConvertSectionToVariantSection(e);break;case n.default.CONVERT_VARIANT_SECTION_TO_SECTION:l.handleConvertVariantSectionToSection(e);break;case n.default.ADD_COMPONENT_VARIANT_PROPERTY:l.handleAddComponentVariantProperty(e);break;case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME:l.handleUpdateComponentVariantPropertyName(e);break;case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES:l.handleUpdateComponentVariantPropertyValues(e);break;case n.default.UPDATE_COMPONENT_VARIANT_PROPERTIES_ORDER:l.handleUpdateComponentVariantPropertiesOrder(e);break;case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUE:l.handleUpdateComponentVariantPropertyValue(e);break;case n.default.REMOVE_COMPONENT_VARIANT_PROPERTY:l.handleRemoveComponentVariantProperty(e);break;case n.default.CREATE_COMPONENT_SECTION_VARIANT_GROUPS:l.handleCreateComponentSectionVariantGroups(e);break;case n.default.HIDE_SUGGESTED_COLORS:l.handleHideSuggestedColors(e);break;case n.default.HIDE_SUGGESTED_TEXT_STYLES:l.handleHideSuggestedTextStyles(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(351),i=a(264),s=a(6),r=a(5);const o={sendHideColorsToElectron({barrelId:e,colors:t}){s.default.ipcRenderer.send("hide-suggested-colors",{id:e,colors:t})},sendHideTextStylesToElectron({barrelId:e,textStyles:t}){s.default.ipcRenderer.send("hide-suggested-text-styles",{id:e,textStyles:t})}};function d(){i.default.dispatcher.register((e=>{if(r.isWindowsApp)switch(e.type){case n.default.HIDE_SUGGESTED_COLORS:return o.sendHideColorsToElectron(e);case n.default.HIDE_SUGGESTED_TEXT_STYLES:return o.sendHideTextStylesToElectron(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var n=a(1055),i=a(1145),s=a(737),r=a(284),o=a(120),d=a(1144),l=a(397),c=a(331),u=a(264),p=a(123),f=a(1143),S=a(100),h=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const E={project:o.project,styleguide:o.styleguide},g={getSnapshot({bid:e,barrelType:t,csids:a,coid:r,shouldFetchSnapshot:l,componentVersion:{_id:c,fullSnapshotUrl:u}}){return h(this,void 0,void 0,(function*(){if(l)try{const l=yield(0,o.fetchSnapshot)(u);(0,d.preprocessLayers)(l.layers),yield l.assets.map((t=>(0,d.addAssetStats)(e,r,l,t))),n.default.setComponentSnapshot({bid:e,csids:a,coid:r,vid:c,snapshot:l});const p=s.default.getBarrel({bid:e}),f=yield E[t].getComponentVersionAssets(e,a,r,c);if(null==f?void 0:f.url){const e=yield(0,o.fetchAssets)(f.url);yield Promise.all(e.map((e=>(0,d.addAssetStats)(p.id,r,l,e)))),i.default.setComponentAssets({coid:r,assets:e})}}catch(p){}}))},getSnapshotIfNecessary({bid:e,barrelType:t,csids:a,coid:n,shouldFetchSnapshot:i,componentData:s}){if(!s||!s.latestVersion)return;const{latestVersion:{_id:r,fullSnapshotUrl:o}}=s;this.getSnapshot({bid:e,barrelType:t,csids:a,coid:n,shouldFetchSnapshot:i,componentVersion:{_id:r,fullSnapshotUrl:o}})},getVisibleComponentSnapshots({bid:e,barrelType:t,componentIds:a,isRestrictedView:r}){return h(this,void 0,void 0,(function*(){const g=s.default.getStyleguidesData({barrelStore:u.default.BarrelStore,styleguidesDataStore:u.default.StyleguidesDataStore,projectsDataStore:u.default.ProjectsDataStore}),O=a.map((a=>{const{component:n,barrelId:i}=(0,l.findComponentById)(g,a)||{};if(!n)return null;const s=i===e?t:p.default.STYLEGUIDE,r=n.idPath.slice(0,-1);return Object.assign(Object.assign({},n),{componentBarrelId:i,componentBarrelType:s,csids:r})})).filter(S.exists);if(r)return;const T=O.filter((e=>!e.latestVersion.snapshot.layers));if(0===T.length)return;const m=yield Promise.all(T.map((e=>h(this,void 0,void 0,(function*(){const t=yield(0,o.fetchSnapshot)(e.latestVersion.fullSnapshotUrl);return(0,d.preprocessLayers)(t.layers),Object.assign(Object.assign({},e),{snapshot:t})}))))),_=m.map((e=>{const{_id:t,snapshot:a,componentBarrelId:n,latestVersion:{_id:i},csids:s}=e;return{bid:n,coid:t,csids:s,vid:i,snapshot:(0,d.extendSnapshotWithGivenAssetState)(a,f.AssetStatState.loading)}}));Object.entries((0,c.groupBy)(_,"bid")).forEach((([e,t])=>{n.default.setMultipleComponentSnapshots({bid:e,componentSnapshotPayloads:t})}));const b=(yield Promise.all(m.map((e=>h(this,void 0,void 0,(function*(){const{_id:t,latestVersion:{_id:a},componentBarrelId:n,componentBarrelType:i,csids:s}=e;let r;try{const e=yield E[i].getComponentVersionAssets(n,s,t,a);r=null==e?void 0:e.url}catch(o){}return Object.assign(Object.assign({},e),{optimizedAssetURL:r})})))))).filter(S.exists),C=yield Promise.all(b.map((e=>h(this,void 0,void 0,(function*(){const{snapshot:t,componentBarrelId:a}=e;return yield Promise.all(t.assets.map((n=>(0,d.addAssetStats)(a,e._id,t,n)))),Object.assign(Object.assign({},e),{snapshot:t})}))))),A=C.map((e=>{const{_id:t,snapshot:a,componentBarrelId:n,csids:i,latestVersion:{_id:s},optimizedAssetURL:r}=e;return{bid:n,coid:t,csids:i,vid:s,snapshot:r?(0,d.extendSnapshotWithGivenAssetState)(a,f.AssetStatState.loading):(0,d.extendSnapshotWithGivenAssetState)(a,f.AssetStatState.ready)}}));Object.entries((0,c.groupBy)(A,"bid")).forEach((([e,t])=>{n.default.setMultipleComponentSnapshots({bid:e,componentSnapshotPayloads:t})}));const y=yield Promise.all(C.map((e=>h(this,void 0,void 0,(function*(){const{_id:t,componentBarrelId:a,snapshot:n,optimizedAssetURL:i}=e;if(i){const s=yield(0,o.fetchAssets)(i);if(0===s.length)return Object.assign(Object.assign({},e),{assets:void 0});yield Promise.all(s.map((e=>(0,d.addAssetStats)(a,t,n,e))));const r=s.map((e=>Object.assign(Object.assign({},e),{statState:f.AssetStatState.ready})));return Object.assign(Object.assign({},e),{assets:r})}return Object.assign(Object.assign({},e),{assets:void 0})}))))),I=y.filter((e=>e.assets));I.length>0&&i.default.setMultipleComponentAssets(I.map((e=>({coid:e._id,assets:e.assets}))));const N=y.map((e=>{const{_id:t,snapshot:a,componentBarrelId:n,csids:i,latestVersion:{_id:s}}=e;return{bid:n,coid:t,csids:i,vid:s,snapshot:(0,d.extendSnapshotWithGivenAssetState)(a,f.AssetStatState.ready)}}));Object.entries((0,c.groupBy)(N,"bid")).forEach((([e,t])=>{n.default.setMultipleComponentSnapshots({bid:e,componentSnapshotPayloads:t})}))}))}};function O(){u.default.dispatcher.register((e=>{switch(e.type){case r.default.ADD_COMPONENT_VERSION:g.getSnapshot(e);break;case r.default.UPDATE_COMPONENT:g.getSnapshotIfNecessary(e);break;case r.default.LOAD_VISIBLE_COMPONENTS:g.getVisibleComponentSnapshots(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(351),i=a(264),s=a(357),r=a(104),o=a(123);const d={handleConvertSectionToVariantSection(){mixpanel.master.track("Set as component variant section")},handleConvertVariantSectionToSection(){mixpanel.master.track("Unset as component variant section")},handleAddComponentVariantProperty(){mixpanel.master.track("Add component variant property")},handleRemoveComponentVariantProperty(){mixpanel.master.track("Remove component variant property")},handleRenameComponentVariantProperty(){mixpanel.master.track("Rename component variant property")},handleUpdateComponentVariantPropertyValues({values:e}={}){var t;mixpanel.master.track("Update component variant property value",{"Number of Components":null!==(t=null==e?void 0:e.length)&&void 0!==t?t:1})},handleOpenComponentVariantPopup({variantPopupSource:e}){mixpanel.master.track("Opened component variant pop-up",{Source:e})},handleChangeComponentVariant({variantChangeValueSource:e,isState:t}){mixpanel.master.track("Changed variant in component variant pop-up",{Source:e,"Is State":t})},handleChangeSortType({sortType:e}){mixpanel.master.track("Sorted components",{Type:e})},collapseAllSections(){const{barrelId:e,barrelType:t}=i.default.BarrelStore.getState(),a=t===o.default.PROJECT?"project-styleguide":"styleguide";window.history.replaceState({},"Components - Styleguide - Zeplin",(0,r.urlResolve)(`${a}-components`,{url:{bid:e}}))},onComponentFilterValueChange({filterValue:e}){if(e){const{sortType:t}=i.default.StyleguideStore.getState();mixpanel.master.track("Filtered by search term",{Source:"Styleguide Components","Search Term":e,"Sorted By":t})}}};function l(){i.default.dispatcher.register((e=>{switch(e.type){case s.default.OPEN:return d.handleOpenComponentVariantPopup(e);case s.default.CHANGE_VARIANT:return d.handleChangeComponentVariant(e);case n.default.CHANGE_SORT_TYPE:return d.handleChangeSortType(e);case n.default.COLLAPSE_ALL_SECTIONS:return d.collapseAllSections();case n.default.CHANGE_COMPONENT_FILTER_VALUE:return d.onComponentFilterValueChange(e)}if(e.syncWithApi)switch(e.type){case n.default.CONVERT_SECTION_TO_VARIANT_SECTION:return d.handleConvertSectionToVariantSection();case n.default.CONVERT_VARIANT_SECTION_TO_SECTION:return d.handleConvertVariantSectionToSection();case n.default.ADD_COMPONENT_VARIANT_PROPERTY:return d.handleAddComponentVariantProperty();case n.default.REMOVE_COMPONENT_VARIANT_PROPERTY:return d.handleRemoveComponentVariantProperty();case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_NAME:return d.handleRenameComponentVariantProperty();case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUE:return d.handleUpdateComponentVariantPropertyValues();case n.default.UPDATE_COMPONENT_VARIANT_PROPERTY_VALUES:return d.handleUpdateComponentVariantPropertyValues(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(13),i=a(351),s=a(264),r=a(737),o=a(284);const d={changeLeftSidebarWidth({leftSidebarWidth:e}){const{id:t}=r.default.getBarrel();n.barrelPrefs.set(t,"styleguideLeftSidebarWidth",e)},changeRightSidebarWidth({rightSidebarWidth:e}){const{id:t}=r.default.getBarrel();n.barrelPrefs.set(t,"styleguideRightSidebarWidth",e)},hideComponentVariantsOnboardingDialog(){n.userPrefs.set("componentVariantsOnboardingDialogSeen",!0)},toggleSectionCollapsedState(e,{shouldCollapse:t}){const{id:a}=r.default.getBarrel();n.barrelPrefs.get(a,"collapsedSections").then((i=>{e.forEach((e=>{i[e]=t})),n.barrelPrefs.set(a,"collapsedSections",i)}))},updateCollapsedSections(e){const{id:t}=r.default.getBarrel();n.barrelPrefs.set(t,"collapsedSections",e)}};function l(){s.default.dispatcher.register((e=>{var t;switch(e.type){case i.default.CHANGE_LEFT_SIDEBAR_WIDTH:d.changeLeftSidebarWidth(e);break;case i.default.CHANGE_RIGHT_SIDEBAR_WIDTH:d.changeRightSidebarWidth(e);break;case i.default.HIDE_COMPONENT_VARIANTS_ONBOARDING_DIALOG:d.hideComponentVariantsOnboardingDialog();break;case i.default.EXPAND_SECTIONS:d.toggleSectionCollapsedState(e.seids,{shouldCollapse:!1});break;case i.default.COLLAPSE_SECTIONS:case i.default.COLLAPSE_ALL_SECTIONS:d.toggleSectionCollapsedState(e.seids,{shouldCollapse:!0});break;case i.default.CHANGE_SELECTION:if(!e.updateCollapsedSections||!e.collapsedSections)return;d.updateCollapsedSections(e.collapsedSections);break;case i.default.UPDATE_STATE:if(!e.update||!e.update.collapsedSections)return;d.updateCollapsedSections(e.update.collapsedSections);break;case o.default.LOAD:if(!(null===(t=e.styleguide)||void 0===t?void 0:t.collapsedSections))return;d.updateCollapsedSections(e.styleguide.collapsedSections)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1163),i=a(1164);function s(){(0,i.default)(),(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(120),i=a(79),s=a(124),r=a(737),o=a(264),d=a(1081),l=a(326);const c={getStyleguide(e,{styleguideId:t}){const a=r.default.getBarrel({bid:e});return a&&a.dataStage===s.default.Complete?Promise.resolve(a):n.getStyleguide(e,{styleguideId:t})},getAncestors(e,t){return Promise.all(t.map((t=>this.getStyleguide(t,{styleguideId:e}))))}},u={selectParentRequest({stid:e,parent:t}){n.updateStyleguideParent(e,t).then((()=>{const{styleguides:a}=o.default.StyleguidesDataStore.getState(),n=[...a[t].ancestors,t].filter((e=>{var t;return(null===(t=a[e])||void 0===t?void 0:t.dataStage)!==s.default.Complete}));return c.getAncestors(e,n)})).then((a=>{d.default.selectParentSuccess({stid:e,parent:t,styleguides:a})})).catch((e=>{d.default.selectParentFailed(),i.handleError(e)}))}};function p(){o.default.dispatcher.register((e=>{if(e.syncWithApi&&e.type===l.default.SELECT_PARENT_REQUEST)u.selectParentRequest(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(13),i=a(264),s=a(326);const r={usedStyleguides(){n.userPrefs.set("styleguidesUsed",!0)}};function o(){i.default.dispatcher.register((e=>{if(e.type===s.default.CREATE_STYLEGUIDE_REQUEST)r.usedStyleguides()}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1166);function i(){(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(1064),s=a(380),r=a(120);const o={project:r.project,styleguide:r.styleguide},d={handleGetTeamsIntegration({barrelType:e,barrelId:t}){o[e].getTeamsIntegration(t).then((e=>i.default.setTeamsIntegration(e.channels))).catch((()=>i.default.setTeamsIntegration([])))}};function l(){n.default.dispatcher.register((e=>{if(e.type===s.default.GET_TEAMS_INTEGRATION)d.handleGetTeamsIntegration(e)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1168),i=a(1169),s=a(1170);function r(){(0,i.default)(),(0,n.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(13),i=a(264),s=a(282);const r={setUserAttribute({name:e,value:t}){switch(e){case"verified":Zeplin.updateUser({status:"verified"});break;case"isEmailNotificationEnabled":Zeplin.updateUser({emailNotifications:t});break;case"isDesktopNotificationEnabled":n.userPrefs.set("notificationStatus",t);break;default:Zeplin.updateUser({[e]:t})}},markZeplinThreeZeroWhatsNewAsSeen(){n.userPrefs.set("zeplinThreeZeroWhatsNewSeen",!0)},stopPromotingSpacingSectionDescriptionEditButton(){n.userPrefs.set("shouldPromoteSpacingSectionDescriptionEditButton",!1)},hideStyleguideTutorial(){n.userPrefs.set("shouldDisplayStyleguideTutorial",!1)},stopPromotingExportDesignTokens(){n.userPrefs.set("shouldPromoteExportDesignTokens",!1)},hideInvitedUserHintbox(){n.userPrefs.set("shouldDisplayInvitedUserHintbox",!1)},hidePersonalWorkspaceHintbox(){n.userPrefs.set("shouldDisplayPersonalWorkspaceHintbox",!1)},hideDashboardOnboardingHintbox(){n.userPrefs.set("shouldDisplayDashboardOnboardingHintbox",!1)},hideAddToFlowOnboarding(){n.userPrefs.set("shouldDisplayAddToFlowOnboarding",!1)},hideAddToFlowTooltip(){n.userPrefs.set("shouldDisplayAddToFlowTooltip",!1)},markStorybookIntegrationPromotionAsSeen(){n.userPrefs.set("storybookIntegrationPromotionSeen",!0)},markHighlightComponentsPromotionAsSeen(){n.userPrefs.set("highlightComponentsPromotionSeen",!0)},markLinkToStyleguidePromotionAsSeen(){n.userPrefs.set("linkToStyleguidePromotionSeen",!0)},markGlobalSearchNewTagMenuSeen(){n.userPrefs.set("globalSearchNewTagMenuSeen",!0)}};function o(){i.default.dispatcher.register((e=>{switch(e.type){case s.default.SET_USER_ATTRIBUTE:r.setUserAttribute(e);break;case s.default.MARK_ZEPLIN_THREE_ZERO_WHATS_NEW_AS_SEEN:r.markZeplinThreeZeroWhatsNewAsSeen();break;case s.default.STOP_PROMOTING_SPACING_SECTION_DESCRIPTION_EDIT_BUTTON:r.stopPromotingSpacingSectionDescriptionEditButton();break;case s.default.HIDE_STYLEGUIDE_TUTORIAL:r.hideStyleguideTutorial();break;case s.default.STOP_PROMOTING_EXPORT_DESIGN_TOKENS:r.stopPromotingExportDesignTokens();break;case s.default.HIDE_INVITED_USER_HINTBOX:r.hideInvitedUserHintbox();break;case s.default.HIDE_PERSONAL_WORKSPACE_HINTBOX:r.hidePersonalWorkspaceHintbox();break;case s.default.HIDE_DASHBOARD_ONBOARDING_HINTBOX:r.hideDashboardOnboardingHintbox();break;case s.default.HIDE_ADD_TO_FLOW_ONBOARDING:r.hideAddToFlowOnboarding();break;case s.default.HIDE_ADD_TO_FLOW_TOOLTIP:r.hideAddToFlowTooltip();break;case s.default.MARK_STORYBOOK_INTEGRATION_PROMOTION_AS_SEEN:r.markStorybookIntegrationPromotionAsSeen();break;case s.default.MARK_HIGHLIGHT_COMPONENTS_PROMOTION_AS_SEEN:r.markHighlightComponentsPromotionAsSeen();break;case s.default.MARK_LINK_TO_STYLEGUIDE_PROMOTION_AS_SEEN:r.markLinkToStyleguidePromotionAsSeen();break;case s.default.MARK_GLOBAL_SEARCH_NEW_BADGE_MENU_SEEN:r.markGlobalSearchNewTagMenuSeen()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(282),i=a(651),s=a(120),r=a(79),o=a(264),d=a(796),l=a(100),c=a(795);const u=new Set,p=new Set;let f=[],S=null;const h={muteProjectNotifications({pid:e,syncWithApi:t}){if(!t)return;const{notifications:a}=o.default.NotificationsStore.getState(),n=a.map((t=>d.default.filterEventsByProject(t,e))).filter(l.exists);setTimeout((()=>c.default.setReadStatusOfflineByNotifications(n,!0))),s.muteProjectNotifications(e).catch((t=>{(0,r.handleError)(t),i.default.unmuteProjectNotifications({pid:e}),setTimeout((()=>c.default.restoreReadStatus(n)))}))},muteStyleguideNotifications({stid:e,syncWithApi:t}){if(!t)return;const{notifications:a}=o.default.NotificationsStore.getState(),n=a.map((t=>d.default.filterEventsByStyleguide(t,e))).filter(l.exists);setTimeout((()=>c.default.setReadStatusOfflineByNotifications(n,!0))),s.muteStyleguideNotifications(e).catch((t=>{(0,r.handleError)(t),i.default.unmuteStyleguideNotifications({stid:e}),setTimeout((()=>c.default.restoreReadStatus(n)))}))},unmuteProjectNotifications({pid:e,syncWithApi:t}){t&&s.unmuteProjectNotifications(e).catch((t=>{(0,r.handleError)(t),i.default.muteProjectNotifications({pid:e})}))},unmuteStyleguideNotifications({stid:e,syncWithApi:t}){t&&s.unmuteStyleguideNotifications(e).catch((t=>{(0,r.handleError)(t),i.default.muteStyleguideNotifications({stid:e})}))},acceptTerms({acceptedTermsId:e,oldTermsForApproval:t,syncWithApi:a}){a&&s.acceptTerms(e).then((()=>{mixpanel.master.track("Approved user terms")})).catch((e=>{(0,r.handleError)(e),i.default.setTermsForApproval(t)}))},updateFollowedProjectNotifications({followedProjectIds:e,unfollowedProjectIds:t,oldFollowedProjectIds:a}){S?(clearTimeout(S),S=null):f=a,null==e||e.forEach((e=>{p.has(e)?p.delete(e):u.add(e)})),null==t||t.forEach((e=>{u.has(e)?u.delete(e):p.add(e)})),S=setTimeout((()=>{s.updateFollowedProjectNotifications([...u],[...p]).catch((e=>{(0,r.handleError)(e),i.default.setFollowedProjectNotifications({projectIds:f})})),S=null,u.clear(),p.clear()}),1e3)},setEmailNotificationPreferences({preferences:e,oldPreferences:t,syncWithApi:a}){a&&s.updateEmailNotificationPreferences(e).catch((e=>{(0,r.handleError)(e),i.default.setEmailNotificationPreferences({preferences:t})}))}};function E(){o.default.dispatcher.register((e=>{switch(e.type){case n.default.MUTE_PROJECT_NOTIFICATIONS:h.muteProjectNotifications(e);break;case n.default.MUTE_STYLEGUIDE_NOTIFICATIONS:h.muteStyleguideNotifications(e);break;case n.default.UNMUTE_PROJECT_NOTIFICATIONS:h.unmuteProjectNotifications(e);break;case n.default.UNMUTE_STYLEGUIDE_NOTIFICATIONS:h.unmuteStyleguideNotifications(e);break;case n.default.ACCEPT_TERMS:h.acceptTerms(e);break;case n.default.UPDATE_FOLLOWED_PROJECT_NOTIFICATIONS:h.updateFollowedProjectNotifications(e);break;case n.default.SET_EMAIL_NOTIFICATION_PREFERENCES:h.setEmailNotificationPreferences(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(282),s=a(387);const r={setUserAttribute({name:e,value:t}){switch(e){case"isEmailNotificationEnabled":mixpanel.master.track("Changed notification setting",{"Settings Name":"All Email Notifications","Toggle Status":!0===t?"Enabled":"Disabled"});break;case"isDesktopNotificationEnabled":mixpanel.master.track("Changed notification setting",{"Settings Name":"All Desktop Notifications","Toggle Status":!0===t?"Enabled":"Disabled"});break;default:Zeplin.updateUser({[e]:t})}},terminateSession(){sessionStorage.setItem("sessionTerminatedBanner",JSON.stringify({content:"You were logged out because too many devices were logged into one account. Please log in again.",contentType:"text"})),Zeplin.logout()},trackUserCaptureEvent(e){const t={"Account Id":e.accountId,"User Id":e.uid,"Domain name":e.domainName};e.action===s.CaptureSettingsAction.Capture?mixpanel.master.track("User provisioned",Object.assign(Object.assign({},t),{"Workspace Id":e.defaultOrganizationId,Type:"captured"})):e.action===s.CaptureSettingsAction.Notify&&mixpanel.master.track("User notified",Object.assign({},t))},setEmailNotificationPreferences({preferences:e,syncWithApi:t}){t&&Object.entries(e).forEach((([e,t])=>{if(null===t)return;const a=!0===t?"Enabled":"Disabled";switch(e){case"screensAdded":mixpanel.master.track("Changed notification setting",{"Settings Name":"Screens Added","Toggle Status":a});break;case"screensUpdated":mixpanel.master.track("Changed notification setting",{"Settings Name":"Screens Updated","Toggle Status":a});break;case"commentReplies":mixpanel.master.track("Changed notification setting",{"Settings Name":"Comment Replies","Toggle Status":a});break;case"commentMentions":mixpanel.master.track("Changed notification setting",{"Settings Name":"Comment Mentions","Toggle Status":a})}}))},updateFollowedProjectNotifications({followedProjectIds:e,unfollowedProjectIds:t}){e&&mixpanel.master.track("Changed notification setting",{"Settings Name":"Project Notifications",Projects:e,"Toggle Status":"Enabled"}),t&&mixpanel.master.track("Changed notification setting",{"Settings Name":"Project Notifications",Projects:t,"Toggle Status":"Disabled"})}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.SET_USER_ATTRIBUTE:r.setUserAttribute(e);break;case i.default.TERMINATE_SESSION:r.terminateSession();break;case i.default.UPDATE_USER:e.user.accountCaptureInfo&&r.trackUserCaptureEvent(e.user.accountCaptureInfo);break;case i.default.SET_EMAIL_NOTIFICATION_PREFERENCES:r.setEmailNotificationPreferences(e);break;case i.default.UPDATE_FOLLOWED_PROJECT_NOTIFICATIONS:r.updateFollowedProjectNotifications(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1172),i=a(1174);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(383),s=a(1173),r=a(120),o=a(79);const d={handleCreateWebhook({oid:e,webhook:t}){const{subscribedAllEvents:a}=t;a&&delete t.subscriptions,(0,r.createWebhook)(e,t).then(s.default.createWebhookSuccess).catch((e=>{s.default.createWebhookFailure(),o.handleError(e)}))},handleUpdateWebhook({oid:e,webhook:t}){const{url:a,secret:n,status:i,subscribedAllEvents:d,subscriptions:l}=t,c={url:a,secret:n,status:i,subscribedAllEvents:d,subscriptions:l};d&&delete c.subscriptions,(0,r.updateWebhook)(e,t._id,c).then((()=>s.default.updateWebhookSuccess(t))).catch((e=>{s.default.updateWebhookFailure(),o.handleError(e)}))},handleDeleteWebhook({oid:e,webhookId:t}){(0,r.deleteWebhook)(e,t).then((()=>s.default.deleteWebhookSuccess(t))).catch((e=>{s.default.deleteWebhookFailure(),o.handleError(e)}))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CREATE_WEBHOOK_REQUEST:d.handleCreateWebhook(e);break;case i.default.UPDATE_WEBHOOK_REQUEST:d.handleUpdateWebhook(e);break;case i.default.DELETE_WEBHOOK_REQUEST:d.handleDeleteWebhook(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(383);const s={getWebhooks(e){n.default.dispatcher.dispatch({type:i.default.GET_WEBHOOKS_REQUEST,oid:e})},getWebhooksSuccess(e){n.default.dispatcher.dispatch({type:i.default.GET_WEBHOOKS_SUCCESS,webhooks:e})},getWebhook(e,t){n.default.dispatcher.dispatch({type:i.default.GET_WEBHOOK_REQUEST,oid:e,webhookId:t})},getWebhookSuccess(e){n.default.dispatcher.dispatch({type:i.default.GET_WEBHOOK_SUCCESS,webhook:e})},getWebhookFailure(){n.default.dispatcher.dispatch({type:i.default.GET_WEBHOOK_FAILURE})},createWebhook(e,t){n.default.dispatcher.dispatch({type:i.default.CREATE_WEBHOOK_REQUEST,oid:e,webhook:t})},createWebhookSuccess(e){n.default.dispatcher.dispatch({type:i.default.CREATE_WEBHOOK_SUCCESS,webhook:e})},createWebhookFailure(){n.default.dispatcher.dispatch({type:i.default.CREATE_WEBHOOK_FAILURE})},updateWebhook(e,t){n.default.dispatcher.dispatch({type:i.default.UPDATE_WEBHOOK_REQUEST,oid:e,webhook:t})},updateWebhookSuccess(e){n.default.dispatcher.dispatch({type:i.default.UPDATE_WEBHOOK_SUCCESS,webhook:e})},updateWebhookFailure(){n.default.dispatcher.dispatch({type:i.default.UPDATE_WEBHOOK_FAILURE})},deleteWebhook(e,t){n.default.dispatcher.dispatch({type:i.default.DELETE_WEBHOOK_REQUEST,oid:e,webhookId:t})},deleteWebhookSuccess(e){n.default.dispatcher.dispatch({type:i.default.DELETE_WEBHOOK_SUCCESS,webhookId:e})},deleteWebhookFailure(){n.default.dispatcher.dispatch({type:i.default.DELETE_WEBHOOK_FAILURE})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(264),i=a(383),s=a(1173),r=a(120),o=a(122),d=a(79);const l={handleGetWebhooks({oid:e}){(0,r.getWebhooks)(e).then(s.default.getWebhooksSuccess).catch((e=>{if(e.status===o.default.STATUS.PRECONDITION_FAILED)return s.default.getWebhooksSuccess([]);d.handleError(e)}))},handleGetWebhook({oid:e,webhookId:t}){const{webhooks:a}=n.default.WebhooksDataStore.getState(),i=a.find((e=>e._id===t))||{};if(i.complete)return setTimeout((()=>{s.default.getWebhookSuccess(i)}));(0,r.getWebhook)(e,t).then(s.default.getWebhookSuccess).catch((e=>{s.default.getWebhookFailure(),d.handleError(e)}))}};function c(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.GET_WEBHOOKS_REQUEST:l.handleGetWebhooks(e);break;case i.default.GET_WEBHOOK_REQUEST:l.handleGetWebhook(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1176);function i(){(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(352),s=a(1145),r=a(120);const o={project:r.project,styleguide:r.styleguide},d={handleProcessVersionAssetContent({pid:e,sid:t,vid:a,vaid:n,vacid:i,ovacid:o}){(0,r.processVersionAssetContent)(e,t,a,n,o).catch((()=>s.default.processVersionAssetContentFailure({vid:a,vaid:n,vacid:i})))},handleProcessComponentVersionAssetContent({barrelType:e,bid:t,csids:a,coid:n,vid:i,vaid:r,vacid:d,ovacid:l}){o[e].processComponentVersionAssetContent(t,a,n,i,r,l).catch((()=>s.default.processComponentVersionAssetContentFailure({coid:n,vaid:r,vacid:d})))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.PROCESS_VERSION_ASSET_CONTENT_REQUEST:d.handleProcessVersionAssetContent(e);break;case i.default.PROCESS_COMPONENT_VERSION_ASSET_CONTENT_REQUEST:d.handleProcessComponentVersionAssetContent(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1178),i=a(1180);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(413),s=a(1179),r=a(120),o=a(79);const d={handleCreateOrganizationSCIMToken(e){(0,r.createOrganizationSCIMToken)(e).then(s.default.createSCIMTokenSuccess).catch((e=>{s.default.createSCIMTokenFailure(),o.handleError(e)}))},handleDeleteOrganizationSCIMToken(e,t){(0,r.deleteOrganizationSCIMToken)(e,t).then((()=>s.default.deleteSCIMTokenSuccess(t))).catch((e=>{s.default.deleteSCIMTokenFailure(),o.handleError(e)}))},handleUpdateOrganizationSCIMRole({oid:e,role:t,oldRole:a}){(0,r.updateOrganizationSCIMRole)(e,t).catch((t=>{s.default.updateSCIMRole({oid:e,role:a}),o.handleError(t)}))},handleUpdateOrganizationSCIMAccessibility({oid:e,restricted:t}){(0,r.updateOrganizationSCIMAccessibility)(e,t).catch((a=>{s.default.updateSCIMAccessibility({oid:e,restricted:!t}),o.handleError(a)}))},handleUpdateSCIMStatus({oid:e,enabled:t}){(0,r.updateOrganizationSCIMStatus)(e,t).catch((a=>{s.default.updateSCIMStatus({oid:e,enabled:!t}),o.handleError(a)}))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CREATE_SCIM_TOKEN_REQUEST:d.handleCreateOrganizationSCIMToken(e.oid);break;case i.default.DELETE_SCIM_TOKEN_REQUEST:d.handleDeleteOrganizationSCIMToken(e.oid,e.accessTokenId);break;case i.default.UPDATE_SCIM_ROLE:e.syncWithApi&&d.handleUpdateOrganizationSCIMRole(e);break;case i.default.UPDATE_SCIM_ACCESSIBILITY:e.syncWithApi&&d.handleUpdateOrganizationSCIMAccessibility(e);break;case i.default.UPDATE_SCIM_STATUS:e.syncWithApi&&d.handleUpdateSCIMStatus(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(413),i=a(264);const s={getSCIMSettings(e){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_SETTINGS_REQUEST,oid:e})},getSCIMSettingsSuccess(e){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_SETTINGS_SUCCESS,SCIMSettings:e})},getSCIMSettingsFailure(){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_SETTINGS_FAILURE})},getSCIMTokens(e){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_TOKENS_REQUEST,oid:e})},getSCIMTokensSuccess(e){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_TOKENS_SUCCESS,scimTokens:e})},getSCIMTokensFailure(){i.default.dispatcher.dispatch({type:n.default.GET_SCIM_TOKENS_FAILURE})},createSCIMToken(e){i.default.dispatcher.dispatch({type:n.default.CREATE_SCIM_TOKEN_REQUEST,oid:e})},createSCIMTokenSuccess(e){i.default.dispatcher.dispatch({type:n.default.CREATE_SCIM_TOKEN_SUCCESS,newToken:e})},createSCIMTokenFailure(){i.default.dispatcher.dispatch({type:n.default.CREATE_SCIM_TOKEN_FAILURE})},deleteSCIMToken(e,t){i.default.dispatcher.dispatch({type:n.default.DELETE_SCIM_TOKEN_REQUEST,oid:e,accessTokenId:t})},deleteSCIMTokenSuccess(e){i.default.dispatcher.dispatch({type:n.default.DELETE_SCIM_TOKEN_SUCCESS,accessTokenId:e})},deleteSCIMTokenFailure(){i.default.dispatcher.dispatch({type:n.default.DELETE_SCIM_TOKEN_FAILURE})},updateSCIMRole({oid:e,role:t,syncWithApi:a}){let s="";a&&({scimSettingsData:{role:s}}=i.default.WorkspaceSettingsStore.getState()),i.default.dispatcher.dispatch({type:n.default.UPDATE_SCIM_ROLE,oid:e,role:t,oldRole:s,syncWithApi:a})},updateSCIMAccessibility({oid:e,restricted:t,syncWithApi:a}){i.default.dispatcher.dispatch({type:n.default.UPDATE_SCIM_ACCESSIBILITY,oid:e,restricted:t,syncWithApi:a})},updateSCIMStatus({oid:e,enabled:t,syncWithApi:a}){i.default.dispatcher.dispatch({type:n.default.UPDATE_SCIM_STATUS,oid:e,enabled:t,syncWithApi:a})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(413),s=a(1179),r=a(120),o=a(79);const d={handleGetOrganizationSCIMSettings(e){(0,r.getOrganizationSCIMSettings)(e).then(s.default.getSCIMSettingsSuccess).catch((e=>{o.handleError(e,{clientErrorHandler:{412(){"SCIM is not configured"!==e.title&&(s.default.getSCIMSettingsFailure(),o.handleError(e))},default:o.handleError}})}))},handleGetOrganizationSCIMTokens(e){(0,r.getOrganizationSCIMTokens)(e).then(s.default.getSCIMTokensSuccess).catch((e=>{o.handleError(e,{clientErrorHandler:{412(){if("SCIM is not configured"===e.title)return s.default.getSCIMTokensSuccess([]);s.default.getSCIMTokensFailure(),o.handleError(e)},default:o.handleError}})}))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.GET_SCIM_SETTINGS_REQUEST:d.handleGetOrganizationSCIMSettings(e.oid);break;case i.default.GET_SCIM_TOKENS_REQUEST:d.handleGetOrganizationSCIMTokens(e.oid)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1182),i=a(1183);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(375),i=a(576),s=a(264),r=a(13),o=a(108),d=a(737),l=a(312),c=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const u={handleSuggestedRemoteColorsFileReceived({bid:e,fileName:t}){var a,n,s;return c(this,void 0,void 0,(function*(){const l=yield fetch(t).then((e=>e.json())),c=(yield r.userPrefs.get("bannedSuggestedResourcesByBarrel"))[e],u=[...null!==(a=null==c?void 0:c.colors)&&void 0!==a?a:[],...null!==(s=null===(n=d.default.getBarrel({bid:e}))||void 0===n?void 0:n.colors)&&void 0!==s?s:[]],p=l.filter((e=>u.every((t=>!new o.default(t).equals(e)))));i.default.suggestedRemoteColorsReceived({bid:e,colors:p})}))},handleSuggestedRemoteTextStylesFileReceived({bid:e,fileName:t}){var a,n,s;return c(this,void 0,void 0,(function*(){const o=yield fetch(t).then((e=>e.json())),c=(yield r.userPrefs.get("bannedSuggestedResourcesByBarrel"))[e],u=[...null!==(a=null==c?void 0:c.textStyles)&&void 0!==a?a:[],...null!==(s=null===(n=d.default.getBarrel({bid:e}))||void 0===n?void 0:n.textStyles)&&void 0!==s?s:[]],p=o.filter((e=>u.every((t=>!new l.default(t).equals(new l.default(e))))));i.default.suggestedRemoteTextStylesReceived({bid:e,textStyles:p})}))}};function p(){s.default.dispatcher.register((e=>{switch(e.type){case n.default.SUGGESTED_REMOTE_COLORS_FILE_RECEIVED:u.handleSuggestedRemoteColorsFileReceived(e);break;case n.default.SUGGESTED_REMOTE_TEXT_STYLES_FILE_RECEIVED:u.handleSuggestedRemoteTextStylesFileReceived(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(13),i=a(351),s=a(264),r=a(108),o=a(312),d=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};const l={banSuggestedColors({barrelId:e,colors:t}){var a;return d(this,void 0,void 0,(function*(){if(!t.length)return;const i=yield n.userPrefs.get("bannedSuggestedResourcesByBarrel"),s=null!==(a=i[e])&&void 0!==a?a:{colors:[],textStyles:[]},o=s.colors,d=t.filter((e=>o.every((t=>!new r.default(t).equals(e)))));n.userPrefs.set("bannedSuggestedResourcesByBarrel",Object.assign(Object.assign({},i),{[e]:Object.assign(Object.assign({},s),{colors:o.concat(d)})}))}))},banSuggestedTextStyles({barrelId:e,textStyles:t}){var a;return d(this,void 0,void 0,(function*(){if(!t.length)return;const i=yield n.userPrefs.get("bannedSuggestedResourcesByBarrel"),s=null!==(a=i[e])&&void 0!==a?a:{colors:[],textStyles:[]},r=s.textStyles,d=t.filter((e=>r.every((t=>!new o.default(t).equals(e)))));n.userPrefs.set("bannedSuggestedResourcesByBarrel",Object.assign(Object.assign({},i),{[e]:Object.assign(Object.assign({},s),{textStyles:r.concat(d)})}))}))}};function c(){s.default.dispatcher.register((e=>{switch(e.type){case i.default.HIDE_SUGGESTED_COLORS:l.banSuggestedColors(e);break;case i.default.HIDE_SUGGESTED_TEXT_STYLES:l.banSuggestedTextStyles(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1185),i=a(1188),s=a(1190);function r(){(0,n.default)(),(0,i.default)(),(0,s.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(264),i=a(285),s=a(1068),r=a(1055),o=a(808),d=a(120),l=a(337),c=a(79),u=a(1005),p=a(1186),f=a(1069),S=a(798),h=a(418),E=a(652),g=a(7),O=a(738),T=a(13),m=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))},_=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function b(e,t,a){const{status:n}=e;if(402===n){let e=a;if(!e){const a=O.default.getOrganization(void 0,{pid:t})||void 0;e=null==a?void 0:a._id}return(0,E.showPlanChooserOverlay)({oid:e,source:"Flows",upgradeTrigger:g.PlanUpgradeTrigger.FLOW_PROJECT_LIMIT})}(0,c.handleError)(e)}const C={createFlow({pid:e,nodes:t}){return m(this,void 0,void 0,(function*(){try{const a=t.map(u.convertNodeToRequest),n=yield d.createFlow(e,{nodes:a});s.default.loadFlow({pid:e,flow:n})}catch(a){b(a,e)}}))},addNode({pid:e,flid:t,node:a}){return m(this,void 0,void 0,(function*(){const{_id:n}=a,i=_(a,["_id"]);try{const{nodes:[a]}=yield d.addNodesToFlow(e,t,[i]);n&&s.default.updateFlowNode({pid:e,flid:t,noid:n,node:a})}catch(r){n&&s.default.deleteFlowNodes({pid:e,flid:t,nodeIds:[n]}),b(r,e)}}))},addNodesToFlow(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,nodes:n,connectors:i,ignoreLinks:r,from:o,undoAction:l}=e;let c=[];try{const e=n.map(u.convertNodeToRequest),p=yield d.addNodesToFlow(t,a,e,r),{nodes:f}=p,S=Object.fromEntries(n.map(((e,t)=>[e._id,f[t]._id])));let h;if(r){if(null==i?void 0:i.length){const e=i.map((e=>{const{_id:t}=e,a=_(e,["_id"]),n=a.start.node;n in S&&(a.start.node=S[n]);const i=a.end.node;return i in S&&(a.end.node=S[i]),a}));({connectors:c}=yield d.createFlowConnectors(t,a,e)),h=Object.fromEntries(i.map(((e,t)=>[e._id,c[t]._id])))}}else({connectors:c}=p);s.default.addNodesToFlowSuccess({pid:t,flid:a,from:o,nodes:f,connectors:c,undoAction:l,nodeIdMap:S,connectorIdMap:h})}catch(p){b(p,t)}}))},updateVariantGroupNode(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,defaultVariant:r,connectors:o}=e;try{if(yield d.updateFlowNode(t,a,i,{defaultVariant:r}),null==o?void 0:o.length){const e=o.map((e=>{const{_id:t}=e;return _(e,["_id"])})),{connectors:n}=yield d.createFlowConnectors(t,a,e),i=Object.fromEntries(o.map(((e,t)=>[e._id,n[t]._id])));s.default.createConnectors({pid:t,flid:a,connectors:n,connectorIdMap:i})}}catch(l){(0,c.handleError)(l);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateNodeText(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,text:s}=e;try{yield d.updateFlowNode(t,a,i,{text:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateNodeWidth(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,width:s}=e;try{yield d.updateFlowNode(t,a,i,{width:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateNodeHeight(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,height:s}=e;try{yield d.updateFlowNode(t,a,i,{height:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateFlowNodesPosition(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,nodes:i,connectors:s}=e;try{yield d.updateNodesPosition(t,a,i,s)}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},deleteFlowNodes(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,nodeIds:n,deletedNodes:i,deletedConnectors:r=[]}=e;try{yield d.deleteFlowNodes(t,a,n)}catch(o){(0,c.handleError)(o),s.default.addNodesToFlowSuccess({pid:t,flid:a,nodes:i,connectors:r})}}))},createConnector(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a}=e,i=e.connector,{_id:r}=i,l=_(i,["_id"]);try{const{connectors:[e]}=yield d.createFlowConnectors(t,a,[l]);s.default.updateConnector({pid:t,flid:a,conid:r,connector:e}),o.default.triggerSurvey("Added a connector to a flow")}catch(u){(0,c.handleError)(u);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorLineType(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,lineType:s}=e;try{yield d.updateFlowConnector(t,a,i,{type:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorLineTrajectory(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,points:s}=e;try{yield d.updateFlowConnector(t,a,i,{lineTrajectory:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorEndStyle(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,endStyle:r}=e;try{yield d.updateFlowConnector(t,a,i,{end:{style:r}}),s.default.updateLastConnectorEndStyleUsed({pid:t,style:r})}catch(o){(0,c.handleError)(o);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorColor(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,color:r}=e;try{yield d.updateFlowConnector(t,a,i,{color:r}),s.default.updateLastConnectorColorUsed({pid:t,colorName:(0,l.getColorName)(r)})}catch(o){(0,c.handleError)(o);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateShapeColor(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,color:r}=e;try{yield d.updateFlowNode(t,a,i,{color:r}),s.default.updateLastShapeColorUsed({pid:t,colorName:(0,l.getColorName)(r)})}catch(o){(0,c.handleError)(o);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateShapeType(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,noid:i,shapeType:s}=e;try{yield d.updateFlowNode(t,a,i,{shapeType:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorPoints(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,start:s,end:r}=e;try{yield d.updateFlowConnector(t,a,i,{start:s,end:r})}catch(o){(0,c.handleError)(o);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},deleteConnectors(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,connectorIds:i}=e;try{yield d.deleteFlowConnectors(t,a,i)}catch(s){(0,c.handleError)(s);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},addConnectorLabel(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,label:s}=e;try{yield d.updateFlowConnectorLabel(t,a,i,s)}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorLabelText(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,text:s}=e;try{yield d.updateFlowConnectorLabel(t,a,i,{text:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorLabelWidth(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,width:s}=e;try{yield d.updateFlowConnectorLabel(t,a,i,{width:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},updateConnectorLabelPosition(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i,position:s}=e;try{yield d.updateFlowConnectorLabel(t,a,i,{position:s})}catch(r){(0,c.handleError)(r);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},deleteConnectorLabel(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,conid:i}=e;try{yield d.deleteFlowConnectorLabel(t,a,i)}catch(s){(0,c.handleError)(s);const t=(0,p.default)(e,{undoAction:f.default.Drop,syncWithApi:!1});n.default.dispatcher.dispatch(t)}}))},createGroups(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,groups:n,currentGroupIds:i}=e;try{const{groups:e}=yield d.createFlowGroups(t,a,n),r=e.map((({_id:e})=>e));s.default.createGroupsSuccess({createdGroupIds:r,currentGroupIds:i})}catch(r){s.default.deleteGroups({fgids:i}),(0,c.handleError)(r)}}))},updateGroupName(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgid:n,name:i,oldName:r}=e;try{yield d.updateFlowGroupName(t,a,n,i)}catch(o){s.default.updateGroupName({fgid:n,name:r}),(0,c.handleError)(o)}}))},updateGroupColor(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgid:n,color:i,oldColor:r}=e;try{yield d.updateFlowGroupColor(t,a,n,i)}catch(o){s.default.updateGroupColor({fgid:n,color:r}),(0,c.handleError)(o)}}))},updateGroupOrder(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgids:n,oldIndex:i,index:r}=e;try{yield d.updateFlowGroupsOrder(t,a,n,r)}catch(o){s.default.updateGroupOrder({fgids:n,oldIndex:r,index:i}),(0,c.handleError)(o)}}))},updateBoardOrder(e){return m(this,void 0,void 0,(function*(){const{pid:t,flows:a,oldIndex:n,index:i}=e;try{yield d.updateFlowsOrder(t,a,i)}catch(r){s.default.updateBoardOrder({flows:a,oldIndex:i,index:n}),(0,c.handleError)(r)}}))},deleteFlowGroups(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgids:n,deletedGroups:i}=e;try{const e=n.map((e=>d.deleteFlowGroup(t,a,e)));yield Promise.all(e)}catch(r){s.default.createGroupsStart({groups:i}),(0,c.handleError)(r)}}))},addNodesToGroup(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgid:n,nodeIds:i,fromGroup:r}=e;try{yield d.addNodesToFlowGroup(t,a,n,i)}catch(o){r?s.default.addNodesToGroup({fgid:r,nodeIds:i,fromGroup:n}):s.default.removeNodesFromGroup({fgid:n,nodeIds:i}),(0,c.handleError)(o)}}))},removeNodesFromGroup(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,fgid:n,nodeIds:i}=e;try{yield d.removeNodesFromFlowGroup(t,a,n,i)}catch(r){s.default.addNodesToGroup({fgid:n,nodeIds:i}),(0,c.handleError)(r)}}))},createBoard(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,name:n}=e;try{const e=yield d.createFlow(t,{name:n});s.default.createBoardSuccess({pid:t,flow:e,currentFlowId:a})}catch(i){s.default.deleteBoard({pid:t,flid:a}),(0,c.handleError)(i)}}))},updateBoardName(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,name:n,oldName:i}=e;try{yield d.updateFlowName(t,a,n)}catch(r){s.default.updateBoardName({flid:a,name:i}),(0,c.handleError)(r)}}))},deleteBoard(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,deletedFlow:n}=e;try{yield d.deleteFlow(t,a)}catch(i){s.default.loadFlow({pid:t,flow:n}),(0,c.handleError)(i)}}))},transferGroupsToAnotherFlow(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,groups:n,targetFlid:i}=e;try{const e=yield d.transferGroupsToAnotherFlow(t,a,i,n);s.default.updateTransferredData(Object.assign({pid:t,flid:i},e))}catch(r){s.default.transferGroupsToAnotherFlow({pid:t,flid:i,targetFlid:a,groups:n}),(0,c.handleError)(r)}}))},transferNodesToAnotherFlow(e){return m(this,void 0,void 0,(function*(){const{pid:t,flid:a,nodes:n,targetFlid:i}=e;try{const e=yield d.transferNodesToAnotherFlow(t,a,i,n);s.default.updateTransferredData(Object.assign({pid:t,flid:i},e))}catch(r){s.default.transferNodesToAnotherFlow({pid:t,flid:i,targetFlid:a,nodes:n}),(0,c.handleError)(r)}}))},enableAddShapeMode({pid:e}){return m(this,void 0,void 0,(function*(){if(!(S.default.getFlows(e).length>0))try{setTimeout((()=>{s.default.loadFlow({pid:e,flow:{_id:h.tempFlowId,name:"Board 1",nodes:[],groups:[],connectors:[]},complete:!0}),r.default.goToFlow({flid:h.tempFlowId})}),0);const t=yield d.createFlow(e,{nodes:[]});s.default.updateFlow({pid:e,flid:h.tempFlowId,flow:t})}catch(t){(0,c.handleError)(t)}}))},handleAddDot({pid:e,flid:t,dot:a,hasImage:n,hasMention:i,source:r}){const{_id:o,x:u,y:p,color:f,comments:S}=a;d.createFlowDot(e,t,{x:u,y:p,color:f,comments:S}).then((a=>{const d=(0,l.getColorName)(f);T.barrelPrefs.set(e,"lastNoteColorUsedForFlow",d),s.default.updateDot({pid:e,flid:t,did:o,dotData:a}),mixpanel.master.track("Added note",{"Is Reply":!1,"Is Reaction Reply":!1,"Is Reply To Mention":!1,"Has Mention":i,"Has Image":n,Source:r})})).catch((a=>{(0,c.handleError)(a),s.default.removeDot({pid:e,flid:t,did:o})}))},handleUpdateDot({pid:e,flid:t,did:a,dotData:n}){d.updateProjectFlowDot(e,t,a,n).then((()=>{if(n.color){const t=(0,l.getColorName)(n.color);T.barrelPrefs.set(e,"lastNoteColorUsedForFlow",t)}})).catch((i=>{(0,c.handleError)(i),s.default.updateDot({pid:e,flid:t,did:a,dotData:n})}))},handleUpdateDotColor({pid:e,flid:t,did:a,color:n,oldColor:i}){d.updateProjectFlowDot(e,t,a,{color:n}).then((()=>{const t=(0,l.getColorName)(n);T.barrelPrefs.set(e,"lastNoteColorUsedForFlow",t)})).catch((n=>{(0,c.handleError)(n),s.default.updateDot({pid:e,flid:t,did:a,dotData:{color:i}})}))},handleUpdateDotStatus({pid:e,flid:t,did:a,status:n}){d.updateProjectFlowDot(e,t,a,{status:n}).catch((i=>{(0,c.handleError)(i),s.default.updateDot({pid:e,flid:t,did:a,dotData:{status:n}})}))},handleCreateComment({pid:e,flid:t,did:a,comment:n,hasImage:i,hasReaction:r,hasMention:o,toMention:l,source:u}){const{_id:p,note:f}=n;d.createFlowDotComment(e,t,a,f).then((n=>{s.default.updateComment({pid:e,flid:t,did:a,cmid:p,commentData:n}),mixpanel.master.track("Added note",{"Is Reply":!0,"Is Reaction Reply":r,"Is Reply To Mention":l,"Has Mention":o,"Has Image":i,Source:u})})).catch((n=>{(0,c.handleError)(n),s.default.removeComment({pid:e,flid:t,did:a,cmid:p})}))},handleUpdateComment({pid:e,flid:t,did:a,cmid:n,commentData:i,oldCommentData:r}){const{note:o}=i,{note:l}=r;o!==l&&d.updateProjectFlowDotComment(e,t,a,n,o).catch((i=>{(0,c.handleError)(i),s.default.updateComment({pid:e,flid:t,did:a,cmid:n,commentData:r})}))},handleRemoveComment({pid:e,flid:t,did:a,cmid:n,removedComment:i}){d.deleteFlowComment(e,t,a,n).catch((n=>{(0,c.handleError)(n),s.default.addComment({pid:e,flid:t,did:a,comment:i})}))},handleRemoveDot({pid:e,flid:t,did:a,removedDot:n}){d.deleteFlowDot(e,t,a).catch((a=>{(0,c.handleError)(a),s.default.addDot({pid:e,flid:t,dot:n})}))}};function A(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CREATE_FLOW_REQUEST:C.createFlow(e);break;case i.default.ADD_NODES_TO_FLOW_REQUEST:C.addNodesToFlow(e);break;case i.default.CREATE_GROUPS_REQUEST:C.createGroups(e);break;case i.default.CREATE_BOARD_REQUEST:C.createBoard(e);break;case i.default.ENABLE_ADD_SHAPE_MODE:C.enableAddShapeMode(e)}if("syncWithApi"in e&&e.syncWithApi)switch(e.type){case i.default.ADD_TEXT_LABEL_NODE:case i.default.ADD_SHAPE_NODE:C.addNode(e);break;case i.default.UPDATE_VARIANT_GROUP_NODE:C.updateVariantGroupNode(e);break;case i.default.UPDATE_NODE_TEXT:C.updateNodeText(e);break;case i.default.UPDATE_NODE_WIDTH:C.updateNodeWidth(e);break;case i.default.UPDATE_NODE_HEIGHT:C.updateNodeHeight(e);break;case i.default.UPDATE_FLOW_NODES_POSITION:C.updateFlowNodesPosition(e);break;case i.default.DELETE_FLOW_NODES:C.deleteFlowNodes(e);break;case i.default.CREATE_CONNECTOR:C.createConnector(e);break;case i.default.UPDATE_CONNECTOR_LINE_TYPE:C.updateConnectorLineType(e);break;case i.default.UPDATE_CONNECTOR_LINE_TRAJECTORY:C.updateConnectorLineTrajectory(e);break;case i.default.UPDATE_CONNECTOR_END_STYLE:C.updateConnectorEndStyle(e);break;case i.default.UPDATE_CONNECTOR_COLOR:C.updateConnectorColor(e);break;case i.default.UPDATE_SHAPE_COLOR:C.updateShapeColor(e);break;case i.default.UPDATE_SHAPE_TYPE:C.updateShapeType(e);break;case i.default.UPDATE_CONNECTOR_POINTS:C.updateConnectorPoints(e);break;case i.default.DELETE_CONNECTORS:C.deleteConnectors(e);break;case i.default.ADD_CONNECTOR_LABEL:C.addConnectorLabel(e);break;case i.default.UPDATE_CONNECTOR_LABEL_TEXT:C.updateConnectorLabelText(e);break;case i.default.UPDATE_CONNECTOR_LABEL_WIDTH:C.updateConnectorLabelWidth(e);break;case i.default.UPDATE_CONNECTOR_LABEL_POSITION:C.updateConnectorLabelPosition(e);break;case i.default.DELETE_CONNECTOR_LABEL:C.deleteConnectorLabel(e);break;case i.default.UPDATE_GROUP_NAME:C.updateGroupName(e);break;case i.default.UPDATE_GROUP_COLOR:C.updateGroupColor(e);break;case i.default.UPDATE_GROUP_ORDER:C.updateGroupOrder(e);break;case i.default.UPDATE_BOARD_ORDER:C.updateBoardOrder(e);break;case i.default.DELETE_GROUPS:C.deleteFlowGroups(e);break;case i.default.ADD_NODES_TO_GROUP:C.addNodesToGroup(e);break;case i.default.REMOVE_NODES_FROM_GROUP:C.removeNodesFromGroup(e);break;case i.default.UPDATE_BOARD_NAME:C.updateBoardName(e);break;case i.default.DELETE_BOARD:C.deleteBoard(e);break;case i.default.TRANSFER_GROUPS_TO_ANOTHER_FLOW:C.transferGroupsToAnotherFlow(e);break;case i.default.TRANSFER_NODES_TO_ANOTHER_FLOW:C.transferNodesToAnotherFlow(e);break;case i.default.ADD_DOT:C.handleAddDot(e);break;case i.default.UPDATE_DOT:C.handleUpdateDot(e);break;case i.default.UPDATE_DOT_COLOR:C.handleUpdateDotColor(e);break;case i.default.UPDATE_DOT_STATUS:C.handleUpdateDotStatus(e);break;case i.default.CREATE_COMMENT:C.handleCreateComment(e);break;case i.default.UPDATE_COMMENT:C.handleUpdateComment(e);break;case i.default.REMOVE_COMMENT:C.handleRemoveComment(e);break;case i.default.REMOVE_DOT:C.handleRemoveDot(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1187),i=a(285);function s(e,t={}){switch(e.type){case i.default.ADD_NODES_TO_FLOW_REQUEST:{const a=e.nodes.map((({_id:e})=>e));return Object.assign(Object.assign(Object.assign({},e),{type:i.default.DELETE_FLOW_NODES,nodeIds:a,deletedNodes:e.nodes,deletedConnectors:e.connectors,syncWithApi:!0}),t)}case i.default.UPDATE_VARIANT_GROUP_NODE:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_VARIANT_GROUP_NODE,defaultVariant:e.oldDefaultVariant,oldDefaultVariant:e.defaultVariant,connectors:e.deletedConnectors,deletedConnectors:void 0}),t);case i.default.UPDATE_NODE_TEXT:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_NODE_TEXT,text:e.oldText,oldText:e.text}),t);case i.default.UPDATE_SHAPE_TYPE:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_SHAPE_TYPE,shapeType:e.oldShapeType,oldShapeType:e.shapeType}),t);case i.default.UPDATE_SHAPE_COLOR:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_SHAPE_COLOR,color:e.oldColor,oldColor:e.color}),t);case i.default.UPDATE_NODE_WIDTH:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_NODE_WIDTH,width:e.oldWidth,oldWidth:e.width}),t);case i.default.UPDATE_NODE_HEIGHT:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_NODE_HEIGHT,height:e.oldHeight,oldHeight:e.height}),t);case i.default.DELETE_FLOW_NODES:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.ADD_NODES_TO_FLOW_REQUEST,nodes:e.deletedNodes,connectors:e.deletedConnectors,ignoreLinks:!0,from:void 0}),t);case i.default.UPDATE_FLOW_NODES_POSITION:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_FLOW_NODES_POSITION,nodes:e.oldNodes,oldNodes:e.nodes,connectors:e.oldConnectors,oldConnectors:e.connectors}),t);case i.default.CREATE_CONNECTOR:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.DELETE_CONNECTORS,connectorIds:[e.connector._id],deletedConnectors:[e.connector]}),t);case i.default.UPDATE_CONNECTOR_LINE_TYPE:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_LINE_TYPE,lineType:e.oldLineType,oldLineType:e.lineType}),t);case i.default.UPDATE_CONNECTOR_LINE_TRAJECTORY:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_LINE_TRAJECTORY,points:e.oldPoints,oldPoints:e.points,isUndo:!0}),t);case i.default.UPDATE_CONNECTOR_END_STYLE:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_END_STYLE,endStyle:e.oldEndStyle,oldEndStyle:e.endStyle}),t);case i.default.UPDATE_CONNECTOR_COLOR:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_COLOR,color:e.oldColor,oldColor:e.color}),t);case i.default.UPDATE_CONNECTOR_POINTS:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_POINTS,start:e.oldStart,end:e.oldEnd,oldStart:e.start,oldEnd:e.end}),t);case i.default.DELETE_CONNECTORS:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.CREATE_CONNECTOR,connector:e.deletedConnectors[0]}),t);case i.default.ADD_CONNECTOR_LABEL:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.DELETE_CONNECTOR_LABEL,deletedLabel:e.label}),t);case i.default.UPDATE_CONNECTOR_LABEL_TEXT:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_LABEL_TEXT,text:e.oldText,oldText:e.text}),t);case i.default.UPDATE_CONNECTOR_LABEL_WIDTH:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_LABEL_WIDTH,width:e.oldWidth,oldWidth:e.width}),t);case i.default.UPDATE_CONNECTOR_LABEL_POSITION:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.UPDATE_CONNECTOR_LABEL_POSITION,position:e.oldPosition,oldPosition:e.position}),t);case i.default.DELETE_CONNECTOR_LABEL:return Object.assign(Object.assign(Object.assign({},e),{type:i.default.ADD_CONNECTOR_LABEL,label:e.deletedLabel}),t);default:return(0,n.default)()}}},(e,t,a)=>{"use strict";function n(){throw new Error("entered unreachable code")}a.r(t),a.d(t,{default:()=>n})},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(104),i=a(264),s=a(1189),r=a(417),o=a(285),d=a(434),l=a(7),c=a(409),u=a(108),p=a(415),f=a(106);const S={handleAddNodesToFlow({nodes:e,from:t}){if(!t)return;const a=e.filter((({type:e})=>e===p.default.Shape)).length,n=e.filter((({type:e})=>e===p.default.Screen||p.default.VariantGroup)).length;if("Duplicate"===t)n&&mixpanel.master.track("Added another copy of screen to flow",{Count:n}),a&&mixpanel.master.track("Added another copy of shape to flow",{Count:a});else if(n&&mixpanel.master.track("Added screen to flow",{Count:e.length,From:t}),a){const t=e[0];mixpanel.master.track("Added flow shape",{Type:(0,f.uppercaseFirst)(t.shapeType)})}},handleUpdateConnectorLineType({lineType:e}){const t=e===s.default.Dashed?"Dashed":"Solid";mixpanel.master.track("Updated flow connector",{"Line Style":t})},handleUpdateConnectorEndStyle({endStyle:e}){const t=e===r.default.Point?"Point":"Arrow";mixpanel.master.track("Updated flow connector",{"End Style":t})},handleUpdateConnectorColor({color:e}){mixpanel.master.track("Updated flow connector",{Color:e.name})},handleUpdateShapeColor({color:e}){mixpanel.master.track("Updated flow shape",{Color:e.name})},handleUpdateShapeType({shapeType:e}){mixpanel.master.track("Updated flow shape",{Type:(0,f.uppercaseFirst)(e)})},handleAddConnectorLabel(){mixpanel.master.track("Added flow label",{Type:"Connector"})},handleDeleteFlowNodes({screenCount:e=0,labelCount:t=0,shapeCount:a=0,deletedNodes:n}){if(e>0&&mixpanel.master.track("Removed screen from flow",{Count:e}),a>0){const e=(null==n?void 0:n.filter((({type:e})=>e===p.default.Shape)))||[];for(const t of e){const e=t;mixpanel.master.track("Deleted flow shape",{Type:(0,f.uppercaseFirst)(e.shapeType)})}}t>0&&mixpanel.master.track("Deleted flow label",{Type:"Default",Count:t})},handleChangeFlowNodeDefaultVariant({node:{defaultVariant:e}}){e&&mixpanel.master.track("Changed variant of screen in flow")},handleAddTextLabelNode(){mixpanel.master.track("Added flow label",{Type:"Default"})},handleAddShapeNode({node:{shapeType:e}}){mixpanel.master.track("Added flow shape",{Type:(0,f.uppercaseFirst)(e)})},handleCreateConnector(){mixpanel.master.track("Created flow connector")},handleDeleteConnectorLabel(){mixpanel.master.track("Deleted flow label",{Type:"Connector"})},handleDeleteConnector(){mixpanel.master.track("Deleted flow connector")},handleNavigateToScreen({pid:e,sid:t,inNewTab:a}){if(mixpanel.master.track("Navigated to screen from flow"),a){const a=(0,n.urlResolve)("project-screen",{url:{pid:e,sid:t}});window.open(a,"_blank")}},handleDeleteBoard({pid:e,flid:t,syncWithApi:a}){const{flows:{[e]:s}}=i.default.FlowStore.getState(),{selectedView:r}=i.default.BarrelStore.getState();if(a&&mixpanel.master.track("Deleted flow board"),r!==l.ProjectViewTypes.FLOW)return;const[o]=Object.keys(s).filter((e=>e!==t)),c=o?(0,n.urlResolve)("project-flow",{url:{pid:e,flid:o}}):(0,n.urlResolve)("project-flow-empty",{url:{pid:e}});d.default.history.push(c)},createBoardSuccess(e){const{pid:t,flow:a}=e,i=(0,n.urlResolve)("project-flow",{url:{pid:t,flid:a._id}});d.default.history.push(i)},handleCreateGroup(){mixpanel.master.track("Created flow group")},handleCreateBoard(){mixpanel.master.track("Created flow board")},handleCopyGroupLink({content:e,toastContainer:t,linkType:a}){(0,c.copyContent)({content:e,toastContainer:t}),"web"===a?mixpanel.master.track("Copied web link",{Target:"Group"}):mixpanel.master.track("Copied app URI",{Target:"Group"})},handleCopyBoardLink({content:e,toastContainer:t,linkType:a}){(0,c.copyContent)({content:e,toastContainer:t}),"web"===a?mixpanel.master.track("Copied web link",{Target:"Board"}):mixpanel.master.track("Copied app URI",{Target:"Board"})},handleRenameGroup(){mixpanel.master.track("Renamed flow group")},handleChangeGroupColor({color:e}){mixpanel.master.track("Changed flow group color",{Color:new u.default(e).toHexString()})},handleDeleteGroup(){mixpanel.master.track("Deleted flow group")},handleRenameBoard(){mixpanel.master.track("Renamed flow board")},hadnleUpdateConnectorLineTrajectory(){mixpanel.master.track("Dragged flow connector line")},handleUpdateFlow({pid:e,flid:t,flow:a}){const{currentFlowId:s}=i.default.FlowStore.getState();a._id&&t===s&&d.default.history.replace((0,n.urlResolve)("project-flow",{url:{pid:e,flid:a._id}}))},handleTransferToAnotherFlow(e){const{nodes:t}=e;mixpanel.master.track("Moved to flow board",{Source:t?"Node(s)":"Group"})},handleDistribute({distributeAxis:e}){e&&mixpanel.master.track("Distributed flow",{Axis:"horizontal"===e?"Horizontal":"Vertical"})},handleOpenDot({pid:e,flid:t}){history.replaceState({},"Flows - Zeplin",(0,n.urlResolve)("project-flow",{url:{pid:e,flid:t}}))}};function h(){i.default.dispatcher.register((e=>{switch(e.type){case o.default.NAVIGATE_TO_SCREEN:S.handleNavigateToScreen(e);break;case o.default.DELETE_BOARD:S.handleDeleteBoard(e);break;case o.default.CREATE_BOARD_SUCCESS:S.createBoardSuccess(e);break;case o.default.CREATE_GROUPS_REQUEST:S.handleCreateGroup();break;case o.default.CREATE_BOARD_REQUEST:S.handleCreateBoard();break;case o.default.COPY_GROUP_LINK:S.handleCopyGroupLink(e);break;case o.default.COPY_BOARD_LINK:S.handleCopyBoardLink(e);break;case o.default.UPDATE_FLOW:S.handleUpdateFlow(e);break;case o.default.UPDATE_FLOW_NODES_POSITION:S.handleDistribute(e);break;case o.default.OPEN_DOT:S.handleOpenDot(e)}if("syncWithApi"in e&&e.syncWithApi)switch(e.type){case o.default.ADD_NODES_TO_FLOW_REQUEST:S.handleAddNodesToFlow(e);break;case o.default.CREATE_CONNECTOR:S.handleCreateConnector();break;case o.default.ADD_TEXT_LABEL_NODE:S.handleAddTextLabelNode();break;case o.default.ADD_SHAPE_NODE:S.handleAddShapeNode(e);break;case o.default.UPDATE_CONNECTOR_LINE_TYPE:S.handleUpdateConnectorLineType(e);break;case o.default.UPDATE_CONNECTOR_END_STYLE:S.handleUpdateConnectorEndStyle(e);break;case o.default.UPDATE_CONNECTOR_COLOR:S.handleUpdateConnectorColor(e);break;case o.default.UPDATE_SHAPE_COLOR:S.handleUpdateShapeColor(e);break;case o.default.UPDATE_SHAPE_TYPE:S.handleUpdateShapeType(e);break;case o.default.ADD_CONNECTOR_LABEL:S.handleAddConnectorLabel();break;case o.default.DELETE_FLOW_NODES:S.handleDeleteFlowNodes(e);break;case o.default.DELETE_CONNECTORS:S.handleDeleteConnector();break;case o.default.DELETE_CONNECTOR_LABEL:S.handleDeleteConnectorLabel();break;case o.default.UPDATE_FLOW_NODE:S.handleChangeFlowNodeDefaultVariant(e);break;case o.default.UPDATE_GROUP_NAME:S.handleRenameGroup();break;case o.default.UPDATE_GROUP_COLOR:S.handleChangeGroupColor(e);break;case o.default.DELETE_GROUPS:S.handleDeleteGroup();break;case o.default.UPDATE_BOARD_NAME:S.handleRenameBoard();break;case o.default.UPDATE_CONNECTOR_LINE_TRAJECTORY:S.hadnleUpdateConnectorLineTrajectory();break;case o.default.TRANSFER_GROUPS_TO_ANOTHER_FLOW:case o.default.TRANSFER_NODES_TO_ANOTHER_FLOW:S.handleTransferToAnotherFlow(e)}}))}},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(285),s=a(13);const r={updateLastConnectorEndStyleUsed({pid:e,style:t}){s.barrelPrefs.set(e,"lastConnectorEndStyleUsed",t)},updateLastConnectorColorUsed({pid:e,colorName:t}){s.barrelPrefs.set(e,"lastConnectorColorUsed",t)},updateLastShapeColorUsed({pid:e,colorName:t}){s.barrelPrefs.set(e,"lastShapeColorUsed",t)}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.UPDATE_LAST_CONNECTOR_END_STYLE_USED:r.updateLastConnectorEndStyleUsed(e);break;case i.default.UPDATE_LAST_CONNECTOR_COLOR_USED:r.updateLastConnectorColorUsed(e);break;case i.default.UPDATE_LAST_SHAPE_COLOR_USED:r.updateLastShapeColorUsed(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1192),i=a(1193);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(264),i=a(808),s=a(425),r=a(120);const o={handleShowSurvey(){r.getNPSUserData().then((({canSurveyBeShown:e})=>{i.default.setCanSurveyBeShown(e)}))},handleRateSurvey({rating:e,location:t,source:a,oid:n}){r.sendNPSResponse({score:e,location:t,source:a,oid:n})},handleSubmitFeedback({score:e,location:t,source:a,oid:n,comment:i}){r.sendNPSResponse({score:e,location:t,source:a,comment:i,oid:n})},updateUserData(){r.nps.updateNPSUserData()}};function d(){n.default.dispatcher.register((e=>{switch(e.type){case s.default.SHOW_SURVEY:o.handleShowSurvey();break;case s.default.RATE_SURVEY:o.handleRateSurvey(e);break;case s.default.SUBMIT_FEEDBACK:o.handleSubmitFeedback(e);break;case s.default.HANDLE_VIEWED_NPS:o.updateUserData()}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(808),s=a(425);const r={handleTriggerSurvey({triggeringEvent:e}){const{config:t}=n.default.AppStore.getState(),a=(null==t?void 0:t.countLimit.surveyDelayTimeInMilliseconds)||3e3;setTimeout((()=>{i.default.showSurvey(e)}),a)},handleViewedNPS({plan:e,triggeringEvent:t,location:a}){mixpanel.master.track("Viewed NPS",{Plan:e,"Triggering Event":t,Location:a})},handleDismissedNPS({plan:e,location:t}){mixpanel.master.track("Dismissed NPS",{Plan:e,Location:t})}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case s.default.TRIGGER_SURVEY:r.handleTriggerSurvey(e);break;case s.default.HANDLE_VIEWED_NPS:r.handleViewedNPS(e);break;case s.default.DISMISS_SURVEY:r.handleDismissedNPS(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(1195),i=a(1197);function s(){(0,n.default)(),(0,i.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(429),s=a(1196),r=a(120),o=a(79);const d={handleCreateDomain({aid:e,createDomainParameters:t}){(0,r.createDomain)(e,t).then((t=>{s.default.addDomain({aid:e,domain:t})})).catch((e=>{s.default.createDomainFailure(),o.handleError(e)}))},handleUpdateDomainCaptureSettings({aid:e,doid:t,captureSettings:a,oldCaptureSettings:n,onWorkspaceIsNotActiveError:i}){a&&(0,r.updateDomainCaptureSettings)(e,t,a).catch((e=>{s.default.updateDomainCaptureSettings({doid:t,captureSettings:n,syncWithApi:!1}),o.handleError(e,{dialogCallback(){422===e.status&&"Workspace is not active"===e.title&&(null==i||i())}})}))},handleDeleteDomain({aid:e,doid:t,domain:a}){(0,r.deleteDomain)(e,t).catch((t=>{s.default.addDomain({aid:e,domain:a}),o.handleError(t)}))},handleCreateAdmin({aid:e,email:t}){(0,r.addAccountAdmin)(e,t).then((({members:e})=>{s.default.addAdmin(e[0])})).catch((e=>{o.handleError(e)}))},handleRemoveAdmin({aid:e,member:{user:{_id:t}},member:a}){(0,r.removeAccountAdmin)(e,t).catch((e=>{s.default.addAdmin(a),o.handleError(e)}))}};function l(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.CREATE_DOMAIN:d.handleCreateDomain(e);break;case i.default.UPDATE_DOMAIN_CONFIGURATION_SETTINGS:e.syncWithApi&&d.handleUpdateDomainCaptureSettings(e);break;case i.default.DELETE_DOMAIN:d.handleDeleteDomain(e);break;case i.default.CREATE_ADMIN:d.handleCreateAdmin(e);break;case i.default.REMOVE_ADMIN:d.handleRemoveAdmin(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(264),i=a(429);const s={createDomain({createDomainParameters:e}){const{selectedAccountId:t}=n.default.AccountAdminStore.getState();if(!t)return;const{userId:a}=n.default.UserStore.getState();n.default.dispatcher.dispatch({type:i.default.CREATE_DOMAIN,aid:t,createDomainParameters:e,adminId:a})},addDomain({aid:e,domain:t}){n.default.dispatcher.dispatch({type:i.default.ADD_DOMAIN,aid:e,domain:t})},updateDomainCaptureSettings({doid:e,captureSettings:t,onWorkspaceIsNotActiveError:a,syncWithApi:s=!1}){const{selectedAccountId:r,accountDetails:o}=n.default.AccountAdminStore.getState(),d=r&&o[r];if(!r||!d||!d.domains)return;const l=d.domains.find((t=>t._id===e));if(!l)return;let c,u;s&&(c=l.captureSettings,({userId:u}=n.default.UserStore.getState())),n.default.dispatcher.dispatch({type:i.default.UPDATE_DOMAIN_CONFIGURATION_SETTINGS,aid:r,doid:e,captureSettings:t,oldCaptureSettings:c,syncWithApi:s,adminId:u,domainName:l.name,onWorkspaceIsNotActiveError:a})},deleteDomain({doid:e}){var t,a;const{selectedAccountId:s,accountDetails:r}=n.default.AccountAdminStore.getState();if(!s)return;const o=null===(a=null===(t=r[s])||void 0===t?void 0:t.domains)||void 0===a?void 0:a.find((t=>t._id===e));o&&n.default.dispatcher.dispatch({type:i.default.DELETE_DOMAIN,aid:s,doid:e,domain:o})},createDomainFailure(){n.default.dispatcher.dispatch({type:i.default.CREATE_DOMAIN_FAILURE})},createAdmin(e){const{selectedAccountId:t}=n.default.AccountAdminStore.getState();t&&n.default.dispatcher.dispatch({type:i.default.CREATE_ADMIN,aid:t,email:e})},addAdmin(e){const{selectedAccountId:t}=n.default.AccountAdminStore.getState();t&&n.default.dispatcher.dispatch({type:i.default.ADD_ADMIN,aid:t,member:e})},removeAdmin(e){const{selectedAccountId:t}=n.default.AccountAdminStore.getState();t&&n.default.dispatcher.dispatch({type:i.default.REMOVE_ADMIN,aid:t,member:e})}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(264),i=a(429),s=a(387);const r={handleUpdateConfigurationSettings({aid:e,captureSettings:t,oldCaptureSettings:a,adminId:n,domainName:i}){if(a||!t)return;let r={"Account Id":e,"Admin Id":n,"Domain name":i,Type:t.action};t.action===s.CaptureSettingsAction.Capture?r=Object.assign(Object.assign({},r),{"Workspace Id":t.organizations[0].id,Access:t.organizations[0].restricted,Role:t.organizations[0].defaultRole}):t.action===s.CaptureSettingsAction.Notify&&(r=Object.assign(Object.assign({},r),{"Has custom message":Boolean(t.notificationMessage)})),mixpanel.master.track("Domain setup",r)},handleCreateDomain({aid:e,createDomainParameters:t,adminId:a}){mixpanel.master.track("Verification request",{"Account Id":e,"Admin Id":a,"Domain name":t.name})}};function o(){n.default.dispatcher.register((e=>{switch(e.type){case i.default.UPDATE_DOMAIN_CONFIGURATION_SETTINGS:e.syncWithApi&&r.handleUpdateConfigurationSettings(e);break;case i.default.CREATE_DOMAIN:r.handleCreateDomain(e)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1199);function i(){(0,n.default)()}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(264),i=a(432);const s={handleOpenGlobalSearchPopup(e){"click"===e?mixpanel.master.track("Clicked global search text field"):"keyDown"===e&&mixpanel.master.track("Pressed global search hot key")}};function r(){n.default.dispatcher.register((e=>{if(e.type===i.default.OPEN_GLOBAL_SEARCH_POPUP)s.handleOpenGlobalSearchPopup(e.eventType)}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var n=a(9),i=a(82),s=a(13),r=a(120),o=a(1071),d=a(651),l=a(264);const c=["loading"];function u(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}async function p(){let e=l.default.UserStore.getState(),{loading:t}=e,a=u(e,c);if(t){if(a=await function(){const e=(0,o.fetchEmbeddedData)("user",{remove:!1});return e?Promise.resolve(e):n.default.get("userToken")?(0,r.getUserProfile)():Promise.resolve(null)}(),!a)return;d.default.loadUser(a)}const{notificationBannerStatus:p,notificationStatus:f,zeplinThreeZeroWhatsNewSeen:S,shouldPromoteSpacingSectionDescriptionEditButton:h,shouldDisplayStyleguideTutorial:E,shouldPromoteExportDesignTokens:g,shouldDisplayInvitedUserHintbox:O,shouldDisplayPersonalWorkspaceHintbox:T,shouldDisplayDashboardOnboardingHintbox:m,shouldDisplayAddToFlowOnboarding:_,shouldDisplayAddToFlowTooltip:b,storybookIntegrationPromotionSeen:C,highlightComponentsPromotionSeen:A,linkToStyleguidePromotionSeen:y,globalSearchNewTagMenuSeen:I}=await s.userPrefs.getAll(),{config:{plans:N}}=l.default.AppStore.getState(),P=N.find((e=>e.id===a.paymentPlan)),D=await(0,r.getTerms)(),R=sessionStorage.getItem("accountCaptureInfo");let v;R&&(v=JSON.parse(R),sessionStorage.removeItem("accountCaptureInfo")),d.default.updateUser({isDesktopNotificationEnabled:f,zeplinThreeZeroWhatsNewSeen:S,shouldPromoteSpacingSectionDescriptionEditButton:h,shouldDisplayStyleguideTutorial:E,shouldPromoteExportDesignTokens:g,shouldDisplayInvitedUserHintbox:O,shouldDisplayPersonalWorkspaceHintbox:T,shouldDisplayDashboardOnboardingHintbox:m,shouldDisplayAddToFlowOnboarding:_,shouldDisplayAddToFlowTooltip:b,paymentPlan:P,storybookIntegrationPromotionSeen:C,highlightComponentsPromotionSeen:A,linkToStyleguidePromotionSeen:y,termsForApproval:D,shouldAcceptNewTerms:D&&!!D.length,accountCaptureInfo:v,globalSearchNewTagMenuSeen:I}),window.Notification&&"default"===Notification.permission&&p&&i.show({content:"Zeplin needs your permission to <a href='#'>enable desktop notifications</a>",contentType:"html",group:"notification",closeCallback(){s.userPrefs.set("notificationBannerStatus",!1)},bodyCallbacks:{a(e){e.preventDefault(),i.closeBanner("notification"),Notification.requestPermission((e=>{d.default.setDesktopNotifications("granted"===e)}))}}}),"registered"===a.status&&"dismissed"!==sessionStorage.getItem("verificationBannerStatus")&&i.show({content:"Your email is not verified yet. Please check your inbox.",group:"verification",closeCallback(){sessionStorage.setItem("verificationBannerStatus","dismissed")}})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var n=a(6),i=a(185),s=a(104),r=a(108),o=a(264),d=a(1055),l=a(576),c=a(375);const u="imports-change";function p(e,t){l.default.handleImports(t)}function f(){n.default.ipcRenderer.on(u,(0,i.debounce)(p)),n.default.ipcRenderer.send("subscribe-to-imports")}function S(e){e.forEach((function(e){e.remove()}))}function h(e){e.stopPropagation(),"height"===e.propertyName&&e.target.remove()}function E(e){e.stopPropagation();const t=e.target;t.removeEventListener("transitionend",E),t.classList.remove("resize"),t.style.transitionDuration="";const a=document.querySelectorAll(".versionImport"),n=document.querySelectorAll(".versionImport.hidden");0!==a.length&&n.length!==a.length||l.default.hideImportsIndicator(),n.length&&S(n),f()}function g(e){e.stopPropagation();const t=document.querySelector(".versionImports .body"),a=document.querySelector(".versionImports .list"),i=Array.from(document.querySelectorAll(".versionImport.done, .versionImport.failed"));if(0===i.length)return;n.default.ipcRenderer.removeAllListeners(u);var s=i.reduce((function(e,a){return!function(e,t){const a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return a.bottom>=n.top&&a.top<=n.bottom}(a,t)?e.hideAndRemove.push(a):e.animateAndRemove.unshift(a),e}),{hideAndRemove:[],animateAndRemove:[]});const r=s.hideAndRemove,o=s.animateAndRemove;let d=a.clientHeight,l=d,c=0;a.style.height=d+"px";var p=t.getBoundingClientRect();r.forEach((function(e){const n=e.getBoundingClientRect();d-=n.height,l-=e.height,a.style.height=d+"px";const i=n.bottom<p.top;e.classList.add("hidden"),i&&(t.scrollTop-=n.height)})),o.forEach((function(e){const t=e.getBoundingClientRect().height;l-=t,e.addEventListener("transitionend",h),e.style.transitionDelay=c+"ms",e.classList.add("clear"),c+=80}));let g=c-80;const O=l<d,T=l<t.clientHeight-52;if(O&&T){d>t.clientHeight-52&&(a.style.height=t.clientHeight-52+"px"),a.addEventListener("transitionend",E),a.classList.add("resize"),a.style.transitionDuration=g+150+200+"ms",a.style.height=l+"px"}else a.style.height="auto",S(r),o.length>0?setTimeout(f,g+200):f();n.default.ipcRenderer.send("clear-imports")}function O(){n.default&&n.default.ipcRenderer&&(n.default.ipcRenderer.on("imports-started",l.default.showImportsList),n.default.ipcRenderer.on("set-suggested-resources",((e,t)=>{l.default.setSuggestedLocalResources(t)})),n.default.ipcRenderer.on("apply-color-operations",((e,t)=>{const{barrelId:a,barrelType:n,colors:i,hasLinkedStyleguideColor:s}=t,o={},l=[];i.forEach((e=>{e.update?o[e.cid]=e:l.push(new r.default(e))})),d.default.migrateColors({bid:a,barrelType:n,colorsToUpdate:o,colorsToAdd:l,hasLinkedStyleguideColor:s,syncWithApi:!0})})),n.default.ipcRenderer.on("import-started-from-old-xd-integration",(()=>{l.default.showXdPluginReleasedMessage()})),o.default.dispatcher.register((e=>{switch(e.type){case c.default.RETRY_IMPORT:a=e.id,n.default.ipcRenderer.send("retry-import",a);break;case c.default.CANCEL_IMPORT:!function(e){n.default.ipcRenderer.send("cancel-import",e)}(e.id);break;case c.default.RETRY_GET_PROJECT_FOR_IMPORTS:!function(e){n.default.ipcRenderer.send("retry-getting-project",e)}(e.id);break;case c.default.CLEAR_IMPORTS:g(e.ev);break;case c.default.HIDE_COMPONENT_LIMIT_HINT:t=e.barrelId,n.default.ipcRenderer.send("remove-component-limit-rejection",t);break;case c.default.SEE_PLANS:location.assign((0,s.urlResolve)("profile-billing",{query:{period:"annual"}}))}var t,a})),f())}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerWorkspaceSocketBindings:()=>n.registerWorkspaceSocketBindings});a(1203),a(1206),a(1245);var n=a(1247)},(e,t,a)=>{"use strict";a.r(t);var n=a(1075),i=a(1204),s=a(1205),r=a(651),o=a(739),d=a(795),l=a(9);n.userChannel&&(n.userChannel.bind(i.default.UPDATE_USERNAME,(({body:{username:e}})=>{r.default.setUsername(e)})),n.userChannel.bind(i.default.UPDATE_EMAIL,(({body:{email:e}})=>{r.default.setEmail(e)})),n.userChannel.bind(i.default.UPDATE_USER,(({body:{fullName:e,bio:t}})=>{r.default.setFullName(e),r.default.setBio(t)})),n.userChannel.bind(i.default.UPDATE_AVATAR,(({body:{avatar:e}})=>{r.default.setAvatar(e)})),n.userChannel.bind(i.default.UPDATE_EMOTAR,(({body:{emotar:e}})=>{r.default.setEmotar(e)})),n.userChannel.bind(i.default.UPDATE_EMAIL_NOTIFICATION,(({body:{emailNotifications:e}})=>{r.default.setEmailNotifications(e)})),n.userChannel.bind(i.default.MUTE_PROJECT_NOTIFICATIONS,(({params:{pid:e}})=>{r.default.muteProjectNotifications({pid:e})})),n.userChannel.bind(i.default.MUTE_STYLEGUIDE_NOTIFICATIONS,(({params:{stid:e}})=>{r.default.muteStyleguideNotifications({stid:e})})),n.userChannel.bind(i.default.UNMUTE_PROJECT_NOTIFICATIONS,(({params:{pid:e}})=>{r.default.unmuteProjectNotifications({pid:e})})),n.userChannel.bind(i.default.UNMUTE_STYLEGUIDE_NOTIFICATIONS,(({params:{stid:e}})=>{r.default.unmuteStyleguideNotifications({stid:e})})),n.userChannel.bind(i.default.UPDATE_NOTIFICATION_EVENT,(({params:{nid:e,eventId:t},body:{markedAsRead:a}})=>{d.default.setEventReadStatusOffline(e,[t],a)})),n.userChannel.bind(i.default.UPDATE_NOTIFICATIONS,(({body:{nids:e,markedAsRead:t}})=>{d.default.setReadStatusOffline(e,t)})),n.userChannel.bind(i.default.DELETE_NOTIFICATION_EVENT,(({params:{nid:e,eventId:t}})=>{d.default.deleteEvent(e,t)})),n.userChannel.bind(i.default.NOTIFICATION_EVENT,(e=>{d.default.addNotification(e.body)})),n.userChannel.bind(i.default.UPDATE_BILLING,(({body:e})=>{r.default.setBilling(e)})),n.userChannel.bind(s.default.CREATE,(({body:e})=>{o.default.addOrganization(e)})),n.userChannel.bind(s.default.INVITE_MEMBERS,(({body:e})=>{o.default.addOrganization(e)})),n.userChannel.bind(i.default.VERIFY,r.default.setVerified),n.userChannel.bind(i.default.DELETE,r.default.logout),n.userChannel.bind(i.default.TERMINATE_SESSION,(({body:{tokenIds:e}})=>{const t=l.default.get("userToken");if(t){const{jti:a}=JSON.parse(atob(t.split(".")[1]));e.includes(a)&&r.default.terminateSession()}})),n.userChannel.bind(i.default.ACCEPT_TERMS,(({params:{teid:e}})=>{r.default.acceptTerms({acceptedTermsId:e})})))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={CREATE:"CreateUser",DELETE:"DeleteUser",UPDATE_EMAIL:"UpdateEmail",UPDATE_EMAIL_NOTIFICATION:"UpdateEmailNotifications",MUTE_PROJECT_NOTIFICATIONS:"MuteProjectNotifications",MUTE_STYLEGUIDE_NOTIFICATIONS:"MuteStyleguideNotifications",UNMUTE_PROJECT_NOTIFICATIONS:"UnmuteProjectNotifications",UNMUTE_STYLEGUIDE_NOTIFICATIONS:"UnmuteStyleguideNotifications",DELETE_NOTIFICATION_EVENT:"DeleteNotificationEvent",UPDATE_NOTIFICATION_EVENT:"UpdateNotificationEvent",UPDATE_NOTIFICATIONS:"UpdateNotifications",NOTIFICATION_EVENT:"NotificationEvent",UPDATE_AVATAR:"UpdateUserAvatar",UPDATE_BILLING:"UpdateUserBilling",UPDATE_EMOTAR:"UpdateUserEmotar",UPDATE_USERNAME:"UpdateUsername",UPDATE_USER:"UpdateUser",VERIFY:"VerifyUser",TERMINATE_SESSION:"TerminateSession",ACCEPT_TERMS:"AcceptTerms"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={CREATE:"CreateOrganization",CREATE_PROJECT:"CreateProject",CREATE_STYLEGUIDE:"CreateStyleguide",DELETE:"DeleteOrganization",INVITE_MEMBERS:"InviteOrganizationMembers",REMOVE_USER:"RemoveMemberFromOrganization",UPDATE_BILLING:"UpdateOrganizationBilling",UPDATE_DOMAIN:"UpdateOrganizationDomain",UPDATE_LOGO:"UpdateOrganizationLogo",UPDATE_STATUS:"UpdateOrganizationStatus",UPDATE_MEMBER_ACCESSIBILITY:"UpdateOrganizationMemberAccessibility",UPDATE_MEMBER_ROLE:"UpdateOrganizationMemberRole",UPDATE_MEMBER_TAGS:"UpdateOrganizationMembersTags",UPDATE_NAME:"UpdateOrganizationName",ADD_PROJECT_TO_ORGANIZATION_MEMBER_FOCUS:"AddProjectToOrganizationMemberFocus",REMOVE_PROJECT_FROM_ORGANIZATION_MEMBER_FOCUS:"RemoveProjectFromOrganizationMemberFocus",ADD_WORKFLOW_STATUS:"AddOrganizationWorkflowStatus",UPDATE_WORKFLOW_STATUS:"UpdateOrganizationWorkflowStatus",DELETE_WORKFLOW_STATUS:"DeleteOrganizationWorkflowStatus",ADD_SECTION:"CreateOrganizationSection",UPDATE_SECTION:"UpdateOrganizationSection",DELETE_SECTION:"DeleteOrganizationSection",ADD_SECTION_LINK:"CreateOrganizationSectionLink",UPDATE_SECTION_LINK:"UpdateOrganizationSectionLink",DELETE_SECTION_LINK:"DeleteOrganizationSectionLink",UPDATE_SECTION_PROJECT:"UpdateOrganizationSectionProjects",UPDATE_SECTION_ORDER:"UpdateOrganizationSectionsOrder",UPDATE_MIN_ROLE_FOR_MEMBER_MANAGEMENT:"UpdateOrganizationMinRoleForMemberManagement"}},(e,t,a)=>{"use strict";a.r(t);var n=a(1075),i=a(1074),s=a(1207),r=a(1208),o=a(1204),d=a(1209),l=a(1210),c=a(1211),u=a(1212),p=a(343),f=a(1135),S=a(1062),h=a(1055),E=a(737),g=a(1105),O=a(1060),T=a(1081),m=a(1050),_=a(1146),b=a(1145),C=a(1063),A=a(1049),y=a(264),I=a(738),N=a(739),P=a(1065),D=a(576),R=a(123),v=a(415),L=a(1068),j=a(120),U=a(100),w=a(1213),k=a(1244);const M=["variantSections","components"];function V(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}n.default&&(n.default.bind_global(((e,{params:{pid:t}={}})=>{t&&(E.default.hasProject(t)||(0,i.unsubscribeFromProjectChannel)(t))})),n.default.bind(s.default.TRANSFER_OWNERSHIP,(({params:{oid:e,pid:t,mid:a,uid:n},body:s,body:{users:r}})=>{const o=E.default.findBarrelOrganizationId(t);if(a){const e=r.find((e=>e.user._id===Zeplin.user._id));return e&&(Zeplin.user.paymentPlan=e.paymentPlan),void S.default.transferOwnership({bid:t,fromUserId:a,targetId:n,users:r,oid:o,toOrganization:!1})}if(!e)return;const{organizations:d}=y.default.OrganizationStore.getState();if(d.find((t=>t._id===e)))if("_id"in s)E.default.hasProject(t)&&h.default.remove({barrelType:R.default.PROJECT,bid:t}),h.default.add({barrelType:R.default.PROJECT,barrel:s,oid:e});else{r.some((e=>e.user._id===Zeplin.user._id))||h.default.remove({barrelType:R.default.PROJECT,bid:t})}else(0,i.unsubscribeFromOrganizationChannel)(e)})),n.default.bind(s.default.UPDATE_NAME,(({params:{pid:e},body:{name:t}})=>{h.default.updateName({bid:e,name:t})})),n.default.bind(s.default.UPDATE_DESCRIPTION,(({params:{pid:e},body:{description:t}})=>{h.default.updateDescription({bid:e,description:t})})),n.default.bind(s.default.UPDATE_DENSITY_SCALE,(({params:{pid:e},body:{densityScale:t}})=>{h.default.updateDensityScale({bid:e,densityScale:t})})),n.default.bind(s.default.UPDATE_THUMBNAIL,(({params:{pid:e},body:{thumbnail:t}})=>{h.default.updateThumbnail({bid:e,thumbnail:t})})),n.default.bind(s.default.UPDATE_UPDATED,(({params:{pid:e},body:{updated:t}})=>{S.default.updateProject({pid:e,data:{updated:t}})})),n.default.bind(s.default.UPDATE_ACCESSIBILITY,(({params:{pid:e},body:{public:t}})=>{h.default.toggleScene({bid:e,accessibility:t})})),n.default.bind(s.default.ADD_INTEGRATION_EVENT,(({params:{pid:e,intype:t,inid:a,event:n}})=>{C.default.addIntegrationEvent({bid:e,intype:t,inid:a,event:n})})),n.default.bind(s.default.DELETE_INTEGRATION_EVENT,(({params:{pid:e,intype:t,inid:a,event:n}})=>{C.default.removeIntegrationEvent({bid:e,intype:t,inid:a,event:n})})),n.default.bind(s.default.DELETE_INTEGRATION,(({params:{pid:e,intype:t,inid:a}})=>{h.default.removeIntegration({bid:e,intype:t,inid:a})})),n.default.bind(s.default.ADD_EXTENSION,(({params:{uid:e,pid:t},body:{_id:a}})=>{A.default.load({barrelType:R.default.PROJECT,bid:t,uid:e,eid:a})})),n.default.bind(s.default.REMOVE_EXTENSION,(({params:{pid:e,eid:t}})=>{A.default.remove({barrelType:R.default.PROJECT,bid:e,eid:t})})),n.default.bind(s.default.ACTIVATE,(({params:{pid:e}})=>{h.default.activate({bid:e,barrelType:R.default.PROJECT})})),n.default.bind(s.default.ARCHIVE,(({params:{pid:e,uid:t}})=>{h.default.archive({bid:e,barrelType:R.default.PROJECT,uid:t})})),n.default.bind(s.default.DELETE,(({params:{pid:e,uid:t}})=>{h.default.remove({barrelType:R.default.PROJECT,bid:e,uid:t})})),n.default.bind(s.default.DELETE_USER_PROJECT_SUGGESTIONS,(({params:{pid:e,suggestionType:t}})=>{"colors"===t&&O.default.hideSuggestedColors({barrelType:R.default.PROJECT,barrelId:e}),"textStyles"===t&&O.default.hideSuggestedTextStyles({barrelType:R.default.PROJECT,barrelId:e})})),n.default.bind(s.default.UPDATE_USER_PROJECT_SUGGESTIONS,(({params:{pid:e},body:{colors:t,textStyles:a}})=>{t&&D.default.suggestedRemoteColorsFileReceived({bid:e,fileName:t}),a&&D.default.suggestedRemoteTextStylesFileReceived({bid:e,fileName:a})})),n.default.bind(o.default.CREATE,(({params:{pid:e,uid:t},body:a})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:G(G({},a),{},{status:"registered"})})})),n.default.bind(s.default.INVITE_USER,(({params:{pid:e,oid:t="user",oseid:a},body:n})=>{const i="role"in n,s=E.default.hasProject(e),{barrelId:r}=y.default.BarrelStore.getState(),{userId:o}=y.default.UserStore.getState();if(i&&s){const{user:{_id:t}}=n;e===r&&t===o&&(h.default.reset(),E.default.reloadCurrentPage()),h.default.addMembers({barrelType:R.default.PROJECT,bid:e,members:[n]})}else if(s)S.default.updateProject({pid:e,data:n});else{if("user"!==t){let i=I.default.getOrganization(t);!i&&n.organization&&(N.default.addOrganization(n.organization),i=I.default.getOrganization(t));const{sections:s=[]}=i;if(a&&!s.some((e=>e._id===a)))return void j.getOrganizationSection(t,a).then((({section:i,index:s})=>{h.default.add({barrelType:R.default.PROJECT,oid:t,oseid:a,barrel:n}),N.default.addProjectSection({oid:t,index:s,sectionData:i}),A.default.init({barrelType:R.default.PROJECT,bid:e,enabledExtensions:null})}))}h.default.add({barrelType:R.default.PROJECT,oid:t,oseid:a,barrel:n}),A.default.init({barrelType:R.default.PROJECT,bid:e,enabledExtensions:null})}})),n.default.bind(s.default.UPDATE_USER_ROLE,(({params:{pid:e,mid:t},body:{role:a}})=>{h.default.updateUserRole({bid:e,uid:t,role:a})})),n.default.bind(o.default.UPDATE_USER,(({params:{pid:e,uid:t},body:a})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:a})})),n.default.bind(o.default.UPDATE_USERNAME,(({params:{pid:e,uid:t},body:a})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:a})})),n.default.bind(o.default.UPDATE_EMAIL,(({params:{pid:e,uid:t},body:a})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:a})})),n.default.bind(o.default.UPDATE_AVATAR,(({params:{pid:e,uid:t},body:a})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:a})})),n.default.bind(o.default.UPDATE_EMOTAR,(({params:{pid:e,uid:t},body:{emotar:a}})=>{e&&h.default.updateUserData({bid:e,uid:t,userData:{emotar:a}})})),n.default.bind(o.default.DELETE,(({params:{pid:e,uid:t}})=>{e&&h.default.removeMember({barrelType:R.default.PROJECT,bid:e,uid:t})})),n.default.bind(s.default.REMOVE_USER,(({params:{pid:e,uid:t,mid:a}})=>{h.default.removeMember({barrelType:R.default.PROJECT,bid:e,uid:t,mid:a}),(0,w.removeUser)(e,a)})),n.default.bind(s.default.ATTACH_JIRA_ISSUE,(({params:{pid:e},body:t})=>{const a=new p.default(t.jira);h.default.attachJiraIssue({bid:e,jira:a})})),n.default.bind(s.default.REMOVE_JIRA_ISSUE_ATTACHMENT,(({params:{pid:e,aid:t}})=>{h.default.removeJiraIssueAttachment({bid:e,aid:t})})),n.default.bind(s.default.CREATE_SECTION,(({params:{pid:e},body:{sections:t}})=>{t.forEach((({_id:t,name:a,screens:n,parent:i,index:s})=>{const{sections:r}=E.default.getBarrel({bid:e});if(!r)return;const o=r.findIndex((e=>e._id===i)),d=r[o],l={_id:t,name:a,screens:n};let c=[...r];d&&(c=r.filter((({path:e})=>(e||[]).includes(i))),l.parent=i,l.path=[...d.path||[],i]);const u=(l.path||[]).length;let p=o+1,f=0;for(const e of c){const t=(e.path||[]).length;t===u?f++:t<u&&(f=0),f<=s&&p++}g.default.addSection({pid:e,section:l,index:p})}))})),n.default.bind(s.default.UPDATE_SECTION,(({params:{pid:e,seid:t},body:a})=>{g.default.updateSection({pid:e,seid:t,sectionData:a})})),n.default.bind(s.default.UPDATE_SECTIONS_ORDER,(({params:{pid:e},body:{sections:t}})=>{t.forEach((({_id:t,to:a,parent:n})=>{const{sections:i}=E.default.getBarrel({bid:e});if(!i)return;const s=i.filter((e=>e._id!==t)),r=s.findIndex((e=>e._id===n)),o=s[r];let d=s,l=0;o&&(d=s.filter((({path:e})=>(e||[]).includes(n))),l=[...o.path||[],n].length);let c=r+1,u=0;for(const e of d){const t=(e.path||[]).length;t===l?u++:t<l&&(u=0),u<=a&&c++}g.default.updateSectionOrder({pid:e,seid:t,index:c,parent:n})}))})),n.default.bind(s.default.UPDATE_SECTION_SCREENS,(({params:{pid:e,seid:t},body:{index:a,screens:n}})=>{g.default.updateScreenOrder({pid:e,screens:n,targetSectionId:t,targetIndex:a})})),n.default.bind(s.default.DELETE_SECTION,(({params:{pid:e,seid:t}})=>{g.default.removeSection({pid:e,seid:t})})),n.default.bind(d.default.CREATE_V3,(({params:{pid:e,requestId:t,index:a,variantGroupIndex:n},body:i})=>{n>-1&&i.variantGroup&&(i.variantGroup.screens[0].index=n,i.variantGroup.screens[0].requestId=t),m.default.addScreen({pid:e,screen:G(G({},i),{},{requestId:t,index:a})})})),n.default.bind(d.default.UPDATE,(({params:{pid:e,sid:t},body:{name:a,description:n}})=>{a&&m.default.updateName({pid:e,sid:t,name:a}),(0,U.exists)(n)&&m.default.updateDescription({pid:e,sid:t,description:n})})),n.default.bind(d.default.UPDATE_TAGS,(({params:{pid:e},body:{screens:t}})=>{m.default.updateTags({pid:e,updates:t})})),n.default.bind(d.default.CREATE_VERSION,(({params:{pid:e,sid:t},body:a})=>{m.default.addVersion({pid:e,sid:t,version:a})})),n.default.bind(d.default.CREATE_SCREEN_TILES,(({params:{pid:e,sid:t,vid:a},body:{tileInfo:n}})=>{m.default.addScreenTiles({pid:e,sid:t,vid:a,tileInfo:n})})),n.default.bind(d.default.UPDATE_VERSION_COMMIT_COLOR,(({params:{pid:e,sid:t,vid:a},body:{color:n}})=>{m.default.updateCommitColor({pid:e,sid:t,vid:a,color:n})})),n.default.bind(d.default.UPDATE_VERSION_COMMIT_MESSAGE,(({params:{pid:e,sid:t,vid:a},body:{message:n}})=>{m.default.updateCommitMessage({pid:e,sid:t,vid:a,message:n})})),n.default.bind(d.default.DELETE_VERSION,(({params:{pid:e,sid:t,vid:a}})=>{m.default.removeVersion({pid:e,sid:t,vid:a})})),n.default.bind(d.default.DELETE,(({params:{pid:e,uid:t,sid:a}})=>{g.default.deleteScreens({pid:e,uid:t,items:[{type:"screen",_id:a}]})})),n.default.bind(l.default.PROCESS_VERSION_ASSET_CONTENTS,(({params:{vid:e},body:{assets:t}})=>{b.default.updateVersionAssetOptimizedContents({vid:e,assets:t})})),n.default.bind(l.default.PROCESS_PROJECT_COMPONENT_VERSION_ASSET_CONTENTS,(({params:{coid:e},body:{assets:t}})=>{b.default.updateComponentVersionAssetOptimizedContents({coid:e,assets:t})})),n.default.bind(c.default.CREATE,(({params:{pid:e,sid:t,uid:a},body:n})=>{m.default.addDot({pid:e,sid:t,uid:a,dot:n})})),n.default.bind(c.default.CREATE_COMMENT,(({params:{uid:e,pid:t,sid:a,did:n},body:i})=>{m.default.addComment({pid:t,sid:a,uid:e,did:n,comment:i})})),n.default.bind(c.default.UPDATE_COMMENT_NOTE,(({params:{uid:e,pid:t,sid:a,did:n,cmid:i},body:{note:s,updated:r=new Date}})=>{m.default.updateComment({pid:t,sid:a,uid:e,did:n,cmid:i,commentData:{note:s,updated:r}})})),n.default.bind(c.default.UPDATE,(({params:{pid:e,sid:t,did:a},body:n})=>{m.default.updateDot({pid:e,sid:t,did:a,dotData:n})})),n.default.bind(c.default.DELETE,(({params:{pid:e,sid:t,did:a}})=>{m.default.removeDot({pid:e,sid:t,did:a})})),n.default.bind(c.default.DELETE_COMMENT,(({params:{pid:e,sid:t,did:a,cmid:n}})=>{m.default.removeComment({pid:e,sid:t,did:a,cmid:n})})),n.default.bind(s.default.UPDATE_STYLEGUIDE_LINK,(({params:{pid:e},body:{styleguideLink:t}})=>{f.default.updateProjectStyleguideLink({pid:e,data:{styleguideLink:t}})})),n.default.bind(s.default.REMOVE_STYLEGUIDE_LINK,(({params:{pid:e},body:{styleguideLink:{styleguide:t}}})=>{f.default.unlinkProjectFromStyleguide({pid:e,styleguide:t})})),n.default.bind(s.default.CREATE_COLOR,(({params:{pid:e},body:t})=>{h.default.addColor({bid:e,color:t})})),n.default.bind(s.default.UPDATE_COLOR,(({params:{pid:e,cid:t},body:a})=>{h.default.updateColor({bid:e,cid:t,colorData:a})})),n.default.bind(s.default.UPDATE_COLORS_ORDER,(({params:{pid:e},body:{colors:t}})=>{t.forEach((({_id:t,to:a})=>{h.default.updateColorOrder({bid:e,cid:t,to:a})}))})),n.default.bind(s.default.DELETE_COLOR,(({params:{pid:e,cid:t,unorderedBatch:a}})=>{a||h.default.removeColor({bid:e,cid:t})})),n.default.bind(s.default.UPDATE_COLORS_STYLEGUIDE,(({params:{pid:e,tstid:t}})=>{h.default.removeAllColors({bid:e}),E.default.hasStyleguide(t)&&j.getStyleguide(t).then((e=>{T.default.getStyleguideSuccess({styleguide:e})}))})),n.default.bind(s.default.CREATE_TEXT_STYLE,(({params:{pid:e},body:t})=>{h.default.addTextStyle({bid:e,textStyle:t})})),n.default.bind(s.default.UPDATE_TEXT_STYLE,(({params:{pid:e,tsid:t},body:a})=>{h.default.updateTextStyle({bid:e,tsid:t,textStyleData:a})})),n.default.bind(s.default.DELETE_TEXT_STYLE,(({params:{pid:e,tsid:t,unorderedBatch:a}})=>{a||h.default.removeTextStyle({bid:e,tsid:t})})),n.default.bind(s.default.UPDATE_TEXT_STYLES_STYLEGUIDE,(({params:{pid:e,tstid:t}})=>{h.default.removeAllTextStyles({bid:e}),E.default.hasStyleguide(t)&&j.getStyleguide(t).then((e=>{T.default.getStyleguideSuccess({styleguide:e})}))})),n.default.bind(s.default.CREATE_SPACING_SECTION,(({params:{pid:e},body:t})=>{h.default.addSpacingSection({bid:e,spacingSection:t})})),n.default.bind(s.default.UPDATE_SPACING_SECTION,(({params:{pid:e,ssid:t},body:a})=>{h.default.updateSpacingSection({bid:e,ssid:t,updatedSpacingSection:a})})),n.default.bind(s.default.DELETE_SPACING_SECTION,(({params:{pid:e,ssid:t}})=>{h.default.removeSpacingSection({bid:e,ssid:t})})),n.default.bind(s.default.CREATE_SPACING_TOKEN,(({params:{pid:e,ssid:t},body:a})=>{h.default.addSpacingToken({bid:e,ssid:t,spacingToken:a})})),n.default.bind(s.default.UPDATE_SPACING_TOKEN,(({params:{pid:e,ssid:t,sptid:a},body:n})=>{h.default.updateSpacingToken({bid:e,ssid:t,sptid:a,updatedSpacingToken:n})})),n.default.bind(s.default.DELETE_SPACING_TOKEN,(({params:{pid:e,ssid:t,sptid:a}})=>{h.default.removeSpacingToken({bid:e,ssid:t,sptid:a})})),n.default.bind(s.default.UPDATE_REM_PREFERENCES,(({params:{pid:e},body:{remPreferences:t}})=>{h.default.updateRemPreferences({bid:e,updatedRemPreferences:t})})),n.default.bind(s.default.CREATE_COMPONENT_SECTION,(e=>{let{params:{pid:t,csid:a},body:{variantSections:n,components:i=[]}}=e,s=V(e.body,M);const r=i.map((({coid:e,csid:t})=>({coid:e,csid:t.split("/")})));h.default.addComponentSection({bid:t,csids:a?a.split("/"):[],componentSection:G({components:r},s)}),n&&n.forEach((e=>{const{_id:a,name:n,variant:i,components:s}=e;O.default.setComponentVariantData({bid:t,csid:a,name:n,sectionVariant:i,components:s})}))})),n.default.bind(s.default.UPDATE_COMPONENT_SECTION,(({params:{pid:e,csid:t},body:a})=>{h.default.updateComponentSection({bid:e,csids:t.split("/"),componentSectionData:a})})),n.default.bind(s.default.UPDATE_COMPONENT_SECTIONS_ORDER,(({params:{pid:e},body:{componentSections:t,variantSections:a}})=>{const n=t.map((({csid:e,tcsid:t,to:a})=>({csid:e.split("/"),tcsid:t?t.split("/"):[],to:a})));h.default.updateComponentSectionsOrder({bid:e,componentSections:n}),a&&a.forEach((t=>{const{_id:a,name:n,variant:i,components:s}=t;O.default.setComponentVariantData({bid:e,csid:a,name:n,sectionVariant:i,components:s})}))})),n.default.bind(s.default.MERGE_COMPONENT_SECTIONS,(({params:{pid:e},body:{componentSections:t}})=>{t.forEach((({csid:t,tcsid:a,flatten:n=!1})=>{h.default.mergeComponentSection({bid:e,csids:t.split("/"),tcsids:a.split("/"),flatten:n})}))})),n.default.bind(s.default.DELETE_COMPONENT_SECTION,(({params:{pid:e,csid:t,unorderedBatch:a}})=>{a||h.default.removeComponentSection({bid:e,csids:t.split("/")})})),n.default.bind(s.default.UPDATE_COMPONENT_SECTIONS_STYLEGUIDE,(({params:{pid:e,tstid:t},body:{componentSections:a}})=>{h.default.removeComponentSections({bid:e,componentSections:a}),E.default.hasStyleguide(t)&&j.getStyleguide(t).then((e=>{T.default.getStyleguideSuccess({styleguide:e})}))})),n.default.bind(s.default.CREATE_COMPONENT,(({params:{pid:e,csid:t,requestId:a,index:n},body:i})=>{h.default.addComponent({bid:e,csids:t.split("/"),component:G(G({},i),{},{requestId:a,index:n})})})),n.default.bind(s.default.CREATE_COMPONENT_V2,(({params:{pid:e,csid:t,requestId:a,index:n},body:i})=>{h.default.addComponent({bid:e,csids:t.split("/"),component:G(G({},i),{},{requestId:a,index:n})})})),n.default.bind(s.default.CREATE_COMPONENT_VERSION_V2,(({params:{pid:e,csid:t,coid:a},body:n})=>{h.default.updateComponent({bid:e,csids:t.split("/"),coid:a,componentData:n})})),n.default.bind(s.default.UPDATE_COMPONENT,(({params:{pid:e,csid:t,coid:a},body:n})=>{h.default.updateComponent({bid:e,csids:t.split("/"),coid:a,componentData:n})})),n.default.bind(s.default.UPDATE_COMPONENTS_ORDER,(({params:{pid:e},body:{components:t,variantSections:a}})=>{const n=t.map((({csid:e,tcsid:t,coid:a,to:n})=>({csid:e.split("/"),tcsid:t.split("/"),coid:a,to:n})));h.default.updateComponentsOrder({bid:e,components:n}),a&&a.forEach((t=>{const{_id:a,name:n,variant:i,components:s}=t;O.default.setComponentVariantData({bid:e,csid:a,name:n,sectionVariant:i,components:s})}))})),n.default.bind(s.default.DELETE_COMPONENT,(({params:{pid:e,csid:t,coid:a}})=>{h.default.removeComponent({bid:e,csids:t.split("/"),coid:a})})),n.default.bind(s.default.UPDATE_CONNECTED_COMPONENTS,(({params:{pid:e}})=>{j.getProjectConnectedComponents(e).then((({items:t})=>{h.default.updateConnectedComponents({bid:e,connectedComponents:t}),P.default.updateForUpdateConnectedComponents(e)}))})),n.default.bind(s.default.CREATE_CONNECTED_COMPONENT_ITEM,(({params:{pid:e}})=>{j.getProjectConnectedComponents(e).then((({items:t})=>{h.default.updateConnectedComponents({bid:e,connectedComponents:t}),P.default.updateForUpdateConnectedComponents(e)}))})),n.default.bind(s.default.DELETE_CONNECTED_COMPONENT_ITEM,(({params:{pid:e}})=>{j.getProjectConnectedComponents(e).then((({items:t})=>{h.default.updateConnectedComponents({bid:e,connectedComponents:t}),P.default.updateForUpdateConnectedComponents(e)}))})),n.default.bind(s.default.CONVERT_COMPONENT_SECTION_TO_VARIANT_SECTION,(({params:{pid:e,csid:t},body:{name:a,variant:n,components:i}})=>{O.default.setComponentVariantData({bid:e,csid:t,name:a,sectionVariant:n,components:i})})),n.default.bind(s.default.CONVERT_VARIANT_SECTION_TO_COMPONENT_SECTION,(({params:{pid:e,csid:t}})=>{O.default.removeComponentVariantData({bid:e,csid:t})})),n.default.bind(s.default.CREATE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{pid:e,csid:t},body:a})=>{O.default.createComponentVariantProperty({bid:e,csid:t,componentVariantProperty:a})})),n.default.bind(s.default.UPDATE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{pid:e,csid:t,vpid:a},body:n})=>{O.default.updateComponentVariantProperty({bid:e,csid:t,vpid:a,data:n})})),n.default.bind(s.default.DELETE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{pid:e,csid:t,vpid:a}})=>{O.default.removeComponentVariantProperty({bid:e,csid:t,vpid:a})})),n.default.bind(s.default.UPDATE_COMPONENTS_VARIANT_PROPERTIES,(({params:{pid:e,csid:t},body:{variant:a,components:n}})=>{O.default.setComponentVariantData({bid:e,csid:t,name,sectionVariant:a,components:n})})),n.default.bind(s.default.UPDATE_COMPONENT_SECTION_VARIANT_PROPERTIES_ORDER,(({params:{pid:e,csid:t},body:{properties:a}})=>{O.default.updateComponentVariantPropertiesOrder({bid:e,csid:t,properties:a})})),n.default.bind(s.default.CREATE_COMPONENT_SECTION_VARIANT_GROUPS,(({params:{pid:e,csid:t},body:{components:a,componentSections:n}})=>{O.default.groupComponentsByVariantProperty({bid:e,csid:t,components:a,componentSections:n})})),n.default.bind(s.default.DELETE_WORKFLOW_STATUS,(({params:{pid:e}})=>{h.default.deleteWorkflowStatus({bid:e})})),n.default.bind(s.default.UPDATE_WORKFLOW_STATUS,(({params:{pid:e},body:t})=>{h.default.updateWorkflowStatus({bid:e,workflowStatus:t})})),n.default.bind(s.default.DELETE_CONNECTED_COMPONENTS,(({params:{pid:e}})=>{h.default.updateConnectedComponents({bid:e,connectedComponents:[]}),P.default.updateForUpdateConnectedComponents(e)})),n.default.bind(s.default.UPSERT_VIRTUAL_COMPONENTS,(({params:{pid:e},body:t})=>{_.default.upsertVirtualComponents({pid:e,virtualComponents:t})})),n.default.bind(r.default.UPDATE_VARIANT_GROUP_NAME,(({params:{pid:e,vgid:t},body:{name:a}})=>{g.default.renameVariantGroup({pid:e,vgid:t,name:a})})),n.default.bind(r.default.DELETE_VARIANT_GROUP,(({params:{pid:e,vgid:t,uid:a,screens:n}})=>{g.default.deleteVariantGroup({pid:e,vgid:t,screens:n,uid:a})})),n.default.bind(r.default.ADD_SCREENS_TO_VARIANT_GROUP,(({params:{pid:e,vgid:t},body:{screens:a}})=>{g.default.addScreensToVariantGroup({pid:e,vgid:t,screens:a,shouldOrder:!0})})),n.default.bind(r.default.CREATE_VARIANT_GROUP,(({params:{pid:e},body:{_id:t,name:a,screens:n}})=>{g.default.createVariantGroup({pid:e,vgid:t,variantGroupName:a,screens:n,shouldOrder:!0})})),n.default.bind(r.default.REMOVE_SCREEN_FROM_VARIANT_GROUP,(({params:{pid:e,vgid:t,sid:a}})=>{m.default.removeScreenVariant({pid:e,vgid:t,svid:a})})),n.default.bind(r.default.UPDATE_SCREEN_VARIANT_NAME,(({params:{pid:e,vgid:t,sid:a},body:{variantName:n}})=>{m.default.renameScreenVariant({pid:e,vgid:t,svid:a,name:n})})),n.default.bind(r.default.UPDATE_SCREEN_VARIANT_ORDER,(({params:{pid:e,vgid:t},body:{index:a,screenIds:n}})=>{m.default.reorderScreenVariant({pid:e,vgid:t,svid:n[0],index:a})})),n.default.bind(u.default.CREATE_FLOW,(({params:{pid:e},body:t})=>{const{currentFlowId:a,fetchedFlowIds:n}=y.default.FlowStore.getState();(0!==n.size||a)&&L.default.loadFlow({pid:e,flid:t._id,flow:t})})),n.default.bind(u.default.ADD_NODES,(({params:{pid:e,flid:t},body:{nodes:a,connectors:n}})=>{L.default.addNodesToFlowSuccess({pid:e,flid:t,nodes:a,connectors:n})})),n.default.bind(u.default.DELETE_NODES,(({params:{pid:e,flid:t},body:{nodeIds:a}})=>{L.default.deleteFlowNodes({pid:e,flid:t,nodeIds:a})})),n.default.bind(u.default.DELETE_CONNECTORS,(({params:{pid:e,flid:t},body:{connectorIds:a}})=>{L.default.deleteConnectors({pid:e,flid:t,connectorIds:a})})),n.default.bind(u.default.CREATE_CONNECTOR,(({params:{pid:e,flid:t},body:a})=>{L.default.createConnector({pid:e,flid:t,connector:a})})),n.default.bind(u.default.UPDATE_NODES_POSITION,(({params:{pid:e,flid:t},body:{nodes:a,connectors:n}})=>{L.default.updateFlowNodesPosition({pid:e,flid:t,nodes:a,connectors:n})})),n.default.bind(u.default.UPDATE_CONNECTOR,(({params:{pid:e,flid:t,conid:a},body:n})=>{L.default.updateConnector({pid:e,flid:t,conid:a,connector:n})})),n.default.bind(u.default.UPDATE_NODE,(({params:{pid:e,flid:t,noid:a},body:n})=>{if(n.type===v.default.VariantGroup){const{defaultVariant:i}=n;L.default.updateVariantGroupNode({pid:e,flid:t,noid:a,defaultVariant:i})}else L.default.updateFlowNode({pid:e,flid:t,noid:a,node:n})})),n.default.bind(u.default.REMOVE_FLOW_CONNECTOR_LABEL,(({params:{pid:e,flid:t,conid:a}})=>{L.default.deleteConnectorLabel({pid:e,flid:t,conid:a})})),n.default.bind(u.default.UPDATE_FLOW_CONNECTOR_LABEL,(({params:{pid:e,flid:t,conid:a},body:n})=>{L.default.updateConnectorLabel({pid:e,flid:t,conid:a,label:n})})),n.default.bind(u.default.UPDATE_FLOW_SCREEN_NAME,(({params:{pid:e,flid:t,noid:a},body:{type:n,screen:i}})=>{L.default.updateFlowNodeName({pid:e,flid:t,noid:a,nodeType:n,node:i})})),n.default.bind(u.default.UPDATE_FLOW_SCREEN_VARIANT_NAME,(({params:{pid:e,flid:t,noid:a},body:{type:n,variantGroup:i}})=>{L.default.updateFlowNodeName({pid:e,flid:t,noid:a,nodeType:n,node:i})})),n.default.bind(u.default.UPDATE_FLOW_SCREEN_VERSION,(({params:{pid:e,flid:t,noid:a},body:n})=>{L.default.updateFlowNodeScreenVersion({pid:e,flid:t,noid:a,node:n})})),n.default.bind(u.default.UPDATE_FLOW_NODE_TYPE,(({params:{pid:e,flid:t,noid:a},body:n})=>{L.default.updateFlowNodeType({pid:e,flid:t,noid:a,node:n})})),n.default.bind(u.default.ADD_NODES_TO_FLOW_GROUP,(({params:{pid:e,flid:t,fgid:a},body:{nodes:n}})=>{L.default.addNodesToGroup({pid:e,flid:t,fgid:a,nodeIds:n})})),n.default.bind(u.default.REMOVE_NODES_FROM_FLOW_GROUP,(({params:{pid:e,flid:t,fgid:a},body:{nodes:n}})=>{L.default.removeNodesFromGroup({pid:e,flid:t,fgid:a,nodeIds:n})})),n.default.bind(u.default.DELETE_FLOW_GROUP,(({params:{pid:e,flid:t,fgid:a}})=>{L.default.deleteGroups({pid:e,flid:t,fgids:[a]})})),n.default.bind(u.default.CREATE_FLOW_GROUPS,(({params:{pid:e,flid:t},body:{groups:a}})=>{L.default.createGroupsStart({pid:e,flid:t,groups:a})})),n.default.bind(u.default.UPDATE_FLOW_GROUP_COLOR,(({params:{pid:e,flid:t,fgid:a},body:{color:n}})=>{L.default.updateGroupColor({pid:e,flid:t,fgid:a,color:n})})),n.default.bind(u.default.UPDATE_FLOW_GROUP_NAME,(({params:{pid:e,flid:t,fgid:a},body:{name:n}})=>{L.default.updateGroupName({pid:e,flid:t,fgid:a,name:n})})),n.default.bind(u.default.UPDATE_FLOW_GROUPS_ORDER,(({params:{pid:e,flid:t},body:{index:a,groups:n}})=>{L.default.updateGroupOrder({pid:e,flid:t,fgids:n,index:a})})),n.default.bind(u.default.DELETE_FLOW,(({params:{pid:e,flid:t}})=>{L.default.deleteBoard({pid:e,flid:t})})),n.default.bind(u.default.UPDATE_FLOWS_ORDER,(({params:{pid:e},body:{flows:t,index:a}})=>{L.default.updateBoardOrder({pid:e,flows:t,index:a})})),n.default.bind(u.default.UPDATE_FLOW_NAME,(({params:{pid:e,flid:t},body:{name:a}})=>{L.default.updateBoardName({pid:e,flid:t,name:a})})),n.default.bind(u.default.CREATE_FLOW_DOT,(({params:{pid:e,flid:t,uid:a},body:n})=>{L.default.addDot({pid:e,flid:t,uid:a,dot:n})})),n.default.bind(u.default.CREATE_FLOW_DOT_COMMENT,(({params:{pid:e,flid:t,did:a,uid:n},body:i})=>{L.default.addComment({pid:e,flid:t,did:a,uid:n,comment:i})})),n.default.bind(u.default.DELETE_FLOW_DOT,(({params:{pid:e,flid:t,did:a}})=>{L.default.removeDot({pid:e,flid:t,did:a})})),n.default.bind(u.default.DELETE_FLOW_DOT_COMMENT,(({params:{pid:e,flid:t,did:a,cmid:n}})=>{L.default.removeComment({pid:e,flid:t,did:a,cmid:n})})),n.default.bind(u.default.UPDATE_FLOW_DOT,(({params:{pid:e,flid:t,did:a},body:n})=>{L.default.updateDot({pid:e,flid:t,did:a,dotData:n})})),n.default.bind(u.default.UPDATE_FLOW_DOT_COMMENT_NOTE,(({params:{pid:e,flid:t,did:a,cmid:n},body:i})=>{L.default.updateComment({pid:e,flid:t,did:a,cmid:n,commentData:i})})),n.default.bind(k.default.CREATE_ANNOTATION,(({params:{pid:e,sid:t,uid:a},body:n})=>{m.default.addAnnotation({pid:e,sid:t,uid:a,annotation:n})})),n.default.bind(k.default.DELETE_ANNOTATION,(({params:{pid:e,sid:t,atid:a}})=>{m.default.removeAnnotation({pid:e,sid:t,atid:a})})),n.default.bind(k.default.UPDATE_ANNOTATION_COORDINATE,(({params:{pid:e,sid:t,atid:a},body:{x:n,y:i}})=>{m.default.updateAnnotationPosition({pid:e,sid:t,atid:a,x:n,y:i})})),n.default.bind(k.default.UPDATE_ANNOTATION_TEXT,(({params:{pid:e,sid:t,atid:a},body:{text:n,updated:i=new Date}})=>{m.default.updateAnnotationText({pid:e,sid:t,atid:a,annotationData:{text:n,updated:i}})})),n.default.bind(k.default.UPDATE_ANNOTATION_TYPE,(({params:{pid:e,sid:t,atid:a},body:{type:n}})=>{m.default.updateAnnotationType({pid:e,sid:t,atid:a,newType:n})})),n.default.bind(k.default.DELETE_ANNOTATION_TYPE,(({params:{pid:e,sid:t,atid:a}})=>{m.default.deleteAnnotationType({pid:e,sid:t,atid:a})})),n.default.bind(k.default.CREATE_COMPONENT_ANNOTATION,(({params:{pid:e,uid:t},body:a})=>{m.default.addAnnotation({pid:e,uid:t,annotation:a})})),n.default.bind(k.default.DELETE_COMPONENT_ANNOTATION,(({params:{pid:e,catid:t}})=>{m.default.removeAnnotation({pid:e,atid:t})})),n.default.bind(k.default.DELETE_COMPONENT_ANNOTATION_TYPE,(({params:{pid:e,catid:t}})=>{m.default.deleteAnnotationType({pid:e,atid:t})})),n.default.bind(k.default.UPDATE_COMPONENT_ANNOTATION_COORDINATE,(({params:{pid:e,catid:t},body:{x:a,y:n}})=>{m.default.updateAnnotationPosition({pid:e,atid:t,x:a,y:n})})),n.default.bind(k.default.UPDATE_COMPONENT_ANNOTATION_TEXT,(({params:{pid:e,catid:t},body:{text:a,updated:n}})=>{m.default.updateAnnotationText({pid:e,atid:t,annotationData:{text:a,updated:n}})})),n.default.bind(k.default.UPDATE_COMPONENT_ANNOTATION_TYPE,(({params:{pid:e,catid:t},body:{type:a}})=>{m.default.updateAnnotationType({pid:e,atid:t,newType:a})})),n.default.bind(k.default.UNLINK_COMPONENT_ANNOTATION,(({params:{pid:e,sid:t,catid:a},body:n})=>{m.default.unlinkAnnotation({pid:e,sid:t,atid:a,newAnnotation:n})})),n.default.bind(s.default.FINALIZE_ONBOARDING_PROJECT,(({body:e})=>{h.default.add({barrelType:R.default.PROJECT,oid:"user",barrel:e})})))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={ACTIVATE:"ActivateProject",ARCHIVE:"ArchiveProject",DELETE:"DeleteProject",INVITE_USER:"InviteProjectUser",ADD_INTEGRATION_EVENT:"AddProjectIntegrationEvent",DELETE_INTEGRATION_EVENT:"DeleteProjectIntegrationEvent",DELETE_INTEGRATION:"DeleteProjectIntegration",ADD_EXTENSION:"AddProjectExtension",REMOVE_EXTENSION:"RemoveExtensionFromProject",REMOVE_USER:"RemoveUserFromProject",TRANSFER_OWNERSHIP:"TransferProjectOwnership",UPDATE_ACCESSIBILITY:"UpdateProjectAccessibility",UPDATE_DENSITY_SCALE:"UpdateProjectDensityScale",UPDATE_DESCRIPTION:"UpdateProjectDescription",UPDATE_EXTENSION:"UpdateProjectExtension",UPDATE_NAME:"UpdateProjectName",UPDATE_THUMBNAIL:"UpdateProjectThumbnail",UPDATE_UPDATED:"UpdateProjectUpdated",UPDATE_USER_ROLE:"UpdateProjectUserRole",ATTACH_JIRA_ISSUE:"AttachJiraIssue",REMOVE_JIRA_ISSUE_ATTACHMENT:"RemoveJiraIssueAttachment",DELETE_USER_PROJECT_SUGGESTIONS:"DeleteUserProjectSuggestions",UPDATE_USER_PROJECT_SUGGESTIONS:"UpdateUserProjectSuggestions",CREATE_SECTION:"CreateSectionV2",UPDATE_SECTION:"UpdateSection",UPDATE_SECTIONS_ORDER:"UpdateSectionsOrderV2",UPDATE_SECTION_SCREENS:"UpdateSectionScreens",DELETE_SECTION:"DeleteSectionV2",UPDATE_STYLEGUIDE_LINK:"UpdateProjectStyleguideLink",REMOVE_STYLEGUIDE_LINK:"RemoveProjectStyleguideLink",CREATE_COLOR:"CreateProjectColor",UPDATE_COLOR:"UpdateProjectColor",UPDATE_COLORS_ORDER:"UpdateProjectColorsOrder",DELETE_COLOR:"DeleteProjectColor",UPDATE_COLORS_STYLEGUIDE:"UpdateProjectColorsStyleguide",CREATE_TEXT_STYLE:"CreateProjectTextStyle",UPDATE_TEXT_STYLE:"UpdateProjectTextStyle",DELETE_TEXT_STYLE:"DeleteProjectTextStyle",UPDATE_TEXT_STYLES_STYLEGUIDE:"UpdateProjectTextStylesStyleguide",CREATE_SPACING_SECTION:"CreateProjectSpacingSection",UPDATE_SPACING_SECTION:"UpdateProjectSpacingSection",DELETE_SPACING_SECTION:"DeleteProjectSpacingSection",CREATE_SPACING_TOKEN:"CreateProjectSpacingToken",UPDATE_SPACING_TOKEN:"UpdateProjectSpacingToken",DELETE_SPACING_TOKEN:"DeleteProjectSpacingToken",UPDATE_REM_PREFERENCES:"UpdateProjectRemPreferences",CREATE_COMPONENT_SECTION:"CreateProjectComponentSection",UPDATE_COMPONENT_SECTION:"UpdateProjectComponentSection",UPDATE_COMPONENT_SECTIONS_ORDER:"UpdateProjectComponentSectionsOrder",MERGE_COMPONENT_SECTIONS:"MergeProjectComponentSections",DELETE_COMPONENT_SECTION:"DeleteProjectComponentSection",UPDATE_COMPONENT_SECTIONS_STYLEGUIDE:"UpdateProjectComponentSectionsStyleguide",CREATE_COMPONENT:"CreateProjectComponent",CREATE_COMPONENT_V2:"CreateProjectComponentV2",CREATE_COMPONENT_VERSION_V2:"CreateProjectComponentVersionV2",UPDATE_COMPONENT:"UpdateProjectComponent",UPDATE_COMPONENTS_ORDER:"UpdateProjectComponentsOrder",DELETE_COMPONENT:"DeleteProjectComponent",UPDATE_CONNECTED_COMPONENTS:"UpdateProjectConnectedComponents",DELETE_CONNECTED_COMPONENTS:"DeleteProjectConnectedComponents",CREATE_CONNECTED_COMPONENT_ITEM:"CreateProjectConnectedComponentItem",DELETE_CONNECTED_COMPONENT_ITEM:"DeleteProjectConnectedComponentItem",UPSERT_VIRTUAL_COMPONENTS:"UpsertVirtualComponents",CONVERT_COMPONENT_SECTION_TO_VARIANT_SECTION:"ConvertProjectComponentSectionToVariantSection",CONVERT_VARIANT_SECTION_TO_COMPONENT_SECTION:"ConvertProjectVariantSectionToComponentSection",CREATE_COMPONENT_SECTION_VARIANT_PROPERTY:"CreateProjectComponentSectionVariantProperty",UPDATE_COMPONENT_SECTION_VARIANT_PROPERTY:"UpdateProjectComponentSectionVariantProperty",DELETE_COMPONENT_SECTION_VARIANT_PROPERTY:"DeleteProjectComponentSectionVariantProperty",UPDATE_COMPONENTS_VARIANT_PROPERTIES:"UpdateProjectComponentsVariantProperties",CREATE_COMPONENT_SECTION_VARIANT_GROUPS:"CreateProjectComponentSectionVariantGroups",UPDATE_COMPONENT_SECTION_VARIANT_PROPERTIES_ORDER:"UpdateProjectComponentSectionVariantPropertiesOrder",UPDATE_WORKFLOW_STATUS:"UpdateProjectWorkflowStatus",DELETE_WORKFLOW_STATUS:"DeleteProjectWorkflowStatus",FINALIZE_ONBOARDING_PROJECT:"FinalizeOnboardingProject"}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.UPDATE_VARIANT_GROUP_NAME="UpdateVariantGroupName",e.DELETE_VARIANT_GROUP="DeleteVariantGroup",e.ADD_SCREENS_TO_VARIANT_GROUP="AddScreensToVariantGroup",e.CREATE_VARIANT_GROUP="CreateVariantGroup",e.REMOVE_SCREEN_FROM_VARIANT_GROUP="RemoveScreenFromVariantGroup",e.UPDATE_SCREEN_VARIANT_NAME="UpdateVariantGroupScreenVariantName",e.UPDATE_SCREEN_VARIANT_ORDER="UpdateVariantGroupScreensOrder"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={CREATE_V4:"CreateScreenV4",CREATE_V3:"CreateScreenV3",DELETE:"DeleteScreen",UPDATE:"UpdateScreen",UPDATE_TAGS:"UpdateScreensTags",CREATE_VERSION:"CreateScreenVersion",DELETE_VERSION:"DeleteScreenVersion",UPDATE_VERSION:"UpdateScreenLatestVersion",UPDATE_VERSION_COMMIT_COLOR:"UpdateScreenVersionCommitColor",UPDATE_VERSION_COMMIT_MESSAGE:"UpdateScreenVersionCommitMessage",CREATE_SCREEN_TILES:"ProcessSplitScreenVersionImage"}},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.PROCESS_VERSION_ASSET_CONTENTS="ProcessScreenVersionAssetContents",e.PROCESS_PROJECT_COMPONENT_VERSION_ASSET_CONTENTS="ProcessProjectComponentVersionAssetContents",e.PROCESS_STYLEGUIDE_COMPONENT_VERSION_ASSET_CONTENTS="ProcessStyleguideComponentVersionAssetContents"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={CREATE:"CreateDotV2",UPDATE:"UpdateDot",DELETE:"DeleteDot",CREATE_COMMENT:"CreateDotCommentV2",UPDATE_COMMENT_NOTE:"UpdateDotCommentNote",DELETE_COMMENT:"DeleteDotComment"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={CREATE_FLOW:"CreateProjectFlow",ADD_NODES:"AddFlowNodes",DELETE_NODES:"DeleteFlowNodes",DELETE_CONNECTORS:"DeleteFlowConnectors",CREATE_CONNECTOR:"CreateFlowConnector",UPDATE_NODES_POSITION:"UpdateFlowNodesPositions",UPDATE_CONNECTOR:"UpdateFlowConnector",UPDATE_NODE:"UpdateFlowNode",REMOVE_FLOW_CONNECTOR_LABEL:"RemoveFlowConnectorLabel",UPDATE_FLOW_CONNECTOR_LABEL:"UpdateFlowConnectorLabel",UPDATE_FLOW_SCREEN_NAME:"UpdateFlowNodeScreenName",UPDATE_FLOW_SCREEN_VARIANT_NAME:"UpdateFlowNodeScreenVariantName",UPDATE_FLOW_SCREEN_VERSION:"UpdateFlowNodeScreenVersion",UPDATE_FLOW_NODE_TYPE:"UpdateFlowNodeType",ADD_NODES_TO_FLOW_GROUP:"AddNodesToFlowGroup",REMOVE_NODES_FROM_FLOW_GROUP:"RemoveNodesFromFlowGroup",DELETE_FLOW_GROUP:"DeleteFlowGroup",CREATE_FLOW_GROUPS:"CreateFlowGroups",UPDATE_FLOW_GROUP_COLOR:"UpdateFlowGroupColor",UPDATE_FLOW_GROUP_NAME:"UpdateFlowGroupName",UPDATE_FLOW_GROUPS_ORDER:"UpdateFlowGroupsOrder",DELETE_FLOW:"DeleteFlow",UPDATE_FLOWS_ORDER:"UpdateFlowsOrder",UPDATE_FLOW_NAME:"UpdateFlowName",CREATE_FLOW_DOT:"CreateFlowDot",CREATE_FLOW_DOT_COMMENT:"CreateFlowDotComment",DELETE_FLOW_DOT:"DeleteFlowDot",DELETE_FLOW_DOT_COMMENT:"DeleteFlowDotComment",UPDATE_FLOW_DOT:"UpdateFlowDot",UPDATE_FLOW_DOT_COMMENT_NOTE:"UpdateFlowDotCommentNote"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{element:()=>m,anchor:()=>A,show:()=>je,dismiss:()=>ke,isHidden:()=>Me,removeUser:()=>Re,handleInviteUserSocketForInvitePopup:()=>De,handleInvitedSocketForInvitePopup:()=>Pe,handleCreateUserSocketForInvitePopup:()=>ve,handleDeleteUserSocketForInvitePopup:()=>Le});a(1214);var n=a(76),i=a(331),s=a(404),r=a(120),o=a(122),d=a(79),l=a(7),c=a(738),u=a(17),p=a(92),f=a(736),S=a(106),h=a(1215),E=a(1218),g=a(1226),O=a(652);const T=new Set,m=document.getElementById("inviteUserPopup"),_=document.getElementById("inviteUserPopupContent"),b=document.getElementById("invitePopupLoading"),C=document.getElementById("inviteFormWithRoleWrapper"),A=document.getElementById("inviteUserPopupAnchor"),y=document.getElementById("inviteeHandle"),I=m.querySelector(".userList"),N=document.getElementById("inviteeTemplate"),P=document.getElementById("inviteNewUserTemplate"),D=document.getElementById("typedUserAlreadyAddedTemplate"),R=document.getElementById("inviteByTagTemplate"),v=document.querySelector(".organizationInviteeList"),L=document.querySelector(".invitesToTheBarrelOnlyInfo"),j=document.querySelector(".tagList"),U=document.querySelector(".showRemainingTags"),w=document.querySelector(".memberList"),k=document.querySelector(".membersWithTagHeader"),M=document.querySelector(".membersWithTagList"),V=new p.default(g.UserProfileCardPopoverContainerReduxProvider,m),F=new p.default(h.default,b),G=new p.default(E.default,C);let B,x,W,z,H,Y,q,K={},J=[],Z={},X={},$=new Set,Q=new Set,ee=new Set,te=null,ae=!0;const ne={king:4,queen:3,rook:2,knight:1,pawn:0};function ie(e){if(e.classList.contains("newUser")){if(!y.checkValidity()&&!/^\w{3,30}$/.test(y.value))return(0,s.wiggle)(y.parentElement),void(ae=!0);m.querySelector(".inputArea img").classList.remove("hidden")}else e.classList.remove("inviteRetry"),e.classList.add("inviteSpinner");if(e.classList.contains("newUser"))Ae({handle:y.value,invitee:e});else if(e.classList.contains("user")){var t=J.find((function(t){return t._id===e.dataset.uid}));Ae({handle:t.username||t.email,invitee:e})}else if(e.classList.contains("member")){var a=Z.members.find((function(t){return t.user._id===e.dataset.mid}));Ae({handle:a.user.username||a.user.email,invitee:e})}else e.classList.contains("inviteByTag")&&(i=e.dataset.tag,o=e,r[x].inviteUsersByTag(Z._id,W,i).then((function(e){ye(e,o)})).catch((function(){o.classList.remove("inviteSpinner"),o.classList.add("inviteRetry"),n.create({done:{cb(){(0,s.highlightInput)(y),ae=!0}}})})));var i,o}function se(){m.classList.contains("organizationBarrel")?pe():fe()}function re(e){v.classList.toggle("hidden",e),L.classList.toggle("hidden",e),C.classList.toggle("hidden",!e)}function oe(e,t,a){var n=(a=a||{}).importance||1;return a.skipExactMatch||!1||e!==t?e.startsWith(t)?8*n:e.includes(t)?4*n:0:16}function de(e,t){e.parentElement.classList.toggle(t,!e.childElementCount)||Array.from(e.querySelectorAll(".invitee")).forEach((function(t){t.classList.remove("hidden","selected"),e.appendChild(t)}))}function le(e){return j.querySelector(`[data-tag="${CSS.escape(e)}"]`)}function ce(e){return w.querySelector("[data-mid='"+e.user._id+"']")}function ue(e,t,a,n){t.forEach((function(t){var n=a(t);n.classList.remove("hidden","selected"),e.appendChild(n)}));for(var i=0;i<e.childElementCount-t.length;i++){var s=e.children[i];s.classList.add("hidden"),s.classList.remove("selected")}e.parentElement.classList.toggle(n,0===t.length)}function pe(){he(".memberList .newUser"),he(".organizationInviteeList .userListTypedUserAlreadyAdded");var e,t,a=y.value.toLowerCase();if(m.classList.remove("noNewInvitees","noInvitees"),v.classList.remove("noTags","noMembers","hasMembersWithTag","writeAnEmailToInvite","showAddsToTheBarrelOnlyInfo"),M.innerHTML="",y.placeholder="Type email here",a){e=!!(t=Q.has(a))||$.has(a);var n=Object.keys(K);n.sort();var i={},s=n.filter((function(e){var t=oe(e.toLowerCase(),a);return!!t&&(i[e]=t,!0)})).sort((function(e,t){return i[t]-i[e]}));ue(j,s,le,"noTags");var r=function(e,t,a){var n={};if(!e)return[];const i=(0,S.normalizeAndLowerCase)(t);var s=e.filter((function(e){if(ee.has(e.user._id)){var s=a(e);if(!s)return!1;if(!s.classList.contains("inviteDone"))return!1}var r=0;return e.user.username&&(r+=oe(e.user.username,i)),e.user.fullName&&(r+=oe((0,S.normalizeAndLowerCase)(e.user.fullName),i)),!!(r+=oe(e.user.email,t.toLowerCase(),{skipExactMatch:!0,importance:.25}))&&(n[e.user._id]=r,!0)}));return s.sort((function(e,t){return n[t.user._id]-n[e.user._id]})),s}(Z.members,y.value,ce);ue(w,r,ce,"noMembers");var o=le(s[0]);v.classList.toggle("hasMembersWithTag",1===s.length&&(K[s[0]]>0||o&&o.classList.contains("inviteDone")))&&(k.textContent=s[0],M.innerHTML="",Z.members.forEach((function(e){var t=ce(e);if((!ee.has(e.user._id)||t&&t.classList.contains("inviteDone"))&&e.tags&&e.tags.includes(s[0])){var a=ge(e);a.querySelector(".invitee").classList.toggle("inviteDone",t&&t.classList.contains("inviteDone")),M.appendChild(a)}})));const{minRoleForMemberManagement:l}=Z||{},c=a.includes("@")&&!e&&!t&&ne[X.role]>=ne[l];if(re(c),!e)if(a.includes("@")){const e=document.importNode(P.content,!0);e.querySelector(".invitee").classList.add("member"),e.querySelector(".newUserHandle").textContent=y.value,w.appendChild(e),c?G.render({inviterRole:X.role,inviterRestricted:X.restricted,paymentPlan:Z.paymentPlan,defaultInviteeRole:(0,f.hasTeamPlan)(Z.paymentPlan)?"rook":"knight",defaultInviteeRestricted:!0,onSubmit:(e,t)=>Ae({handle:a,invitee:v.querySelector(".invitee.newUser"),role:e,restricted:t})}):v.classList.add("showAddsToTheBarrelOnlyInfo")}else v.classList.add("writeAnEmailToInvite");if(t&&!v.querySelector(".invitee.inviteDone")){var d=document.importNode(D.content,!0);d.querySelector(".userListTypedUserAlreadyAdded").classList.add(a===Zeplin.user.username||a===Zeplin.user.email?"selfUser":"someUser"),d.querySelector("span").textContent=y.value,v.appendChild(d)}}else{if(de(j,"noTags"),U.textContent){var l=Array.from(j.querySelectorAll(".inviteByTag")).map((function(e){return e.dataset.tag}));l.sort(),l.forEach((function(e){var t=le(e);j.appendChild(t)}));for(var c=j.firstElementChild,u=3;u<j.childElementCount;u++){var p=j.children[u];p.classList.add("hidden"),j.insertBefore(p,c)}j.childElementCount-3>0?(U.textContent=j.childElementCount-3,U.classList.toggle("multiple",j.childElementCount-3>1)):U.textContent=""}de(w,"noMembers")}var h=v.querySelectorAll(".invitee:not(.hidden)");if(h.length)h[0].classList.add("selected");else if(!t&&!v.classList.contains("writeAnEmailToInvite")){0===(Z.members||[]).filter((e=>!ee.has(e.user._id))).length&&z.length>1?m.classList.add("noNewInvitees"):1===z.length&&(m.classList.add("noInvitees"),y.placeholder="Type email here")}}function fe(){he(".userList .user.newUser"),he(".userList .userListTypedUserAlreadyAdded"),I.classList.remove("writeAnEmailToInvite"),y.placeholder="Type email here";var e,t,a=y.value.toLowerCase(),n=document.importNode(D.content,!0);if(a){e=!!(t=Q.has(a))||T.has(a);var i={},s=J.filter((function(e){var t=0;return e.username&&(t+=oe(e.username,(0,S.normalizeAndLowerCase)(y.value))),e.fullName&&(t+=oe((0,S.normalizeAndLowerCase)(e.fullName),(0,S.normalizeAndLowerCase)(y.value))),(t+=oe(e.email,a,{skipExactMatch:!0,importance:.25}))>0&&(i[e._id]=t,!0)})).sort((function(e,t){return i[t._id]-i[e._id]}));s.forEach((function(e){var t=Se(e._id);t.classList.remove("hidden","selected"),I.appendChild(t)}));for(var r=0;r<J.length-s.length;r++){var o=I.children[r].classList;o.add("hidden"),o.remove("selected")}}else J.forEach((function(e){var t=Se(e._id);t.classList.remove("hidden","selected"),I.appendChild(t)}));if(a){if(e||a.includes("@")){if(!e){var d=document.importNode(P.content,!0);d.querySelector(".invitee").classList.add("user"),d.querySelector(".newUserHandle").textContent=y.value,I.appendChild(d)}}else I.classList.add("writeAnEmailToInvite");t&&(n.querySelector(".userListTypedUserAlreadyAdded").classList.add(a===Zeplin.user.username||a===Zeplin.user.email?"selfUser":"someUser"),n.querySelector("span").textContent=y.value,I.appendChild(n))}m.classList.remove("noInvitees"),m.classList.remove("noNewInvitees");var l=I.querySelectorAll(".user:not(.hidden)");l.length?l[0].classList.add("selected"):t||I.classList.contains("writeAnEmailToInvite")||(te.length?m.classList.add("noNewInvitees"):(m.classList.add("noInvitees"),y.placeholder="Type email here"))}function Se(e){return I.querySelector(".invitee[data-uid='"+e+"']")}function he(e){var t=document.querySelector(e);t&&t.remove()}function Ee(e,t,a){var n=document.importNode(R.content,!0),i=n.querySelector(".inviteByTag"),s=n.querySelector(".tagName"),r=n.querySelector(".memberCount");return i.classList.toggle("hidden",!!a),i.dataset.tag=e,s.textContent=e,s.title=e,r.textContent=t+(t>1?" members":" member"),n}function ge(e){var t=document.importNode(N.content,!0),a=t.querySelector(".invitee"),n=t.querySelector(".userImage"),i=t.querySelector(".username"),r=t.querySelector(".email"),o=t.querySelector(".organizationTags");if(a.classList.add("member"),a.dataset.mid=e.user._id,(0,s.setAvatar)(n,e.user),e.user.username){const t=(0,u.getUserDisplayName)(e.user);i.textContent=t,i.title=t,r.textContent=e.user.email,r.title=e.user.email}else i.textContent=e.user.email,i.title=e.user.email,r.textContent="Pending Invitation";var d=e.tags?e.tags.join(", "):"";return o.textContent=d,o.title=d,n.addEventListener("mouseenter",(t=>me(t,e.user._id))),n.addEventListener("mouseleave",_e),i.addEventListener("mouseenter",(t=>me(t,e.user._id,!1))),i.addEventListener("mouseleave",_e),t}function Oe(e,t){var a=document.importNode(N.content,!0),n=a.querySelector(".invitee"),i=a.querySelector(".userImage"),r=a.querySelector(".username"),o=a.querySelector(".inviteExtraInfo"),d=(0,u.getUserDisplayName)(e)||e.email;(n.classList.add("user"),(0,s.setAvatar)(i,e),n.dataset.uid=e._id,r.textContent=d,r.title=d,e.username)?a.querySelector(".email").textContent=e.email:o.textContent="Pending invitation";return t&&n.classList.add("hidden"),i.addEventListener("mouseenter",(t=>me(t,e._id))),i.addEventListener("mouseleave",_e),r.addEventListener("mouseenter",(t=>me(t,e._id,!1))),r.addEventListener("mouseleave",_e),a}let Te;function me(e,t,a=!0){_e(),Te=setTimeout((()=>{V.render({targetNode:e.target,userId:t,openToLeft:a,open:!0,contentClass:"invitePopupUserProfileCardPopoverContainerContent"});const n=document.querySelector(".invitePopupUserProfileCardPopoverContainerContent");n&&(n.addEventListener("mouseenter",(()=>clearTimeout(Te))),n.addEventListener("mouseleave",_e))}),300)}function _e(){clearTimeout(Te),Te=setTimeout((()=>{V.remove()}),100)}function be(e){if(!te)return;te.find((({_id:t})=>t===e._id))||(te.push(e),e.username&&T.add(e.username),T.add(e.email))}function Ce(e){ee.add(e._id),e.username&&Q.add(e.username),Q.add(e.email)}function Ae({handle:e,invitee:t,role:a,restricted:i}){r[x].inviteUser(W,e,a,i).then((function(e){re(!1),ye(e,t)})).catch((function(e){m.querySelector(".inputArea img").classList.add("hidden");const a=e.status===o.default.STATUS.PAYMENT_REQUIRED;Me()||t.classList.contains("newUser")||a?(ae=!1,d.handleError(e,{dialogCallback(){(0,s.highlightInput)(y),ae=!0},clientErrorHandler:{402(){const t=z.find((e=>"owner"===e.role));if(t)if(t.user._id===Zeplin.user._id)n.create({title:"Please upgrade your plan first",message:"Looks like you reached your user limit. If you want to invite more users, you need to upgrade.",cancel:{name:"CANCEL"},done:{name:"SEE PLANS",cb:()=>(0,O.showPlanChooserOverlay)({source:"Invite popup",upgradeTrigger:l.PlanUpgradeTrigger.USER_LIMIT,bid:W})}});else{const{user:{fullName:e,email:a}}=t,i=e||a;n.create({title:"Please upgrade your plan first",message:`Looks like you reached your user limit. If you want to invite more users, contact your owner (${i}) to upgrade.`,done:{name:"OK"}})}else d.handleError(e)},default:d.handleError}})):(t.classList.remove("inviteSpinner"),t.classList.add("inviteRetry"),t.querySelector(".inviteExtraInfo").textContent=e.title)})).catch((function(){n.create({done:{cb(){(0,s.highlightInput)(y),ae=!0}}})}))}function ye(e,t){(0,s.highlightInput)(y),m.querySelector(".inputArea img").classList.add("hidden");const a=e.users||[e];(Y&&Y(a),a.forEach((({user:e})=>{Ce(e),t.classList.contains("user")&&be(e)})),B&&B.dispatchEvent(new CustomEvent("usersInvited",{detail:{users:a}})),m.classList.contains("organizationBarrel"))&&((e.users?e.users:[e]).forEach((function(e){if(Z.members){var t=Z.members.find((function(t){return t.user._id===e.user._id}));t&&t.tags&&t.tags.forEach((function(e){K[e]-=1}))}})),Object.keys(K).forEach((function(e){var t=K[e],a=le(e);a&&(0===t?a.classList.add("inviteDone"):a.querySelector(".memberCount").textContent=(0,S.pluralize)(t,"member"))})));if(t.classList.remove("inviteSpinner"),t.classList.add("inviteDone"),e.users&&e.users.forEach((function(e){Array.from(v.querySelectorAll(".member[data-mid='"+e.user._id+"']")).forEach((function(e){e.classList.add("inviteDone")}))})),t.classList.contains("newUser"))if(t.remove(),t.classList.contains("user")){J.push(e.user);var n=Oe(e.user);n.querySelector(".user").classList.add("inviteDone"),I.querySelector(".user.selected")||n.querySelector(".user").classList.add("selected"),Ne(n)}else{$.add(e.user.email);var i=ge(e);i.querySelector(".member").classList.add("inviteDone"),i.querySelector(".member.selected")||i.querySelector(".member").classList.add("selected"),w.appendChild(i)}}function Ie(e){Array.from(e.querySelectorAll(".invitee.inviteDone:not(.newUser)")).forEach((function(e){e.remove()}))}function Ne(e){I.lastElementChild&&I.lastElementChild.classList.contains("user")?I.appendChild(e):I.insertBefore(e,I.lastElementChild)}function Pe(e){e.forEach((function(e){(be(e.user),B&&!ee.has(e.user._id))&&(J.some((function(t){return t._id===e.user._id}))||(J.push(e.user),Ne(Oe(e.user))))})),Me()||se()}function De(e,t){(be(t),W===e)?(Ce(t),(0,i.arrayRemove)(J,(e=>e._id===t._id))):J.some((e=>e._id===t._id))||J.push(t);var a,n=y.value;if(a=m.classList.contains("organizationBarrel")?ce(t):Se(t.user._id),W===e&&a){if(a.classList.contains("selected")&&I.querySelector(".user:not(.hidden)")&&(a.nextElementSibling&&a.nextElementSibling.classList.contains("user")?a.nextElementSibling.classList.add("selected"):a.previousElementSibling&&a.previousElementSibling.classList.contains("user")&&!a.previousElementSibling.classList.contains("hidden")&&a.previousElementSibling.classList.add("selected")),a.remove(),a.classList.contains("newUser")||!I.querySelector(".user:not(.hidden)")){var s=document.importNode(D.content,!0);s.querySelector(".userListTypedUserAlreadyAdded").classList.add(y.value===Zeplin.user.username||y.value===Zeplin.user.email?"selfUser":"someUser"),s.querySelector("span").textContent=y.value,I.appendChild(s)}}else W!==e&&(a?a.classList.contains("newUser")&&(I.appendChild(Oe(t)),a.classList.contains("selected")&&(a.nextElementSibling&&a.nextElementSibling.classList.contains("user")?a.nextElementSibling.classList.add("selected"):a.previousElementSibling&&a.previousElementSibling.classList.contains("user")&&!a.previousElementSibling.classList.contains("hidden")&&a.previousElementSibling.classList.add("selected")),a.remove()):Ne(Oe(t,n&&!(t.username&&t.username.includes(n))&&!t.email.includes(n))));I.length||m.classList.add("noNewInvitees","noInvitees")}function Re(e,t){var a,n,i,s,r;if(W===e)if(m.classList.contains("organizationBarrel")){let e,d;const l=Z.members.find((e=>e.user._id===t));if(l){e=l,d=ce(l),l.tags&&l.tags.forEach((e=>{K[e]?K[e]+=1:K[e]=1;var t=le(e);if(t)t.querySelector(".memberCount").textContent=K[e]+(K[e]>1?" members":" member"),t.classList.remove("inviteDone");else{var a=Ee(e,K[e]);a.querySelector(".invitee").classList.toggle("hidden",!!y.value&&!e.includes(y.value))?j.appendChild(a):j.insertBefore(Ee(e,K[e]),j.querySelector(".invitee:not(.hidden)"))}})),Q.delete(e.user.username),Q.delete(e.user.email);var o=v.querySelector(".userListTypedUserAlreadyAdded");y.value===e.user.username&&o&&o.remove()}ee.delete(t),d?d.classList.remove("inviteDone"):l&&(a=w,i="noMembers",s=ge(n=l),r=!(!y.value||n.user.username&&n.user.username.includes(y.value)||n.user.email.includes(y.value)),s.querySelector(".invitee").classList.toggle("hidden",r),r?a.append(s):(a.insertBefore(s,a.querySelector(".invitee:not(.hidden)")),a.parentElement.classList.remove(i)),m.classList.remove("noNewInvitees","noInvitees"))}else if(te){var d=te.find((e=>e._id===t));!function(e){ee.delete(e._id),e.username&&(Q.delete(e.username),T.add(e.username)),Q.delete(e.email),T.add(e.email),J.some((function(t){return t._id===e._id}))||J.push(e)}(d);var l=y.value,c=Se(d._id);c?c.classList.remove("inviteDone"):Ne(Oe(d,l&&!(d.username&&d.username.includes(l))&&!d.email.includes(l)))}}function ve(e){if(!te)return;const t=te.find((({_id:t})=>t===e._id));if(t&&(Object.assign(t,e),B)){var a=Se(e._id);a&&(a.querySelector(".username").textContent=(0,u.getUserDisplayName)(e),a.querySelector(".inviteExtraInfo").textContent="")}}function Le(e){if(!te)return;const t=(0,i.arrayRemove)(te,(({_id:t})=>t===e));if(t){!function(e){ee.delete(e._id),e.username&&(Q.delete(e.username),T.delete(e.username)),Q.delete(e.email),T.delete(e.email),(0,i.arrayRemove)(J,(function(t){return t._id===e._id}))}(t);var a=Se(t._id);a&&(I.removeChild(a),a.classList.contains("selected")&&I.querySelector(".user:not(.hidden)")&&I.querySelector(".user:not(.hidden)").classList.add("selected"))}}async function je({bt:e,popupContainer:t,bid:a,members:n,oid:s,onInvite:o,onDismiss:d,onUsersFetched:l}){const u=s&&"user"!==s;x=e,m.classList.toggle("organizationBarrel",u),q=d,Y=o,B=t,t.appendChild(m),m.classList.remove("hidden"),te||(y.disabled=!0,F.render(),await async function(){if(!te)try{const{acquaintances:e}=await r.getUserAcquaintances();te=e}catch(e){}}(),F.remove(),y.disabled=!1,l&&setTimeout(l)),_.classList.remove("hidden"),u?(Z=c.default.getOrganization(s),X=c.default.getOrganizationProfile(s),K=function(e){const t={};return e.forEach((e=>{e.tags&&e.tags.forEach((e=>{t[e]?t[e]+=1:t[e]=1}))})),t}(Z.members),function(e,t,a){if(t!==W){Ue(),Q=new Set,ee=new Set,$=new Set,W=t,z=a,z.forEach((function(e){Ce(e.user)})),Z.members&&Z.members.forEach((function(e){ee.has(e.user._id)?e.tags&&e.tags.forEach((function(e){K[e]>0&&(K[e]-=1,0===K[e]&&delete K[e])})):($.add(e.user.username).add(e.user.email),w.appendChild(ge(e)))})),v.classList.toggle("noMembers",!w.childElementCount);var n=Object.keys(K);n.sort(),n.forEach((function(e){j.appendChild(Ee(e,K[e],!1))}));var i=n.length-3;i>0&&(U.textContent=i,U.classList.toggle("multiple",i>1)),v.classList.toggle("noTags",!n.length)}else Object.keys(K).forEach((function(e){0===K[e]&&delete K[e]})),H&&new Date-H>1e4&&(U.textContent=Object.keys(K).length-3,U.classList.toggle("multiple",Object.keys(K).length-3>1)),Ie(j),Ie(w);H=0,e.getBoundingClientRect().right+80>window.innerWidth&&m.classList.add("left");pe(),v.scrollTop=0,y.focus()}(t,a,n)):function(e,t,a){t!==W?(Ue(),J=[],Q=new Set,ee=new Set,W=t,z=a,z.forEach((function(e){Ce(e.user)})),te.forEach((function(e){ee.has(e._id)||(J.push(e),e.username&&T.add(e.username),T.add(e.email))})),J.forEach((function(e){I.appendChild(Oe(e))}))):(Ie(I),ee.forEach((function(e){(0,i.arrayRemove)(J,(function(t){return t._id===e}))})));e.getBoundingClientRect().right+80>window.innerWidth&&m.classList.add("left");fe(),I.scrollTop=0,y.focus()}(t,a,n),document.addEventListener("click",(e=>{if(!V.isRendered()&&e.button===Zeplin.MOUSE_BUTTON.LEFT&&!Me()){m.contains(e.target)||G.isRendered()&&(e.target.closest(".dropdownOptionsBackdrop")||e.target.closest(".changeRolesRoleOption"))||ke()}}),!0)}function Ue(){I.innerHTML="",j.innerHTML="",U.textContent="",w.innerHTML=""}function we(){te&&(y.value="",y.dispatchEvent(new Event("input")))}function ke(){document.removeEventListener("click",ke),B=null,m.classList.add("hidden"),m.classList.remove("left"),m.querySelector(".inputArea img").classList.add("hidden"),we(),V.remove(),G.isRendered()&&(re(!1),G.remove()),H||(H=new Date),q&&q(),document.body.append(m)}function Me(){return m.classList.contains("hidden")}!function(){function e(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){var t=e.target.closest(".invitee");!t||t.classList.contains("inviteDone")||t.classList.contains("inviteSpinner")||!e.target.classList.contains("action")&&!e.target.closest(".inviteNewUserButton")||(e.stopPropagation(),ie(t))}}let t,a;y.addEventListener("input",(function(){y.parentElement.classList.toggle("typed",!!y.value),ae=!0,se(),B&&B.dispatchEvent(new CustomEvent("listRefreshed"))})),m.addEventListener("click",(function(e){e.stopPropagation()})),m.addEventListener("contextmenu",(function(e){e.stopPropagation()})),I.addEventListener("click",e),v.addEventListener("click",e),m.addEventListener("mouseenter",(function(e){t=e.clientX,a=e.clientY})),m.addEventListener("mousemove",(function(e){if(e.stopPropagation(),t!==e.clientX||a!==e.clientY){var n=m.querySelector(".selected");n&&n.classList.remove("selected"),e.target.closest(".invitee")&&(e.target.closest(".invitee").classList.add("selected"),t=e.clientX,a=e.clientY)}})),document.addEventListener("keydown",(function(e){switch(e.keyCode){case Zeplin.KEY_CODE.ESC:if(Me())break;if(e.stopImmediatePropagation(),V.isRendered()){V.remove();break}if(y.value){we();break}ke();break;case Zeplin.KEY_CODE.ENTER:{if(Me()||!ae)break;const e=m.querySelector(".selected");if(!e||e.classList.contains("inviteDone")||e.classList.contains("inviteSpinner"))break;ae=!1,ie(e);break}case Zeplin.KEY_CODE.ArrowUp:case Zeplin.KEY_CODE.ArrowDown:if(Me())break;ae=!0,e.preventDefault(),function(e){m.classList.contains("organizationBarrel")?function(e){var t=v.querySelector(".invitee.selected");if(!t){var a=v.querySelector(".invitee:not(.hidden)");return void(a&&(a.classList.add("selected"),(0,s.scrollIfNecessary)(a)))}var n,i=Array.from(v.querySelectorAll(".invitee:not(.hidden)")),r=i.findIndex((function(e){return e.classList.contains("selected")}));n=e.keyCode===Zeplin.KEY_CODE.ArrowUp?r-1:r+1;if(n>-1&&n<i.length){var o=i[n];t.classList.remove("selected"),o.classList.add("selected"),(0,s.scrollIfNecessary)(o)}}(e):function(e){var t=I.querySelector(".selected");if(!t){var a=I.querySelector(".user:not(.hidden)");return void(a&&(a.classList.add("selected"),(0,s.scrollIfNecessary)(a)))}var n=e.keyCode===Zeplin.KEY_CODE.ArrowUp?t.previousElementSibling:t.nextElementSibling;n&&n.classList.contains("user")&&!n.classList.contains("hidden")&&(t.classList.remove("selected"),n.classList.add("selected"),(0,s.scrollIfNecessary)(n))}(e)}(e)}})),U.addEventListener("click",(function(e){e.stopPropagation(),U.textContent="",Array.from(j.querySelectorAll(".inviteByTag.hidden")).forEach((function(e){e.classList.remove("hidden"),j.appendChild(e)}))}))}()},,,,,,,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{ROLE_SORT_COEFFICENTS:()=>s,getAllRoles:()=>r,getRole:()=>d,getRolesByPaymentPlan:()=>o,getRoleDisplayName:()=>l,getRoleByDisplayName:()=>c,isRoleRestrictable:()=>u,permissions:()=>p});var n=a(736),i=a(1223);const s={king:4,queen:3,rook:2,knight:1,pawn:0};function r(){return i.ORGANIZATION_ROLES}function o(e){return(0,n.hasTeamPlan)(e)?i.TEAM_ROLES:i.ORGANIZATION_ROLES}function d(e,t){return o(t).find((t=>e===t.name))}function l(e,t){const a=d(e,t);return a?a.displayName:""}function c(e,t){return o(t).find((t=>t.displayName===e))}function u(e){return!["king","queen"].includes(e)}const p={canInviteMembers:(e,t="queen")=>{const a="string"==typeof e?e:e.role;return s[a]>=s[t]},canChangeRole:(e,t,a)=>e.user._id!==t.user._id&&(s[e.role]>=s[a]&&s[e.role]>=s[t.role]),canManageTags:e=>{const t="string"==typeof e?e:e.role;return["king","queen"].includes(t)},canRemoveUser:(e,t)=>e.user._id!==t.user._id&&["king","queen"].includes(e.role)&&"king"!==t.role,canLeaveOrganization:e=>{const t="string"==typeof e?e:e.role;return["queen","rook","knight","pawn"].includes(t)},canChangeProfile:e=>{const t="string"==typeof e?e:e.role;return["king","queen"].includes(t)},canChangeMemberAccessibility:(e,t)=>e.user._id!==t.user._id&&["king","queen"].includes(e.role)&&!["king","queen"].includes(t.role),canTransferOwnership:(e,t)=>"pawn"!==t.role&&("king"===e.role&&e.user._id!==t.user._id||"queen"===e.role&&"king"!==t.role),canManageMembersAfterUpgrade:e=>{const t="string"==typeof e?e:e.role;return["king","queen"].includes(t)}}},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{UserProfileCardPopoverContainerReduxProvider:()=>o,default:()=>d});var n=a(93),i=a(1227),s=a(437);const r=["DotsDataStore"];function o(e){return(0,n.h)(s.default,{fluxStoresToBeConverted:r},(0,n.h)(i.default,Object.assign({},e)))}const d=i.default},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(93),i=a(579),s=a(1228),r=a(738),o=a(737),d=a(171),l=a(99),c=a(264),u=a(535);a(1243);class p extends n.Component{constructor(){var e;super(...arguments),this.popoverMouseEventTimer=null,this.componentRefs={},this.state={open:null!==(e=this.props.open)&&void 0!==e&&e},this.handleMouseEnter=()=>{const{open:e,onVisibilityChange:t}=this.props;e||(clearTimeout(this.popoverMouseEventTimer),this.popoverMouseEventTimer=setTimeout((()=>{this.setState({open:!0}),null==t||t(!0)}),300))},this.handleMouseLeave=()=>{const{open:e,onVisibilityChange:t}=this.props;e||(clearTimeout(this.popoverMouseEventTimer),this.popoverMouseEventTimer=setTimeout((()=>{this.setState({open:!1}),null==t||t(!1)}),100))},this.handleUserProfileCardContentChange=()=>{var e;null===(e=this.componentRefs.userProfileCardPopoverContainer)||void 0===e||e.positionPopover()}}static calculateState(e,t){var a,n,i;const{userId:s,member:d}=t;if(d){const{user:e,tags:t}=d;return{user:e,tags:t}}const{selectedOrganizationId:l}=c.default.SpaceStore.getState(),{organizationId:u}=c.default.BarrelStore.getState(),{members:p=[]}=null!==(a=r.default.getOrganization(null!=u?u:l))&&void 0!==a?a:{},{users:f=[]}=null!==(n=o.default.getBarrel())&&void 0!==n?n:{},S=[...p,...f],{user:h,tags:E}=null!==(i=S.find((e=>e.user._id===s)))&&void 0!==i?i:{};return{user:h,tags:E}}static getStores(){return[c.default.SpaceStore,c.default.OrganizationStore,c.default.BarrelStore,c.default.ProjectsDataStore,c.default.StyleguidesDataStore]}componentDidUpdate(){this.handleUserProfileCardContentChange()}componentWillUnmount(){clearTimeout(this.popoverMouseEventTimer)}render(){if(!this.state.user)return;const{targetNode:e,topOffset:t=58,openToLeft:a=!0,class:r,contentClass:o,children:c,portalInto:u}=this.props,{user:p,tags:f,open:S}=this.state;return(0,n.h)(i.default,{ref:(0,d.default)(this,"userProfileCardPopoverContainer","componentRefs"),class:(0,l.default)("userProfileCardPopoverContainer",r),targetNode:e,content:(0,n.h)(s.default,{user:p,tags:f,onContentChange:this.handleUserProfileCardContentChange}),contentClass:(0,l.default)("userProfileCardPopoverContainerContent",o),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,left:19,topOffset:t,bottomOffset:6,offsetX:6,openToLeft:a,open:S,centerY:!0,stickToEdge:!0,showAnchor:!0,portalInto:u},c)}}const f=(0,u.default)(p,{withProps:!0})},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n.default});var n=a(1229)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var n=a(93),i=a(145),s=a.n(i),r=a(542),o=a(149),d=a(1230),l=a(1233),c=a(1241),u=a(404),p=a(104),f=a(99),S=a(171);a(1242);function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{h:E}=n;class g extends n.Component{constructor(...e){super(...e),h(this,"handleEmailCopy",(()=>{(0,u.copyContent)({content:this.props.user.email,toastContainer:this.nodeRefs.userProfileCard})})),h(this,"renderTags",(()=>{if(!this.hasTags)return null;const{tags:e}=this.props;return n.h("div",{class:"userProfileCardTagsContainer"},e.map((e=>n.h("div",{key:e,class:"userProfileCardTag ellipsis"},e))))}))}get actionButtonText(){const{fullName:e,bio:t}=this.props.user;let a="Add";return e||(a+=" full name",t||(a+=" and")),t||(a+=" bio"),a}get hasTags(){const{tags:e}=this.props;return Boolean(e&&e.length)}componentDidUpdate(){const{onContentChange:e}=this.props;e&&e()}render(){const{user:e,onContentChange:t}=this.props,{src:a,srcset:i}=(0,u.getUserAvatar)(e,{size:64}),{_id:s,email:h,fullName:E,bio:g,status:O}=e,T=Boolean(g),m=!(E&&g||s!==Zeplin.user._id),_=[l.CustomRules.SPOTIFY,l.CustomRules.YOUTUBE,l.MarkdownRules.IMAGE,l.MarkdownRules.CHECKBOX,l.MarkdownRules.TABLE,l.MarkdownRules.HEADING],b="invited"===O;return n.h("div",{ref:(0,S.default)(this,"userProfileCard"),class:(0,f.default)("userProfileCard",{hasBio:T,hasTags:this.hasTags,footerVisible:m})},n.h("div",{class:"userProfileCardHeader"},n.h(r.default,{class:"userProfileCardAvatar",src:a,srcset:i,size:64}),n.h("div",{class:"userProfileCardMetaData"},Boolean(E)&&n.h("div",{class:"userProfileCardFullName ellipsis",title:E},n.h("strong",null,E)),n.h("div",{class:(0,f.default)("userProfileCardEmail",{userProfileCardSubInfo:!b}),title:h},n.h("span",{class:"ellipsis"},h),n.h(d.default,{targetClass:"userProfileCardCopyEmailButtonContainer",content:"Copy email address"},n.h(o.default,{onClick:this.handleEmailCopy},n.h(c.default,null)))),b&&n.h("div",{class:"userProfileCardSubInfo"},"Pending Invitation"))),(T||this.hasTags)&&n.h("div",{class:"userProfileCardBody"},T&&n.h("div",{class:"userProfileCardBio"},n.h(l.default,{onMarkdownUpdate:t,disabledFeatures:_},g)),this.renderTags()),m&&n.h("div",{class:"userProfileCardFooter"},n.h("a",{target:"_blank",rel:"noopener",href:(0,p.urlResolve)("profile-account"),class:"userProfileCardActionButton button ninja"},this.actionButtonText)))}}g.propTypes={user:s().object,tags:s().array,onContentChange:s().func};const O=g},,,,(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r,MarkdownRules:()=>i.MarkdownRules,CustomRules:()=>i.CustomRules});var n=a(439),i=a(1234),s=a(1240);const r=(0,n.connect)(s.mapStateToProps)(i.default)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{MarkdownRules:()=>U,CustomRules:()=>j,default:()=>M});var n=a(93),i=a(1235),s=a.n(i),r=a(1236),o=a(185),d=a(338),l=a(104),c=a(99),u=a(171),p=a(11),f=a(108),S=a(1238),h=a(837),E=a(1101),g=a(400);a(1239);function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e,t,a){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,a)}function m(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,b(e,t,"get"))}function _(e,t,a){return function(e,t,a){if(t.set)t.set.call(e,a);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=a}}(e,b(e,t,"set"),a),a}function b(e,t,a){if(!t.has(e))throw new TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}const{h:C}=n,A=/#([\w-]+)/g,y=/^#(?:[\da-f]{8}|[\da-f]{6}|[\da-f]{3,4})$/i,I=/rgba?\s*\(\s*(\d*\.?\d+%?)\s*,?\s*(\d*\.?\d+%?)\s*,?\s*(\d*\.?\d+%?)\s*(?:[,/]?\s*(\d*\.?\d+%?))?\s*\)/g,N=/hsla?\s*\(\s*(\d*\.?\d+(?:deg)?)\s*,?\s*(\d*\.?\d+%)\s*,?\s*(\d*\.?\d+%)\s*(?:[,/]?\s*(\d*\.?\d+%?))?\s*\)/g,P=new RegExp(`(${p.ZPL_PROTOCOL}//\\S+)`,"g"),D=/tel:([\d+.-]+)\b/g,R=/spotify:([\w:]+)\b/g,v=/youtube\.com\/watch\?v=(\w+)/,L=/youtu\.be\/(\w+)/;s().setOptions({headerIds:!1,highlight(e,t,a){t?(0,S.getPrismInstance)().then((n=>{const i=n.languages[t];i||a(null,e),a(null,n.highlight(e,i))})):a(null,e)}});const j={SPOTIFY:"spotify",YOUTUBE:"youtube"},U={HEADING:"heading",TABLE:"table",IMAGE:"image",CHECKBOX:"checkbox"};var w=new WeakMap;class k extends n.Component{constructor(e){super(e),T(this,w,{writable:!0,value:void 0}),O(this,"disabledHeadingRenderer",((e,t)=>`${"#".repeat(t)} ${e}`)),O(this,"checkboxRenderer",(e=>{const{disabledFeatures:t}=this.props;return t.includes(U.CHECKBOX)?e?"[x] ":"[ ] ":`<input type="checkbox" data-index="${this.checkboxCounter++}" ${e?"checked":""}/>`})),O(this,"imageRenderer",((e,t,a)=>{const{disabledFeatures:n}=this.props,i=t||"";return n.includes(U.IMAGE)?`<a\n                href="${e}"\n                title="${i}"\n                rel="nofollow external noopener noreferrer"\n                target="_blank">${a}</a>`:`<span class="image">\n            <a href="${e}" target="_blank" rel="nofollow external noopener noreferrer">\n                <img\n                    src="${e}"\n                    srcset="${e} ${window.devicePixelRatio}x"\n                    title="${i}"\n                    alt="${a}"/>\n            </a>\n        </span>`})),O(this,"spotifyURLRenderer",(e=>{const{disabledFeatures:t}=this.props;return t.includes(j.SPOTIFY)?e:`<iframe\n            src="${e.origin}/embed${e.pathname}${e.search}"\n            width="300" height="80"\n            frameborder="0"\n            allowtransparency="true" allow="encrypted-media"></iframe>`})),O(this,"spotifyURIRenderer",(e=>{const{disabledFeatures:t}=this.props;return t.includes(j.SPOTIFY)?e:e.replace(R,((e,t)=>`<iframe\n                src="https://open.spotify.com/embed/${t.replace(/:/g,"/")}"\n                width="300" height="80" frameborder="0"\n                allowtransparency="true" allow="encrypted-media"></iframe>`))})),O(this,"youtubeRenderer",(e=>{const{disabledFeatures:t}=this.props;if(t.includes(j.YOUTUBE))return e;const a="youtu.be"===e.hostname?L:v,[,n]=e.href.match(a);return`<iframe\n                src="https://www.youtube.com/embed/${n}"\n                width="480" height="270"\n                frameborder="0"></iframe>`})),O(this,"linkRenderer",((e,t,a="")=>{const{barrelId:n}=this.props,i=(0,l.urlResolve)("project",{url:{bid:n}});let s=new URL(e.replace(/&amp;/g,"&"),i);const o=t||"";let d=!1;if(s.origin===p.SHORTLINK_URL){const e=(0,E.getLongLinkFromCache)(s);e?s=new URL(e):(d=!0,(0,E.fetchLongLink)(s).then((()=>this.convertToMarkdown(this.props.children))).catch((()=>{})))}if((0,r.isZeplinWebURL)(s.origin)||s.protocol===p.ZPL_PROTOCOL){const t=(0,r.parseURL)(s,a!==e&&a,n);if(t){const e=a.startsWith("<")?a:t.anchorText;return`<a\n                    href="${t.href}"\n                    title="${o}"\n                    data-link-type="inApp">${e}</a>`}}return["spotify.com","open.spotify.com"].includes(s.hostname)?this.spotifyURLRenderer(s):["youtube.com","www.youtube.com","youtu.be"].includes(s.hostname)?this.youtubeRenderer(s):`<a class="${d?"waiting":""}"\n            href="${e}"\n            title="${o}"\n            rel="nofollow external noopener noreferrer"\n            target="_blank">${a}</a>`})),O(this,"colorRenderer",(e=>{const{barrelId:t,barrel:a}=this.props,n=[];return e.replace(A,((e,i)=>{let s,r=a&&a.colors.find((e=>e.name===i)),o=e;if(r)s=`{{color${n.length}}}`,n.push(r.toCSS()),o=`<span class="color">${e}<span class="colorPreview" style="background-color: ${s};"></span></span>`;else if(y.test(e)){const t=f.default.fromHex(i);r=a&&a.colors.find((e=>e.equals(t)));s=r?e:"",o=`<span class="color">#${r?r.name:i}<span class="colorPreview" style="background-color: ${e};"></span></span>`}if(r){const e=(0,l.urlResolve)("project-styleguide-colors",{url:{bid:t},query:{cid:r.id}});return this.linkRenderer(e,s,o)}return o})).replace(I,((e,...n)=>{const{r:i,g:s,b:o,a:d}=(0,r.parseRGBA)(...n),c=a&&a.colors.find((e=>e.equals({r:i,g:s,b:o,a:d})));let u;if(u=c?`<span class="color">#${c.name}<span class="colorPreview" style="background-color: ${c.toCSS()};"></span></span>`:`<span class="color">${e}<span class="colorPreview" style="background-color: ${e};"></span></span>`,c){const a=(0,l.urlResolve)("project-styleguide-colors",{url:{bid:t},query:{cid:c.id}});return this.linkRenderer(a,e,u)}return u})).replace(N,((e,...n)=>{const{h:i,s,l:o,a:d}=(0,r.parseHSLA)(...n),c=f.default.fromHSLA(i,s,o,d),u=a&&a.colors.find((e=>e.equals(c)));let p;if(p=u?`<span class="color">#${u.name}<span class="colorPreview" style="background-color: ${u.toCSS()};"></span></span>`:`<span class="color">${e}<span class="colorPreview" style="background-color: ${e};"></span></span>`,u){const a=(0,l.urlResolve)("project-styleguide-colors",{url:{bid:t},query:{cid:u.id}});return this.linkRenderer(a,e,p)}return p})).replace(/{{color(\d+)}}/g,((e,t)=>n[parseInt(t,10)]))})),O(this,"mentionRendererReplacer",(e=>{const{username:t,userId:a,members:n,useUserIdForMention:i}=this.props,s=i?(0,d.mentionRegexFn)(a):(0,d.mentionRegexFn)(t),r=e.substring(1);let o,l=e;return n&&!d.groupMentionKeywords.includes(r)&&(o=i?n.find((({user:e})=>e.id===r)):n.find((({user:e})=>e.username===r))),o&&o.user&&o.user.fullName&&(l=`@${o.user.fullName}`),s.test(e)?`<span data-unique-id="${a}" class="user self">${l}</span>`:o?`<span data-unique-id="${o&&o.user._id}" class="user">${l}</span>`:l})),O(this,"mentionRenderer",(e=>e.replace(/@\w+\b/g,this.mentionRendererReplacer))),O(this,"telRenderer",(e=>e.replace(D,((e,t)=>`<a href="tel:${t}">${t}</a>`)))),O(this,"emojiRenderer",(e=>e.replace(h.default.EMOJI_CANDIDATE_REGEX,((e,t)=>{const{barrelId:a}=this.props,n=h.default.searchEmoji(t,a);return n?n.customEmoji?`<img class="customEmoji" src="${n.emoji}" title="${t}" alt=":${t}:">`:n.emoji:`<span class="customEmojiPlainText">${e}</span>`})))),O(this,"textRenderer",(e=>{let t=e.replace(/&amp;/g,"&");const a=(t.match(P)||[]).sort(((e,t)=>t.length-e.length));for(const n of a)t=t.replace(n,this.linkRenderer(n));return(0,o.pipe)(this.colorRenderer,this.mentionRenderer,this.telRenderer,this.spotifyURIRenderer,this.emojiRenderer,h.default.spanEmojis)(t)})),O(this,"bindCheckboxEventListeners",(()=>{const{disabledFeatures:e,onUpdate:t}=this.props;if(e.includes(U.CHECKBOX)||!t)return;this.nodeRefs.base.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.addEventListener("change",this.handleChange)}))})),O(this,"bindImageEventListeners",(()=>{const{disabledFeatures:e,onImageLoad:t}=this.props;if(e.includes(U.IMAGE)||!t)return;this.nodeRefs.base.querySelectorAll(".image img").forEach((e=>{e.addEventListener("load",t,{once:!0})}))})),O(this,"bindEventListeners",(()=>{this.bindCheckboxEventListeners(),this.bindImageEventListeners()})),O(this,"convertToMarkdown",(e=>{s()(e,{sanitize:!0,mangle:!1,silent:!0,renderer:m(this,w),sanitizer:g.escapeHTML},((e,t)=>{e||this.setState({markdown:t},(()=>{const{onMarkdownUpdate:e}=this.props;e&&e()}))}))})),O(this,"handleChange",(e=>{const{children:t,onUpdate:a}=this.props,n=parseInt(e.target.dataset.index,10);let i=-1;a(t.replace(/- \[(x| )\]/g,((e,t)=>(i++,i===n?" "===t?"- [x]":"- [ ]":e))))}));const{disabledFeatures:t,children:a}=e;_(this,w,new(s().Renderer)),m(this,w).checkbox=this.checkboxRenderer,m(this,w).link=this.linkRenderer,m(this,w).image=this.imageRenderer,m(this,w).text=this.textRenderer,t.includes(U.HEADING)&&(m(this,w).heading=this.disabledHeadingRenderer),t.includes(U.TABLE)&&((new(s().Lexer)).tokenizer.rules.block.table={exec:()=>{}}),this.checkboxCounter=0,this.state={markdown:(0,g.escapeHTML)(a)}}getBarrel(e){const{projects:t,styleguides:a}=this.props;return t[e]||a[e]||{}}componentDidMount(){this.bindEventListeners(),this.convertToMarkdown(this.props.children)}componentWillReceiveProps(e){(e.children!==this.props.children||e.emojisLoaded&&!this.props.emojisLoaded)&&this.convertToMarkdown(e.children)}componentDidUpdate(){this.bindEventListeners()}render(){const e=(0,c.default)("markdown",{jumboEmojis:h.default.canWeMakeThisJumbo(this.props.children)});return n.h("div",{ref:(0,u.default)(this,"base"),class:e,dangerouslySetInnerHTML:{__html:this.state.markdown}})}}k.defaultProps={disabledFeatures:[],organizations:[]};const M=k},,(e,t,a)=>{"use strict";a.r(t),a.d(t,{parseAppLink:()=>g,parseURL:()=>O,parseRGBA:()=>b,parseHSLA:()=>C,isZeplinWebURL:()=>f});var n=a(123),i=a(11),s=a(104),r=a(1237);const o=/\/workspace\/([\da-f]{24})\/(projects|styleguides)?/i,d=/\/(styleguide|project)\/([\da-f]{24})/i,l=/\/(dashboard|screen|styleguide|flow)/,c=/\/(about|colors|textStyles|spacing|components)/i,u=/\/screen\/([\da-f]{24})(?:\/version\/([\da-f]{24}))?/i,p=/\/flow\/([\da-f]{24})$/i;function f(e){return i.APP_URLS.includes(e)}function S(e){return e===n.default.PROJECT?"dashboard":"about"}function h(e){return e===n.default.PROJECT?"colors":"about"}function E(e){const[t,a="project",i]=e.match(d)||[];if(!i)return null;const s=e.substring(t.length),[,r=S(a)]=s.match(l)||[],o={url:{pid:i,stid:i,bid:i}};if(a===n.default.STYLEGUIDE||"styleguide"===r){const[,e=h(a)]=s.match(c)||[];o.urlSlug=`${function(e){return e===n.default.PROJECT?"project-styleguide":"styleguide"}(a)}-${e.toLowerCase()}`}else if("screen"===r){const[,e,t]=s.match(u)||[];o.urlSlug=t?"project-screen-version":"project-screen",Object.assign(o.url,{sid:e,vid:t})}else if("flow"===r){const[,e]=s.match(p)||[];o.urlSlug="project-flow",Object.assign(o.url,{flid:e})}else o.urlSlug="project-dashboard";return o}function g(e){const t=f(e.origin);return e.protocol===i.ZPL_PROTOCOL?function(e){const t={},a=e.pathname||`//${e.hostname}`;if(a.startsWith("//projects")){const a=e.searchParams.getAll("pid");t.urlSlug="projects",t.query={pid:a}}else if(a.startsWith("//styleguides")){const a=e.searchParams.getAll("stid");t.urlSlug="styleguides",t.query={stid:a}}else{const n=e.searchParams.get("pid"),i=e.searchParams.get("stid");if(!n&&!i)return null;if(t.url={pid:n,bid:n||i},a.startsWith("//screen")){const a=e.searchParams.get("sid"),n=e.searchParams.get("vid");t.urlSlug=n?"project-screen-version":"project-screen",t.url.sid=a,t.url.vid=n}else if(a.startsWith("//dot")){const a=e.searchParams.get("sid"),n=e.searchParams.getAll("did"),i=e.searchParams.getAll("cmid");t.urlSlug="project-screen",t.url.sid=a,t.query={did:n,cmid:i}}else if(a.startsWith("//annotation")){const a=e.searchParams.get("sid"),n=e.searchParams.get("atid");t.urlSlug="project-screen",t.url.sid=a,t.query={atid:n}}else if(a.startsWith("//styleguide")){const a=e.searchParams.getAll("cid"),n=e.searchParams.getAll("tsid"),s=e.searchParams.getAll("sptid"),r=e.searchParams.getAll("coid");t.urlSlug=i?"styleguide":"project-styleguide",t.query={cid:a,tsid:n,sptid:s,coid:r}}else if(a.startsWith("//colors")){const a=e.searchParams.getAll("cid");t.urlSlug=i?"styleguide-colors":"project-styleguide-colors",t.query={cid:a}}else if(a.startsWith("//textStyles")){const a=e.searchParams.getAll("tsid");t.urlSlug=i?"styleguide-textstyles":"project-styleguide-textstyles",t.query={tsid:a}}else if(a.startsWith("//spacing")){const a=e.searchParams.getAll("sptid");t.urlSlug=i?"styleguide-spacing":"project-styleguide-spacing",t.query={sptid:a}}else if(a.startsWith("//components")){const a=e.searchParams.getAll("coid"),n=e.searchParams.getAll("coids"),s=e.searchParams.getAll("cseid"),r=e.searchParams.getAll("seid"),o=0===a.length?n:a;t.urlSlug=i?"styleguide-components":"project-styleguide-components",t.query={coid:o,cseid:s,seid:r}}else if(a.startsWith("//flowGroup")){const a=e.searchParams.get("flid"),n=e.searchParams.get("fgid");t.urlSlug="project-flow",t.url.flid=a,t.query={fgid:n}}else if(a.startsWith("//flow")){const a=e.searchParams.get("flid");t.urlSlug="project-flow",t.url.flid=a}else{const a=e.searchParams.getAll("sid"),n=e.searchParams.getAll("seid");t.urlSlug="project-dashboard",t.query={sid:a,seid:n}}}return t}(e):t?function(e){const t={};if(e.pathname.startsWith("/organization")){const[,a,n="projects"]=e.pathname.match(o)||[],i=e.searchParams.getAll("pid"),s=e.searchParams.getAll("stid");t.urlSlug=`workspace-${n}`,t.url={oid:a},t.query={pid:i,stid:s}}else if(e.pathname.startsWith("/projects")){const a=e.searchParams.getAll("pid");t.urlSlug="projects",t.query={pid:a}}else if(e.pathname.startsWith("/styleguides")){const a=e.searchParams.getAll("stid");t.urlSlug="styleguides",t.query={stid:a}}else{const a=E(e.pathname);if(!a)return null;switch(Object.assign(t,a),t.urlSlug){case"project-screen":{const a=e.searchParams.getAll("did"),n=e.searchParams.getAll("cmid"),i=e.searchParams.getAll("atid");t.query={did:a,cmid:n,atid:i};break}case"project-styleguide-colors":case"styleguide-colors":{const a=e.searchParams.getAll("cid");t.query={cid:a};break}case"project-styleguide-textstyles":case"styleguide-textstyles":{const a=e.searchParams.getAll("tsid");t.query={tsid:a};break}case"project-styleguide-spacing":case"styleguide-spacing":{const a=e.searchParams.getAll("sptid");t.query={sptid:a};break}case"project-styleguide-components":case"styleguide-components":{const a=e.searchParams.getAll("coid"),n=e.searchParams.getAll("seid"),i=e.searchParams.getAll("cseid");t.query={coid:a,seid:n,cseid:i};break}case"project-dashboard":{const a=e.searchParams.getAll("sid"),n=e.searchParams.getAll("seid");t.query={sid:a,seid:n};break}case"project-flow":{const a=e.searchParams.get("fgid");t.query={fgid:a};break}}}return t}(e):null}function O(e,t="",a=null){const n=g(e);if(!n)return null;const{url:i={},query:o={},urlSlug:d}=n;if(t)return{anchorText:t,href:(0,s.urlResolve)(d,{url:i,query:o})};return{anchorText:r.default.getURLsAnchorText(n,a),href:(0,s.urlResolve)(d,{url:i,query:o})}}function T(e){const t=parseFloat(e);return e.endsWith("%")?Math.round(255*t/100):t}function m(e){return parseFloat(e)/100}function _(e){const t=parseFloat(e);return e.endsWith("%")?t/100:t}function b(e,t,a,n="1"){return{r:T(e),g:T(t),b:T(a),a:_(n)}}function C(e,t,a,n="1"){return{h:(i=e,parseFloat(i)/360),s:m(t),l:m(a),a:_(n)};var i}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(124),i=a(397),s=a(104),r=a(737),o=a(264);const d={getURLsAnchorText:function(e,t=null){var a,d;const{organizations:l}=o.default.OrganizationStore.getState(),c=o.default.BarrelStore.getState(),u=t||c.barrelId,{projects:p}=o.default.ProjectsDataStore.getState(),{styleguides:f}=o.default.StyleguidesDataStore.getState(),{dots:S}=o.default.DotsDataStore.getState(),{url:h={},query:E={},urlSlug:g}=e,{oid:O,bid:T,sid:m}=h,_=r.default.getBarrel({bid:"string"==typeof T?T:void 0});let b=(0,s.urlResolve)(g,{url:h,query:E});switch(g){case"workspace-projects":{const{name:e="Organization"}=l.find((e=>e._id===O))||{};b=`${e}ʼs Projects`;break}case"workspace-styleguides":{const{name:e="Organization"}=l.find((e=>e._id===O))||{};b=`${e}ʼs Styleguides`;break}case"projects":b="Projects";break;case"styleguides":b="Styleguides";break;case"project-screen":{const{did:e=[],cmid:t=[],atid:a=[]}=E;if(T!==u){if(!(null==_?void 0:_.name))break;b=t.length?`${t.length>1?"Replies":"Reply"} on screen of ${_.name}`:e.length?`Comment${e.length>1?"s":""} on screen of ${_.name}`:a.length?`Annotation on screen of ${_.name}`:`Screen in ${_.name}`;break}const{name:n="screen"}=((null==_?void 0:_.screens)||[]).find((e=>e._id===m))||{},i=S[u]&&"string"==typeof m&&S[u][m]||[];if(e.length)if(e.length>1)b=`Notes on ${n}`;else{const{name:a=""}=i.find((t=>t._id===e[0]))||{},s=`Comment #${a}, ${n}`;b=t.length?`${t.length>1?"Replies":"Reply"} on ${s}`:s}else b=a.length?`Annotation on ${n}`:n;break}case"project-screen-version":{const{name:e="screen"}=((null==_?void 0:_.screens)||[]).find((e=>e._id===m))||{};b=`Version of ${e}`;break}case"project-styleguide":case"styleguide":(null==_?void 0:_.name)&&(b=T===u?_.name:"Styleguide");break;case"project-flow":(null==_?void 0:_.name)&&(b=`${_.name}ʼs ${E.fgid?"Flow Group":"Flows"}`);break;case"project-styleguide-colors":case"styleguide-colors":if(null==_?void 0:_.name){b=`${T===u?"":`${_.name} `}Colors`}break;case"project-styleguide-textstyles":case"styleguide-textstyles":if(null==_?void 0:_.name){b=`${T===u?"":`${_.name} `}Text Styles`}break;case"project-styleguide-spacing":case"styleguide-spacing":if(null==_?void 0:_.name){b=`${T===u?"":`${_.name} `}Spacing`}break;case"project-styleguide-components":case"styleguide-components":{const t=null===(d=null===(a=e.query)||void 0===a?void 0:a.coid)||void 0===d?void 0:d[0];if(t){const{component:e}=(0,i.findComponentById)([...Object.values(p),...Object.values(f)].filter((e=>e.dataStage===n.default.Complete)),t)||{};if(e){b=e.name;break}}if(null==_?void 0:_.name){b=`${T===u?"":`${_.name} `}Components`}break}case"styleguide-about":if(null==_?void 0:_.name){b=`${T===u?"":`${_.name} `}About`}break;default:{if(!(null==_?void 0:_.name))break;const{sid:e=[]}=E;b=e.length?`${e.length} screens in ${T===u?"dashboard":_.name}`:T===u?"Dashboard":_.name}}return b}}},(e,t,a)=>{"use strict";async function n(){return(await a.e(26).then(a.bind(a,3249))).default}a.r(t),a.d(t,{getPrismInstance:()=>n})},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{mapStateToProps:()=>r});var n=a(264),i=a(737),s=a(738);function r({DotsDataStore:{dots:e}},t){const{organizations:a}=n.default.OrganizationStore.getState(),{selectedOrganizationId:r}=n.default.SpaceStore.getState(),o=n.default.BarrelStore.getState(),{organizationId:d}=o,l=t.barrelId||o.barrelId,{username:c,userId:u}=n.default.UserStore.getState(),{projects:p}=n.default.ProjectsDataStore.getState(),{styleguides:f}=n.default.StyleguidesDataStore.getState(),S=!!n.default.EmojisStore.getState().projectsEmojis[l],h=i.default.getBarrel({bid:l}),{members:E=[]}=s.default.getOrganization(d||r)||{},{users:g=[]}=h||{};return{allDots:null!=e?e:[],organizations:a,barrelId:l,username:c,userId:u,members:[...E,...g],barrel:h,projects:p,styleguides:f,emojisLoaded:S}}},,(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";a.r(t)},(e,t,a)=>{"use strict";var n;a.r(t),a.d(t,{default:()=>i}),function(e){e.CREATE_ANNOTATION="CreateAnnotation",e.DELETE_ANNOTATION="DeleteAnnotation",e.UPDATE_ANNOTATION_COORDINATE="UpdateAnnotationCoordinate",e.UPDATE_ANNOTATION_TEXT="UpdateAnnotationText",e.UPDATE_ANNOTATION_TYPE="UpdateAnnotationType",e.DELETE_ANNOTATION_TYPE="DeleteAnnotationType",e.CREATE_COMPONENT_ANNOTATION="CreateComponentAnnotation",e.DELETE_COMPONENT_ANNOTATION="DeleteComponentAnnotation",e.DELETE_COMPONENT_ANNOTATION_TYPE="DeleteComponentAnnotationType",e.UPDATE_COMPONENT_ANNOTATION_COORDINATE="UpdateComponentAnnotationCoordinate",e.UPDATE_COMPONENT_ANNOTATION_TEXT="UpdateComponentAnnotationText",e.UPDATE_COMPONENT_ANNOTATION_TYPE="UpdateComponentAnnotationType",e.UNLINK_COMPONENT_ANNOTATION="UnlinkComponentAnnotation"}(n||(n={}));const i=n},(e,t,a)=>{"use strict";a.r(t);var n=a(1246),i=a(1210),s=a(1204),r=a(264),o=a(1081),d=a(123),l=a(1075),c=a(1074),u=a(1055),p=a(737),f=a(1060),S=a(1145),h=a(1049),E=a(1063),g=a(1065),O=a(576),T=a(120),m=a(1213);const _=["variantSections","components"];function b(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}l.default&&(l.default.bind_global(((e,{params:{stid:t}={}})=>{t&&(p.default.hasStyleguide(t)||(0,c.unsubscribeFromStyleguideChannel)(t))})),l.default.bind(n.default.ACTIVATE,(({params:{stid:e}})=>{u.default.activate({bid:e,barrelType:d.default.STYLEGUIDE})})),l.default.bind(n.default.ARCHIVE,(({params:{stid:e,uid:t}})=>{u.default.archive({bid:e,barrelType:d.default.STYLEGUIDE,uid:t})})),l.default.bind(n.default.DELETE,(({params:{stid:e,uid:t}})=>{u.default.remove({barrelType:d.default.STYLEGUIDE,bid:e,uid:t})})),l.default.bind(n.default.TRANSFER_OWNERSHIP,(({params:{oid:e,stid:t,mid:a,uid:n},body:i,body:{users:s}})=>{const l=p.default.findBarrelOrganizationId(t),f=!!l;if(a)return void o.default.transferOwnership({bid:t,fromUserId:n,targetId:a,users:s,oid:l});const{organizations:S,organizationStyleguides:h}=r.default.OrganizationStore.getState(),E=S.some((t=>t._id===e)),g=e in h;if(e&&"_id"in i){if(!E)return void(0,c.unsubscribeFromOrganizationChannel)(e);if(!f){if(!g)return;return void u.default.add({barrelType:d.default.STYLEGUIDE,barrel:i,oid:e})}if(l===e)return;o.default.transferOwnership({bid:t,targetId:e,users:s,oid:l,toOrganization:!0})}else if(e){if(!s.some((e=>e.user._id===Zeplin.user._id)))return void u.default.remove({barrelType:d.default.STYLEGUIDE,bid:t});o.default.transferOwnership({bid:t,targetId:e,users:s,oid:l,toOrganization:!0})}})),l.default.bind(s.default.CREATE,(({params:{stid:e,uid:t},body:a})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:A(A({},a),{},{status:"registered"})})})),l.default.bind(n.default.INVITE_USER,(({params:{stid:e,oid:t},body:a})=>{const n="role"in a,i=p.default.hasStyleguide(e),{barrelId:s}=r.default.BarrelStore.getState(),{userId:l}=r.default.UserStore.getState();if(n&&i){const{user:{_id:t}}=a;e===s&&t===l&&(u.default.reset(),p.default.reloadCurrentPage()),u.default.addMembers({barrelType:d.default.STYLEGUIDE,bid:e,members:[a]})}else i?o.default.updateStyleguide({stid:e,data:a}):u.default.add({barrelType:d.default.STYLEGUIDE,oid:t,barrel:a})})),l.default.bind(s.default.UPDATE_USER,(({params:{stid:e,uid:t},body:a})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:a})})),l.default.bind(s.default.UPDATE_USERNAME,(({params:{stid:e,uid:t},body:a})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:a})})),l.default.bind(s.default.UPDATE_EMAIL,(({params:{stid:e,uid:t},body:a})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:a})})),l.default.bind(s.default.UPDATE_AVATAR,(({params:{stid:e,uid:t},body:a})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:a})})),l.default.bind(s.default.UPDATE_EMOTAR,(({params:{stid:e,uid:t},body:{emotar:a}})=>{e&&u.default.updateUserData({bid:e,uid:t,userData:{emotar:a}})})),l.default.bind(s.default.DELETE,(({params:{stid:e,uid:t}})=>{e&&u.default.removeMember({barrelType:d.default.STYLEGUIDE,bid:e,uid:t})})),l.default.bind(n.default.REMOVE_USER,(({params:{stid:e,uid:t,mid:a}})=>{u.default.removeMember({barrelType:d.default.STYLEGUIDE,bid:e,uid:t,mid:a}),(0,m.removeUser)(e,a)})),l.default.bind(n.default.UPDATE_USER_ROLE,(({params:{stid:e,mid:t},body:{role:a}})=>{u.default.updateUserRole({bid:e,uid:t,role:a})})),l.default.bind(n.default.UPDATE_NAME,(({params:{stid:e},body:{name:t}})=>{o.default.updateStyleguide({stid:e,data:{name:t}})})),l.default.bind(n.default.UPDATE_DESCRIPTION,(({params:{stid:e},body:{description:t}})=>{o.default.updateStyleguide({stid:e,data:{description:t}})})),l.default.bind(n.default.UPDATE_THUMBNAIL,(({params:{stid:e},body:{thumbnail:t}})=>{u.default.updateThumbnail({bid:e,barrelType:"styleguide",thumbnail:t})})),l.default.bind(n.default.UPDATE_DENSITY_SCALE,(({params:{stid:e},body:{densityScale:t}})=>{o.default.updateStyleguide({stid:e,data:{densityScale:t}})})),l.default.bind(n.default.ADD_INTEGRATION_EVENT,(({params:{stid:e,intype:t,inid:a,event:n}})=>{E.default.addIntegrationEvent({bid:e,intype:t,inid:a,event:n})})),l.default.bind(n.default.DELETE_INTEGRATION_EVENT,(({params:{stid:e,intype:t,inid:a,event:n}})=>{E.default.removeIntegrationEvent({bid:e,intype:t,inid:a,event:n})})),l.default.bind(n.default.DELETE_INTEGRATION,(({params:{stid:e,intype:t,inid:a}})=>{u.default.removeIntegration({bid:e,intype:t,inid:a})})),l.default.bind(n.default.ADD_EXTENSION,(({params:{stid:e,uid:t},body:{_id:a}})=>{h.default.load({barrelType:d.default.STYLEGUIDE,bid:e,uid:t,eid:a})})),l.default.bind(n.default.REMOVE_EXTENSION,(({params:{stid:e,eid:t}})=>{h.default.remove({barrelType:d.default.STYLEGUIDE,bid:e,eid:t})})),l.default.bind(n.default.DELETE_USER_STYLEGUIDE_SUGGESTIONS,(({params:{stid:e,suggestionType:t}})=>{"colors"===t&&f.default.hideSuggestedColors({barrelType:d.default.STYLEGUIDE,barrelId:e}),"textStyles"===t&&f.default.hideSuggestedTextStyles({barrelType:d.default.STYLEGUIDE,barrelId:e})})),l.default.bind(n.default.UPDATE_USER_STYLEGUIDE_SUGGESTIONS,(({params:{stid:e},body:{colors:t,textStyles:a}})=>{t&&O.default.suggestedRemoteColorsFileReceived({bid:e,fileName:t}),a&&O.default.suggestedRemoteTextStylesFileReceived({bid:e,fileName:a})})),l.default.bind(n.default.UPDATE_PARENT,(({params:{stid:e},body:t})=>{o.default.updateStyleguide({stid:e,data:t})})),l.default.bind(n.default.REMOVE_PARENT,(({params:{stid:e}})=>{o.default.updateStyleguide({stid:e,data:{parent:null,ancestors:[]}})})),l.default.bind(n.default.CREATE_COLOR,(({params:{unorderedBatch:e,stid:t},body:a})=>{e||u.default.addColor({bid:t,color:a})})),l.default.bind(n.default.UPDATE_COLOR,(({params:{stid:e,cid:t},body:a})=>{u.default.updateColor({bid:e,cid:t,colorData:a})})),l.default.bind(n.default.UPDATE_COLORS_ORDER,(({params:{stid:e},body:{colors:t}})=>{t.forEach((({_id:t,to:a})=>{u.default.updateColorOrder({bid:e,cid:t,to:a})}))})),l.default.bind(n.default.DELETE_COLOR,(({params:{unorderedBatch:e,stid:t,cid:a}})=>{e||u.default.removeColor({bid:t,cid:a})})),l.default.bind(n.default.UPDATE_COLORS_STYLEGUIDE,(({params:{stid:e,tstid:t}})=>{u.default.removeAllColors({bid:e}),p.default.hasStyleguide(t)&&T.getStyleguide(t).then((e=>{o.default.getStyleguideSuccess({styleguide:e})}))})),l.default.bind(n.default.CREATE_TEXT_STYLE,(({params:{unorderedBatch:e,stid:t},body:a})=>{e||u.default.addTextStyle({bid:t,textStyle:a})})),l.default.bind(n.default.UPDATE_TEXT_STYLE,(({params:{stid:e,tsid:t},body:a})=>{u.default.updateTextStyle({bid:e,tsid:t,textStyleData:a})})),l.default.bind(n.default.DELETE_TEXT_STYLE,(({params:{unorderedBatch:e,stid:t,tsid:a}})=>{e||u.default.removeTextStyle({bid:t,tsid:a})})),l.default.bind(n.default.UPDATE_TEXT_STYLES_STYLEGUIDE,(({params:{stid:e,tstid:t}})=>{u.default.removeAllTextStyles({bid:e}),p.default.hasStyleguide(t)&&T.getStyleguide(t).then((e=>{o.default.getStyleguideSuccess({styleguide:e})}))})),l.default.bind(n.default.CREATE_SPACING_SECTION,(({params:{stid:e},body:t})=>{u.default.addSpacingSection({bid:e,spacingSection:t})})),l.default.bind(n.default.UPDATE_SPACING_SECTION,(({params:{stid:e,ssid:t},body:a})=>{u.default.updateSpacingSection({bid:e,ssid:t,updatedSpacingSection:a})})),l.default.bind(n.default.DELETE_SPACING_SECTION,(({params:{stid:e,ssid:t}})=>{u.default.removeSpacingSection({bid:e,ssid:t})})),l.default.bind(n.default.CREATE_SPACING_TOKEN,(({params:{stid:e,ssid:t},body:a})=>{u.default.addSpacingToken({bid:e,ssid:t,spacingToken:a})})),l.default.bind(n.default.UPDATE_SPACING_TOKEN,(({params:{stid:e,ssid:t,sptid:a},body:n})=>{u.default.updateSpacingToken({bid:e,ssid:t,sptid:a,updatedSpacingToken:n})})),l.default.bind(n.default.DELETE_SPACING_TOKEN,(({params:{stid:e,ssid:t,sptid:a}})=>{u.default.removeSpacingToken({bid:e,ssid:t,sptid:a})})),l.default.bind(n.default.UPDATE_REM_PREFERENCES,(({params:{stid:e},body:{remPreferences:t}})=>{u.default.updateRemPreferences({bid:e,updatedRemPreferences:t})})),l.default.bind(n.default.CREATE_COMPONENT_SECTION,(e=>{let{params:{unorderedBatch:t,stid:a,csid:n},body:{variantSections:i,components:s=[]}}=e,r=b(e.body,_);if(t)return;const o=s.map((({coid:e,csid:t})=>({coid:e,csid:t.split("/")})));u.default.addComponentSection({bid:a,csids:n?n.split("/"):[],componentSection:A({components:o},r)}),i&&i.forEach((e=>{const{_id:t,name:n,variant:i,components:s}=e;f.default.setComponentVariantData({bid:a,csid:t,name:n,sectionVariant:i,components:s})}))})),l.default.bind(n.default.UPDATE_COMPONENT_SECTION,(({params:{stid:e,csid:t},body:a})=>{u.default.updateComponentSection({bid:e,csids:t.split("/"),componentSectionData:a})})),l.default.bind(n.default.UPDATE_COMPONENT_SECTIONS_ORDER,(({params:{stid:e},body:{componentSections:t,variantSections:a}})=>{u.default.updateComponentSectionsOrder({bid:e,componentSections:t.map((e=>({csid:e.csid.split("/"),tcsid:e.tcsid&&e.tcsid.split("/"),to:e.to})))}),a&&a.forEach((t=>{const{_id:a,name:n,variant:i,components:s}=t;f.default.setComponentVariantData({bid:e,csid:a,name:n,sectionVariant:i,components:s})}))})),l.default.bind(n.default.MERGE_COMPONENT_SECTIONS,(({params:{stid:e},body:t})=>{t.componentSections.forEach((t=>{u.default.mergeComponentSection({bid:e,csids:t.csid.split("/"),tcsids:t.tcsid.split("/"),flatten:t.flatten})}))})),l.default.bind(n.default.DELETE_COMPONENT_SECTION,(({params:{unorderedBatch:e,stid:t,csid:a}})=>{e||u.default.removeComponentSection({bid:t,csids:a.split("/")})})),l.default.bind(n.default.UPDATE_COMPONENT_SECTIONS_STYLEGUIDE,(({params:{stid:e,tstid:t},body:{componentSections:a}})=>{u.default.removeComponentSections({bid:e,componentSections:a}),p.default.hasStyleguide(t)&&T.getStyleguide(t).then((e=>{o.default.getStyleguideSuccess({styleguide:e})}))})),l.default.bind(n.default.CREATE_COMPONENT,(({params:{unorderedBatch:e,stid:t,csid:a,requestId:n,index:i},body:s})=>{e||u.default.addComponent({bid:t,csids:a.split("/"),component:A(A({},s),{},{requestId:n,index:i})})})),l.default.bind(n.default.CREATE_COMPONENT_V2,(({params:{unorderedBatch:e,stid:t,csid:a,requestId:n,index:i},body:s})=>{e||u.default.addComponent({bid:t,csids:a.split("/"),component:A(A({},s),{},{requestId:n,index:i})})})),l.default.bind(n.default.CREATE_COMPONENT_VERSION_V2,(({params:{stid:e,csid:t,coid:a},body:n})=>{u.default.updateComponent({bid:e,barrelType:d.default.STYLEGUIDE,csids:t.split("/"),coid:a,componentData:n})})),l.default.bind(n.default.UPDATE_COMPONENT,(({params:{stid:e,coid:t,csid:a},body:n})=>{u.default.updateComponent({bid:e,csids:a.split("/"),coid:t,componentData:n})})),l.default.bind(n.default.UPDATE_COMPONENTS_ORDER,(({params:{stid:e},body:{components:t,variantSections:a}})=>{const n=t.map((({csid:e,tcsid:t,coid:a,to:n})=>({csid:e.split("/"),tcsid:t.split("/"),coid:a,to:n})));u.default.updateComponentsOrder({bid:e,components:n}),a&&a.forEach((t=>{const{_id:a,name:n,variant:i,components:s}=t;f.default.setComponentVariantData({bid:e,csid:a,name:n,sectionVariant:i,components:s})}))})),l.default.bind(n.default.DELETE_COMPONENT,(({params:{unorderedBatch:e,stid:t,csid:a,coid:n}})=>{e||u.default.removeComponent({bid:t,csids:a.split("/"),coid:n})})),l.default.bind(n.default.UPDATE_CONNECTED_COMPONENTS,(({params:{stid:e}})=>{T.getStyleguideConnectedComponents(e).then((({items:t})=>{u.default.updateConnectedComponents({bid:e,connectedComponents:t}),g.default.updateForUpdateConnectedComponents(e)}))})),l.default.bind(n.default.CREATE_CONNECTED_COMPONENT_ITEM,(({params:{pid:e}})=>{T.getProjectConnectedComponents(e).then((({items:t})=>{u.default.updateConnectedComponents({bid:e,connectedComponents:t}),g.default.updateForUpdateConnectedComponents(e)}))})),l.default.bind(n.default.DELETE_CONNECTED_COMPONENT_ITEM,(({params:{pid:e}})=>{T.getProjectConnectedComponents(e).then((({items:t})=>{u.default.updateConnectedComponents({bid:e,connectedComponents:t}),g.default.updateForUpdateConnectedComponents(e)}))})),l.default.bind(n.default.CONVERT_COMPONENT_SECTION_TO_VARIANT_SECTION,(({params:{stid:e,csid:t},body:{name:a,variant:n,components:i}})=>{f.default.setComponentVariantData({bid:e,csid:t,name:a,sectionVariant:n,components:i})})),l.default.bind(n.default.CONVERT_VARIANT_SECTION_TO_COMPONENT_SECTION,(({params:{stid:e,csid:t}})=>{f.default.removeComponentVariantData({bid:e,csid:t})})),l.default.bind(n.default.CREATE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{stid:e,csid:t},body:a})=>{f.default.createComponentVariantProperty({bid:e,csid:t,componentVariantProperty:a})})),l.default.bind(n.default.UPDATE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{stid:e,csid:t,vpid:a},body:n})=>{f.default.updateComponentVariantProperty({bid:e,csid:t,vpid:a,data:n})})),l.default.bind(n.default.DELETE_COMPONENT_SECTION_VARIANT_PROPERTY,(({params:{stid:e,csid:t,vpid:a}})=>{f.default.removeComponentVariantProperty({bid:e,csid:t,vpid:a})})),l.default.bind(n.default.UPDATE_COMPONENTS_VARIANT_PROPERTIES,(({params:{stid:e,csid:t},body:{variant:a,components:n}})=>{f.default.setComponentVariantData({bid:e,csid:t,name,sectionVariant:a,components:n})})),l.default.bind(n.default.UPDATE_COMPONENT_SECTION_VARIANT_PROPERTIES_ORDER,(({params:{stid:e,csid:t},body:{properties:a}})=>{f.default.updateComponentVariantPropertiesOrder({bid:e,csid:t,properties:a})})),l.default.bind(n.default.CREATE_COMPONENT_SECTION_VARIANT_GROUPS,(({params:{stid:e,csid:t},body:{components:a,componentSections:n}})=>{f.default.groupComponentsByVariantProperty({bid:e,csid:t,components:a,componentSections:n})})),l.default.bind(n.default.DELETE_WORKFLOW_STATUS,(({params:{stid:e}})=>{u.default.deleteWorkflowStatus({bid:e})})),l.default.bind(n.default.UPDATE_WORKFLOW_STATUS,(({params:{stid:e},body:t})=>{u.default.updateWorkflowStatus({bid:e,body:t})})),l.default.bind(n.default.DELETE_CONNECTED_COMPONENTS,(({params:{stid:e}})=>{u.default.updateConnectedComponents({bid:e,connectedComponents:[]}),g.default.updateForUpdateConnectedComponents(e)})),l.default.bind(i.default.PROCESS_STYLEGUIDE_COMPONENT_VERSION_ASSET_CONTENTS,(({params:{coid:e},body:{assets:t}})=>{S.default.updateComponentVersionAssetOptimizedContents({coid:e,assets:t})})))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={ACTIVATE:"ActivateStyleguide",ARCHIVE:"ArchiveStyleguide",DELETE:"DeleteStyleguide",INVITE_USER:"InviteStyleguideUser",ADD_INTEGRATION_EVENT:"AddStyleguideIntegrationEvent",DELETE_INTEGRATION_EVENT:"DeleteStyleguideIntegrationEvent",DELETE_INTEGRATION:"DeleteStyleguideIntegration",ADD_EXTENSION:"AddStyleguideExtension",REMOVE_EXTENSION:"RemoveExtensionFromStyleguide",REMOVE_USER:"RemoveUserFromStyleguide",TRANSFER_OWNERSHIP:"TransferStyleguideOwnership",UPDATE_DENSITY_SCALE:"UpdateStyleguideDensityScale",UPDATE_DESCRIPTION:"UpdateStyleguideDescription",UPDATE_NAME:"UpdateStyleguideName",UPDATE_THUMBNAIL:"UpdateStyleguideThumbnail",UPDATE_USER_ROLE:"UpdateStyleguideUserRole",DELETE_USER_STYLEGUIDE_SUGGESTIONS:"DeleteUserStyleguideSuggestions",UPDATE_USER_STYLEGUIDE_SUGGESTIONS:"UpdateUserStyleguideSuggestions",UPDATE_PARENT:"UpdateStyleguideParent",REMOVE_PARENT:"RemoveStyleguideParent",CREATE_COLOR:"CreateStyleguideColor",DELETE_COLOR:"DeleteStyleguideColor",UPDATE_COLOR:"UpdateStyleguideColor",UPDATE_COLORS_ORDER:"UpdateStyleguideColorsOrder",UPDATE_COLORS_STYLEGUIDE:"UpdateStyleguideColorsStyleguide",CREATE_TEXT_STYLE:"CreateStyleguideTextStyle",UPDATE_TEXT_STYLE:"UpdateStyleguideTextStyle",DELETE_TEXT_STYLE:"DeleteStyleguideTextStyle",UPDATE_TEXT_STYLES_STYLEGUIDE:"UpdateStyleguideTextStylesStyleguide",CREATE_SPACING_SECTION:"CreateStyleguideSpacingSection",UPDATE_SPACING_SECTION:"UpdateStyleguideSpacingSection",DELETE_SPACING_SECTION:"DeleteStyleguideSpacingSection",CREATE_SPACING_TOKEN:"CreateStyleguideSpacingToken",UPDATE_SPACING_TOKEN:"UpdateStyleguideSpacingToken",DELETE_SPACING_TOKEN:"DeleteStyleguideSpacingToken",UPDATE_REM_PREFERENCES:"UpdateStyleguideRemPreferences",CREATE_COMPONENT_SECTION:"CreateStyleguideComponentSection",UPDATE_COMPONENT_SECTION:"UpdateStyleguideComponentSection",UPDATE_COMPONENT_SECTIONS_ORDER:"UpdateStyleguideComponentSectionsOrder",MERGE_COMPONENT_SECTIONS:"MergeStyleguideComponentSections",DELETE_COMPONENT_SECTION:"DeleteStyleguideComponentSection",UPDATE_COMPONENT_SECTIONS_STYLEGUIDE:"UpdateStyleguideComponentSectionsStyleguide",CREATE_COMPONENT:"CreateStyleguideComponent",CREATE_COMPONENT_V2:"CreateStyleguideComponentV2",CREATE_COMPONENT_VERSION_V2:"CreateStyleguideComponentVersionV2",UPDATE_COMPONENT:"UpdateStyleguideComponent",UPDATE_COMPONENTS_ORDER:"UpdateStyleguideComponentsOrder",DELETE_COMPONENT:"DeleteStyleguideComponent",UPDATE_CONNECTED_COMPONENTS:"UpdateStyleguideConnectedComponents",DELETE_CONNECTED_COMPONENTS:"DeleteStyleguideConnectedComponents",CREATE_CONNECTED_COMPONENT_ITEM:"CreateStyleguideConnectedComponentItem",DELETE_CONNECTED_COMPONENT_ITEM:"DeleteStyleguideConnectedComponentItem",CONVERT_COMPONENT_SECTION_TO_VARIANT_SECTION:"ConvertStyleguideComponentSectionToVariantSection",CONVERT_VARIANT_SECTION_TO_COMPONENT_SECTION:"ConvertStyleguideVariantSectionToComponentSection",CREATE_COMPONENT_SECTION_VARIANT_PROPERTY:"CreateStyleguideComponentSectionVariantProperty",UPDATE_COMPONENT_SECTION_VARIANT_PROPERTY:"UpdateStyleguideComponentSectionVariantProperty",DELETE_COMPONENT_SECTION_VARIANT_PROPERTY:"DeleteStyleguideComponentSectionVariantProperty",UPDATE_COMPONENTS_VARIANT_PROPERTIES:"UpdateStyleguideComponentsVariantProperties",CREATE_COMPONENT_SECTION_VARIANT_GROUPS:"CreateStyleguideComponentSectionVariantGroups",UPDATE_COMPONENT_SECTION_VARIANT_PROPERTIES_ORDER:"UpdateStyleguideComponentSectionVariantPropertiesOrder",UPDATE_WORKFLOW_STATUS:"UpdateStyleguideWorkflowStatus",DELETE_WORKFLOW_STATUS:"DeleteStyleguideWorkflowStatus"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerWorkspaceSocketBindings:()=>N});var n=a(1048),i=a(1075),s=a(1213),r=a(1207),o=a(1246),d=a(1204),l=a(1205),c=a(1248),u=a(794),p=a(264),f=a(739),S=a(738),h=a(325),E=a(326),g=a(1055),O=a(123),T=a(76),m=a(120),_=a(1074);a(1206),a(1245);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i.default&&(i.default.bind_global(((e,{params:{oid:t}={}})=>{t&&(S.default.getOrganization(t)||(0,_.unsubscribeFromOrganizationChannel)(t))})),i.default.bind(c.default.PAYMENT_FAIL,(e=>{const{organizationProfiles:t}=p.default.OrganizationStore.getState(),a={isGeneric:!0};e.params.oid?a.currentRole=t[e.params.oid].role:e.params.uid===Zeplin.user._id?a.currentRole="owner":(a.currentRole="not_owner",a.ownerEmail=e.body.email),Object.assign(a,e.params),(0,n.showFailedPaymentBanner)(a)})),i.default.bind(l.default.CREATE_PROJECT,(({params:{oid:e="user",oseid:t,index:a},body:n})=>{const i=S.default.getOrganizationProfile(e);i&&i.restricted&&!n.users.some((e=>e.user._id===i.user._id))||g.default.add({barrelType:O.default.PROJECT,barrel:n,oid:e,oseid:t,index:a})})),i.default.bind(l.default.CREATE_STYLEGUIDE,(({params:{oid:e="user",index:t},body:a})=>{const n=S.default.getOrganizationProfile(e);n&&n.restricted&&!a.users.some((e=>e.user._id===n.user._id))||g.default.add({barrelType:O.default.STYLEGUIDE,barrel:a,oid:e,index:t})})),i.default.bind(l.default.UPDATE_MEMBER_ROLE,(({params:{oid:e,mid:t},body:{role:a}})=>{f.default.updateOrganizationMemberRole({oid:e,mid:t,uid:Zeplin.user._id,role:a});const{organizationProjects:{[e]:n}}=p.default.OrganizationStore.getState(),{organizationStyleguides:{[e]:i}}=p.default.OrganizationStore.getState();n&&n.forEach((e=>{g.default.updateUserRole({bid:e,uid:t,role:a})})),i&&i.forEach((e=>{g.default.updateUserRole({bid:e,uid:t,role:a})}))})),i.default.bind(l.default.REMOVE_USER,(e=>{const{selectedOrganizationId:t}=p.default.SpaceStore.getState(),a=e.params.oid;e.params.mid===Zeplin.user._id&&((0,_.unsubscribeFromOrganizationChannel)(a),t===a&&(T.create({title:"Organization not available anymore",message:"It was either deleted or you were removed, please contact the admins."}),u.default.changeSelectedOrganization("user")),f.default.removeOrganization(a))})),i.default.bind(l.default.UPDATE_MEMBER_ACCESSIBILITY,(({params:{oid:e,mid:t},body:{restricted:a}})=>{t===Zeplin.user._id&&(a?f.default.removeUnjoinedBarrels({oid:e,mid:t}):f.default.getBarrels(e))})),i.default.bind(l.default.DELETE,(e=>{const t=e.params.oid;(0,_.unsubscribeFromOrganizationChannel)(t),f.default.removeOrganization(t),u.default.changeSelectedOrganization("user")})),i.default.bind(l.default.UPDATE_LOGO,(e=>{const{organizations:t}=p.default.OrganizationStore.getState(),a=e.params.oid;t.filter((e=>e._id===a))?f.default.updateOrganization(a,e.body):(0,_.unsubscribeFromOrganizationChannel)(a)})),i.default.bind(l.default.UPDATE_STATUS,(({body:e,params:{oid:t}})=>{const{organizations:a}=p.default.OrganizationStore.getState();a.filter((e=>e._id===t))?f.default.updateOrganization(t,e):(0,_.unsubscribeFromOrganizationChannel)(t)})),i.default.bind(l.default.UPDATE_NAME,(e=>{const{organizations:t}=p.default.OrganizationStore.getState(),a=e.params.oid;t.filter((e=>e._id===a))?f.default.updateOrganization(a,e.body):(0,_.unsubscribeFromOrganizationChannel)(a)})),i.default.bind(l.default.ADD_PROJECT_TO_ORGANIZATION_MEMBER_FOCUS,(e=>{const{organizations:t}=p.default.OrganizationStore.getState(),{uid:a,oid:n,pid:i}=e.params;t.filter((e=>e._id===n))?f.default.addBarrelToFocus({mid:a,oid:n,bid:i,barrelType:O.default.PROJECT}):(0,_.unsubscribeFromOrganizationChannel)(n)})),i.default.bind(l.default.REMOVE_PROJECT_FROM_ORGANIZATION_MEMBER_FOCUS,(e=>{const{organizations:t}=p.default.OrganizationStore.getState(),{oid:a,pid:n}=e.params;t.filter((e=>e._id===a))?f.default.removeBarrelFromFocus({oid:a,bid:n}):(0,_.unsubscribeFromOrganizationChannel)(a)})),i.default.bind(l.default.UPDATE_MEMBER_TAGS,(e=>{const{organizations:t}=p.default.OrganizationStore.getState(),{params:{oid:a},body:{members:n}}=e;t.filter((e=>e._id===a))?n.forEach((({_id:e,operation:t,tags:n})=>{f.default.updateMemberTags({oid:a,mid:e,operation:t,tags:n})})):(0,_.unsubscribeFromOrganizationChannel)(a)})),i.default.bind(l.default.ADD_WORKFLOW_STATUS,(({params:{oid:e},body:t})=>{f.default.addOrganizationWorkflowStatus({oid:e,workflowStatusData:t})})),i.default.bind(l.default.UPDATE_WORKFLOW_STATUS,(({params:{oid:e,wsid:t},body:a})=>{f.default.updateOrganizationWorkflowStatus({oid:e,workflowStatusId:t,workflowStatusData:a})})),i.default.bind(l.default.DELETE_WORKFLOW_STATUS,(({params:{oid:e,wsid:t}})=>{f.default.deleteOrganizationWorkflowStatus({oid:e,workflowStatusId:t})})),i.default.bind(l.default.ADD_SECTION,(({params:{oid:e},body:{_id:t,index:a}})=>{const{sections:n}=S.default.getOrganization(e);n.some((e=>e._id===t))||m.getOrganizationSection(e,t).then((({section:t})=>{f.default.addProjectSection({oid:e,index:a,sectionData:t})})).catch((()=>{f.default.addProjectSectionId({oid:e,index:a,oseid:t})}))})),i.default.bind(l.default.UPDATE_SECTION,(({params:{oid:e,oseid:t},body:a})=>{const{sections:n}=S.default.getOrganization(e);n.some((e=>e._id===t))&&f.default.updateProjectSection({oid:e,oseid:t,sectionData:a})})),i.default.bind(l.default.DELETE_SECTION,(({params:{oid:e,oseid:t}})=>{f.default.removeProjectSection({oid:e,oseid:t})})),i.default.bind(l.default.UPDATE_SECTION_ORDER,(({params:{oid:e},body:{index:t,sections:a}})=>{f.default.updateProjectSectionOrder({oid:e,oseid:a[0],index:t})})),i.default.bind(l.default.UPDATE_SECTION_PROJECT,(({params:{oid:e,oseid:t},body:{index:a,projects:n}})=>{const{sections:i}=S.default.getOrganization(e);i.some((e=>e._id===t))?f.default.updateProjectOrder({oid:e,oseid:t,index:a,projects:n}):m.getOrganizationSection(e,t).then((({section:t})=>{f.default.addProjectSection({oid:e,index:a,sectionData:t})}))})),i.default.bind(l.default.ADD_SECTION_LINK,(({params:{oid:e,oseid:t},body:a})=>{f.default.addSectionLink({oid:e,oseid:t,linkData:a})})),i.default.bind(l.default.UPDATE_SECTION_LINK,(({params:{oid:e,oseid:t,oselid:a},body:n})=>{f.default.updateSectionLink({oid:e,oseid:t,oselid:a,linkData:C({_id:a},n)})})),i.default.bind(l.default.DELETE_SECTION_LINK,(({params:{oid:e,oseid:t,oselid:a}})=>{f.default.removeSectionLink({oid:e,oseid:t,oselid:a})})),i.default.bind(l.default.UPDATE_MIN_ROLE_FOR_MEMBER_MANAGEMENT,(({params:{oid:e},body:{minRoleForMemberManagement:t}})=>{f.default.updateOrganization(e,{minRoleForMemberManagement:t})})));const y={onProjectInviteUser(e){(0,s.handleInviteUserSocketForInvitePopup)(e.params.pid,e.body)},onInviteUser(e){(0,s.handleInvitedSocketForInvitePopup)(e.body.users)},onRemoveUserFromProject(e){(0,s.removeUser)(e.params.pid,e.params.mid)},onCreateUser(e){(0,s.handleCreateUserSocketForInvitePopup)(e.body)},onDeleteUser(e){Zeplin.user._id!==e.params.uid&&(0,s.handleDeleteUserSocketForInvitePopup)(e.params.uid)}};const I={onStyleguideInviteUser(e){(0,s.handleInviteUserSocketForInvitePopup)(e.params.stid,e.body)},onInviteUser(e){(0,s.handleInvitedSocketForInvitePopup)(e.body.users)},onRemoveUserFromStyleguide(e){(0,s.removeUser)(e.params.stid,e.params.mid)},onCreateUser(e){(0,s.handleCreateUserSocketForInvitePopup)(e.body)},onDeleteUser(e){Zeplin.user._id!==e.params.uid&&(0,s.handleDeleteUserSocketForInvitePopup)(e.params.uid)}};function N(){p.default.dispatcher.register((e=>{switch(e.type){case h.default.INVITE_USER:!function(e){const t=(0,_.subscribeToProjectChannel)(e);i.userChannel.bind(d.default.INVITE_USER,y.onInviteUser),t.bind(r.default.INVITE_USER,y.onProjectInviteUser),t.bind(r.default.REMOVE_USER,y.onRemoveUserFromProject),t.bind(d.default.CREATE,y.onCreateUser),t.bind(d.default.DELETE,y.onDeleteUser)}(e.pid);break;case E.default.INVITE_USER:!function(e){const t=(0,_.subscribeToStyleguideChannel)(e);i.userChannel.bind(d.default.INVITE_USER,I.onInviteUser),t.bind(o.default.INVITE_USER,I.onStyleguideInviteUser),t.bind(o.default.REMOVE_USER,I.onRemoveUserFromStyleguide),t.bind(d.default.CREATE,I.onCreateUser),t.bind(d.default.DELETE,I.onDeleteUser)}(e.stid)}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});const n={PAYMENT_FAIL:"RequestPaymentFail"}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerSSOTokenExpiration:()=>f});var n=a(9),i=a(262),s=a(263),r=a(264),o=a(5),d=a(120),l=a(104),c=a(79),u=a(76);function p(){if(o.isWindowsApp&&o.supports.newSSOFlow)return void location.assign((0,l.urlResolve)("login-sso",{query:{email:Zeplin.user.email}}));if(o.isWindowsApp&&!o.supports.newSSOFlow)return void u.create({title:"Login with SSO isn't supported in this version anymore",message:"Please log out and update your application to login with SSO.",done:{name:"GOT IT"}});const e=encodeURIComponent(Zeplin.user.email);d.getSsoLoginParams(e).then((e=>{const{provider:{type:t},params:{type:a,url:i,message:s}}=e;n.default.set("redirect",location.href),"google"!==t?"redirect"===a?function(e,t){const a=new URL(e);a.search=(0,l.joinUrlParams)(t),window.location.assign(a.toString())}(i,s):"post"===a&&function(e,t){const a=document.createElement("form");a.method="POST",a.action=e,Object.keys(t).forEach((e=>{const n=document.createElement("input");n.type="hidden",n.name=e,n.value=t[e],a.appendChild(n)})),document.body.appendChild(a),a.submit()}(i,s):function(){const e={action:"login"};o.isWindowsApp&&(e.redirectPath=encodeURIComponent(location.pathname));const t=(0,l.urlResolve)("authGoogle",{query:e});location.assign(t)}()})).catch((e=>{(0,c.handleError)(e,{dialogCallback(){n.default.remove("userToken"),location.assign((0,l.urlResolve)("login",{query:{email:Zeplin.user.email}}))}})}))}function f(){r.default.dispatcher.register((e=>{e.type===s.default.LOGIN_SSO&&p()}))}Zeplin.onSSOTokenExpired=e=>i.default.ssoTokenExpired(e)},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerInvitePopupHandlers:()=>c});var n=a(264),i=a(123),s=a(325),r=a(326),o=a(1055),d=a(1213);function l({container:e,bid:t,barrelType:a,users:n,oid:i}){d.show({popupContainer:e,bid:t,bt:a,members:n,oid:i,onInvite(e){o.default.addMembers({bid:t,barrelType:a,members:e})}})}function c(){n.default.dispatcher.register((e=>{switch(e.type){case s.default.INVITE_USER:l(Object.assign(Object.assign({},e),{bid:e.pid,barrelType:i.default.PROJECT}));break;case r.default.INVITE_USER:l(Object.assign(Object.assign({},e),{bid:e.stid,barrelType:i.default.STYLEGUIDE}))}}))}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{registerSentryToDispatcherAndStores:()=>l});var n=a(44),i=a(53),s=a(264),r=a(536),o=a.n(r),d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};function l(){s.default.dispatcher.register((e=>{n.addBreadcrumb({category:"dispatch.action",message:e.type,level:i.Severity.Debug})})),function(){const e=new(o());e.setStores([s.default.AppStore,s.default.SpaceStore,s.default.BarrelStore,s.default.DashboardStore,s.default.ScreenStore,s.default.DotsStore,s.default.ComponentVariantStore,s.default.StyleguideStore,s.default.ActivitiesViewStore,s.default.AnnotationsStore,s.default.GlobalSearchStore]),e.addListener((()=>{var e,t,a,i,r;const{page:o}=s.default.AppStore.getState();if(!o)return;const l=s.default.SpaceStore.getState(),c=s.default.BarrelStore.getState(),u=s.default.DashboardStore.getState(),p=s.default.ScreenStore.getState(),f=s.default.DotsStore.getState(),{savedNotes:S}=f,h=d(f,["savedNotes"]),E=s.default.ComponentVariantStore.getState(),g=s.default.StyleguideStore.getState(),O=s.default.ActivitiesViewStore.getState(),T=s.default.AnnotationsStore.getState(),{savedAnnotations:m}=T,_=d(T,["savedAnnotations"]),b=s.default.GlobalSearchStore.getState(),{lastResultEntity:C}=b,A=d(b,["lastResultEntity"]);try{n.setContext("stores",{app:{page:o},space:JSON.stringify(l,null,2),barrel:JSON.stringify(c,null,2),dashboard:JSON.stringify(u,null,2),screen:JSON.stringify(Object.assign(Object.assign({},p),{selectedLayer:null===(e=p.selectedLayer)||void 0===e?void 0:e._id,destinationLayer:null===(t=p.destinationLayer)||void 0===t?void 0:t._id}),null,2),dots:JSON.stringify(h,null,2),componentVariant:JSON.stringify(Object.assign(Object.assign({},E),{selectedLayer:null===(a=E.selectedLayer)||void 0===a?void 0:a._id,destinationLayer:null===(i=E.destinationLayer)||void 0===i?void 0:i._id}),null,2),styleguide:JSON.stringify(Object.assign(Object.assign({},g),{selection:null===(r=g.selection)||void 0===r?void 0:r._id,moveResourcesPopup:null}),null,2),activities:JSON.stringify(O,null,2),annotations:JSON.stringify(_,null,2),globalSearch:JSON.stringify(A,null,2)})}catch(y){}}))}()}},(e,t,a)=>{"use strict";a.r(t);var n=a(1048),i=a(76),s=a(185),r=a(79),o=a(13),d=a(5),l=a(336),c=a(123),u=a(434),p=a(815),f=a(1083),S=a(1049),h=a(739),E=a(738),g=a(264),O=a(120),T=a(1055),m=a(737),_=a(262),b=a(1060),C=a(1062),A=a(1063),y=a(1064),I=a(1065),N=a(1071),P=a(1073),D=a(1074),R=a(402),v=a(397),L=a(1072),j=a(7),U=a(736),w=a(295),k=a(124),M=a(80);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){G(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B=document.getElementById("androidResFolderReminderDialog");function x(e){const{projectName:t,projectFolderType:a,projectFolder:n,projectFolderPathParts:i}=e;T.default.setAssetExportTarget({name:t,type:a,path:n,pathParts:i})}i.polyfill.registerDialog(B);const W={getOrganizations(){const{organizations:e}=g.default.OrganizationStore.getState();return e.length?Promise.resolve(e):O.getOrganizations()},getOrganization(e,t){if(!s.isOrganizationProject(e))return Promise.resolve(null);const a=m.default.findBarrelOrganizationId(e._id);let n=E.default.getOrganization(a);return n||(n=(0,N.fetchEmbeddedData)("organization")),n?Promise.resolve(n):O[t].getOrganization(e._id)},getOrganizationMembersWithoutDetailsIfNeeded(e){const t=E.default.getOrganization(e);if(!t||!t.members)return O.getOrganizationMembersWithoutDetails(e)},getOrganizationMemberProfile(e,t){const a=E.default.getOrganizationProfile(e);return a||O.getOrganizationMemberProfile(e,t)},getOrganizationProfiles(e,t){if(!e.length)return Promise.resolve({});const a=e.map((e=>W.getOrganizationMemberProfile(e,t)));return Promise.all(a).then((t=>Object.fromEntries((0,L.default)(e,t)))).catch(r.handleError)},getStyleguide(e,{styleguideId:t}){const a=m.default.getBarrel({bid:e});return a&&a.dataStage===k.default.Complete?a:O.getStyleguide(e,{styleguideId:t})},getAncestors(e,t){return Promise.all(t.map((t=>this.getStyleguide(t,{styleguideId:e}))))},getAncestorsConnectedComponents:(e,t)=>Promise.all(t.map((t=>O.getStyleguideConnectedComponents(t,{styleguideId:e})))),getAncestorsLocalConnectedComponents:e=>Promise.all(e.map((e=>O.getStyleguideLocalConnectedComponents(e)))),getStyleguideConnectedComponents(e,t){const a=O.getStyleguideConnectedComponents(e),n=this.getAncestorsConnectedComponents(e,t),i="true"===sessionStorage.getItem("connectedComponentsDevModeEnabled");return[a,n,i?O.getStyleguideLocalConnectedComponents(e):Promise.resolve({localConnectedComponents:null}),i?this.getAncestorsLocalConnectedComponents(t):Promise.resolve([])]},getLinkedStyleguidesConnectedComponents(e,t,{local:a}){if(!t)return Promise.resolve([]);const{status:n,styleguide:i}=t;if("active"!==n)return Promise.resolve([]);const s=a?O.getStyleguideLocalConnectedComponents:O.getStyleguideConnectedComponents;return Promise.all([i._id,...i.ancestors].map((t=>s(t,{projectId:e}))))},getProjectConnectedComponents(e,t){const a=O.getProjectConnectedComponents(e),n=this.getLinkedStyleguidesConnectedComponents(e,t,{local:!1}),i="true"===sessionStorage.getItem("connectedComponentsDevModeEnabled");return[a,n,i?O.getStyleguideLocalConnectedComponents(e):Promise.resolve({localConnectedComponents:null}),i?this.getLinkedStyleguidesConnectedComponents(e,t,{local:!0}):Promise.resolve([])]},getProjects(e,t){if(t===c.default.STYLEGUIDE){const t=E.default.getOrganizationProjects(e);return t||O.getProjects("user"===e?null:e).catch(r.handleError)}return Promise.resolve()},getStyleguides(e,t){if(t===c.default.STYLEGUIDE){const t=E.default.getOrganizationStyleguides(e);return t||O.getStyleguides("user"===e?null:e).catch(r.handleError)}return Promise.resolve()},getBarrel(e,t){const a=m.default.getBarrel({bid:e});return a&&a.dataStage===k.default.Complete?Promise.resolve(a):O[t].get(e)},getBarrelExtras(e,t){const a=e._id,n=t===c.default.PROJECT?O.getProjectComponentSections(a):Promise.resolve({}),i=t===c.default.STYLEGUIDE?O.getStyleguideProjects(a):Promise.resolve({});return Promise.all([i,n]).then((([e,...t])=>Object.assign({linkedProjects:e.projects},...t)))}},z={async collectData(e,t){try{const a=await W.getBarrel(e,t),{userId:n}=g.default.UserStore.getState(),i=a.users.find((({user:e})=>e._id===n)),[s,r]=await Promise.all([W.getOrganization(a,t),W.getOrganizations()]),o=s?s._id:"user";if("archived"===a.status)throw new M.default(412,"Styleguide is archived","It was probably archived, please contact the owner.");if(!i)return{organization:s,organizations:r,organizationId:o,ancestors:[],barrel:a};const d=await W.getBarrelExtras(a,t),{role:c}=i,u=new l.default(F(F({},a),d)),[p,f,S,h,{items:E,metadata:O},T,{localConnectedComponents:m},_]=await Promise.all([W.getAncestors(e,u.ancestors),W.getOrganizationProfiles(r.map((e=>e._id)),n),W.getProjects(o,t,c),W.getStyleguides(o,t,c),...W.getStyleguideConnectedComponents(e,u.ancestors)]);return u.connectedComponents=E,u.localConnectedComponents=m,T.forEach(((e,t)=>{p[t].connectedComponents=e.items})),_.forEach(((e,t)=>{p[t].localConnectedComponents=e.localConnectedComponents})),{barrel:u,role:c,ancestors:p.map((e=>new l.default(F({},e)))),organizationId:o,organization:s,organizations:r,organizationProfiles:f,organizationProjects:S,organizationStyleguides:h,connectedComponentsMetadata:O}}catch(a){!function(e){r.handleError(e,{clientErrorHandler:()=>{i.create({title:e.title,message:e.message}),m.default.navigateToWorkspace({barrelType:c.default.STYLEGUIDE})}})}(a)}}};function H({styleguidesData:e,selectedStyleguideSection:t,selectedNavigatorId:a,collapsedSections:n}){if("components"!==t||!a)return n;const i=n,s=(0,v.getComponentSectionById)(e,a);if(s){const{idPath:e}=s;e.forEach((e=>{i[e]=!1}))}return i}function Y(e,t){const{component:a}=e&&(0,v.findComponentById)(t,e)||{};return a}function q(e,t){e&&e.idPath&&e.idPath.slice(0,-1).forEach((e=>{t[e]=!1}))}u.default.route(/\/(styleguide)\/([\da-f]{24})(?:\/(about|colors|textstyles|spacing|components|storybook))?/i,(function(e){const[t,a,i]=e.match;_.default.setPage("barrel");const s=function(e,t){return t?"textstyles"===t?"textStyles":t:e===c.default.PROJECT?"colors":"about"}(t,i),{cid:r=[],tsid:l=[],sptid:u=[],coid:[E]=[],cseid:[O]=[],seid:[N]=[O],storyPath:[v]=[]}=e.query,{barrelId:L,barrelType:k}=g.default.BarrelStore.getState(),M=m.default.getStyleguidesData({barrelStore:g.default.BarrelStore,styleguidesDataStore:g.default.StyleguidesDataStore}),V=Y(E,M),G=m.default.getBarrel(),{userId:B}=g.default.UserStore.getState();if(a===L&&(0,w.default)(G,B)){const{collapsedSections:e}=g.default.StyleguideStore.getState(),t=H({styleguidesData:M,selectedStyleguideSection:s,selectedNavigatorId:N,collapsedSections:e});return q(V,t),b.default.updateState({selectedStyleguideSection:s,highlightedColors:r,highlightedTextStyles:l,highlightedSpacingTokens:u,selectionComponentId:E,selection:V,selectedNavigatorId:N,collapsedSections:t,scrolledSection:N,highlightScrolledSection:!!N}),void(i===j.ProjectViewTypes.STORYBOOK?(I.default.updateSelectedStoryPath(v),T.default.changeSelectedView(j.ProjectViewTypes.STORYBOOK)):T.default.changeSelectedView(j.ProjectViewTypes.DASHBOARD))}L&&(k===c.default.PROJECT?(0,D.unsubscribeFromProjectChannel)(L):k===c.default.STYLEGUIDE&&(0,D.unsubscribeFromStyleguideChannel)(L)),T.default.reset();const K=z.collectData(a,t),J=o.barrelPrefs.getAll(a).then((({assetDensityScalePrefs:e,assetNamingConvention:t,collapsedSections:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,connectedComponentsLocalWorkspace:r,extensions:o,styleguideLeftSidebarWidth:d,styleguideRightSidebarWidth:l})=>({assetDensityScalePrefs:e,assetNamingConvention:t,collapsedSections:a,showOptimizedSVG:n,showOptimizedPNG:i,showOptimizedJPG:s,connectedComponentsLocalWorkspace:r,enabledExtensions:o,leftSidebarWidth:d,rightSidebarWidth:l}))),Z=o.userPrefs.getAll().then((e=>{const{noVectorAssetInfoHidden:t,densityMismatchWarningHidden:a,slackReconnectionAuntieSeen:n,componentVariantsOnboardingDialogSeen:i}=e;return{noVectorAssetInfoHidden:t,densityMismatchWarningHidden:a,showSlackReconnectionAuntie:!n,componentVariantsOnboardingDialogSeen:i}}));return Promise.all([K,J,Z]).then((([{barrel:e,role:o,organizationId:g,organization:O,organizations:m,organizationProfiles:_,organizationProjects:b,organizationStyleguides:v,ancestors:L,connectedComponentsMetadata:k},{assetDensityScalePrefs:M,assetNamingConvention:G,collapsedSections:z,enabledExtensions:K,showOptimizedSVG:J,showOptimizedPNG:Z,showOptimizedJPG:X,leftSidebarWidth:$,rightSidebarWidth:Q,connectedComponentsLocalWorkspace:ee},{noVectorAssetInfoHidden:te,densityMismatchWarningHidden:ae,showSlackReconnectionAuntie:ne,componentVariantsOnboardingDialogSeen:ie}])=>{const se=H({styleguidesData:[e].concat(L),selectedStyleguideSection:s,selectedNavigatorId:N,collapsedSections:z});q(Y(E,[e].concat(L)),se),function(e){e&&e.storybook&&e.storybook.url&&I.default.updateUrl(e.storybook.url)}(k);let re={[t]:e,organization:O,organizations:m,ancestors:L,organizationProfiles:_,organizationStyleguides:v};"user"===g&&(re=F(F({},re),{},{organizationProjects:b})),T.default.load({barrel:{selectedView:i===j.ProjectViewTypes.STORYBOOK?j.ProjectViewTypes.STORYBOOK:j.ProjectViewTypes.DASHBOARD,barrelType:t,barrelId:a,assetDensityScalePrefs:(0,R.initAssetDensityScalePrefsIfNecessary)(e.type,M),assetNamingConvention:"android"===e.type?"snakeCase":G,showOptimizedSVG:J,showOptimizedPNG:Z,showOptimizedJPG:X,organizationId:g,noVectorAssetInfoHidden:te,densityMismatchWarningHidden:ae,showSlackReconnectionAuntie:ne,connectedComponentsDevModeEnabled:"true"===sessionStorage.getItem("connectedComponentsDevModeEnabled"),connectedComponentsLocalWorkspace:ee},styleguide:{selectedStyleguideSection:s,highlightedColors:r,highlightedTextStyles:l,highlightedSpacingTokens:u,selectionComponentId:E,selection:V,selectedNavigatorId:N,collapsedSections:se,scrolledSection:N,highlightScrolledSection:!!N,leftSidebarWidth:$,rightSidebarWidth:Q,componentVariantsOnboardingDialogSeen:ie},data:F({},re),user:{userId:B}});const oe=(0,w.default)(e,B);if(requestIdleCallback((()=>(0,P.loadSuggestedResourcesIfNeeded)(a,t))),oe&&(requestIdleCallback((async()=>{if(!O)return;const e=await W.getOrganizationMembersWithoutDetailsIfNeeded(g),t=e?e.members:O.members,a=(0,f.getPopulatedOrganizationProjectsWithMembers)(t,b);C.default.getProjectsSuccess({projects:a,oid:g}),_&&!O.members&&h.default.getOrganizationMembersSuccess(e)})),S.default.init({enabledExtensions:K}),L.forEach((e=>(0,D.subscribeToStyleguideChannel)(e._id))),e.linkedProjects.forEach((e=>(0,D.subscribeToProjectChannel)(e._id)))),(0,D.subscribeToOrganizationChannel)(g),t===c.default.PROJECT?(0,D.subscribeToProjectChannel)(a):t===c.default.STYLEGUIDE&&(0,D.subscribeToStyleguideChannel)(a),d.isWindowsApp&&(T.default.getConnectedComponentsEditorInfo(),p.queryAssetDownloadTarget(a,t,x)),O)"frozen"===O.status?n.showOrganizationFrozenBanner({oid:O._id,currentRole:o,isTeamPlan:(0,U.hasTeamPlan)(O.paymentPlan)}):"past_due"===O.subscriptionStatus?n.showFailedPaymentBanner({oid:O._id,currentRole:o}):"will_cancel_at_period_end"===O.subscriptionStatus?n.showCancelledSubscriptionBannerIfNecessary({oid:O._id,currentRole:o,subscriptionCancelAt:O.subscriptionCancelAt}):n.hideSubscriptionStatusBanners();else{const t=e.findOwner();"past_due"===t.user.subscriptionStatus?n.showFailedPaymentBanner({currentRole:o,ownerEmail:t.user.email}):"will_cancel_at_period_end"===t.user.subscriptionStatus?n.showCancelledSubscriptionBannerIfNecessary({currentRole:o,subscriptionCancelAt:t.user.subscriptionCancelAt}):n.hideSubscriptionStatusBanners()}A.default.init(),y.default.getTeamsIntegration(t,a)}))}))},(e,t,a)=>{"use strict";a.r(t);var n=a(434),i=a(262),s=a(1087),r=a(1254),o=a(13),d=a(264),l=a(280),c=a(123),u=a(359),p=a(337),f=a(1083),S=a(737),h=a(738),E=a(1082),g=a(1089),O=a(1088),T=a(1137),m=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{d(n.next(e))}catch(t){s(t)}}function o(e){try{d(n.throw(e))}catch(t){s(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}d((n=n.apply(e,t||[])).next())}))};function _(e){const t=Zeplin.user._id,a=[(0,E.getOrganizations)(),(0,E.getOrganization)(e),(0,E.getOrganizationSections)(e),(0,E.getProjects)(e),(0,E.getStyleguides)(e),(0,E.getFocusedBarrels)(e,t),(0,E.getOrganizationMembersWithoutDetailsIfNeeded)(e),(0,E.getOrganizationProfile)(e,t)];return Promise.all(a).then((([t,a,{sections:n},i,s,r,o,d])=>{let l=i;return(null==o?void 0:o.members)&&(l=(0,f.getPopulatedOrganizationProjectsWithMembers)(o.members,i)),{oid:e,organization:Object.assign(Object.assign({},a),{sections:n}),focusedBarrels:r,dialogDismissParams:null,projects:l,styleguides:s,organizationProfiles:{[e]:d},organizations:t}}))}n.default.route(/^\/notifications(?:\/)?([\da-f]{24})?$/i,(function(e){var t,a,n,f,b,C,A;return m(this,void 0,void 0,(function*(){const{page:m}=d.default.AppStore.getState(),{initialized:y}=d.default.ActivitiesViewStore.getState();if("activities"===m&&y)return;i.default.setPage("activities");const{match:[I="user"],query:{category:[N]=[],pid:[P]=[],stid:[D]=[],updatedOnly:[R]=[],status:[v]=[],color:[L]=[],member:[j]=[],section:[U]=[]}}=e,w=yield(k=I,("user"===k?E.fetchPersonalWorkspaceData:_)(k));var k;i.default.loadWorkspaceData(Object.assign({organizationProfiles:void 0},w));const{activitiesSidebarWidth:M,activitiesShowProjectsWithUpdatesOnly:V}=yield o.userPrefs.getAll(),F={selectedOrganizationId:I,sidebarWidth:M,projectsWithUpdatesOnly:"false"!==R&&V};"true"===R?(F.projectsWithUpdatesOnly=!0,s.default.setProjectsWithUpdatesOnly(!0)):"false"===R?(F.projectsWithUpdatesOnly=!1,s.default.setProjectsWithUpdatesOnly(!1)):F.projectsWithUpdatesOnly=V,N&&Object.values(l.default).includes(N)&&(F.category=N);const G=N===l.default.Note;P&&S.default.hasProject(P)?(F.barrelSelection={type:c.default.PROJECT,id:P},G&&U&&((null===(t=S.default.getProject({pid:P}))||void 0===t?void 0:t.sections)||(yield(0,T.fetchProject)(P)),(null===(n=null===(a=S.default.getProject({pid:P}))||void 0===a?void 0:a.sections)||void 0===n?void 0:n.some((({_id:e})=>e===U)))&&(F.sectionId=U))):D&&S.default.hasStyleguide(D)&&(F.barrelSelection={type:c.default.STYLEGUIDE,id:D});const B=(null===(f=F.barrelSelection)||void 0===f?void 0:f.type)!==c.default.STYLEGUIDE&&G;if(B&&v&&Object.values(u.default).includes(v)&&(F.noteStatusFilter=v),B&&L&&p.colorNames.includes(L)&&(F.color=L),B&&j){let e=null;const{barrelSelection:t}=d.default.ActivitiesViewStore.getState();let a;(null===(b=F.barrelSelection)||void 0===b?void 0:b.type)===c.default.PROJECT?e=F.barrelSelection.id:t.type===c.default.PROJECT&&(e=t.id),e?a=null===(C=S.default.getProject({pid:e}))||void 0===C?void 0:C.users.map((({user:e})=>e)):"user"===I||h.default.getOrganizationProfile(I).restricted?(d.default.UserStore.getState().acquaintances||(yield(0,g.fetchAcquaintances)()),a=r.default.getUserAndAcquaintances()):(h.default.getOrganizationMembers(I)||(yield(0,O.fetchOrganizationMembers)(I)),a=null===(A=h.default.getOrganizationMembers(I))||void 0===A?void 0:A.map((({user:e})=>e))),(null==a?void 0:a.some((({_id:e})=>e===j)))&&(F.memberId=j)}s.default.load(F)}))}))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(264);const i={getUserAndAcquaintances:function(){const{acquaintances:e,userId:t,email:a,username:i,fullName:s,avatar:r,emotar:o}=n.default.UserStore.getState();return t&&e?[{_id:t,email:a,username:i,fullName:s,avatar:r,emotar:o},...e]:[]}}},(e,t,a)=>{"use strict";a.r(t);var n=a(5),i=a(1256);n.isWindowsApp&&i.setupEventListener()},(e,t,a)=>{"use strict";a.r(t),a.d(t,{setupEventListener:()=>S});var n=a(6),i=a(264),s=a(738),r=a(1062),o=a(1081),d=a(1083),l=a(120);function c(e){return(0,l.getProjects)("user"===e?null:e)}function u(e){return(0,l.getStyleguides)("user"===e?null:e)}function p(e){return"user"===e?null:l.getOrganizationMembersWithoutDetails}async function f(e,t){const{organizations:a,organizationProfiles:l}=i.default.OrganizationStore.getState(),{userId:f,username:S,email:h,avatar:E,emotar:g}=i.default.UserStore.getState();if(!a||!f)return void n.default.ipcRenderer.send("initialImportToBarrelData",{selectedOrganization:t});let O="user";t&&"user"!==t&&a.some((e=>e._id===t))&&(O=t);let T=s.default.getOrganizationProjects(O),m=s.default.getOrganizationStyleguides(O);T&&m||({projects:T,styleguides:m}=await function(e){return Promise.all([c(e),u(e),p(e)]).then((([t,a,n])=>{if(n){const a=(0,d.getPopulatedOrganizationProjectsWithMembers)(n.members,t);r.default.getProjectsSuccess({projects:a,oid:e})}else r.default.getProjectsSuccess({projects:t,oid:e});return o.default.getStyleguidesSuccess({styleguides:a,oid:e}),{projects:t,styleguides:a}}))}(O));const _={organizations:a,organizationProfiles:l,selectedOrganization:O,user:{_id:f,username:S,email:h,avatar:E,emotar:g},organizationProjects:T,organizationStyleguides:m};n.default.ipcRenderer.send("initialImportToBarrelData",_)}function S(){n.default.ipcRenderer.removeAllListeners("initialImportToBarrelData"),n.default.ipcRenderer.on("initialImportToBarrelData",f)}},(e,t,a)=>{"use strict";a.r(t);var n=a(6),i=a(434),s=a(104),r=a(13),o=a(76),d=a(11),l=a(5);function c(e){const t=new URL(e);let a=e;const n=t.searchParams.get("vid");if(n){t.pathname.match(/\/project\/([0-9a-z]{24})\/screen\/([0-9a-z]{24})/)&&(t.pathname+=`/version/${n}`,t.searchParams.delete("vid"),a=t.toString())}i.default.history.push(a)}l.isWindowsApp&&(i.default.history.attach((function({url:e}){const t=new URL(e);t.search="",r.userPrefs.set("lastAppLocation",t.toString())})),n.default.ipcRenderer.on("load-url",((e,t)=>c(t))),n.default.ipcRenderer.on("load-app-uri",((e,t)=>{try{const e=new URL(t);if(l.isWindowsApp&&e.pathname.startsWith("//export-xd")&&!l.supports.xdPlugin)return void o.create({title:"Update Zeplin to export with XD plugin",message:"XD plugin requires the latest version of the Zeplin app, please try checking for an update.",done:{name:"UPDATE",cb(){location.assign(`${d.ZPL_PROTOCOL}//update`)}},cancel:{name:"CANCEL"}});const{urlSlug:a,url:n,query:i}=(0,s.parseAppURI)(e);c((0,s.urlResolve)(a,{url:n,query:i}))}catch(a){}})))},(e,t,a)=>{"use strict";a.r(t);var n=a(6),i=a(5),s=a(1259),r=a(1261),o=a(1262),d=a(86),l=a(87);a(1264);function c({showBadge:e,appUpdaterState:t,pluginUpdaterState:a,installUpdatesAutomatically:n},{withResetAppZoomFactor:i=!1}={}){return[(0,s.default)(),(0,r.default)(),(0,o.default)(e,i),(0,d.default)(),(0,l.default)({appUpdaterState:t,pluginUpdaterState:a,installUpdatesAutomatically:n})]}i.isWindowsApp&&(n.default.ipcRenderer.on("get-menu-template-v1",((e,{context:t})=>{n.default.ipcRenderer.send("menu-template-v1",{menuTemplate:c(t)})})),n.default.ipcRenderer.on("get-menu-template-v2",((e,{context:t})=>{n.default.ipcRenderer.send("menu-template-v2",{menuTemplate:c(t,{withResetAppZoomFactor:!0})})})))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(264),i=a(84),s=a(85),r=a(1260),o=a(123);const d=/^\/login/;function l(e){const{[`${e}s`]:t}=n.default.RecentlyLoadedBarrelsStore.getState(),a=e===o.default.PROJECT?s.default.OPEN_RECENT_PROJECT_SUBMENU:s.default.OPEN_RECENT_STYLEGUIDE_SUBMENU,i=e===o.default.PROJECT?s.default.OPEN_RECENT_PROJECT:s.default.OPEN_RECENT_STYLEGUIDE;return{label:"Open recent",id:a,enabled:t.length>0,submenu:t.map((({_id:e,name:t})=>({id:`${i}.${e}`,label:t})))}}function c(){const{selectedTab:e}=n.default.SpaceStore.getState(),{barrelId:t,barrelType:a}=n.default.BarrelStore.getState(),c=!t&&"projects"===e||t&&a===o.default.PROJECT,u=!t&&"styleguides"===e||t&&a===o.default.STYLEGUIDE;return d.test(location.pathname)?new i.default({id:s.default.PROJECT_SUBMENU,label:"Project",submenu:[{label:"New project",id:s.default.NEW_PROJECT,enabled:!1,accelerator:"CmdOrCtrl+N"},{label:"Open recent",id:s.default.OPEN_RECENT_PROJECT_SUBMENU,enabled:!1}]}):c?new i.default({id:s.default.PROJECT_SUBMENU,label:"Project",submenu:[{label:"New project",id:s.default.NEW_PROJECT,enabled:r.default.canCreateProject(),accelerator:"CmdOrCtrl+N"},l(o.default.PROJECT)]}):u?new i.default({id:s.default.STYLEGUIDE_SUBMENU,label:"Styleguide",submenu:[{label:"New styleguide",id:s.default.NEW_STYLEGUIDE,enabled:r.default.canCreateStyleguide(),accelerator:"CmdOrCtrl+N"},l(o.default.STYLEGUIDE)]}):new i.default({id:s.default.PROJECT_SUBMENU,label:"Project",enabled:!1})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(264),i=a(737),s=a(185),r=a(123);const o={[r.default.PROJECT]:s.permissions.canCreateProject,[r.default.STYLEGUIDE]:s.permissions.canCreateStyleguide};function d(e){const{barrelId:t}=n.default.BarrelStore.getState(),{selectedOrganizationId:a}=n.default.SpaceStore.getState(),{organizations:s,organizationProfiles:r}=n.default.OrganizationStore.getState(),d=t?i.default.findBarrelOrganizationId(t):a;if("user"===d)return!0;const l=s.find((e=>e._id===d)),c=r[d];return l&&"suspended"!==l.status&&c&&o[e](c)}const l={canCreateProject:function(){return d(r.default.PROJECT)},canCreateStyleguide:function(){return d(r.default.STYLEGUIDE)}}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var n=a(84),i=a(85),s=a(88),r=a(185),o=a(264),d=a(737),l=a(789),c=a(123);function u(e,t,a){return e?{id:t===c.default.PROJECT?i.default.DELETE_PROJECT:i.default.DELETE_STYLEGUIDE,label:t===c.default.PROJECT?"Delete project…":"Delete styleguide…",enabled:!!e&&r.permissions.canDeleteProject(a)}:{id:i.default.DELETE_PROJECT,label:"Delete project…",enabled:!1}}function p(e,t,a){return e?{id:t===c.default.PROJECT?i.default.LEAVE_PROJECT:i.default.LEAVE_STYLEGUIDE,label:t===c.default.PROJECT?"Leave project…":"Leave styleguide…",enabled:t===c.default.PROJECT?r.permissions.canLeaveProject(a):r.permissions.canLeaveStyleguide(a)}:{id:i.default.DELETE_PROJECT,label:"Leave project…",enabled:!1}}function f(e,t,a){return e&&t?{id:i.default.DELETE_SCREEN,label:"Delete screen…",enabled:r.permissions.canManageScreens(a)}:{id:i.default.DELETE_SCREEN,label:"Delete screen…",enabled:!1}}function S(e,t,a){return e&&t?{id:i.default.SET_AS_THUMBNAIL,label:"Set as thumbnail",enabled:r.permissions.canUpdateProject(a)&&(!e.thumbnail||e.thumbnail!==t.versions[0].snapshot.url)}:{id:i.default.SET_AS_THUMBNAIL,label:"Set as thumbnail",enabled:!1}}function h(e,t,a){var n;if(!e||!t)return{id:i.default.MANAGE_TAGS,label:"Manage tags…",accelerator:"Alt+T",enabled:!1};const s=!!(null===(n=t.tags)||void 0===n?void 0:n.length);return{id:s?i.default.MANAGE_TAGS:i.default.ADD_TAG,label:s?"Manage tags…":"Add tag…",accelerator:"Alt+T",enabled:r.permissions.canManageScreens(a)}}function E(){const{barrelType:e}=o.default.BarrelStore.getState(),t=d.default.getBarrel(),a=l.default.getScreen(),r=d.default.findUser();return new n.default({id:i.default.EDIT_SUBMENU,label:"Edit",submenu:[u(t,e,r),p(t,e,r),s.default,f(t,a,r),s.default,S(t,a,r),s.default,h(t,a,r)]})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var n=a(85),i=a(737),s=a(789),r=a(738),o=a(1263),d=a(1061),l=a(5),c=a(88),u=a(123),p=a(264),f=a(84),S=a(7),h=a(89),E=a(798);const g=/^\/login/;function O(e,t,a){const i=!(!e||!t&&!a);return[{id:n.default.ZOOM_IN,label:"Zoom in",accelerator:"Alt+=",enabled:i},{id:n.default.ZOOM_OUT,label:"Zoom out",accelerator:"Alt+-",enabled:i},{id:n.default.ACTUAL_SIZE,label:"Actual size",accelerator:"Alt+0",enabled:i},{role:"zoomin",visible:!1},{role:"zoomout",visible:!1},{role:"resetzoom",visible:!1}]}function T(e,t){const a=!!e&&!!t&&(0,l.featureValue)("popout");return{id:n.default.OPEN_POPOUT,label:"Pop screen out",accelerator:"Alt+O",enabled:a}}function m(e,t,a){const i=!e&&!g.test(location.pathname),s=!g.test(location.pathname),r=!!e&&a===S.ProjectViewTypes.DASHBOARD,o=!!e&&t===u.default.PROJECT,d=!!e&&a===S.ProjectViewTypes.STYLEGUIDE,l=!!e&&t===u.default.PROJECT;return[{id:n.default.WORKSPACE,label:"Workspace",type:"checkbox",accelerator:"Alt+Shift+A",checked:i,enabled:s},c.default,{id:n.default.DASHBOARD,label:"Dashboard",type:"checkbox",accelerator:"Alt+A",checked:r,enabled:o},{id:n.default.STYLEGUIDE,label:"Styleguide",type:"checkbox",accelerator:"Alt+S",checked:d,enabled:l}]}function _(e){const t=!!e;return{id:n.default.JUMP_TO_SCREEN,label:"Jump to screen…",accelerator:"Alt+J",enabled:t}}function b(e,t){const{page:a}=p.default.AppStore.getState(),{selectedTab:i,selectedProjectSortType:s,selectedOrganizationId:l}=p.default.SpaceStore.getState();let c=0,f=0;if("workspace"===a&&i===S.WorkspaceTabs.PROJECTS)s===S.SortTypes.SECTIONS&&(c=r.default.getCollapsableSectionIds(l).length,f=r.default.getCollapsedSectionIds(l).length);else if("barrel"===a&&e===u.default.PROJECT&&t===S.ProjectViewTypes.DASHBOARD){const{sortType:e}=p.default.DashboardStore.getState();e===S.SortTypes.SECTIONS&&(c=o.default.getCollapsableSectionIds().length,f=o.default.getCollapsedSectionIds().length)}else if("barrel"===a&&e===u.default.PROJECT&&t===S.ProjectViewTypes.STYLEGUIDE){const{sortType:e,selectedStyleguideSection:t}=p.default.StyleguideStore.getState();e===S.SortTypes.SECTIONS&&"components"===t.toLowerCase()&&(c=d.default.getCollapsableSectionIds().length,f=d.default.getCollapsedSectionIds().length)}else if("barrel"===a&&e===u.default.STYLEGUIDE){const{sortType:e,selectedStyleguideSection:t}=p.default.StyleguideStore.getState();e===S.SortTypes.SECTIONS&&"components"===t.toLowerCase()&&(c=d.default.getCollapsableSectionIds().length,f=d.default.getCollapsedSectionIds().length)}const h=f>0,E=0!==c&&c!==f;return[{id:n.default.EXPAND_ALL_SECTIONS,label:"Expand all sections",enabled:h},{id:n.default.COLLAPSE_ALL_SECTIONS,label:"Collapse all sections",enabled:E}]}function C(e,t,a){const i=!!e&&!!t,s=a?"Hide versions":"Show versions";return{id:a?n.default.HIDE_VERSIONS:n.default.SHOW_VERSIONS,label:s,enabled:i}}function A(e,t){const a=i.default.getBarrel(),r=s.default.getScreen(),o=a&&E.default.getFlow(a.id),{selectedView:d,barrelType:l}=p.default.BarrelStore.getState(),{versionsVisible:u}=p.default.ScreenStore.getState();return new f.default({id:n.default.VIEW_SUBMENU,label:"View",submenu:[...O(a,r,o),c.default,T(a,r),c.default,...m(a,l,d),c.default,_(a),c.default,...b(l,d),c.default,C(a,r,u),...(0,h.default)(e,t)]})}},(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var n=a(737),i=a(264);function s(e,t){const a=e.find((({_id:e})=>e===t));if(!a)return!1;const n=e.filter((({path:e})=>(e||[]).includes(t)));return"default"!==a.name&&Boolean(a.screens.length||n.length)}function r(){const e=n.default.getBarrel();if(!e)return[];const{sections:t}=e;return t?t.filter((e=>s(t,e._id))).map((e=>e._id)):[]}const o={isSectionCollapsible:s,getCollapsableSectionIds:r,getCollapsedSectionIds:function(){const{collapsedSections:e}=i.default.DashboardStore.getState();return r().filter((t=>e[t]))},getExpandedSectionIds:function(){const{collapsedSections:e}=i.default.DashboardStore.getState();return r().filter((t=>!e[t]))}}},(e,t,a)=>{"use strict";a.r(t);var n=a(6),i=a(1265),s=a(737),r=a(1055),o=a(76),d=a(796),l=a(798),c=a(1068),u=a(794),p=a(789),f=a(1050),S=a(1060),h=a(1061),E=a(738),g=a(1105),O=a(1263),T=a(5),m=a(264),_=a(104),b=a(185),C=a(434),A=a(85),y=a(7),I=a(123);const N={newProject(){const{selectedOrganizationId:e}=m.default.SpaceStore.getState(),{barrelId:t}=m.default.BarrelStore.getState();if(t)s.default.navigateToWorkspace({query:{newProject:!0}});else{const t="user"===e?(0,_.urlResolve)("projects",{query:{newProject:!0}}):(0,_.urlResolve)("workspace-projects",{url:{oid:e},query:{newProject:!0}});C.default.history.push(t)}},newStyleguide(){const{selectedOrganizationId:e}=m.default.SpaceStore.getState(),{barrelId:t}=m.default.BarrelStore.getState();if(t)s.default.navigateToWorkspace({query:{newStyleguide:!0}});else{const t="user"===e?(0,_.urlResolve)("styleguides",{query:{newStyleguide:!0}}):(0,_.urlResolve)("workspace-styleguides",{url:{oid:e},query:{newStyleguide:!0}});C.default.history.push(t)}},openRecentProject(e){C.default.history.push((0,_.urlResolve)("project",{url:{bid:e}}))},openRecentStyleguide(e){C.default.history.push((0,_.urlResolve)("styleguide",{url:{bid:e}}))},deleteProject(){const{id:e,name:t}=s.default.getBarrel();i.prompt(I.default.PROJECT,t,(()=>{r.default.remove({bid:e,syncWithApi:!0})}))},deleteStyleguide(){const{id:e,name:t}=s.default.getBarrel();i.prompt(I.default.STYLEGUIDE,t,(()=>{r.default.remove({bid:e,syncWithApi:!0})}))},leaveBarrel(){const e=m.default.UserStore.getState().userId,{name:t}=s.default.getBarrel();o.create({message:`Leave "${t}"?`,done:{name:"LEAVE",cb(){r.default.removeMember({mid:e,syncWithApi:!0})}},cancel:{name:"CANCEL"}})},deleteScreen(){const{_id:e,name:t}=p.default.getScreen();o.create({message:`Delete "${t}"?`,done:{name:"DELETE SCREEN",cb(){g.default.deleteScreens({items:[{type:"screen",_id:e}],syncWithApi:!0})}},cancel:{name:"CANCEL"}})},setAsThumbnail(){const{versions:[{snapshot:{url:e}}]}=p.default.getScreen();r.default.updateThumbnail({thumbnail:e,syncWithApi:!0})},manageTags(){const{screenId:e}=m.default.ScreenStore.getState();f.default.openTagManager([e])},expandAllSections(){const{page:e}=m.default.AppStore.getState(),{barrelType:t,selectedView:a}=m.default.BarrelStore.getState(),{selectedStyleguideSection:n}=m.default.StyleguideStore.getState(),{selectedTab:i}=m.default.SpaceStore.getState();if("workspace"===e&&i===y.WorkspaceTabs.PROJECTS){const e=E.default.getCollapsedSectionIds();u.default.expandSections(e)}else if("barrel"===e&&t===I.default.PROJECT&&a===y.ProjectViewTypes.DASHBOARD){const e=O.default.getCollapsedSectionIds();g.default.expandSections(e)}else if("barrel"===e&&(t===I.default.STYLEGUIDE||t===I.default.PROJECT&&a===y.ProjectViewTypes.STYLEGUIDE)&&"components"===n.toLowerCase()){const e=h.default.getCollapsedSectionIds();S.default.expandSections(e)}},collapseAllSections(){const{page:e}=m.default.AppStore.getState(),{barrelType:t,selectedView:a}=m.default.BarrelStore.getState(),{selectedStyleguideSection:n}=m.default.StyleguideStore.getState(),{selectedTab:i}=m.default.SpaceStore.getState();if("workspace"===e&&i===y.WorkspaceTabs.PROJECTS){const e=E.default.getExpandedSectionIds();u.default.collapseSections(e)}else if("barrel"===e&&t===I.default.PROJECT&&a===y.ProjectViewTypes.DASHBOARD){const e=O.default.getExpandedSectionIds();g.default.collapseSections(e)}else if("barrel"===e&&(t===I.default.STYLEGUIDE||t===I.default.PROJECT&&a===y.ProjectViewTypes.STYLEGUIDE)&&"components"===n.toLowerCase()){const e=h.default.getExpandedSectionIds();S.default.collapseSections(e)}},updateBadge(){let e=m.default.SpaceStore.getState().selectedOrganizationId;e||(e=m.default.BarrelStore.getState().organizationId),e||(e=m.default.ActivitiesViewStore.getState().selectedOrganizationId),d.default.hasAnyUnread(e)?n.default.ipcRenderer.send("unread-notifications",(0,b.calculateOverlayIcon)()):n.default.ipcRenderer.send("read-notifications")},handleZoomIn(){const e=s.default.getBarrel();if(!e)return;if(p.default.getScreen())return void f.default.zoomIn();l.default.getFlow(e.id)&&c.default.zoomIn()},handleZoomOut(){const e=s.default.getBarrel();if(!e)return;if(p.default.getScreen())return void f.default.zoomOut();l.default.getFlow(e.id)&&c.default.zoomOut()},handleResetZoom(){const e=s.default.getBarrel();if(!e)return;if(p.default.getScreen())return void f.default.resetZoom();l.default.getFlow(e.id)&&c.default.resetZoom()}};T.isWindowsApp&&n.default.ipcRenderer.on("menu-item-clicked",((e,{id:t})=>{if(t.startsWith(A.default.OPEN_RECENT_PROJECT))N.openRecentProject(t.substring(A.default.OPEN_RECENT_PROJECT.length+1));else if(t.startsWith(A.default.OPEN_RECENT_STYLEGUIDE))N.openRecentStyleguide(t.substring(A.default.OPEN_RECENT_STYLEGUIDE.length+1));else switch(t){case A.default.NEW_PROJECT:N.newProject();break;case A.default.NEW_STYLEGUIDE:N.newStyleguide();break;case A.default.DELETE_PROJECT:N.deleteProject();break;case A.default.DELETE_STYLEGUIDE:N.deleteStyleguide();break;case A.default.LEAVE_PROJECT:case A.default.LEAVE_STYLEGUIDE:N.leaveBarrel();break;case A.default.DELETE_SCREEN:N.deleteScreen();break;case A.default.SET_AS_THUMBNAIL:N.setAsThumbnail();break;case A.default.MANAGE_TAGS:case A.default.ADD_TAG:N.manageTags();break;case A.default.SHOW_BADGE:N.updateBadge();break;case A.default.ZOOM_IN:N.handleZoomIn();break;case A.default.ZOOM_OUT:N.handleZoomOut();break;case A.default.ACTUAL_SIZE:N.handleResetZoom();break;case A.default.OPEN_POPOUT:f.default.openPopout();break;case A.default.WORKSPACE:s.default.navigateToWorkspace();break;case A.default.DASHBOARD:r.default.goToDashboard();break;case A.default.STYLEGUIDE:r.default.goToStyleguide();break;case A.default.JUMP_TO_SCREEN:r.default.openJumpToPopup();break;case A.default.EXPAND_ALL_SECTIONS:N.expandAllSections();break;case A.default.COLLAPSE_ALL_SECTIONS:N.collapseAllSections();break;case A.default.SHOW_VERSIONS:f.default.showVersions();break;case A.default.HIDE_VERSIONS:f.default.hideVersions()}}))},(e,t,a)=>{"use strict";a.r(t),a.d(t,{prompt:()=>f});var n=a(76),i=a(106);const s=document.getElementById("deleteBarrelDialog"),r=s.querySelector(".barrelType"),o=document.getElementById("barrelNameInput"),d=document.getElementById("deleteBarrelDialogCancelButton"),l=document.getElementById("deleteBarrelDialogDoneButton");let c,u,p;function f(e,t,a){c=e,u=t,p=a,r.textContent=c,s.showModal()}n.polyfill.registerDialog(s),o.addEventListener("input",(()=>{const e=o.value===u;s.querySelector("button.done").disabled=!e;const t=e?"":`${(0,i.uppercaseFirst)(c)} name doesn't match provided value`;o.setCustomValidity(t)})),d.addEventListener("click",(e=>{e.button===Zeplin.MOUSE_BUTTON.LEFT&&s.close()})),s.addEventListener("close",(()=>{o.value="",o.setCustomValidity(""),o.parentElement.classList.remove("typed"),s.querySelector("button.done").disabled=!0})),o.addEventListener("keydown",(e=>{if(e.keyCode===Zeplin.KEY_CODE.ENTER)e.preventDefault(),e.stopPropagation(),o.value===u&&(s.close(),p())})),l.addEventListener("click",(()=>{o.value===u&&(s.close(),p())}))},(e,t,a)=>{"use strict";a.r(t);var n=a(5),i=a(6),s=a(1050),r=a(1055),o=a(1060),d=a(1063),l=a(123);const c=["layers"];function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}const h={CREATE_SCREEN:"CreateScreen",CREATE_SCREEN_VERSION:"CreateScreenVersion",CREATE_PROJECT_COMPONENT:"CreateProjectComponent",CREATE_PROJECT_COMPONENT_VERSION:"CreateProjectComponentVersion",CREATE_PROJECT_COMPONENT_VERSION_V2:"CreateProjectComponentVersionV2",CREATE_PROJECT_COMPONENT_SECTION:"CreateProjectComponentSection",UPDATE_PROJECT_COMPONENT_SECTION:"UpdateProjectComponentSection",CREATE_STYLEGUIDE_COMPONENT:"CreateStyleguideComponent",CREATE_STYLEGUIDE_COMPONENT_VERSION:"CreateStyleguideComponentVersion",CREATE_STYLEGUIDE_COMPONENT_VERSION_V2:"CreateStyleguideComponentVersionV2",CREATE_STYLEGUIDE_COMPONENT_SECTION:"CreateStyleguideComponentSection",UPDATE_STYLEGUIDE_COMPONENT_SECTION:"UpdateStyleguideComponentSection",AUTH_PROJECT_SLACK:"AuthProjectSlack",AUTH_STYLEGUIDE_SLACK:"AuthStyleguideSlack"};n.isWindowsApp&&(i.default.ipcRenderer.on(h.CREATE_SCREEN,((e,t)=>{const{params:{pid:a},body:n}=t;s.default.addScreen({pid:a,screen:n})})),i.default.ipcRenderer.on(h.CREATE_SCREEN_VERSION,((e,t)=>{const{params:{pid:a,sid:n},body:i}=t,r=i.snapshot,{layers:o}=r,d=S(r,c);s.default.addVersion({pid:a,sid:n,version:p(p({},i),{},{snapshot:d})})})),i.default.ipcRenderer.on(h.CREATE_PROJECT_COMPONENT,((e,t)=>{const{params:{pid:a,csid:n},body:i}=t;r.default.addComponent({bid:a,csids:n.split("/"),component:i})})),i.default.ipcRenderer.on(h.CREATE_PROJECT_COMPONENT_VERSION,((e,t)=>{const{params:{pid:a,csid:n,coid:i},body:s}=t;r.default.addComponentVersion({bid:a,csids:n.split("/"),coid:i,componentVersion:s})})),i.default.ipcRenderer.on(h.CREATE_PROJECT_COMPONENT_VERSION_V2,((e,t)=>{const{params:{pid:a,csid:n,coid:i,tcsid:s},body:o}=t;r.default.updateComponent({bid:a,csids:n.split("/"),coid:i,tcsid:s,componentData:o})})),i.default.ipcRenderer.on(h.CREATE_PROJECT_COMPONENT_SECTION,((e,t)=>{const{params:{pid:a},body:n}=t;r.default.addComponentSection({bid:a,barrelType:l.default.PROJECT,csids:[],componentSection:n})})),i.default.ipcRenderer.on(h.UPDATE_PROJECT_COMPONENT_SECTION,((e,t)=>{const{params:{pid:a,csid:n},body:i}=t;r.default.updateComponentSection({bid:a,barrelType:l.default.PROJECT,csids:n.split("/"),componentSection:i})})),i.default.ipcRenderer.on(h.UPDATE_PROJECT_COMPONENTS_ORDER,((e,t)=>{const{params:{pid:a},body:{components:n,variantSections:i}}=t,s=n.map((({csid:e,tcsid:t,coid:a,to:n})=>({csid:e.split("/"),tcsid:t.split("/"),coid:a,to:n})));r.default.updateComponentsOrder({bid:a,components:s}),i&&i.forEach((e=>{const{_id:t,name:n,variant:i,components:s}=e;o.default.setComponentVariantData({bid:a,csid:t,name:n,sectionVariant:i,components:s})}))})),i.default.ipcRenderer.on(h.CREATE_STYLEGUIDE_COMPONENT,((e,t)=>{const{params:{stid:a,csid:n},body:i}=t;r.default.addComponent({bid:a,csids:n.split("/"),component:i})})),i.default.ipcRenderer.on(h.CREATE_STYLEGUIDE_COMPONENT_VERSION,((e,t)=>{const{params:{stid:a,csid:n,coid:i},body:s}=t;r.default.addComponentVersion({bid:a,csids:n.split("/"),coid:i,componentVersion:s})})),i.default.ipcRenderer.on(h.CREATE_STYLEGUIDE_COMPONENT_VERSION_V2,((e,t)=>{const{params:{stid:a,csid:n,coid:i,tcsid:s},body:o}=t;r.default.updateComponent({bid:a,barrelType:l.default.STYLEGUIDE,csids:n.split("/"),coid:i,tcsid:s,componentData:o})})),i.default.ipcRenderer.on(h.CREATE_STYLEGUIDE_COMPONENT_SECTION,((e,t)=>{const{params:{stid:a},body:n}=t;r.default.addComponentSection({bid:a,barrelType:l.default.STYLEGUIDE,csids:[],componentSection:n})})),i.default.ipcRenderer.on(h.UPDATE_STYLEGUIDE_COMPONENT_SECTION,((e,t)=>{const{params:{stid:a,csid:n},body:i}=t;r.default.updateComponentSection({bid:a,barrelType:l.default.STYLEGUIDE,csids:n.split("/"),componentSection:i})})),i.default.ipcRenderer.on(h.UPDATE_STYLEGUIDE_COMPONENTS_ORDER,((e,t)=>{const{params:{stid:a},body:{components:n,variantSections:i}}=t,s=n.map((({csid:e,tcsid:t,coid:a,to:n})=>({csid:e.split("/"),tcsid:t.split("/"),coid:a,to:n})));r.default.updateComponentsOrder({bid:a,components:s}),i&&i.forEach((e=>{const{_id:t,name:n,variant:i,components:s}=e;o.default.setComponentVariantData({bid:a,csid:t,name:n,sectionVariant:i,components:s})}))})),i.default.ipcRenderer.on(h.AUTH_PROJECT_SLACK,((e,t)=>{const{params:{pid:a},body:{integration:n}}=t;n.slacks.forEach((e=>r.default.addIntegration({bid:a,intype:"slacks",integration:e}))),d.default.init()})),i.default.ipcRenderer.on(h.AUTH_STYLEGUIDE_SLACK,((e,t)=>{const{params:{stid:a},body:{integration:n}}=t;n.slacks.forEach((e=>r.default.addIntegration({bid:a,intype:"slacks",integration:e}))),d.default.init()})))},(e,t,a)=>{"use strict";a.r(t);var n=a(433);!function(){if("TimeAgoElement"in window){const e=window.TimeAgoElement;class t extends e{getFormattedDate(){const t=this.getAttribute("datetime"),a=this.getAttribute("format");if(!t)return"";if("micro"===a)return(0,n.microTimeAgo)(t);if("microWithAgo"===a){const e=(0,n.microTimeAgo)(t);return"now"===e?e:`${e} ago`}return e.prototype.getFormattedDate.apply(this)}}window.customElements.define("zpl-time-ago",t)}}()}]),l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={id:e,loaded:!1,exports:{}};return d[e].call(a.exports,a,a.exports,c),a.loaded=!0,a.exports}c.m=d,e=[],c.O=(t,a,n,i)=>{if(!a){var s=1/0;for(l=0;l<e.length;l++){for(var[a,n,i]=e[l],r=!0,o=0;o<a.length;o++)(!1&i||s>=i)&&Object.keys(c.O).every((e=>c.O[e](a[o])))?a.splice(o--,1):(r=!1,i<s&&(s=i));if(r){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[a,n,i]},c.F={},c.E=e=>{Object.keys(c.F).map((t=>{c.F[t](e)}))},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var i=Object.create(null);c.r(i);var s={};t=t||[null,a({}),a([]),a(a)];for(var r=2&n&&e;"object"==typeof r&&!~t.indexOf(r);r=a(r))Object.getOwnPropertyNames(r).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,c.d(i,s),i},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,a)=>(c.f[a](e,t),t)),[])),c.u=e=>5===e?"chunkStyles.css":({1:"activitiesContainer",3:"aws-sdk-s3client",4:"barrelContainer",10:"flowContainer",18:"jszip",26:"prismModule",35:"spaceContainer",37:"storybookManagerContainer",38:"styleguideContainer"}[e]||e)+".chnk."+{1:"9b67710852948e0c91f9",3:"ca1e01e2be4b0edce419",4:"c67a45a9e46778602974",10:"c983d92e7ba6b306dad3",18:"fc6f732209524b85d519",26:"dbc26248aaed07077f19",35:"ce61336d062494618bef",37:"eb8f71024b70d0d75055",38:"660a28ebaaca4fefb390",46:"1254b99841eab752df07",47:"b9c8419ddd9e44aa7fd9",48:"2cc797abfee059fc50cc",49:"645afcce7e22061c75c1",50:"b3ebbdc32b4aaf262bf3",51:"abf11329f03dae152308",52:"1b73e37b50603343db6a",53:"04f2b128f6fc1f42c977"}[e]+".js",c.miniCssF=e=>"../css/chunkStyles.chnk.5fa3211575abb78dde1e.css",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="zeplin-webapp:",c.l=(e,t,a,s)=>{if(n[e])n[e].push(t);else{var r,o;if(void 0!==a)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==i+a){r=u;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.setAttribute("data-webpack",i+a),r.src=e),n[e]=[t];var p=(t,a)=>{r.onerror=r.onload=null,clearTimeout(f);var i=n[e];if(delete n[e],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((e=>e(a))),t)return t(a)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),o&&document.head.appendChild(r)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="https://cdn.zeplin.io/assets/webapp/js/",s=e=>new Promise(((t,a)=>{var n=c.miniCssF(e),i=c.p+n;if(((e,t)=>{for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var i=(r=a[n]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var r;if((i=(r=s[n]).getAttribute("data-href"))===e||i===t)return r}})(n,i))return t();((e,t,a,n)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=s=>{if(i.onerror=i.onload=null,"load"===s.type)a();else{var r=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=r,d.request=o,i.parentNode.removeChild(i),n(d)}},i.href=t,document.head.appendChild(i)})(e,i,t,a)})),r={2:0},c.f.miniCss=(e,t)=>{r[e]?t.push(r[e]):0!==r[e]&&{5:1}[e]&&t.push(r[e]=s(e).then((()=>{r[e]=0}),(t=>{throw delete r[e],t})))},(()=>{var e={2:0};c.f.j=(t,a)=>{var n=c.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else if(5!=t){var i=new Promise(((a,i)=>n=e[t]=[a,i]));a.push(n[2]=i);var s=c.p+c.u(t),r=new Error;c.l(s,(a=>{if(c.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",r.name="ChunkLoadError",r.type=i,r.request=s,n[1](r)}}),"chunk-"+t,t)}else e[t]=0},c.F.j=t=>{if((!c.o(e,t)||void 0===e[t])&&5!=t){e[t]=null;var a=document.createElement("link");c.nc&&a.setAttribute("nonce",c.nc),a.rel="prefetch",a.as="script",a.href=c.p+c.u(t),document.head.appendChild(a)}},c.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[s,r,o]=a,d=0;if(s.some((t=>0!==e[t]))){for(n in r)c.o(r,n)&&(c.m[n]=r[n]);if(o)var l=o(c)}for(t&&t(a);d<s.length;d++)i=s[d],c.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return c.O(l)},a=self.webpackChunkzeplin_webapp=self.webpackChunkzeplin_webapp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),o={4:[12,19,5,52,10,48,38,51,37]},c.f.prefetch=(e,t)=>Promise.all(t).then((()=>{var t=o[e];Array.isArray(t)&&t.map(c.E)})),c.O(0,[2],(()=>{[12,19,5,47,46,48,35,50,49,4,1,53,3,18,26].map(c.E)}),5);var u=c.O(void 0,[12,19,41],(()=>c(261)));u=c.O(u)})();
//# sourceMappingURL=maps/app.js.map